import{E as b,c as r,o as n,a6 as M,_ as C,r as _,n as j,e as z,F as $,w as I,a as s,L as h,z as l,t as g,H as S,J as N,u as E,T as F,X as L,W as P,M as y,N as k,b as V}from"./DId-O-4Q.js";import{_ as B}from"./rw3BNcyV.js";import{g as D,u as w}from"./CfNq7EM3.js";import{F as T}from"./Dw8P0qyA.js";const W={class:"flex flex-col gap-8 p-4 rounded-2xl"},A=b({__name:"CollectionCardSkeleton",setup(m){return(x,d)=>(n(),r("div",W,[...d[0]||(d[0]=[M('<div class="relative aspect-[4/3] flex items-center justify-center perspective-1000" data-v-40f8ec84><div class="absolute w-1/2 aspect-[2/3] rounded-lg skeleton transform rotate-5 translate-x-12 z-10" data-v-40f8ec84></div><div class="absolute w-1/2 aspect-[2/3] rounded-lg skeleton transform -rotate-5 -translate-x-12 z-20" data-v-40f8ec84></div><div class="absolute w-1/2 aspect-[2/3] rounded-lg skeleton z-30" data-v-40f8ec84></div><div class="absolute top-0 right-0 w-16 h-6 rounded-full skeleton z-40" data-v-40f8ec84></div></div><div class="flex flex-col gap-2" data-v-40f8ec84><div class="h-6 skeleton rounded-lg w-2/3" data-v-40f8ec84></div><div class="space-y-2" data-v-40f8ec84><div class="h-4 skeleton rounded-lg w-full" data-v-40f8ec84></div><div class="h-4 skeleton rounded-lg w-4/5" data-v-40f8ec84></div></div></div>',2)])]))}}),H=Object.assign(C(A,[["__scopeId","data-v-40f8ec84"]]),{__name:"CollectionCardSkeleton"}),O={class:"relative aspect-[4/3] flex items-center justify-center perspective-1000"},R={class:"absolute w-1/2 aspect-[2/3] rounded-lg overflow-hidden bg-gradient-to-br from-theme-surface to-theme-selection transform rotate-5 translate-x-12 translate-z-0 group-hover:rotate-12 group-hover:translate-x-16 transition-all duration-500 z-10"},U=["src"],J={class:"absolute w-1/2 aspect-[2/3] rounded-lg overflow-hidden bg-gradient-to-br from-theme-surface to-theme-selection transform -rotate-5 -translate-x-12 translate-z-10 group-hover:-rotate-12 group-hover:-translate-x-16 transition-all duration-500 z-20"},Q=["src"],X={class:"absolute w-1/2 aspect-[2/3] rounded-lg overflow-hidden bg-gradient-to-br from-theme-surface to-theme-selection transform translate-z-20 group-hover:scale-105 transition-all duration-500 z-30"},q=["src"],G={class:"absolute top-0 right-0 px-2.5 py-1 rounded-full glass text-xs font-bold z-40"},K={class:"flex flex-col gap-1"},Y={class:"text-lg font-bold text-theme-text group-hover:text-theme-accent transition-colors"},Z={class:"text-sm text-theme-textmuted line-clamp-2 leading-relaxed"},ee=b({__name:"CollectionCard",props:{collection:{}},setup(m){const x=m;function d(a){const e=[...a];for(let o=e.length-1;o>0;o--){const c=Math.floor(Math.random()*(o+1)),v=e[o];e[o]=e[c],e[c]=v}return e}const u=_([null,null,null]),i=_(new Set);j(()=>x.collection.id,()=>{const a=x.collection.movieIds.filter(o=>o.startsWith("tt")),e=d(a);u.value=[e[0]||null,e[1]||null,e[2]||null]},{immediate:!0});const f=a=>{const e=u.value[a];if(!e)return;i.value.add(e);const o=u.value.filter(v=>v!==null),c=x.collection.movieIds.filter(v=>v.startsWith("tt")&&!o.includes(v)&&!i.value.has(v));c.length>0?u.value[a]=c[Math.floor(Math.random()*c.length)]??null:u.value[a]=null},t=z(()=>u.value.map(a=>a?D(a):null));return(a,e)=>{const o=B;return n(),$(o,{to:`/collections/${m.collection.id}`,class:"group flex flex-col gap-8 p-4 rounded-2xl transition-all duration-500"},{default:I(()=>[s("div",O,[s("div",R,[l(t)[2]?(n(),r("img",{key:0,src:l(t)[2],class:"w-full h-full object-cover",loading:"lazy",onError:e[0]||(e[0]=c=>f(2))},null,40,U)):h("",!0)]),s("div",J,[l(t)[1]?(n(),r("img",{key:0,src:l(t)[1],class:"w-full h-full object-cover",loading:"lazy",onError:e[1]||(e[1]=c=>f(1))},null,40,Q)):h("",!0)]),s("div",X,[l(t)[0]?(n(),r("img",{key:0,src:l(t)[0],class:"w-full h-full object-cover",loading:"lazy",onError:e[2]||(e[2]=c=>f(0))},null,40,q)):h("",!0)]),s("div",G,g(m.collection.movieIds.length)+" movies ",1)]),s("div",K,[s("h3",Y,g(m.collection.name),1),s("p",Z,g(m.collection.description),1)])]),_:1},8,["to"])}}}),te=Object.assign(C(ee,[["__scopeId","data-v-4747739a"]]),{__name:"CollectionCard"}),se={class:"md:ml-16"},oe={class:"px-4 lg:px-[6%] py-8"},le={class:"mb-10 flex flex-col md:flex-row md:items-start md:justify-between gap-4 md:gap-6"},ne={class:"flex-1"},ae={key:0,class:"mt-3 text-sm text-theme-textmuted"},re={key:1,class:"mt-3 text-sm text-theme-textmuted"},ie={key:0,class:"relative w-full md:w-64 md:flex-shrink-0"},ce={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},de={key:1,class:"flex flex-col items-center justify-center py-20 text-center"},ue={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},he=b({__name:"index",setup(m){const{isLoading:x,collections:d}=S(w()),{loadCollections:u}=w(),i=_(""),p=z(()=>{const f=Array.from(d.value.values()).filter(e=>e.enabled!==!1);return i.value.trim()?new T(f,{keys:[{name:"name",weight:2},{name:"description",weight:1},{name:"tags",weight:1.5}],threshold:.3,ignoreLocation:!0}).search(i.value).map(e=>e.item):f.filter(e=>e.enabled!==!1)});return N(()=>{u()}),E({title:"Collections - Movies Deluxe",meta:[{name:"description",content:"Curated movie collections from Movies Deluxe."}]}),(f,t)=>{const a=H,e=te;return n(),r("main",se,[s("div",oe,[s("div",le,[s("div",ne,[t[2]||(t[2]=s("h1",{class:"text-3xl font-black text-theme-text mb-2 tracking-tight"},"Collections",-1)),t[3]||(t[3]=s("p",{class:"text-theme-textmuted max-w-2xl leading-relaxed"}," Curated sets of movies organized by theme, actor, or genre. ",-1)),l(i)&&l(p).length===0?(n(),r("div",ae,' No collections found matching "'+g(l(i))+'" ',1)):l(i)?(n(),r("div",re," Found "+g(l(p).length)+" collection"+g(l(p).length===1?"":"s"),1)):h("",!0)]),l(d).size>0?(n(),r("div",ie,[t[5]||(t[5]=s("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("div",{class:"i-mdi-magnify text-lg text-theme-textmuted"})],-1)),F(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>P(i)?i.value=o:null),type:"text",class:"block w-full pl-10 pr-10 py-2 bg-theme-surface/50 border border-theme-border/50 focus:border-theme-primary rounded-full text-sm text-theme-text placeholder-theme-textmuted focus:outline-none transition-all focus:bg-theme-surface",placeholder:"Search..."},null,512),[[L,l(i)]]),l(i)?(n(),r("button",{key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:t[1]||(t[1]=o=>i.value="")},[...t[4]||(t[4]=[s("div",{class:"i-mdi-close text-base text-theme-textmuted hover:text-theme-text transition-colors"},null,-1)])])):h("",!0)])):h("",!0)]),l(x)?(n(),r("div",ce,[(n(),r(y,null,k(8,o=>V(a,{key:o})),64))])):l(d).size===0?(n(),r("div",de,[...t[6]||(t[6]=[s("div",{class:"i-mdi:movie-roll text-6xl text-theme-textmuted mb-4 opacity-20"},null,-1),s("h3",{class:"text-xl font-bold text-theme-text mb-2"},"No collections found",-1),s("p",{class:"text-theme-textmuted"},"Check back later for curated movie collections.",-1)])])):(n(),r("div",ue,[(n(!0),r(y,null,k(l(p),o=>(n(),$(e,{key:o.id,collection:o},null,8,["collection"]))),128))]))])])}}});export{he as default};
