import{E as M,G as T,H as V,ap as J,r as S,J as z,n as j,c as d,o as l,a as e,a8 as Q,z as t,M as Y,N as G,P as F,l as R,L as A,t as b,Z as X,ah as q,a7 as ee,e as B,F as P,b as O,ai as te,aq as se,am as ne,ar as Z,w as K,ac as oe,as as ie,aj as re,x as le,_ as W,T as U,X as H,W as I,Y as N}from"./BIsaz7oS.js";import{u as ae}from"./DvgieTos.js";import{_ as ce}from"./GRSIsFud.js";const E=Symbol("FILTER_STATE_KEY"),de={class:"flex items-center gap-0.5 p-1 bg-theme-surface/30 rounded-xl relative group/modes"},ue=["disabled","aria-label","onClick","onMouseenter"],me={key:0,class:"i-mdi-loading animate-spin text-xl md:text-2xl"},pe={class:"absolute top-full mt-3 px-3 py-2 bg-theme-surface border border-theme-border shadow-2xl rounded-xl text-xs w-56 pointer-events-none opacity-0 group-hover:opacity-100 transition-all duration-200 z-50 translate-y-2 group-hover:translate-y-0 left-0 md:left-1/2 md:-translate-x-1/2 text-left"},xe={class:"flex items-center gap-2 mb-1"},ve={class:"font-bold text-theme-text"},fe={class:"text-theme-textmuted leading-relaxed"},he={key:0,class:"mt-2 pt-2 border-t border-theme-border/50"},be={key:1,class:"mt-2 pt-2 border-t border-theme-border/50"},ye={key:2,class:"mt-2 pt-2 border-t border-theme-border/50 space-y-1"},_e={class:"flex justify-between items-center"},ge={class:"text-theme-text font-medium"},$e={class:"flex justify-between items-center text-[10px]"},we={class:"text-theme-text"},ke="bge-micro",Ce=M({__name:"SearchModeSelector",setup(i){const c=T(),{filters:m,isEmbeddingsLoaded:_,isEmbeddingsLoading:s}=V(c),n=J(),a=S(null),u=R(E,null)||m,v=[{id:"exact",label:"Exact",icon:"i-mdi-alphabetical",description:"Traditional search. Matches exact words in titles, actors, or descriptions."},{id:"semantic",label:"Semantic",icon:"i-mdi-sparkles",description:'AI-powered search. Understands meaning and concepts (e.g., "space travel").'}],p=S([]),r=S(null),o=S({left:"0px",width:"0px",height:"0px",top:"0px"}),$=y=>y==="semantic"&&s.value,C=async y=>{if(!$(y)){if(y==="semantic"&&!_.value)try{await c.loadEmbeddings(ke)}catch{return}y==="semantic"&&(X(u.value.searchQuery)&&(u.value.searchQuery=""),c.clearAllFilters(!0)),y==="exact"&&u.value.searchQuery&&u.value.sort.field!=="relevance"&&(u.value.sort={field:"relevance",direction:"desc"}),u.value.searchMode=y}};z(async()=>{_.value&&(a.value=await n.getEmbeddingModelInfo())}),j(_,async y=>{y?a.value=await n.getEmbeddingModelInfo():a.value=null});const f=y=>{r.value=y;const k=v.findIndex(D=>D.id===y),g=p.value[k];g&&(o.value={left:`${g.offsetLeft}px`,width:`${g.offsetWidth}px`,height:`${g.offsetHeight}px`,top:`${g.offsetTop}px`})},h=()=>{r.value=null},{width:w}=q();return j(w,()=>{r.value&&f(r.value)}),(y,k)=>(l(),d("div",de,[e("div",{class:"absolute bg-theme-primary/10 rounded-lg transition-all duration-300 ease-out pointer-events-none opacity-0 group-hover/modes:opacity-100",style:Q(t(o))},null,4),(l(),d(Y,null,G(v,g=>e("button",{key:g.id,ref_for:!0,ref_key:"modeButtons",ref:p,class:F(["group relative z-10 p-2 rounded-lg transition-all duration-200 flex items-center justify-center",[t(u).searchMode===g.id?"text-theme-primary":$(g.id)?"text-theme-textmuted/50 cursor-not-allowed":"text-theme-textmuted hover:text-theme-text"]]),disabled:$(g.id),"aria-label":`Search mode: ${g.label}`,onClick:D=>C(g.id),onMouseenter:D=>f(g.id),onMouseleave:h},[g.id==="semantic"&&t(s)?(l(),d("div",me)):(l(),d("div",{key:1,class:F([g.icon,"text-xl md:text-2xl"])},null,2)),e("div",pe,[e("div",xe,[e("div",{class:F([g.icon,"text-theme-primary text-base"])},null,2),e("div",ve,b(g.label),1)]),e("div",fe,b(g.description),1),g.id==="semantic"&&t(s)?(l(),d("div",he,[...k[0]||(k[0]=[e("div",{class:"flex items-center gap-2 text-theme-warning"},[e("div",{class:"i-mdi-loading animate-spin text-sm"}),e("span",null,"Loading embeddings...")],-1)])])):g.id==="semantic"&&!t(_)?(l(),d("div",be,[...k[1]||(k[1]=[e("div",{class:"flex items-center gap-2 text-theme-primary"},[e("div",{class:"i-mdi-download text-sm"}),e("span",null,"Click to load embeddings")],-1)])])):g.id==="semantic"&&t(a)?(l(),d("div",ye,[e("div",_e,[k[2]||(k[2]=e("span",{class:"text-theme-textmuted"},"Model:",-1)),e("span",ge,b(t(a).name),1)]),e("div",$e,[k[3]||(k[3]=e("span",{class:"text-theme-textmuted"},"Dimensions:",-1)),e("span",we,b(t(a).dimensions),1)]),k[4]||(k[4]=e("div",{class:"flex justify-between items-center text-[10px]"},[e("span",{class:"text-theme-textmuted"},"Source:"),e("span",{class:"text-theme-text"},"Browser (WebGPU/WASM)")],-1))])):A("",!0),k[5]||(k[5]=e("div",{class:"absolute -top-1 w-2 h-2 bg-theme-surface border-t border-l border-theme-border rotate-45 left-4 md:left-1/2 md:-translate-x-1/2"},null,-1))])],42,ue)),64))]))}}),Jt=Object.assign(Ce,{__name:"SearchModeSelector"}),Se=["disabled"],Fe={class:"text-theme-primary font-bold"},je={key:3,class:"i-mdi-chevron-down text-xs opacity-50 group-hover:opacity-100 transition-opacity"},Ae=M({__name:"FilterButton",props:{category:{},icon:{},activeValue:{},isActive:{type:Boolean},disabled:{type:Boolean}},emits:["click","clear"],setup(i){return(c,m)=>(l(),d("button",{class:F(["group flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all whitespace-nowrap border",[i.isActive?"bg-theme-primary/10 text-theme-primary border-theme-primary/30 shadow-sm":"bg-transparent text-theme-textmuted border-theme-border/50 hover:bg-theme-surface hover:border-theme-border",i.disabled?"opacity-40 cursor-not-allowed pointer-events-none":""]]),disabled:i.disabled,onClick:m[1]||(m[1]=_=>c.$emit("click",_))},[i.icon?(l(),d("div",{key:0,class:F([i.icon,"text-sm transition-colors",i.isActive?"text-theme-primary":"text-theme-textmuted group-hover:text-theme-text"])},null,2)):A("",!0),e("span",{class:F({"text-theme-text":!i.isActive})},b(i.category),3),i.isActive&&i.activeValue?(l(),d(Y,{key:1},[m[2]||(m[2]=e("span",{class:"w-px h-3 bg-theme-primary/30 mx-0.5"},null,-1)),e("span",Fe,b(i.activeValue),1)],64)):A("",!0),i.isActive?(l(),d("div",{key:2,class:"ml-1 -mr-1 p-0.5 rounded-full hover:bg-theme-primary hover:text-white transition-colors",onClick:m[0]||(m[0]=ee(_=>c.$emit("clear"),["stop"]))},[...m[3]||(m[3]=[e("div",{class:"i-mdi-close text-[10px]"},null,-1)])])):(l(),d("div",je))],10,Se))}}),Xt=Object.assign(Ae,{__name:"FilterButton"}),Me=M({__name:"AppSortButton",props:{option:{},isActive:{type:Boolean}},emits:["select"],setup(i){const c=i,m=()=>{const{field:_}=c.option;switch(_){case"relevance":return"i-mdi-target";case"votes":return"i-mdi-account-group";default:return"i-mdi-sort"}};return(_,s)=>(l(),d("button",{class:F(["flex items-center justify-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-colors flex-1 min-w-[100px] border border-theme-border/50 whitespace-nowrap",{"bg-theme-primary text-white border-theme-primary":i.isActive,"bg-theme-surface text-theme-textmuted hover:bg-theme-selection hover:border-theme-border":!i.isActive}]),onClick:s[0]||(s[0]=n=>_.$emit("select",i.option))},[e("div",{class:F(["text-sm",{[m()]:!0,"text-white":i.isActive,"text-theme-textmuted":!i.isActive}])},null,2),e("span",null,b(i.option.label),1)],2))}}),Be=Object.assign(Me,{__name:"AppSortButton"}),Oe={class:"flex flex-1 min-w-[140px] rounded-full border border-theme-border/50 overflow-hidden"},Te=M({__name:"AppSortToggleButton",props:{label:{},icon:{},optionA:{},optionB:{},currentSort:{}},emits:["select"],setup(i){const c=i,m=B(()=>c.currentSort.field===c.optionA.field&&c.currentSort.direction===c.optionA.direction),_=B(()=>c.currentSort.field===c.optionB.field&&c.currentSort.direction===c.optionB.direction);return(s,n)=>(l(),d("div",Oe,[e("button",{class:F(["flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs font-medium transition-colors border-r border-theme-border/50 flex-1 whitespace-nowrap",{"bg-theme-primary text-white":t(m),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!t(m)}]),onClick:n[0]||(n[0]=a=>s.$emit("select",i.optionA))},[e("div",{class:F(["text-sm",[i.icon,{"text-white":t(m),"text-theme-textmuted":!t(m)}]])},null,2),e("span",null,b(i.optionA.label),1)],2),e("button",{class:F(["flex items-center justify-center px-2 py-1.5 text-xs font-medium transition-colors flex-1 whitespace-nowrap",{"bg-theme-primary text-white":t(_),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!t(_)}]),onClick:n[1]||(n[1]=a=>s.$emit("select",i.optionB))},b(i.optionB.label),3)]))}}),Ve=Object.assign(Te,{__name:"AppSortToggleButton"}),Re={class:"flex flex-wrap gap-2"},Ee=M({__name:"AppSortButtonGroup",props:{currentSort:{},showRelevance:{type:Boolean,default:!1}},emits:["select"],setup(i,{emit:c}){const m=i,_={field:"relevance",direction:"desc",label:"Relevance"},s={field:"year",direction:"desc",label:"Newest"},n={field:"year",direction:"asc",label:"Oldest"},a={field:"rating",direction:"desc",label:"High"},x={field:"rating",direction:"asc",label:"Low"},u={field:"title",direction:"asc",label:"A-Z"},v={field:"title",direction:"desc",label:"Z-A"},p={field:"votes",direction:"desc",label:"Most Popular"},r=o=>m.currentSort.field===o.field&&m.currentSort.direction===o.direction;return(o,$)=>{const C=Be,f=Ve;return l(),d("div",Re,[i.showRelevance?(l(),P(C,{key:0,option:_,"is-active":r(_),onSelect:$[0]||($[0]=h=>o.$emit("select",_))},null,8,["is-active"])):A("",!0),O(f,{label:"Year",icon:"i-mdi-calendar","option-a":s,"option-b":n,"current-sort":i.currentSort,onSelect:$[1]||($[1]=h=>o.$emit("select",h))},null,8,["current-sort"]),O(f,{label:"Rating",icon:"i-mdi-star","option-a":a,"option-b":x,"current-sort":i.currentSort,onSelect:$[2]||($[2]=h=>o.$emit("select",h))},null,8,["current-sort"]),O(f,{label:"Title",icon:"i-mdi-sort-alphabetical-ascending","option-a":u,"option-b":v,"current-sort":i.currentSort,onSelect:$[3]||($[3]=h=>o.$emit("select",h))},null,8,["current-sort"]),O(C,{option:p,"is-active":r(p),onSelect:$[4]||($[4]=h=>o.$emit("select",p))},null,8,["is-active"])])}}}),Le=Object.assign(Ee,{__name:"AppSortButtonGroup"}),De={class:"space-y-4"},Ie={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Ye=M({__name:"FilterSortControl",setup(i){const c=T(),{filters:m}=V(c),s=R(E,null)||m,n=B(()=>s.value.sort.field==="year"&&s.value.sort.direction==="desc"),a=()=>{s.value.sort={field:"year",direction:"desc"}};return(x,u)=>{const v=Le;return l(),d("div",De,[O(v,{"current-sort":t(s).sort,"show-relevance":!!t(s).searchQuery,onSelect:u[0]||(u[0]=p=>t(s).sort=p)},null,8,["current-sort","show-relevance"]),t(n)?A("",!0):(l(),d("div",Ie,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:a}," Reset to Default ")]))])}}}),es=Object.assign(Ye,{__name:"FilterSortControl"}),Ue={key:0,class:"fixed inset-0 z-[100] overflow-hidden flex flex-col"},He={class:"flex items-center justify-between p-4 border-b border-theme-border/30"},Ge={class:"text-xs font-bold text-theme-textmuted uppercase tracking-widest"},Ke=M({__name:"FilterPopup",props:{isOpen:{type:Boolean},title:{},anchorEl:{}},emits:["close"],setup(i,{emit:c}){const m=i,_=c,s=S(null),n=S(null),a=S(!1),{width:x,height:u}=q(),p=te(re).smaller("md"),r=se(typeof window<"u"?document.body:null),o=()=>{if(!n.value)return;const{scrollTop:w,scrollHeight:y,clientHeight:k}=n.value;a.value=w+k<y-20},$=()=>{n.value&&n.value.scrollBy({top:200,behavior:"smooth"})},{activate:C,deactivate:f}=ae(s,{immediate:!1,allowOutsideClick:!0,escapeDeactivates:!0,returnFocusOnDeactivate:!0});j(()=>m.isOpen,w=>{r.value=w,w?le(()=>{setTimeout(()=>C(),50),setTimeout(()=>o(),100),setTimeout(()=>o(),300),setTimeout(()=>o(),500)}):f()}),ne("Escape",w=>{m.isOpen&&(w.preventDefault(),_("close"))});const h=B(()=>{if(p.value||!m.anchorEl)return{};const w=m.anchorEl.getBoundingClientRect(),y=320;let k=w.left,g=w.bottom+8;k+y>x.value-16&&(k=x.value-y-16),k<16&&(k=16);const D=s.value?.offsetHeight||300;return g+D>u.value-16&&(g=w.top-D-8),g<16&&(g=16),{top:`${g}px`,left:`${k}px`,width:`${y}px`}});return(w,y)=>(l(),P(ie,{to:"body"},[O(Z,{name:"fade"},{default:K(()=>[i.isOpen?(l(),d("div",Ue,[e("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-[2px] transition-opacity duration-300",onClick:y[0]||(y[0]=k=>w.$emit("close"))}),O(Z,{name:"pop",appear:""},{default:K(()=>[e("div",{ref_key:"popupRef",ref:s,class:F(["absolute glass shadow-2xl overflow-hidden flex flex-col border border-theme-border/50",[t(p)?"bottom-0 left-0 right-0 rounded-t-3xl max-h-[85vh] w-full":"rounded-2xl max-w-xs"]]),style:Q(t(h))},[e("div",He,[e("h3",Ge,b(i.title),1),e("button",{class:"p-1 hover:bg-theme-selection rounded-full transition-colors text-theme-textmuted hover:text-theme-text",onClick:y[1]||(y[1]=k=>w.$emit("close"))},[...y[2]||(y[2]=[e("div",{class:"i-mdi-close text-lg"},null,-1)])])]),e("div",{ref_key:"contentRef",ref:n,class:"p-4 overflow-y-auto scrollbar-thin max-h-[40vh] md:max-h-[280px] relative",onScroll:o},[oe(w.$slots,"default",{},void 0,!0),t(a)?(l(),d("button",{key:0,class:"absolute bottom-2 left-1/2 -translate-x-1/2 z-10 p-2 rounded-full bg-theme-surface/60 border border-theme-border/20 text-theme-text/50 shadow-sm hover:bg-theme-accent hover:text-black hover:border-theme-accent transition-all duration-200 flex items-center justify-center animate-pulse",onClick:$},[...y[3]||(y[3]=[e("div",{class:"i-mdi-chevron-down text-2xl"},null,-1)])])):A("",!0)],544)],6)]),_:3})])):A("",!0)]),_:3})]))}}),ts=Object.assign(W(Ke,[["__scopeId","data-v-4424bce6"]]),{__name:"FilterPopup"}),ze={class:"space-y-6 py-2"},We={class:"flex items-center justify-between"},Pe={class:"text-lg font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},Ne={class:"relative px-2"},Ze={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Qe=M({__name:"FilterRatingControl",setup(i){const c=T(),{filters:m}=V(c),s=R(E,null)||m,n=S(s.value.minRating),a=N(x=>{s.value.minRating=x},300);return j(n,x=>{a(x)}),j(()=>s.value.minRating,x=>{x!==n.value&&(n.value=x)}),(x,u)=>(l(),d("div",ze,[e("div",We,[u[2]||(u[2]=e("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Minimum Rating ",-1)),e("div",Pe,b(t(n)===0?"All Ratings":`${t(n).toFixed(1)}+`),1)]),e("div",Ne,[U(e("input",{"onUpdate:modelValue":u[0]||(u[0]=v=>I(n)?n.value=v:null),type:"range",min:"0",max:"10",step:"0.5",class:"filter-range-input"},null,512),[[H,t(n),void 0,{number:!0}]]),u[3]||(u[3]=e("div",{class:"flex justify-between mt-2 text-[10px] text-theme-textmuted font-medium px-1"},[e("span",null,"0"),e("span",null,"5"),e("span",null,"10")],-1))]),t(n)>0?(l(),d("div",Ze,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:u[1]||(u[1]=v=>n.value=0)}," Clear Filter ")])):A("",!0)]))}}),ss=Object.assign(W(Qe,[["__scopeId","data-v-fe437ce5"]]),{__name:"FilterRatingControl"}),qe={class:"space-y-6 py-2"},Je={class:"flex items-center justify-between"},Xe={class:"text-sm font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},et={class:"space-y-4 px-2"},tt={class:"space-y-1"},st={class:"flex justify-between text-[10px] text-theme-textmuted"},nt={class:"font-bold text-theme-text"},ot={class:"space-y-1"},it={class:"flex justify-between text-[10px] text-theme-textmuted"},rt={class:"font-bold text-theme-text"},lt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},at=M({__name:"FilterYearControl",setup(i){const c=T(),{filters:m}=V(c),s=R(E,null)||m,n=S(s.value.minYear||1910),a=S(s.value.maxYear||2025),x=B(()=>n.value!==1910||a.value!==2025),u=()=>{n.value=1910,a.value=2025};j(n,p=>{p>a.value&&(a.value=p),v()}),j(a,p=>{p<n.value&&(n.value=p),v()});const v=N(()=>{s.value.minYear=n.value===1910?0:n.value,s.value.maxYear=a.value===2025?0:a.value},300);return j(()=>s.value.minYear,p=>{const r=p||1910;r!==n.value&&(n.value=r)}),j(()=>s.value.maxYear,p=>{const r=p||2025;r!==a.value&&(a.value=r)}),(p,r)=>(l(),d("div",qe,[e("div",Je,[r[2]||(r[2]=e("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Year Range ",-1)),e("div",Xe,b(t(n))+" — "+b(t(a)),1)]),e("div",et,[e("div",tt,[e("div",st,[r[3]||(r[3]=e("span",null,"From",-1)),e("span",nt,b(t(n)),1)]),U(e("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>I(n)?n.value=o:null),type:"range",min:"1910",max:"2025",step:"1",class:"filter-range-input"},null,512),[[H,t(n),void 0,{number:!0}]])]),e("div",ot,[e("div",it,[r[4]||(r[4]=e("span",null,"To",-1)),e("span",rt,b(t(a)),1)]),U(e("input",{"onUpdate:modelValue":r[1]||(r[1]=o=>I(a)?a.value=o:null),type:"range",min:"1910",max:"2025",step:"1",class:"filter-range-input"},null,512),[[H,t(a),void 0,{number:!0}]])]),r[5]||(r[5]=e("div",{class:"flex justify-between text-[10px] text-theme-textmuted font-medium px-1"},[e("span",null,"1910"),e("span",null,"1970"),e("span",null,"2025")],-1))]),t(x)?(l(),d("div",lt,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:u}," Clear Filter ")])):A("",!0)]))}}),ns=Object.assign(W(at,[["__scopeId","data-v-3033b658"]]),{__name:"FilterYearControl"});function L(i){if(i>=1e6){const c=i/1e6;return`${c>=10?Math.round(c):c.toFixed(1).replace(/\.0$/,"")}M`}if(i>=1e3){const c=i/1e3;return`${c>=10?Math.round(c):c.toFixed(1).replace(/\.0$/,"")}K`}return i.toString()}const ct={class:"space-y-6 py-2"},dt={class:"flex items-center justify-between"},ut={class:"text-sm font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},mt={class:"space-y-4 px-2"},pt={class:"space-y-1"},xt={class:"flex justify-between text-[10px] text-theme-textmuted"},vt={class:"font-bold text-theme-text"},ft={class:"space-y-1"},ht={class:"flex justify-between text-[10px] text-theme-textmuted"},bt={class:"font-bold text-theme-text"},yt={class:"flex justify-between text-[8px] text-theme-textmuted font-medium px-0 opacity-70"},_t={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},gt=M({__name:"FilterVotesControl",setup(i){const c=T(),{filters:m}=V(c),s=R(E,null)||m,n=[0,100,500,1e3,5e3,1e4,5e4,1e5,5e5,1e6],a=["0","1K","5K","50K","500K","1M+"],x=f=>{const h=n.findIndex(w=>w>=f);return h===-1?9:h},u=S(x(s.value.minVotes)),v=S(s.value.maxVotes?x(s.value.maxVotes):9),p=B(()=>n[u.value]),r=B(()=>n[v.value]),o=B(()=>u.value!==0||v.value!==9),$=()=>{u.value=0,v.value=9};j(u,f=>{f>v.value&&(v.value=f),C()}),j(v,f=>{f<u.value&&(u.value=f),C()});const C=N(()=>{s.value.minVotes=p.value,s.value.maxVotes=v.value===9?0:r.value},300);return j(()=>s.value.minVotes,f=>{const h=x(f);h!==u.value&&(u.value=h)}),j(()=>s.value.maxVotes,f=>{const h=f?x(f):9;h!==v.value&&(v.value=h)}),(f,h)=>(l(),d("div",ct,[e("div",dt,[h[2]||(h[2]=e("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Votes Range ",-1)),e("div",ut,b(("formatCount"in f?f.formatCount:t(L))(t(p)))+" — "+b(t(v)===9?"Any":("formatCount"in f?f.formatCount:t(L))(t(r))),1)]),e("div",mt,[e("div",pt,[e("div",xt,[h[3]||(h[3]=e("span",null,"Min",-1)),e("span",vt,b(("formatCount"in f?f.formatCount:t(L))(t(p))),1)]),U(e("input",{"onUpdate:modelValue":h[0]||(h[0]=w=>I(u)?u.value=w:null),type:"range",min:"0",max:"9",step:"1",class:"filter-range-input"},null,512),[[H,t(u),void 0,{number:!0}]])]),e("div",ft,[e("div",ht,[h[4]||(h[4]=e("span",null,"Max",-1)),e("span",bt,b(t(v)===9?"Any":("formatCount"in f?f.formatCount:t(L))(t(r))),1)]),U(e("input",{"onUpdate:modelValue":h[1]||(h[1]=w=>I(v)?v.value=w:null),type:"range",min:"0",max:"9",step:"1",class:"filter-range-input"},null,512),[[H,t(v),void 0,{number:!0}]])]),e("div",yt,[(l(),d(Y,null,G(a,w=>e("span",{key:w,class:"w-8 text-center"},b(w),1)),64))])]),t(o)?(l(),d("div",_t,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:$}," Clear Filter ")])):A("",!0)]))}}),os=Object.assign(W(gt,[["__scopeId","data-v-a1b54b58"]]),{__name:"FilterVotesControl"}),$t={class:"space-y-4"},wt={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},kt={key:1,class:"text-xs text-red-500 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"},Ct={key:2,class:"space-y-4"},St={class:"flex flex-wrap gap-2"},Ft=["onClick"],jt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},At=M({__name:"FilterGenresControl",setup(i){const c=T(),{filters:m}=V(c),s=R(E,null)||m,n=S([]),a=S(!0),x=S(null),u=async()=>{a.value=!0,x.value=null;try{const p=await c.getFilterOptions();n.value=p.genres}catch{x.value="Failed to load genres"}finally{a.value=!1}},v=()=>{s.value.genres=[]};return z(()=>{u()}),(p,r)=>(l(),d("div",$t,[t(a)?(l(),d("div",wt,[...r[0]||(r[0]=[e("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),e("span",{class:"text-xs text-theme-textmuted"},"Loading genres...",-1)])])):t(x)?(l(),d("div",kt,b(t(x)),1)):(l(),d("div",Ct,[e("div",St,[(l(!0),d(Y,null,G(t(n),o=>(l(),d("button",{key:o.name,class:F(["px-3 py-1.5 text-xs rounded-full transition-all inline-flex items-center gap-1.5 border",[t(s).genres.includes(o.name)?"bg-theme-primary text-white border-theme-primary shadow-sm":"bg-theme-selection text-theme-text border-theme-border/50 hover:border-theme-border hover:bg-theme-border/30"]]),onClick:$=>t(s).genres.includes(o.name)?t(s).genres=t(s).genres.filter(C=>C!==o.name):t(s).genres=[...t(s).genres,o.name]},[e("span",null,b(o.name),1),e("span",{class:F(["text-[10px] opacity-70",{"text-white/80":t(s).genres.includes(o.name)}])},b(("formatCount"in p?p.formatCount:t(L))(o.count)),3)],10,Ft))),128))]),t(s).genres.length>0?(l(),d("div",jt,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:v}," Clear ("+b(t(s).genres.length)+") ",1)])):A("",!0)]))]))}}),is=Object.assign(At,{__name:"FilterGenresControl"}),Mt={class:"space-y-4"},Bt={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},Ot={key:1,class:"text-xs text-red-500 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"},Tt={key:2,class:"space-y-4"},Vt={class:"flex flex-wrap gap-2"},Rt=["onClick"],Et={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Lt=M({__name:"FilterCountriesControl",setup(i){const c=T(),{filters:m}=V(c),s=R(E,null)||m,n=S([]),a=S(!0),x=S(null),u=async()=>{a.value=!0,x.value=null;try{const p=await c.getFilterOptions();n.value=p.countries}catch{x.value="Failed to load countries"}finally{a.value=!1}},v=()=>{s.value.countries=[]};return z(()=>{u()}),(p,r)=>(l(),d("div",Mt,[t(a)?(l(),d("div",Bt,[...r[0]||(r[0]=[e("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),e("span",{class:"text-xs text-theme-textmuted"},"Loading countries...",-1)])])):t(x)?(l(),d("div",Ot,b(t(x)),1)):(l(),d("div",Tt,[e("div",Vt,[(l(!0),d(Y,null,G(t(n),o=>(l(),d("button",{key:o.name,class:F(["px-3 py-1.5 text-xs rounded-full transition-all inline-flex items-center gap-1.5 border",[t(s).countries.includes(o.name)?"bg-theme-primary text-white border-theme-primary shadow-sm":"bg-theme-selection text-theme-text border-theme-border/50 hover:border-theme-border hover:bg-theme-border/30"]]),onClick:$=>t(s).countries.includes(o.name)?t(s).countries=t(s).countries.filter(C=>C!==o.name):t(s).countries=[...t(s).countries,o.name]},[e("span",null,b(o.name),1),e("span",{class:F(["text-[10px] opacity-70",{"text-white/80":t(s).countries.includes(o.name)}])},b(("formatCount"in p?p.formatCount:t(L))(o.count)),3)],10,Rt))),128))]),t(s).countries.length>0?(l(),d("div",Et,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:v}," Clear ("+b(t(s).countries.length)+") ",1)])):A("",!0)]))]))}}),rs=Object.assign(Lt,{__name:"FilterCountriesControl"}),Dt={class:"space-y-4"},It={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},Yt={key:1,class:"space-y-4"},Ut={class:"space-y-2"},Ht={class:"space-y-3"},Gt={class:"pl-2 space-y-2 border-l-2 border-theme-border/30 max-h-[250px] overflow-y-auto scrollbar-thin pr-2"},Kt={class:"flex items-center justify-between gap-2 flex-1"},zt={class:"text-sm text-theme-text"},Wt={class:"text-[10px] text-theme-textmuted font-medium"},Pt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Nt=M({__name:"FilterSourceControl",setup(i){const c=T(),{filters:m}=V(c),s=R(E,null)||m,n=S([]),a=S(!0),x=B({get:()=>s.value.sources.includes("archive.org"),set:r=>{r?s.value.sources=[...s.value.sources,"archive.org"]:s.value.sources=s.value.sources.filter(o=>o!=="archive.org")}}),u=r=>B({get:()=>s.value.sources.includes(r),set:o=>{o?s.value.sources=[...s.value.sources,r]:s.value.sources=s.value.sources.filter($=>$!==r)}}),v=async()=>{a.value=!0;try{const r=await c.getFilterOptions();n.value=r.channels}catch{}finally{a.value=!1}},p=()=>{s.value.sources=[]};return z(()=>{v()}),(r,o)=>{const $=ce;return l(),d("div",Dt,[t(a)?(l(),d("div",It,[...o[1]||(o[1]=[e("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),e("span",{class:"text-xs text-theme-textmuted"},"Loading sources...",-1)])])):(l(),d("div",Yt,[e("div",Ut,[O($,{modelValue:t(x),"onUpdate:modelValue":o[0]||(o[0]=C=>I(x)?x.value=C:null)},{default:K(()=>[...o[2]||(o[2]=[e("span",{class:"flex items-center justify-between gap-2 flex-1"},[e("span",{class:"text-sm font-medium text-theme-text"},"Archive.org")],-1)])]),_:1},8,["modelValue"])]),e("div",Ht,[o[3]||(o[3]=e("div",{class:"text-[10px] font-bold text-theme-textmuted uppercase tracking-widest pl-1"}," YouTube Channels ",-1)),e("div",Gt,[(l(!0),d(Y,null,G(t(n),C=>(l(),P($,{key:C.id,modelValue:u(C.name).value,"onUpdate:modelValue":f=>u(C.name).value=f},{default:K(()=>[e("span",Kt,[e("span",zt,b(C.name),1),e("span",Wt,b(("formatCount"in r?r.formatCount:t(L))(C.count)),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])]),t(s).sources.length>0?(l(),d("div",Pt,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:p}," Clear ("+b(t(s).sources.length)+") ",1)])):A("",!0)]))])}}}),ls=Object.assign(Nt,{__name:"FilterSourceControl"});export{E as F,Jt as _,Xt as a,es as b,ts as c,ss as d,ns as e,L as f,os as g,is as h,rs as i,ls as j};
