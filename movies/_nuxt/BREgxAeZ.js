import{E as O,M as N,W as K,r as S,X as F,G as B,n as E,ad as q,e as V,x as L,af as J,Q as R,ag as Z,z as e,c as u,o as a,P as l,a as t,I as x,U as D,S as ee,T as te,ah as se,a1 as M,b as p,w as y,k as oe,J as G,F as Q,t as W,a0 as I,ai as le,K as re,_ as ae,Y as ne,Z as ie,ac as U,a6 as ce}from"./02OeVUp7.js";import{u as P}from"./CfQ1CYlZ.js";import{_ as X}from"./B-qhTGpT.js";import{i as ue}from"./BH85bPq3.js";import{_ as de}from"./DphTw9eM.js";import"./CZfkSF8C.js";const me={class:"max-w-4xl mx-auto flex items-center gap-4"},he={class:"relative flex-1"},pe=O({__name:"SearchHeader",setup(j){const m=P(),{filters:h}=N(m),{setSearchQuery:w,setSort:v}=m,n=K(),{isSearchOpen:g}=N(n),{setSearchOpen:s}=n,d=S(null),o=S(null),b=F(),i=S(h.value.searchQuery);B(()=>{const c=b.query.q;c&&c!==i.value&&(i.value=c,s(!0))});const z=q(c=>{if(w(c),!b.path.startsWith("/admin")){const f=se();c?f.replace({query:{q:c}}):f.replace({query:{}})}c&&b.path!=="/search"&&!b.path.startsWith("/admin")&&M("/search"),c&&h.value.sort.field!=="relevance"&&v({field:"relevance",direction:"desc"})},500);E(i,c=>{z(c)}),E(()=>h.value.searchQuery,c=>{c!==i.value&&(i.value=c)});const C=V(()=>b.path!=="/search"?!1:g.value||i.value!=="");E(g,c=>{c&&L(()=>{d.value?.focus()})}),E(()=>b.path,c=>{(c==="/"||c==="/search")&&i.value&&s(!0)}),J(o,()=>{i.value||T()});const k=()=>{i.value=""},T=()=>{s(!1)},A=()=>{i.value?k():T()},H=()=>{T()};return(c,f)=>R((a(),u("div",{ref_key:"searchContainer",ref:o,class:l(["fixed top-0 left-0 right-0 z-50 bg-theme-surface border-b border-theme-border shadow-xl px-4 py-4 md:py-6 transition-transform duration-300",e(C)?"translate-y-0":"-translate-y-full"])},[t("div",me,[t("div",he,[f[2]||(f[2]=t("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[t("div",{class:"i-mdi-magnify text-2xl text-theme-textmuted"})],-1)),R(t("input",{ref_key:"searchInput",ref:d,"onUpdate:modelValue":f[0]||(f[0]=$=>ee(i)?i.value=$:null),type:"text",class:"block w-full pl-12 pr-12 py-3 md:py-4 bg-theme-background border-2 border-transparent focus:border-theme-primary rounded-2xl text-xl md:text-2xl text-theme-text placeholder-theme-text-muted focus:outline-none transition-all shadow-inner",placeholder:"Search movies, actors, directors...",onKeydown:[D(A,["esc"]),D(H,["enter"])]},null,544),[[te,e(i)]]),e(i)?(a(),u("button",{key:0,class:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:k},[...f[1]||(f[1]=[t("div",{class:"i-mdi-close text-xl text-theme-textmuted hover:text-theme-text"},null,-1)])])):x("",!0)]),e(i)?x("",!0):(a(),u("button",{key:0,class:"p-2 md:p-3 rounded-xl hover:bg-theme-background text-theme-textmuted hover:text-theme-text transition-colors",title:"Close search",onClick:T},[...f[3]||(f[3]=[t("div",{class:"i-mdi-close text-2xl md:text-3xl"},null,-1)])]))])],2)),[[Z,e(C)]])}}),fe=Object.assign(pe,{__name:"SearchHeader"}),xe={class:"transition-all duration-300"},ve={key:0,class:"text-base md:text-lg text-theme-textmuted mt-2 max-w-2xl transition-opacity duration-300"},ge=O({__name:"MovieHeader",setup(j){const m=F(),h=V(()=>m.path==="/"||m.path.startsWith("/collections")||m.path.startsWith("/liked")||m.path.startsWith("/search"));return(w,v)=>{const n=X;return a(),u("header",xe,[t("div",{class:l(["md:ml-16 max-w-none mx-auto px-4 flex lg:flex-row flex-col lg:items-end justify-between gap-8",{"py-6 md:py-10 lg:px-[6%]":e(h),"py-3":!e(h)}])},[p(n,{to:"/",class:"grow"},{default:y(()=>[t("div",{class:l(["w-full i-app-logo text-theme-text transition-all duration-300",{" max-w-md h-16":e(h),"max-w-xs h-12":!e(h)}])},null,2)]),_:1}),e(h)&&e(m).path!=="/"?(a(),u("p",ve," Free legal movie streams from Archive.org and YouTube ")):x("",!0)],2)])}}}),be=Object.assign(ge,{__name:"MovieHeader"}),_e={class:"hidden md:block fixed left-4 top-1/2 -translate-y-1/2 z-40 glass shadow-2xl rounded-full w-12 border-theme-border/30"},ye={class:"flex flex-col items-center gap-2 py-2"},ke={key:0,class:"absolute top-0 -right-1 bg-theme-accent text-white text-xs rounded-full size-4 flex items-center justify-center font-medium"},we={key:0,class:"i-material-symbols-light-wb-sunny text-xl"},Se={key:1,class:"i-material-symbols-light-dark-mode text-xl"},Ce={class:"relative group"},Te={key:0,class:"absolute top-0 -right-1 bg-theme-primary text-white text-xs rounded-full size-4 flex items-center justify-center font-medium"},$e={class:"md:hidden fixed bottom-6 left-1/2 -translate-x-1/2 z-50 glass shadow-2xl rounded-full h-14 border-theme-border/30 max-w-[calc(100vw-2rem)] flex items-center group/sidebar"},ze={key:0,class:"absolute -top-1 -right-1 bg-theme-accent text-white text-xs rounded-full size-5 flex items-center justify-center font-medium"},We={key:0,class:"i-material-symbols-light-wb-sunny text-2xl text-theme-accent"},Ee={key:1,class:"i-material-symbols-light-dark-mode text-2xl text-theme-primary"},Fe={class:"relative group flex-shrink-0"},Me={key:0,class:"absolute -top-1 -right-1 bg-theme-primary text-white text-xs rounded-full size-5 flex items-center justify-center font-medium"},Oe=O({__name:"Sidebar",emits:["openFilters","openThemeSelection"],setup(j,{emit:m}){const h=m,w=P(),{likedCount:v,activeFiltersCount:n}=N(w),g=K(),{setSearchOpen:s}=g,{isDark:d}=N(g),o=F(),b=S(!1),i=S(null),z=S(!1),C=S(!1),k=()=>{if(!i.value)return;const{scrollLeft:$,scrollWidth:r,clientWidth:_}=i.value;z.value=$>5,C.value=$+_<r-5};B(()=>{b.value=ue(),k(),window.addEventListener("resize",k)}),oe(()=>{window.removeEventListener("resize",k)}),E(n,()=>{L(k)});const T=()=>{o.path!=="/search"&&M("/search"),h("openFilters")},A=()=>{h("openThemeSelection")},H=()=>{w.resetFilters()},c=$=>{if(!i.value)return;const r=100;i.value.scrollBy({left:$==="left"?-r:r,behavior:"smooth"})},f=async()=>{o.path!=="/search"&&await M("/search"),s(!0)};return($,r)=>{const _=X;return a(),u(G,null,[t("aside",_e,[t("div",ye,[p(_,{to:"/",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":e(o).path==="/"}]),title:"Home"},{default:y(()=>[...r[2]||(r[2]=[t("div",{class:"i-mdi-home text-xl"},null,-1)])]),_:1},8,["class"]),p(_,{to:"/search",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":e(o).path==="/search"}]),title:"Search (Shift+S)",onClick:f},{default:y(()=>[t("div",{class:l(["i-mdi-magnify text-xl",{"text-theme-primary":e(o).path==="/search"}])},null,2)]),_:1},8,["class"]),p(_,{to:"/liked",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-accent/20":e(o).path==="/liked"}]),title:"Liked Movies"},{default:y(()=>[t("div",{class:l(["i-mdi-heart text-xl",{"text-theme-accent":e(o).path==="/liked"}])},null,2),e(v)>0?(a(),u("span",ke,W(e(v)>99?"99+":e(v)),1)):x("",!0)]),_:1},8,["class"]),p(_,{to:"/collections",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":e(o).path.startsWith("/collections")}]),title:"Collections"},{default:y(()=>[t("div",{class:l(["i-mdi:movie-roll text-xl",{"text-theme-primary":e(o).path.startsWith("/collections")}])},null,2)]),_:1},8,["class"]),e(b)?(a(),Q(_,{key:0,to:"/admin",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-accent/20":e(o).path.startsWith("/admin")}]),title:"Admin"},{default:y(()=>[t("div",{class:l(["i-mdi-shield-crown text-xl",{"text-theme-accent":e(o).path.startsWith("/admin")}])},null,2)]),_:1},8,["class"])):x("",!0),t("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors",title:"Theme Selection",onClick:A},[e(d)?(a(),u("div",we)):(a(),u("div",Se))]),t("div",Ce,[t("button",{class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative",{"bg-theme-primary/20":e(n)>0}]),title:"Filters",onClick:T},[t("div",{class:l(["i-mdi-filter-variant text-xl",{"text-theme-primary":e(n)>0}])},null,2),e(n)>0?(a(),u("span",Te,W(e(n)>9?"9+":e(n)),1)):x("",!0)],2),e(n)>0?(a(),u("button",{key:0,class:"absolute -top-1 -right-1 size-5 rounded-full bg-theme-surface/90 backdrop-blur-sm border border-theme-border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-theme-accent/20 hover:border-theme-accent z-10",title:"Clear all filters",onClick:I(H,["stop"])},[...r[3]||(r[3]=[t("div",{class:"i-mdi-close text-xs text-theme-textmuted hover:text-theme-accent"},null,-1)])])):x("",!0)]),r[4]||(r[4]=t("a",{href:"https://github.com/select/movies-deluxe",target:"_blank",rel:"noopener noreferrer",class:"p-2 hover:bg-theme-selection rounded-full transition-colors",title:"View on GitHub"},[t("div",{class:"i-mdi-github text-xl"})],-1))])]),t("aside",$e,[e(z)?(a(),u("button",{key:0,class:"absolute left-1 z-10 p-1 rounded-full bg-theme-surface/80 backdrop-blur-sm text-theme-textmuted animate-pulse hover:bg-theme-selection transition-colors","aria-label":"Scroll left",onClick:r[0]||(r[0]=Y=>c("left"))},[...r[5]||(r[5]=[t("div",{class:"i-mdi-chevron-left text-lg"},null,-1)])])):x("",!0),t("div",{ref_key:"scrollContainer",ref:i,class:"flex items-center gap-1 px-2 h-full overflow-x-auto scrollbar-hidden scroll-smooth",onScroll:k},[p(_,{to:"/search",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative flex-shrink-0",{"bg-theme-primary/20":e(o).path==="/search"}]),"aria-label":"Search",onClick:f},{default:y(()=>[t("div",{class:l(["i-mdi-magnify text-2xl",{"text-theme-primary":e(o).path==="/search"}])},null,2)]),_:1},8,["class"]),p(_,{to:"/",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative flex-shrink-0",{"bg-theme-primary/20":e(o).path==="/"}]),"aria-label":"Home"},{default:y(()=>[...r[6]||(r[6]=[t("div",{class:"i-mdi-home text-2xl"},null,-1)])]),_:1},8,["class"]),p(_,{to:"/liked",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-accent/20":e(o).path==="/liked"}]),"aria-label":"Liked Movies"},{default:y(()=>[t("div",{class:l(["i-mdi-heart text-2xl",{"text-theme-accent":e(o).path==="/liked"}])},null,2),e(v)>0?(a(),u("span",ze,W(e(v)>99?"99+":e(v)),1)):x("",!0)]),_:1},8,["class"]),p(_,{to:"/collections",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-primary/20":e(o).path.startsWith("/collections")}]),"aria-label":"Collections"},{default:y(()=>[t("div",{class:l(["i-mdi:movie-roll text-2xl",{"text-theme-primary":e(o).path.startsWith("/collections")}])},null,2)]),_:1},8,["class"]),e(b)?(a(),Q(_,{key:0,to:"/admin",class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-accent/20":e(o).path.startsWith("/admin")}]),"aria-label":"Admin"},{default:y(()=>[t("div",{class:l(["i-mdi-shield-crown text-2xl",{"text-theme-accent":e(o).path.startsWith("/admin")}])},null,2)]),_:1},8,["class"])):x("",!0),t("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors flex-shrink-0","aria-label":"Theme Selection",onClick:A},[e(d)?(a(),u("div",We)):(a(),u("div",Ee))]),t("div",Fe,[t("button",{class:l(["p-2 hover:bg-theme-selection rounded-full transition-colors relative",{"bg-theme-primary/20":e(n)>0}]),"aria-label":"Filters",onClick:T},[t("div",{class:l(["i-mdi-filter-variant text-2xl",{"text-theme-primary":e(n)>0}])},null,2),e(n)>0?(a(),u("span",Me,W(e(n)>9?"9+":e(n)),1)):x("",!0)],2),e(n)>0?(a(),u("button",{key:0,class:"absolute -top-1 -right-1 size-6 rounded-full bg-theme-surface/90 backdrop-blur-sm border border-theme-border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-theme-accent/20 hover:border-theme-accent z-10","aria-label":"Clear all filters",onClick:I(H,["stop"])},[...r[7]||(r[7]=[t("div",{class:"i-mdi-close text-sm text-theme-textmuted hover:text-theme-accent"},null,-1)])])):x("",!0)]),r[8]||(r[8]=t("a",{href:"https://github.com/select/movies-deluxe",target:"_blank",rel:"noopener noreferrer",class:"p-2 hover:bg-theme-selection rounded-full transition-colors flex-shrink-0","aria-label":"View on GitHub"},[t("div",{class:"i-mdi-github text-2xl"})],-1))],544),e(C)?(a(),u("button",{key:1,class:"absolute right-1 z-10 p-1 rounded-full bg-theme-surface/80 backdrop-blur-sm text-theme-textmuted animate-pulse hover:bg-theme-selection transition-colors","aria-label":"Scroll right",onClick:r[1]||(r[1]=Y=>c("right"))},[...r[9]||(r[9]=[t("div",{class:"i-mdi-chevron-right text-lg"},null,-1)])])):x("",!0)])],64)}}}),je=Object.assign(Oe,{__name:"Sidebar"}),Ae={class:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none"},He={class:"flex-1"},Ne=["onClick"],Ke={key:0,class:"pointer-events-none text-xs text-gray-400 text-center opacity-60"},Le=O({__name:"AppToastContainer",setup(j){const{toasts:m,toastQueue:h,removeToast:w}=K(),v=g=>{const s={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600",warning:"bg-yellow-600"};return s[g]||s.info},n=g=>{const s={success:"i-mdi-check-circle text-lg",error:"i-mdi-alert-circle text-lg",info:"i-mdi-information text-lg",warning:"i-mdi-alert text-lg"};return s[g]||s.info};return(g,s)=>(a(),u("div",Ae,[p(le,{name:"toast",tag:"div",class:"flex flex-col gap-2",appear:""},{default:y(()=>[(a(!0),u(G,null,re(e(m),d=>(a(),u("div",{key:d.id,class:l(["pointer-events-auto p-3 rounded-lg shadow-lg text-white text-sm flex items-center gap-2 min-w-[300px] max-w-md transform-gpu",v(d.type)])},[t("div",{class:l(n(d.type))},null,2),t("span",He,W(d.message),1),t("button",{class:"p-1 hover:bg-white/20 rounded transition-colors",onClick:o=>e(w)(d.id)},[...s[0]||(s[0]=[t("div",{class:"i-mdi-close text-lg"},null,-1)])],8,Ne)],2))),128))]),_:1}),e(h).length>0?(a(),u("div",Ke," +"+W(e(h).length)+" more ",1)):x("",!0)]))}}),Re=Object.assign(ae(Le,[["__scopeId","data-v-f79ae823"]]),{__name:"AppToastContainer"}),De={class:"min-h-screen bg-theme-background text-theme-text transition-colors duration-300"},Pe=O({__name:"default",setup(j){const m=S(!1),h=S(),w=()=>{m.value=!0,L(()=>{setTimeout(()=>{h.value?.scrollToThemeSection()},300)})},v=ne(),{Escape:n}=v;n&&ie(n,()=>{m.value&&(m.value=!1)}),U("k",s=>{if(s.ctrlKey||s.metaKey){const d=window.document.activeElement;d?.tagName==="INPUT"||d?.tagName==="TEXTAREA"||(s.preventDefault(),m.value=!m.value)}});const{setSearchOpen:g}=K();return U(["s","S","/"],s=>{const d=window.document.activeElement;d?.tagName==="INPUT"||d?.tagName==="TEXTAREA"||((s.key==="s"||s.key==="S")&&!s.ctrlKey&&!s.metaKey&&!s.altKey?(s.preventDefault(),F().path!=="/search"&&M("/search"),g(!0)):s.key==="/"&&(s.preventDefault(),F().path!=="/search"&&M("/search"),g(!0)))}),(s,d)=>{const o=fe,b=be,i=je,z=de,C=Re;return a(),u("div",De,[p(o),p(b),p(i,{onOpenFilters:d[0]||(d[0]=k=>m.value=!0),onOpenThemeSelection:w}),p(z,{ref_key:"filterMenuRef",ref:h,"is-open":e(m),onClose:d[1]||(d[1]=k=>m.value=!1)},null,8,["is-open"]),ce(s.$slots,"default"),p(C)])}}});export{Pe as default};
