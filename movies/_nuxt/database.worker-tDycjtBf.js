async function gt(de={}){var te,_=de,ve=!!globalThis.window,qe=!!globalThis.WorkerGlobalScope;globalThis.process?.versions?.node&&globalThis.process?.type!="renderer",(function(e){const n=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{console.warn("globalThis.sqlite3InitModuleState is missing")}});delete globalThis.sqlite3InitModuleState,n.debugModule("pre-js.js sqlite3InitModuleState =",n),e.locateFile=(function(o,t){return new URL(o,import.meta.url).href}).bind(n),e.instantiateWasm=(function(t,a){const s=this,r=e.locateFile(s.wasmFilename,typeof Se>"u"?"":Se);s.debugModule("instantiateWasm() uri =",r,"sIMS =",this);const u=()=>fetch(r,{credentials:"same-origin"}),T=G=>{G.imports=t,s.instantiateWasm=G,a(G.instance,G.module)};return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(u(),t).then(T):async()=>u().then(G=>G.arrayBuffer()).then(G=>WebAssembly.instantiate(G,t)).then(T))()}).bind(n)})(_);var ge="./this.program",_e=import.meta.url,Se="";function ke(e){return _.locateFile?_.locateFile(e,Se):Se+e}var Te,we;if(ve||qe){try{Se=new URL(".",_e).href}catch{}qe&&(we=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),Te=async e=>{var n=await fetch(e,{credentials:"same-origin"});if(n.ok)return n.arrayBuffer();throw new Error(n.status+" : "+n.url)}}var ie=console.log.bind(console),fe=console.error.bind(console),xe,We=!1,Be,Ge,Pe,Ue,Ze,pe,me,Re,bt=!1;function yt(){var e=Ve.buffer;Pe=new Int8Array(e),Ze=new Int16Array(e),Ue=new Uint8Array(e),pe=new Int32Array(e),me=new Uint32Array(e),Re=new BigInt64Array(e),new BigUint64Array(e)}function jt(){if(_.wasmMemory)Ve=_.wasmMemory;else{var e=_.INITIAL_MEMORY||8388608;Ve=new WebAssembly.Memory({initial:e/65536,maximum:32768})}yt()}function Bt(){if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)Xt(_.preRun.shift());qt(wt)}function Ut(){bt=!0,!_.noFSInit&&!l.initialized&&l.init(),Ye.__wasm_call_ctors(),l.ignorePermissions=!1}function Wt(){if(_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;)Jt(_.postRun.shift());qt(vt)}function ze(e){_.onAbort?.(e),e="Aborted("+e+")",fe(e),We=!0,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw Ge?.(n),n}var ut;function zt(){return _.locateFile?ke("sqlite3.wasm"):new URL(""+new URL("sqlite3-B5ovX4lD.wasm",import.meta.url).href,import.meta.url).href}function Qt(e){if(e==ut&&xe)return new Uint8Array(xe);if(we)return we(e);throw"both async and sync fetching of the wasm failed"}async function Ht(e){if(!xe)try{var n=await Te(e);return new Uint8Array(n)}catch{}return Qt(e)}async function Vt(e,n){try{var o=await Ht(e),t=await WebAssembly.instantiate(o,n);return t}catch(a){fe(`failed to asynchronously prepare wasm: ${a}`),ze(a)}}async function $t(e,n,o){if(!e)try{var t=fetch(n,{credentials:"same-origin"}),a=await WebAssembly.instantiateStreaming(t,o);return a}catch(s){fe(`wasm streaming compile failed: ${s}`),fe("falling back to ArrayBuffer instantiation")}return Vt(n,o)}function Gt(){var e={env:Rt,wasi_snapshot_preview1:Rt};return e}async function Kt(){function e(s,r){return Ye=s.exports,er(Ye),Ye}function n(s){return e(s.instance)}var o=Gt();if(_.instantiateWasm)return new Promise((s,r)=>{_.instantiateWasm(o,(u,T)=>{s(e(u))})});ut??=zt();var t=await $t(xe,ut,o),a=n(t);return a}var qt=e=>{for(;e.length>0;)e.shift()(_)},vt=[],Jt=e=>vt.push(e),wt=[],Xt=e=>wt.push(e),Ve,he={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return n.exec(e).slice(1)},normalizeArray:(e,n)=>{for(var o=0,t=e.length-1;t>=0;t--){var a=e[t];a==="."?e.splice(t,1):a===".."?(e.splice(t,1),o++):o&&(e.splice(t,1),o--)}if(n)for(;o;o--)e.unshift("..");return e},normalize:e=>{var n=he.isAbs(e),o=e.slice(-1)==="/";return e=he.normalizeArray(e.split("/").filter(t=>!!t),!n).join("/"),!e&&!n&&(e="."),e&&o&&(e+="/"),(n?"/":"")+e},dirname:e=>{var n=he.splitPath(e),o=n[0],t=n[1];return!o&&!t?".":(t&&(t=t.slice(0,-1)),o+t)},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>he.normalize(e.join("/")),join2:(e,n)=>he.normalize(e+"/"+n)},Yt=()=>e=>crypto.getRandomValues(e),St=e=>{(St=Yt())(e)},et={resolve:(...e)=>{for(var n="",o=!1,t=e.length-1;t>=-1&&!o;t--){var a=t>=0?e[t]:l.cwd();if(typeof a!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!a)return"";n=a+"/"+n,o=he.isAbs(a)}return n=he.normalizeArray(n.split("/").filter(s=>!!s),!o).join("/"),(o?"/":"")+n||"."},relative:(e,n)=>{e=et.resolve(e).slice(1),n=et.resolve(n).slice(1);function o(P){for(var G=0;G<P.length&&P[G]==="";G++);for(var j=P.length-1;j>=0&&P[j]==="";j--);return G>j?[]:P.slice(G,j-G+1)}for(var t=o(e.split("/")),a=o(n.split("/")),s=Math.min(t.length,a.length),r=s,u=0;u<s;u++)if(t[u]!==a[u]){r=u;break}for(var T=[],u=r;u<t.length;u++)T.push("..");return T=T.concat(a.slice(r)),T.join("/")}},Et=new TextDecoder,At=(e,n,o,t)=>{for(var a=n+o;e[n]&&!(n>=a);)++n;return n},nt=(e,n=0,o,t)=>{var a=At(e,n,o);return Et.decode(e.buffer?e.subarray(n,a):new Uint8Array(e.slice(n,a)))},_t=[],lt=e=>{for(var n=0,o=0;o<e.length;++o){var t=e.charCodeAt(o);t<=127?n++:t<=2047?n+=2:t>=55296&&t<=57343?(n+=4,++o):n+=3}return n},It=(e,n,o,t)=>{if(!(t>0))return 0;for(var a=o,s=o+t-1,r=0;r<e.length;++r){var u=e.codePointAt(r);if(u<=127){if(o>=s)break;n[o++]=u}else if(u<=2047){if(o+1>=s)break;n[o++]=192|u>>6,n[o++]=128|u&63}else if(u<=65535){if(o+2>=s)break;n[o++]=224|u>>12,n[o++]=128|u>>6&63,n[o++]=128|u&63}else{if(o+3>=s)break;n[o++]=240|u>>18,n[o++]=128|u>>12&63,n[o++]=128|u>>6&63,n[o++]=128|u&63,r++}}return n[o]=0,o-a},ft=(e,n,o)=>{var t=lt(e)+1,a=new Array(t),s=It(e,a,0,a.length);return a.length=s,a},Zt=()=>{if(!_t.length){var e=null;if(globalThis.window?.prompt&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;_t=ft(e)}return _t.shift()},Ke={ttys:[],init(){},shutdown(){},register(e,n){Ke.ttys[e]={input:[],output:[],ops:n},l.registerDevice(e,Ke.stream_ops)},stream_ops:{open(e){var n=Ke.ttys[e.node.rdev];if(!n)throw new l.ErrnoError(43);e.tty=n,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,n,o,t,a){if(!e.tty||!e.tty.ops.get_char)throw new l.ErrnoError(60);for(var s=0,r=0;r<t;r++){var u;try{u=e.tty.ops.get_char(e.tty)}catch{throw new l.ErrnoError(29)}if(u===void 0&&s===0)throw new l.ErrnoError(6);if(u==null)break;s++,n[o+r]=u}return s&&(e.node.atime=Date.now()),s},write(e,n,o,t,a){if(!e.tty||!e.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var s=0;s<t;s++)e.tty.ops.put_char(e.tty,n[o+s])}catch{throw new l.ErrnoError(29)}return t&&(e.node.mtime=e.node.ctime=Date.now()),s}},default_tty_ops:{get_char(e){return Zt()},put_char(e,n){n===null||n===10?(ie(nt(e.output)),e.output=[]):n!=0&&e.output.push(n)},fsync(e){e.output?.length>0&&(ie(nt(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,n,o){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,n){n===null||n===10?(fe(nt(e.output)),e.output=[]):n!=0&&e.output.push(n)},fsync(e){e.output?.length>0&&(fe(nt(e.output)),e.output=[])}}},en=(e,n)=>Ue.fill(0,e,e+n),kt=(e,n)=>Math.ceil(e/n)*n,Tt=e=>{e=kt(e,65536);var n=Nt(65536,e);return n&&en(n,e),n},ae={ops_table:null,mount(e){return ae.createNode(null,"/",16895,0)},createNode(e,n,o,t){if(l.isBlkdev(o)||l.isFIFO(o))throw new l.ErrnoError(63);ae.ops_table||={dir:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr,lookup:ae.node_ops.lookup,mknod:ae.node_ops.mknod,rename:ae.node_ops.rename,unlink:ae.node_ops.unlink,rmdir:ae.node_ops.rmdir,readdir:ae.node_ops.readdir,symlink:ae.node_ops.symlink},stream:{llseek:ae.stream_ops.llseek}},file:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr},stream:{llseek:ae.stream_ops.llseek,read:ae.stream_ops.read,write:ae.stream_ops.write,mmap:ae.stream_ops.mmap,msync:ae.stream_ops.msync}},link:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr,readlink:ae.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr},stream:l.chrdev_stream_ops}};var a=l.createNode(e,n,o,t);return l.isDir(a.mode)?(a.node_ops=ae.ops_table.dir.node,a.stream_ops=ae.ops_table.dir.stream,a.contents={}):l.isFile(a.mode)?(a.node_ops=ae.ops_table.file.node,a.stream_ops=ae.ops_table.file.stream,a.usedBytes=0,a.contents=null):l.isLink(a.mode)?(a.node_ops=ae.ops_table.link.node,a.stream_ops=ae.ops_table.link.stream):l.isChrdev(a.mode)&&(a.node_ops=ae.ops_table.chrdev.node,a.stream_ops=ae.ops_table.chrdev.stream),a.atime=a.mtime=a.ctime=Date.now(),e&&(e.contents[n]=a,e.atime=e.mtime=e.ctime=a.atime),a},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,n){var o=e.contents?e.contents.length:0;if(!(o>=n)){var t=1024*1024;n=Math.max(n,o*(o<t?2:1.125)>>>0),o!=0&&(n=Math.max(n,256));var a=e.contents;e.contents=new Uint8Array(n),e.usedBytes>0&&e.contents.set(a.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,n){if(e.usedBytes!=n)if(n==0)e.contents=null,e.usedBytes=0;else{var o=e.contents;e.contents=new Uint8Array(n),o&&e.contents.set(o.subarray(0,Math.min(n,e.usedBytes))),e.usedBytes=n}},node_ops:{getattr(e){var n={};return n.dev=l.isChrdev(e.mode)?e.id:1,n.ino=e.id,n.mode=e.mode,n.nlink=1,n.uid=0,n.gid=0,n.rdev=e.rdev,l.isDir(e.mode)?n.size=4096:l.isFile(e.mode)?n.size=e.usedBytes:l.isLink(e.mode)?n.size=e.link.length:n.size=0,n.atime=new Date(e.atime),n.mtime=new Date(e.mtime),n.ctime=new Date(e.ctime),n.blksize=4096,n.blocks=Math.ceil(n.size/n.blksize),n},setattr(e,n){for(const o of["mode","atime","mtime","ctime"])n[o]!=null&&(e[o]=n[o]);n.size!==void 0&&ae.resizeFileStorage(e,n.size)},lookup(e,n){throw ae.doesNotExistError||(ae.doesNotExistError=new l.ErrnoError(44),ae.doesNotExistError.stack="<generic error, no stack>"),ae.doesNotExistError},mknod(e,n,o,t){return ae.createNode(e,n,o,t)},rename(e,n,o){var t;try{t=l.lookupNode(n,o)}catch{}if(t){if(l.isDir(e.mode))for(var a in t.contents)throw new l.ErrnoError(55);l.hashRemoveNode(t)}delete e.parent.contents[e.name],n.contents[o]=e,e.name=o,n.ctime=n.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,n){delete e.contents[n],e.ctime=e.mtime=Date.now()},rmdir(e,n){var o=l.lookupNode(e,n);for(var t in o.contents)throw new l.ErrnoError(55);delete e.contents[n],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,n,o){var t=ae.createNode(e,n,41471,0);return t.link=o,t},readlink(e){if(!l.isLink(e.mode))throw new l.ErrnoError(28);return e.link}},stream_ops:{read(e,n,o,t,a){var s=e.node.contents;if(a>=e.node.usedBytes)return 0;var r=Math.min(e.node.usedBytes-a,t);if(r>8&&s.subarray)n.set(s.subarray(a,a+r),o);else for(var u=0;u<r;u++)n[o+u]=s[a+u];return r},write(e,n,o,t,a,s){if(n.buffer===Pe.buffer&&(s=!1),!t)return 0;var r=e.node;if(r.mtime=r.ctime=Date.now(),n.subarray&&(!r.contents||r.contents.subarray)){if(s)return r.contents=n.subarray(o,o+t),r.usedBytes=t,t;if(r.usedBytes===0&&a===0)return r.contents=n.slice(o,o+t),r.usedBytes=t,t;if(a+t<=r.usedBytes)return r.contents.set(n.subarray(o,o+t),a),t}if(ae.expandFileStorage(r,a+t),r.contents.subarray&&n.subarray)r.contents.set(n.subarray(o,o+t),a);else for(var u=0;u<t;u++)r.contents[a+u]=n[o+u];return r.usedBytes=Math.max(r.usedBytes,a+t),t},llseek(e,n,o){var t=n;if(o===1?t+=e.position:o===2&&l.isFile(e.node.mode)&&(t+=e.node.usedBytes),t<0)throw new l.ErrnoError(28);return t},mmap(e,n,o,t,a){if(!l.isFile(e.node.mode))throw new l.ErrnoError(43);var s,r,u=e.node.contents;if(!(a&2)&&u&&u.buffer===Pe.buffer)r=!1,s=u.byteOffset;else{if(r=!0,s=Tt(n),!s)throw new l.ErrnoError(48);u&&((o>0||o+n<u.length)&&(u.subarray?u=u.subarray(o,o+n):u=Array.prototype.slice.call(u,o,o+n)),Pe.set(u,s))}return{ptr:s,allocated:r}},msync(e,n,o,t,a){return ae.stream_ops.write(e,n,0,t,o,!1),0}}},tn=e=>{var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},o=n[e];if(typeof o>"u")throw new Error(`Unknown file open mode: ${e}`);return o},dt=(e,n)=>{var o=0;return e&&(o|=365),n&&(o|=146),o},nn=async e=>{var n=await Te(e);return new Uint8Array(n)},rn=(...e)=>l.createDataFile(...e),Je=0,rt=null,sn=e=>{if(Je--,_.monitorRunDependencies?.(Je),Je==0&&rt){var n=rt;rt=null,n()}},on=e=>{Je++,_.monitorRunDependencies?.(Je)},xt=[],ln=async(e,n)=>{typeof Browser<"u"&&Browser.init();for(var o of xt)if(o.canHandle(n))return o.handle(e,n);return e},Ft=async(e,n,o,t,a,s,r,u)=>{var T=n?et.resolve(he.join2(e,n)):e;on();try{var P=o;typeof o=="string"&&(P=await nn(o)),P=await ln(P,T),u?.(),s||rn(e,n,P,t,a,r)}finally{sn()}},an=(e,n,o,t,a,s,r,u,T,P)=>{Ft(e,n,o,t,a,u,T,P).then(s).catch(r)},l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(e){this.errno=e}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(e,n,o,t){e||(e=this),this.parent=e,this.mount=e.mount,this.id=l.nextInode++,this.name=n,this.mode=o,this.rdev=t,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return l.isDir(this.mode)}get isDevice(){return l.isChrdev(this.mode)}},lookupPath(e,n={}){if(!e)throw new l.ErrnoError(44);n.follow_mount??=!0,he.isAbs(e)||(e=l.cwd()+"/"+e);e:for(var o=0;o<40;o++){for(var t=e.split("/").filter(P=>!!P),a=l.root,s="/",r=0;r<t.length;r++){var u=r===t.length-1;if(u&&n.parent)break;if(t[r]!=="."){if(t[r]===".."){if(s=he.dirname(s),l.isRoot(a)){e=s+"/"+t.slice(r+1).join("/"),o--;continue e}else a=a.parent;continue}s=he.join2(s,t[r]);try{a=l.lookupNode(a,t[r])}catch(P){if(P?.errno===44&&u&&n.noent_okay)return{path:s};throw P}if(l.isMountpoint(a)&&(!u||n.follow_mount)&&(a=a.mounted.root),l.isLink(a.mode)&&(!u||n.follow)){if(!a.node_ops.readlink)throw new l.ErrnoError(52);var T=a.node_ops.readlink(a);he.isAbs(T)||(T=he.dirname(s)+"/"+T),e=T+"/"+t.slice(r+1).join("/");continue e}}}return{path:s,node:a}}throw new l.ErrnoError(32)},getPath(e){for(var n;;){if(l.isRoot(e)){var o=e.mount.mountpoint;return n?o[o.length-1]!=="/"?`${o}/${n}`:o+n:o}n=n?`${e.name}/${n}`:e.name,e=e.parent}},hashName(e,n){for(var o=0,t=0;t<n.length;t++)o=(o<<5)-o+n.charCodeAt(t)|0;return(e+o>>>0)%l.nameTable.length},hashAddNode(e){var n=l.hashName(e.parent.id,e.name);e.name_next=l.nameTable[n],l.nameTable[n]=e},hashRemoveNode(e){var n=l.hashName(e.parent.id,e.name);if(l.nameTable[n]===e)l.nameTable[n]=e.name_next;else for(var o=l.nameTable[n];o;){if(o.name_next===e){o.name_next=e.name_next;break}o=o.name_next}},lookupNode(e,n){var o=l.mayLookup(e);if(o)throw new l.ErrnoError(o);for(var t=l.hashName(e.id,n),a=l.nameTable[t];a;a=a.name_next){var s=a.name;if(a.parent.id===e.id&&s===n)return a}return l.lookup(e,n)},createNode(e,n,o,t){var a=new l.FSNode(e,n,o,t);return l.hashAddNode(a),a},destroyNode(e){l.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var n=["r","w","rw"][e&3];return e&512&&(n+="w"),n},nodePermissions(e,n){return l.ignorePermissions?0:n.includes("r")&&!(e.mode&292)||n.includes("w")&&!(e.mode&146)||n.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!l.isDir(e.mode))return 54;var n=l.nodePermissions(e,"x");return n||(e.node_ops.lookup?0:2)},mayCreate(e,n){if(!l.isDir(e.mode))return 54;try{var o=l.lookupNode(e,n);return 20}catch{}return l.nodePermissions(e,"wx")},mayDelete(e,n,o){var t;try{t=l.lookupNode(e,n)}catch(s){return s.errno}var a=l.nodePermissions(e,"wx");if(a)return a;if(o){if(!l.isDir(t.mode))return 54;if(l.isRoot(t)||l.getPath(t)===l.cwd())return 10}else if(l.isDir(t.mode))return 31;return 0},mayOpen(e,n){return e?l.isLink(e.mode)?32:l.isDir(e.mode)&&(l.flagsToPermissionString(n)!=="r"||n&576)?31:l.nodePermissions(e,l.flagsToPermissionString(n)):44},checkOpExists(e,n){if(!e)throw new l.ErrnoError(n);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=l.MAX_OPEN_FDS;e++)if(!l.streams[e])return e;throw new l.ErrnoError(33)},getStreamChecked(e){var n=l.getStream(e);if(!n)throw new l.ErrnoError(8);return n},getStream:e=>l.streams[e],createStream(e,n=-1){return e=Object.assign(new l.FSStream,e),n==-1&&(n=l.nextfd()),e.fd=n,l.streams[n]=e,e},closeStream(e){l.streams[e]=null},dupStream(e,n=-1){var o=l.createStream(e,n);return o.stream_ops?.dup?.(o),o},doSetAttr(e,n,o){var t=e?.stream_ops.setattr,a=t?e:n;t??=n.node_ops.setattr,l.checkOpExists(t,63),t(a,o)},chrdev_stream_ops:{open(e){var n=l.getDevice(e.node.rdev);e.stream_ops=n.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new l.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,n)=>e<<8|n,registerDevice(e,n){l.devices[e]={stream_ops:n}},getDevice:e=>l.devices[e],getMounts(e){for(var n=[],o=[e];o.length;){var t=o.pop();n.push(t),o.push(...t.mounts)}return n},syncfs(e,n){typeof e=="function"&&(n=e,e=!1),l.syncFSRequests++,l.syncFSRequests>1&&fe(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var o=l.getMounts(l.root.mount),t=0;function a(u){return l.syncFSRequests--,n(u)}function s(u){if(u)return s.errored?void 0:(s.errored=!0,a(u));++t>=o.length&&a(null)}for(var r of o)r.type.syncfs?r.type.syncfs(r,e,s):s(null)},mount(e,n,o){var t=o==="/",a=!o,s;if(t&&l.root)throw new l.ErrnoError(10);if(!t&&!a){var r=l.lookupPath(o,{follow_mount:!1});if(o=r.path,s=r.node,l.isMountpoint(s))throw new l.ErrnoError(10);if(!l.isDir(s.mode))throw new l.ErrnoError(54)}var u={type:e,opts:n,mountpoint:o,mounts:[]},T=e.mount(u);return T.mount=u,u.root=T,t?l.root=T:s&&(s.mounted=u,s.mount&&s.mount.mounts.push(u)),T},unmount(e){var n=l.lookupPath(e,{follow_mount:!1});if(!l.isMountpoint(n.node))throw new l.ErrnoError(28);var o=n.node,t=o.mounted,a=l.getMounts(t);for(var[s,r]of Object.entries(l.nameTable))for(;r;){var u=r.name_next;a.includes(r.mount)&&l.destroyNode(r),r=u}o.mounted=null;var T=o.mount.mounts.indexOf(t);o.mount.mounts.splice(T,1)},lookup(e,n){return e.node_ops.lookup(e,n)},mknod(e,n,o){var t=l.lookupPath(e,{parent:!0}),a=t.node,s=he.basename(e);if(!s)throw new l.ErrnoError(28);if(s==="."||s==="..")throw new l.ErrnoError(20);var r=l.mayCreate(a,s);if(r)throw new l.ErrnoError(r);if(!a.node_ops.mknod)throw new l.ErrnoError(63);return a.node_ops.mknod(a,s,n,o)},statfs(e){return l.statfsNode(l.lookupPath(e,{follow:!0}).node)},statfsStream(e){return l.statfsNode(e.node)},statfsNode(e){var n={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:l.nextInode,ffree:l.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(n,e.node_ops.statfs(e.mount.opts.root)),n},create(e,n=438){return n&=4095,n|=32768,l.mknod(e,n,0)},mkdir(e,n=511){return n&=1023,n|=16384,l.mknod(e,n,0)},mkdirTree(e,n){var o=e.split("/"),t="";for(var a of o)if(a){(t||he.isAbs(e))&&(t+="/"),t+=a;try{l.mkdir(t,n)}catch(s){if(s.errno!=20)throw s}}},mkdev(e,n,o){return typeof o>"u"&&(o=n,n=438),n|=8192,l.mknod(e,n,o)},symlink(e,n){if(!et.resolve(e))throw new l.ErrnoError(44);var o=l.lookupPath(n,{parent:!0}),t=o.node;if(!t)throw new l.ErrnoError(44);var a=he.basename(n),s=l.mayCreate(t,a);if(s)throw new l.ErrnoError(s);if(!t.node_ops.symlink)throw new l.ErrnoError(63);return t.node_ops.symlink(t,a,e)},rename(e,n){var o=he.dirname(e),t=he.dirname(n),a=he.basename(e),s=he.basename(n),r,u,T;if(r=l.lookupPath(e,{parent:!0}),u=r.node,r=l.lookupPath(n,{parent:!0}),T=r.node,!u||!T)throw new l.ErrnoError(44);if(u.mount!==T.mount)throw new l.ErrnoError(75);var P=l.lookupNode(u,a),G=et.relative(e,t);if(G.charAt(0)!==".")throw new l.ErrnoError(28);if(G=et.relative(n,o),G.charAt(0)!==".")throw new l.ErrnoError(55);var j;try{j=l.lookupNode(T,s)}catch{}if(P!==j){var w=l.isDir(P.mode),D=l.mayDelete(u,a,w);if(D)throw new l.ErrnoError(D);if(D=j?l.mayDelete(T,s,w):l.mayCreate(T,s),D)throw new l.ErrnoError(D);if(!u.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(P)||j&&l.isMountpoint(j))throw new l.ErrnoError(10);if(T!==u&&(D=l.nodePermissions(u,"w"),D))throw new l.ErrnoError(D);l.hashRemoveNode(P);try{u.node_ops.rename(P,T,s),P.parent=T}catch(M){throw M}finally{l.hashAddNode(P)}}},rmdir(e){var n=l.lookupPath(e,{parent:!0}),o=n.node,t=he.basename(e),a=l.lookupNode(o,t),s=l.mayDelete(o,t,!0);if(s)throw new l.ErrnoError(s);if(!o.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(a))throw new l.ErrnoError(10);o.node_ops.rmdir(o,t),l.destroyNode(a)},readdir(e){var n=l.lookupPath(e,{follow:!0}),o=n.node,t=l.checkOpExists(o.node_ops.readdir,54);return t(o)},unlink(e){var n=l.lookupPath(e,{parent:!0}),o=n.node;if(!o)throw new l.ErrnoError(44);var t=he.basename(e),a=l.lookupNode(o,t),s=l.mayDelete(o,t,!1);if(s)throw new l.ErrnoError(s);if(!o.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(a))throw new l.ErrnoError(10);o.node_ops.unlink(o,t),l.destroyNode(a)},readlink(e){var n=l.lookupPath(e),o=n.node;if(!o)throw new l.ErrnoError(44);if(!o.node_ops.readlink)throw new l.ErrnoError(28);return o.node_ops.readlink(o)},stat(e,n){var o=l.lookupPath(e,{follow:!n}),t=o.node,a=l.checkOpExists(t.node_ops.getattr,63);return a(t)},fstat(e){var n=l.getStreamChecked(e),o=n.node,t=n.stream_ops.getattr,a=t?n:o;return t??=o.node_ops.getattr,l.checkOpExists(t,63),t(a)},lstat(e){return l.stat(e,!0)},doChmod(e,n,o,t){l.doSetAttr(e,n,{mode:o&4095|n.mode&-4096,ctime:Date.now(),dontFollow:t})},chmod(e,n,o){var t;if(typeof e=="string"){var a=l.lookupPath(e,{follow:!o});t=a.node}else t=e;l.doChmod(null,t,n,o)},lchmod(e,n){l.chmod(e,n,!0)},fchmod(e,n){var o=l.getStreamChecked(e);l.doChmod(o,o.node,n,!1)},doChown(e,n,o){l.doSetAttr(e,n,{timestamp:Date.now(),dontFollow:o})},chown(e,n,o,t){var a;if(typeof e=="string"){var s=l.lookupPath(e,{follow:!t});a=s.node}else a=e;l.doChown(null,a,t)},lchown(e,n,o){l.chown(e,n,o,!0)},fchown(e,n,o){var t=l.getStreamChecked(e);l.doChown(t,t.node,!1)},doTruncate(e,n,o){if(l.isDir(n.mode))throw new l.ErrnoError(31);if(!l.isFile(n.mode))throw new l.ErrnoError(28);var t=l.nodePermissions(n,"w");if(t)throw new l.ErrnoError(t);l.doSetAttr(e,n,{size:o,timestamp:Date.now()})},truncate(e,n){if(n<0)throw new l.ErrnoError(28);var o;if(typeof e=="string"){var t=l.lookupPath(e,{follow:!0});o=t.node}else o=e;l.doTruncate(null,o,n)},ftruncate(e,n){var o=l.getStreamChecked(e);if(n<0||(o.flags&2097155)===0)throw new l.ErrnoError(28);l.doTruncate(o,o.node,n)},utime(e,n,o){var t=l.lookupPath(e,{follow:!0}),a=t.node,s=l.checkOpExists(a.node_ops.setattr,63);s(a,{atime:n,mtime:o})},open(e,n,o=438){if(e==="")throw new l.ErrnoError(44);n=typeof n=="string"?tn(n):n,n&64?o=o&4095|32768:o=0;var t,a;if(typeof e=="object")t=e;else{a=e.endsWith("/");var s=l.lookupPath(e,{follow:!(n&131072),noent_okay:!0});t=s.node,e=s.path}var r=!1;if(n&64)if(t){if(n&128)throw new l.ErrnoError(20)}else{if(a)throw new l.ErrnoError(31);t=l.mknod(e,o|511,0),r=!0}if(!t)throw new l.ErrnoError(44);if(l.isChrdev(t.mode)&&(n&=-513),n&65536&&!l.isDir(t.mode))throw new l.ErrnoError(54);if(!r){var u=l.mayOpen(t,n);if(u)throw new l.ErrnoError(u)}n&512&&!r&&l.truncate(t,0),n&=-131713;var T=l.createStream({node:t,path:l.getPath(t),flags:n,seekable:!0,position:0,stream_ops:t.stream_ops,ungotten:[],error:!1});return T.stream_ops.open&&T.stream_ops.open(T),r&&l.chmod(t,o&511),_.logReadFiles&&!(n&1)&&(e in l.readFiles||(l.readFiles[e]=1)),T},close(e){if(l.isClosed(e))throw new l.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(n){throw n}finally{l.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,n,o){if(l.isClosed(e))throw new l.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new l.ErrnoError(70);if(o!=0&&o!=1&&o!=2)throw new l.ErrnoError(28);return e.position=e.stream_ops.llseek(e,n,o),e.ungotten=[],e.position},read(e,n,o,t,a){if(t<0||a<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.read)throw new l.ErrnoError(28);var s=typeof a<"u";if(!s)a=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var r=e.stream_ops.read(e,n,o,t,a);return s||(e.position+=r),r},write(e,n,o,t,a,s){if(t<0||a<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===0)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.write)throw new l.ErrnoError(28);e.seekable&&e.flags&1024&&l.llseek(e,0,2);var r=typeof a<"u";if(!r)a=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var u=e.stream_ops.write(e,n,o,t,a,s);return r||(e.position+=u),u},mmap(e,n,o,t,a){if((t&2)!==0&&(a&2)===0&&(e.flags&2097155)!==2)throw new l.ErrnoError(2);if((e.flags&2097155)===1)throw new l.ErrnoError(2);if(!e.stream_ops.mmap)throw new l.ErrnoError(43);if(!n)throw new l.ErrnoError(28);return e.stream_ops.mmap(e,n,o,t,a)},msync(e,n,o,t,a){return e.stream_ops.msync?e.stream_ops.msync(e,n,o,t,a):0},ioctl(e,n,o){if(!e.stream_ops.ioctl)throw new l.ErrnoError(59);return e.stream_ops.ioctl(e,n,o)},readFile(e,n={}){n.flags=n.flags||0,n.encoding=n.encoding||"binary",n.encoding!=="utf8"&&n.encoding!=="binary"&&ze(`Invalid encoding type "${n.encoding}"`);var o=l.open(e,n.flags),t=l.stat(e),a=t.size,s=new Uint8Array(a);return l.read(o,s,0,a,0),n.encoding==="utf8"&&(s=nt(s)),l.close(o),s},writeFile(e,n,o={}){o.flags=o.flags||577;var t=l.open(e,o.flags,o.mode);typeof n=="string"&&(n=new Uint8Array(ft(n))),ArrayBuffer.isView(n)?l.write(t,n,0,n.byteLength,void 0,o.canOwn):ze("Unsupported data type"),l.close(t)},cwd:()=>l.currentPath,chdir(e){var n=l.lookupPath(e,{follow:!0});if(n.node===null)throw new l.ErrnoError(44);if(!l.isDir(n.node.mode))throw new l.ErrnoError(54);var o=l.nodePermissions(n.node,"x");if(o)throw new l.ErrnoError(o);l.currentPath=n.path},createDefaultDirectories(){l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices(){l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(t,a,s,r,u)=>r,llseek:()=>0}),l.mkdev("/dev/null",l.makedev(1,3)),Ke.register(l.makedev(5,0),Ke.default_tty_ops),Ke.register(l.makedev(6,0),Ke.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var e=new Uint8Array(1024),n=0,o=()=>(n===0&&(St(e),n=e.byteLength),e[--n]);l.createDevice("/dev","random",o),l.createDevice("/dev","urandom",o),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories(){l.mkdir("/proc");var e=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount(){var n=l.createNode(e,"fd",16895,73);return n.stream_ops={llseek:ae.stream_ops.llseek},n.node_ops={lookup(o,t){var a=+t,s=l.getStreamChecked(a),r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>s.path},id:a+1};return r.parent=r,r},readdir(){return Array.from(l.streams.entries()).filter(([o,t])=>t).map(([o,t])=>o.toString())}},n}},{},"/proc/self/fd")},createStandardStreams(e,n,o){e?l.createDevice("/dev","stdin",e):l.symlink("/dev/tty","/dev/stdin"),n?l.createDevice("/dev","stdout",null,n):l.symlink("/dev/tty","/dev/stdout"),o?l.createDevice("/dev","stderr",null,o):l.symlink("/dev/tty1","/dev/stderr"),l.open("/dev/stdin",0),l.open("/dev/stdout",1),l.open("/dev/stderr",1)},staticInit(){l.nameTable=new Array(4096),l.mount(ae,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:ae}},init(e,n,o){l.initialized=!0,e??=_.stdin,n??=_.stdout,o??=_.stderr,l.createStandardStreams(e,n,o)},quit(){l.initialized=!1;for(var e of l.streams)e&&l.close(e)},findObject(e,n){var o=l.analyzePath(e,n);return o.exists?o.object:null},analyzePath(e,n){try{var o=l.lookupPath(e,{follow:!n});e=o.path}catch{}var t={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var o=l.lookupPath(e,{parent:!0});t.parentExists=!0,t.parentPath=o.path,t.parentObject=o.node,t.name=he.basename(e),o=l.lookupPath(e,{follow:!n}),t.exists=!0,t.path=o.path,t.object=o.node,t.name=o.node.name,t.isRoot=o.path==="/"}catch(a){t.error=a.errno}return t},createPath(e,n,o,t){e=typeof e=="string"?e:l.getPath(e);for(var a=n.split("/").reverse();a.length;){var s=a.pop();if(s){var r=he.join2(e,s);try{l.mkdir(r)}catch(u){if(u.errno!=20)throw u}e=r}}return r},createFile(e,n,o,t,a){var s=he.join2(typeof e=="string"?e:l.getPath(e),n),r=dt(t,a);return l.create(s,r)},createDataFile(e,n,o,t,a,s){var r=n;e&&(e=typeof e=="string"?e:l.getPath(e),r=n?he.join2(e,n):e);var u=dt(t,a),T=l.create(r,u);if(o){if(typeof o=="string"){for(var P=new Array(o.length),G=0,j=o.length;G<j;++G)P[G]=o.charCodeAt(G);o=P}l.chmod(T,u|146);var w=l.open(T,577);l.write(w,o,0,o.length,0,s),l.close(w),l.chmod(T,u)}},createDevice(e,n,o,t){var a=he.join2(typeof e=="string"?e:l.getPath(e),n),s=dt(!!o,!!t);l.createDevice.major??=64;var r=l.makedev(l.createDevice.major++,0);return l.registerDevice(r,{open(u){u.seekable=!1},close(u){t?.buffer?.length&&t(10)},read(u,T,P,G,j){for(var w=0,D=0;D<G;D++){var M;try{M=o()}catch{throw new l.ErrnoError(29)}if(M===void 0&&w===0)throw new l.ErrnoError(6);if(M==null)break;w++,T[P+D]=M}return w&&(u.node.atime=Date.now()),w},write(u,T,P,G,j){for(var w=0;w<G;w++)try{t(T[P+w])}catch{throw new l.ErrnoError(29)}return G&&(u.node.mtime=u.node.ctime=Date.now()),w}}),l.mkdev(a,s,r)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(globalThis.XMLHttpRequest)ze("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else try{e.contents=we(e.url)}catch{throw new l.ErrnoError(29)}},createLazyFile(e,n,o,t,a){class s{lengthKnown=!1;chunks=[];get(w){if(!(w>this.length-1||w<0)){var D=w%this.chunkSize,M=w/this.chunkSize|0;return this.getter(M)[D]}}setDataGetter(w){this.getter=w}cacheLength(){var w=new XMLHttpRequest;w.open("HEAD",o,!1),w.send(null),w.status>=200&&w.status<300||w.status===304||ze("Couldn't load "+o+". Status: "+w.status);var D=Number(w.getResponseHeader("Content-length")),M,C=(M=w.getResponseHeader("Accept-Ranges"))&&M==="bytes",V=(M=w.getResponseHeader("Content-Encoding"))&&M==="gzip",B=1024*1024;C||(B=D);var q=(x,L)=>{x>L&&ze("invalid range ("+x+", "+L+") or no bytes requested!"),L>D-1&&ze("only "+D+" bytes available! programmer error!");var E=new XMLHttpRequest;return E.open("GET",o,!1),D!==B&&E.setRequestHeader("Range","bytes="+x+"-"+L),E.responseType="arraybuffer",E.overrideMimeType&&E.overrideMimeType("text/plain; charset=x-user-defined"),E.send(null),E.status>=200&&E.status<300||E.status===304||ze("Couldn't load "+o+". Status: "+E.status),E.response!==void 0?new Uint8Array(E.response||[]):ft(E.responseText||"")},g=this;g.setDataGetter(x=>{var L=x*B,E=(x+1)*B-1;return E=Math.min(E,D-1),typeof g.chunks[x]>"u"&&(g.chunks[x]=q(L,E)),typeof g.chunks[x]>"u"&&ze("doXHR failed!"),g.chunks[x]}),(V||!D)&&(B=D=1,D=this.getter(0).length,B=D,ie("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=D,this._chunkSize=B,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(globalThis.XMLHttpRequest){qe||ze("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var r=new s,u={isDevice:!1,contents:r}}else var u={isDevice:!1,url:o};var T=l.createFile(e,n,u,t,a);u.contents?T.contents=u.contents:u.url&&(T.contents=null,T.url=u.url),Object.defineProperties(T,{usedBytes:{get:function(){return this.contents.length}}});var P={};for(const[j,w]of Object.entries(T.stream_ops))P[j]=(...D)=>(l.forceLoadFile(T),w(...D));function G(j,w,D,M,C){var V=j.node.contents;if(C>=V.length)return 0;var B=Math.min(V.length-C,M);if(V.slice)for(var q=0;q<B;q++)w[D+q]=V[C+q];else for(var q=0;q<B;q++)w[D+q]=V.get(C+q);return B}return P.read=(j,w,D,M,C)=>(l.forceLoadFile(T),G(j,w,D,M,C)),P.mmap=(j,w,D,M,C)=>{l.forceLoadFile(T);var V=Tt(w);if(!V)throw new l.ErrnoError(48);return G(j,Pe,V,w,D),{ptr:V,allocated:!0}},T.stream_ops=P,T}},cn=(e,n,o)=>{if(!e)return"";var t=At(Ue,e,n);return Et.decode(Ue.subarray(e,t))},ue={DEFAULT_POLLMASK:5,calculateAt(e,n,o){if(he.isAbs(n))return n;var t;if(e===-100)t=l.cwd();else{var a=ue.getStreamFromFD(e);t=a.path}if(n.length==0){if(!o)throw new l.ErrnoError(44);return t}return t+"/"+n},writeStat(e,n){me[e>>2]=n.dev,me[e+4>>2]=n.mode,me[e+8>>2]=n.nlink,me[e+12>>2]=n.uid,me[e+16>>2]=n.gid,me[e+20>>2]=n.rdev,Re[e+24>>3]=BigInt(n.size),pe[e+32>>2]=4096,pe[e+36>>2]=n.blocks;var o=n.atime.getTime(),t=n.mtime.getTime(),a=n.ctime.getTime();return Re[e+40>>3]=BigInt(Math.floor(o/1e3)),me[e+48>>2]=o%1e3*1e3*1e3,Re[e+56>>3]=BigInt(Math.floor(t/1e3)),me[e+64>>2]=t%1e3*1e3*1e3,Re[e+72>>3]=BigInt(Math.floor(a/1e3)),me[e+80>>2]=a%1e3*1e3*1e3,Re[e+88>>3]=BigInt(n.ino),0},writeStatFs(e,n){me[e+4>>2]=n.bsize,me[e+60>>2]=n.bsize,Re[e+8>>3]=BigInt(n.blocks),Re[e+16>>3]=BigInt(n.bfree),Re[e+24>>3]=BigInt(n.bavail),Re[e+32>>3]=BigInt(n.files),Re[e+40>>3]=BigInt(n.ffree),me[e+48>>2]=n.fsid,me[e+64>>2]=n.flags,me[e+56>>2]=n.namelen},doMsync(e,n,o,t,a){if(!l.isFile(n.node.mode))throw new l.ErrnoError(43);if(t&2)return 0;var s=Ue.slice(e,e+o);l.msync(n,s,a,o,t)},getStreamFromFD(e){var n=l.getStreamChecked(e);return n},varargs:void 0,getStr(e){var n=cn(e);return n}};function un(e,n){try{return e=ue.getStr(e),l.chmod(e,n),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function _n(e,n,o,t){try{if(n=ue.getStr(n),n=ue.calculateAt(e,n),o&-8)return-28;var a=l.lookupPath(n,{follow:!0}),s=a.node;if(!s)return-44;var r="";return o&4&&(r+="r"),o&2&&(r+="w"),o&1&&(r+="x"),r&&l.nodePermissions(s,r)?-2:0}catch(u){if(typeof l>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function fn(e,n){try{return l.fchmod(e,n),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function dn(e,n,o){try{return l.fchown(e,n,o),0}catch(t){if(typeof l>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}var at=()=>{var e=pe[+ue.varargs>>2];return ue.varargs+=4,e},tt=at;function pn(e,n,o){ue.varargs=o;try{var t=ue.getStreamFromFD(e);switch(n){case 0:{var a=at();if(a<0)return-28;for(;l.streams[a];)a++;var s;return s=l.dupStream(t,a),s.fd}case 1:case 2:return 0;case 3:return t.flags;case 4:{var a=at();return t.flags|=a,0}case 12:{var a=tt(),r=0;return Ze[a+r>>1]=2,0}case 13:case 14:return 0}return-28}catch(u){if(typeof l>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function hn(e,n){try{return ue.writeStat(n,l.fstat(e))}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var mn=9007199254740992,gn=-9007199254740992,it=e=>e<gn||e>mn?NaN:Number(e);function bn(e,n){n=it(n);try{return isNaN(n)?-61:(l.ftruncate(e,n),0)}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var Xe=(e,n,o)=>It(e,Ue,n,o);function yn(e,n){try{if(n===0)return-28;var o=l.cwd(),t=lt(o)+1;return n<t?-68:(Xe(o,e,n),t)}catch(a){if(typeof l>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function qn(e,n,o){ue.varargs=o;try{var t=ue.getStreamFromFD(e);switch(n){case 21509:return t.tty?0:-59;case 21505:{if(!t.tty)return-59;if(t.tty.ops.ioctl_tcgets){var a=t.tty.ops.ioctl_tcgets(t),s=tt();pe[s>>2]=a.c_iflag||0,pe[s+4>>2]=a.c_oflag||0,pe[s+8>>2]=a.c_cflag||0,pe[s+12>>2]=a.c_lflag||0;for(var r=0;r<32;r++)Pe[s+r+17]=a.c_cc[r]||0;return 0}return 0}case 21510:case 21511:case 21512:return t.tty?0:-59;case 21506:case 21507:case 21508:{if(!t.tty)return-59;if(t.tty.ops.ioctl_tcsets){for(var s=tt(),u=pe[s>>2],T=pe[s+4>>2],P=pe[s+8>>2],G=pe[s+12>>2],j=[],r=0;r<32;r++)j.push(Pe[s+r+17]);return t.tty.ops.ioctl_tcsets(t.tty,n,{c_iflag:u,c_oflag:T,c_cflag:P,c_lflag:G,c_cc:j})}return 0}case 21519:{if(!t.tty)return-59;var s=tt();return pe[s>>2]=0,0}case 21520:return t.tty?-28:-59;case 21537:case 21531:{var s=tt();return l.ioctl(t,n,s)}case 21523:{if(!t.tty)return-59;if(t.tty.ops.ioctl_tiocgwinsz){var w=t.tty.ops.ioctl_tiocgwinsz(t.tty),s=tt();Ze[s>>1]=w[0],Ze[s+2>>1]=w[1]}return 0}case 21524:return t.tty?0:-59;case 21515:return t.tty?0:-59;default:return-28}}catch(D){if(typeof l>"u"||D.name!=="ErrnoError")throw D;return-D.errno}}function vn(e,n){try{return e=ue.getStr(e),ue.writeStat(n,l.lstat(e))}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function wn(e,n,o){try{return n=ue.getStr(n),n=ue.calculateAt(e,n),l.mkdir(n,o,0),0}catch(t){if(typeof l>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function Sn(e,n,o,t){try{n=ue.getStr(n);var a=t&256,s=t&4096;return t=t&-6401,n=ue.calculateAt(e,n,s),ue.writeStat(o,a?l.lstat(n):l.stat(n))}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function En(e,n,o,t){ue.varargs=t;try{n=ue.getStr(n),n=ue.calculateAt(e,n);var a=t?at():0;return l.open(n,o,a).fd}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function An(e,n,o,t){try{if(n=ue.getStr(n),n=ue.calculateAt(e,n),t<=0)return-28;var a=l.readlink(n),s=Math.min(t,lt(a)),r=Pe[o+s];return Xe(a,o,t+1),Pe[o+s]=r,s}catch(u){if(typeof l>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function In(e){try{return e=ue.getStr(e),l.rmdir(e),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function kn(e,n){try{return e=ue.getStr(e),ue.writeStat(n,l.stat(e))}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Tn(e,n,o){try{if(n=ue.getStr(n),n=ue.calculateAt(e,n),!o)l.unlink(n);else if(o===512)l.rmdir(n);else return-28;return 0}catch(t){if(typeof l>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}var Ot=e=>me[e>>2]+pe[e+4>>2]*4294967296;function xn(e,n,o,t){try{n=ue.getStr(n),n=ue.calculateAt(e,n,!0);var a=Date.now(),s,r;if(!o)s=a,r=a;else{var u=Ot(o),T=pe[o+8>>2];T==1073741823?s=a:T==1073741822?s=null:s=u*1e3+T/(1e3*1e3),o+=16,u=Ot(o),T=pe[o+8>>2],T==1073741823?r=a:T==1073741822?r=null:r=u*1e3+T/(1e3*1e3)}return(r??s)!==null&&l.utime(n,s,r),0}catch(P){if(typeof l>"u"||P.name!=="ErrnoError")throw P;return-P.errno}}var Fn=e=>e%4===0&&(e%100!==0||e%400===0),On=[0,31,60,91,121,152,182,213,244,274,305,335],Pn=[0,31,59,90,120,151,181,212,243,273,304,334],Ln=e=>{var n=Fn(e.getFullYear()),o=n?On:Pn,t=o[e.getMonth()]+e.getDate()-1;return t};function Cn(e,n){e=it(e);var o=new Date(e*1e3);pe[n>>2]=o.getSeconds(),pe[n+4>>2]=o.getMinutes(),pe[n+8>>2]=o.getHours(),pe[n+12>>2]=o.getDate(),pe[n+16>>2]=o.getMonth(),pe[n+20>>2]=o.getFullYear()-1900,pe[n+24>>2]=o.getDay();var t=Ln(o)|0;pe[n+28>>2]=t,pe[n+36>>2]=-(o.getTimezoneOffset()*60);var a=new Date(o.getFullYear(),0,1),s=new Date(o.getFullYear(),6,1).getTimezoneOffset(),r=a.getTimezoneOffset(),u=(s!=r&&o.getTimezoneOffset()==Math.min(r,s))|0;pe[n+32>>2]=u}function Nn(e,n,o,t,a,s,r){a=it(a);try{var u=ue.getStreamFromFD(t),T=l.mmap(u,e,a,n,o),P=T.ptr;return pe[s>>2]=T.allocated,me[r>>2]=P,0}catch(G){if(typeof l>"u"||G.name!=="ErrnoError")throw G;return-G.errno}}function Rn(e,n,o,t,a,s){s=it(s);try{var r=ue.getStreamFromFD(a);o&2&&ue.doMsync(e,r,n,t,s)}catch(u){if(typeof l>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}var Dn=(e,n,o,t)=>{var a=new Date().getFullYear(),s=new Date(a,0,1),r=new Date(a,6,1),u=s.getTimezoneOffset(),T=r.getTimezoneOffset(),P=Math.max(u,T);me[e>>2]=P*60,pe[n>>2]=+(u!=T);var G=D=>{var M=D>=0?"-":"+",C=Math.abs(D),V=String(Math.floor(C/60)).padStart(2,"0"),B=String(C%60).padStart(2,"0");return`UTC${M}${V}${B}`},j=G(u),w=G(T);T<u?(Xe(j,o,17),Xe(w,t,17)):(Xe(j,t,17),Xe(w,o,17))},Pt=()=>performance.now(),Lt=()=>Date.now(),Mn=e=>e>=0&&e<=3;function jn(e,n,o){if(!Mn(e))return 28;var t;e===0?t=Lt():t=Pt();var a=Math.round(t*1e3*1e3);return Re[o>>3]=BigInt(a),0}var Ct=()=>2147483648,Bn=()=>Ct(),Un=e=>{var n=Ve.buffer.byteLength,o=(e-n+65535)/65536|0;try{return Ve.grow(o),yt(),1}catch{}},Wn=e=>{var n=Ue.length;e>>>=0;var o=Ct();if(e>o)return!1;for(var t=1;t<=4;t*=2){var a=n*(1+.2/t);a=Math.min(a,e+100663296);var s=Math.min(o,kt(Math.max(e,a),65536)),r=Un(s);if(r)return!0}return!1},pt={},zn=()=>ge||"./this.program",st=()=>{if(!st.strings){var e=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:zn()};for(var o in pt)pt[o]===void 0?delete n[o]:n[o]=pt[o];var t=[];for(var o in n)t.push(`${o}=${n[o]}`);st.strings=t}return st.strings},Qn=(e,n)=>{var o=0,t=0;for(var a of st()){var s=n+o;me[e+t>>2]=s,o+=Xe(a,s,1/0)+1,t+=4}return 0},Hn=(e,n)=>{var o=st();me[e>>2]=o.length;var t=0;for(var a of o)t+=lt(a)+1;return me[n>>2]=t,0};function Vn(e){try{var n=ue.getStreamFromFD(e);return l.close(n),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function $n(e,n){try{var o=0,t=0,a=0,s=ue.getStreamFromFD(e),r=s.tty?2:l.isDir(s.mode)?3:l.isLink(s.mode)?7:4;return Pe[n]=r,Ze[n+2>>1]=a,Re[n+8>>3]=BigInt(o),Re[n+16>>3]=BigInt(t),0}catch(u){if(typeof l>"u"||u.name!=="ErrnoError")throw u;return u.errno}}var Gn=(e,n,o,t)=>{for(var a=0,s=0;s<o;s++){var r=me[n>>2],u=me[n+4>>2];n+=8;var T=l.read(e,Pe,r,u,t);if(T<0)return-1;if(a+=T,T<u)break}return a};function Kn(e,n,o,t){try{var a=ue.getStreamFromFD(e),s=Gn(a,n,o);return me[t>>2]=s,0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return r.errno}}function Jn(e,n,o,t){n=it(n);try{if(isNaN(n))return 61;var a=ue.getStreamFromFD(e);return l.llseek(a,n,o),Re[t>>3]=BigInt(a.position),a.getdents&&n===0&&o===0&&(a.getdents=null),0}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return s.errno}}function Xn(e){try{var n=ue.getStreamFromFD(e);return n.stream_ops?.fsync?n.stream_ops.fsync(n):0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return o.errno}}var Yn=(e,n,o,t)=>{for(var a=0,s=0;s<o;s++){var r=me[n>>2],u=me[n+4>>2];n+=8;var T=l.write(e,Pe,r,u,t);if(T<0)return-1;if(a+=T,T<u)break}return a};function Zn(e,n,o,t){try{var a=ue.getStreamFromFD(e),s=Yn(a,n,o);return me[t>>2]=s,0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return r.errno}}if(l.createPreloadedFile=an,l.preloadFile=Ft,l.staticInit(),jt(),_.noExitRuntime&&_.noExitRuntime,_.preloadPlugins&&(xt=_.preloadPlugins),_.print&&(ie=_.print),_.printErr&&(fe=_.printErr),_.wasmBinary&&(xe=_.wasmBinary),_.arguments&&_.arguments,_.thisProgram&&(ge=_.thisProgram),_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.shift()();_.wasmMemory=Ve;var Nt;function er(e){_._sqlite3_status64=e.sqlite3_status64,_._sqlite3_status=e.sqlite3_status,_._sqlite3_db_status64=e.sqlite3_db_status64,_._sqlite3_msize=e.sqlite3_msize,_._sqlite3_db_status=e.sqlite3_db_status,_._sqlite3_vfs_find=e.sqlite3_vfs_find,_._sqlite3_initialize=e.sqlite3_initialize,_._sqlite3_malloc=e.sqlite3_malloc,_._sqlite3_free=e.sqlite3_free,_._sqlite3_vfs_register=e.sqlite3_vfs_register,_._sqlite3_vfs_unregister=e.sqlite3_vfs_unregister,_._sqlite3_malloc64=e.sqlite3_malloc64,_._sqlite3_realloc=e.sqlite3_realloc,_._sqlite3_realloc64=e.sqlite3_realloc64,_._sqlite3_value_text=e.sqlite3_value_text,_._sqlite3_randomness=e.sqlite3_randomness,_._sqlite3_stricmp=e.sqlite3_stricmp,_._sqlite3_strnicmp=e.sqlite3_strnicmp,_._sqlite3_uri_parameter=e.sqlite3_uri_parameter,_._sqlite3_uri_boolean=e.sqlite3_uri_boolean,_._sqlite3_serialize=e.sqlite3_serialize,_._sqlite3_prepare_v2=e.sqlite3_prepare_v2,_._sqlite3_step=e.sqlite3_step,_._sqlite3_column_int64=e.sqlite3_column_int64,_._sqlite3_reset=e.sqlite3_reset,_._sqlite3_exec=e.sqlite3_exec,_._sqlite3_column_int=e.sqlite3_column_int,_._sqlite3_finalize=e.sqlite3_finalize,_._sqlite3_file_control=e.sqlite3_file_control,_._sqlite3_column_name=e.sqlite3_column_name,_._sqlite3_column_text=e.sqlite3_column_text,_._sqlite3_column_type=e.sqlite3_column_type,_._sqlite3_errmsg=e.sqlite3_errmsg,_._sqlite3_deserialize=e.sqlite3_deserialize,_._sqlite3_clear_bindings=e.sqlite3_clear_bindings,_._sqlite3_value_blob=e.sqlite3_value_blob,_._sqlite3_value_bytes=e.sqlite3_value_bytes,_._sqlite3_value_double=e.sqlite3_value_double,_._sqlite3_value_int=e.sqlite3_value_int,_._sqlite3_value_int64=e.sqlite3_value_int64,_._sqlite3_value_subtype=e.sqlite3_value_subtype,_._sqlite3_value_pointer=e.sqlite3_value_pointer,_._sqlite3_value_type=e.sqlite3_value_type,_._sqlite3_value_nochange=e.sqlite3_value_nochange,_._sqlite3_value_frombind=e.sqlite3_value_frombind,_._sqlite3_value_dup=e.sqlite3_value_dup,_._sqlite3_value_free=e.sqlite3_value_free,_._sqlite3_result_blob=e.sqlite3_result_blob,_._sqlite3_result_error_toobig=e.sqlite3_result_error_toobig,_._sqlite3_result_error_nomem=e.sqlite3_result_error_nomem,_._sqlite3_result_double=e.sqlite3_result_double,_._sqlite3_result_error=e.sqlite3_result_error,_._sqlite3_result_int=e.sqlite3_result_int,_._sqlite3_result_int64=e.sqlite3_result_int64,_._sqlite3_result_null=e.sqlite3_result_null,_._sqlite3_result_pointer=e.sqlite3_result_pointer,_._sqlite3_result_subtype=e.sqlite3_result_subtype,_._sqlite3_result_text=e.sqlite3_result_text,_._sqlite3_result_zeroblob=e.sqlite3_result_zeroblob,_._sqlite3_result_zeroblob64=e.sqlite3_result_zeroblob64,_._sqlite3_result_error_code=e.sqlite3_result_error_code,_._sqlite3_user_data=e.sqlite3_user_data,_._sqlite3_context_db_handle=e.sqlite3_context_db_handle,_._sqlite3_vtab_nochange=e.sqlite3_vtab_nochange,_._sqlite3_vtab_in_first=e.sqlite3_vtab_in_first,_._sqlite3_vtab_in_next=e.sqlite3_vtab_in_next,_._sqlite3_aggregate_context=e.sqlite3_aggregate_context,_._sqlite3_get_auxdata=e.sqlite3_get_auxdata,_._sqlite3_set_auxdata=e.sqlite3_set_auxdata,_._sqlite3_column_count=e.sqlite3_column_count,_._sqlite3_data_count=e.sqlite3_data_count,_._sqlite3_column_blob=e.sqlite3_column_blob,_._sqlite3_column_bytes=e.sqlite3_column_bytes,_._sqlite3_column_double=e.sqlite3_column_double,_._sqlite3_column_value=e.sqlite3_column_value,_._sqlite3_column_decltype=e.sqlite3_column_decltype,_._sqlite3_column_database_name=e.sqlite3_column_database_name,_._sqlite3_column_table_name=e.sqlite3_column_table_name,_._sqlite3_column_origin_name=e.sqlite3_column_origin_name,_._sqlite3_bind_blob=e.sqlite3_bind_blob,_._sqlite3_bind_double=e.sqlite3_bind_double,_._sqlite3_bind_int=e.sqlite3_bind_int,_._sqlite3_bind_int64=e.sqlite3_bind_int64,_._sqlite3_bind_null=e.sqlite3_bind_null,_._sqlite3_bind_pointer=e.sqlite3_bind_pointer,_._sqlite3_bind_text=e.sqlite3_bind_text,_._sqlite3_bind_parameter_count=e.sqlite3_bind_parameter_count,_._sqlite3_bind_parameter_name=e.sqlite3_bind_parameter_name,_._sqlite3_bind_parameter_index=e.sqlite3_bind_parameter_index,_._sqlite3_db_handle=e.sqlite3_db_handle,_._sqlite3_stmt_readonly=e.sqlite3_stmt_readonly,_._sqlite3_stmt_isexplain=e.sqlite3_stmt_isexplain,_._sqlite3_stmt_explain=e.sqlite3_stmt_explain,_._sqlite3_stmt_busy=e.sqlite3_stmt_busy,_._sqlite3_stmt_status=e.sqlite3_stmt_status,_._sqlite3_sql=e.sqlite3_sql,_._sqlite3_expanded_sql=e.sqlite3_expanded_sql,_._sqlite3_preupdate_old=e.sqlite3_preupdate_old,_._sqlite3_preupdate_count=e.sqlite3_preupdate_count,_._sqlite3_preupdate_depth=e.sqlite3_preupdate_depth,_._sqlite3_preupdate_blobwrite=e.sqlite3_preupdate_blobwrite,_._sqlite3_preupdate_new=e.sqlite3_preupdate_new,_._sqlite3_value_numeric_type=e.sqlite3_value_numeric_type,_._sqlite3_set_authorizer=e.sqlite3_set_authorizer,_._sqlite3_strglob=e.sqlite3_strglob,_._sqlite3_strlike=e.sqlite3_strlike,_._sqlite3_auto_extension=e.sqlite3_auto_extension,_._sqlite3_cancel_auto_extension=e.sqlite3_cancel_auto_extension,_._sqlite3_reset_auto_extension=e.sqlite3_reset_auto_extension,_._sqlite3_prepare_v3=e.sqlite3_prepare_v3,_._sqlite3_create_module=e.sqlite3_create_module,_._sqlite3_create_module_v2=e.sqlite3_create_module_v2,_._sqlite3_drop_modules=e.sqlite3_drop_modules,_._sqlite3_declare_vtab=e.sqlite3_declare_vtab,_._sqlite3_vtab_on_conflict=e.sqlite3_vtab_on_conflict,_._sqlite3_vtab_collation=e.sqlite3_vtab_collation,_._sqlite3_vtab_in=e.sqlite3_vtab_in,_._sqlite3_vtab_rhs_value=e.sqlite3_vtab_rhs_value,_._sqlite3_vtab_distinct=e.sqlite3_vtab_distinct,_._sqlite3_keyword_name=e.sqlite3_keyword_name,_._sqlite3_keyword_count=e.sqlite3_keyword_count,_._sqlite3_keyword_check=e.sqlite3_keyword_check,_._sqlite3_complete=e.sqlite3_complete,_._sqlite3_libversion=e.sqlite3_libversion,_._sqlite3_libversion_number=e.sqlite3_libversion_number,_._sqlite3_shutdown=e.sqlite3_shutdown,_._sqlite3_last_insert_rowid=e.sqlite3_last_insert_rowid,_._sqlite3_set_last_insert_rowid=e.sqlite3_set_last_insert_rowid,_._sqlite3_changes64=e.sqlite3_changes64,_._sqlite3_changes=e.sqlite3_changes,_._sqlite3_total_changes64=e.sqlite3_total_changes64,_._sqlite3_total_changes=e.sqlite3_total_changes,_._sqlite3_txn_state=e.sqlite3_txn_state,_._sqlite3_close_v2=e.sqlite3_close_v2,_._sqlite3_busy_handler=e.sqlite3_busy_handler,_._sqlite3_progress_handler=e.sqlite3_progress_handler,_._sqlite3_busy_timeout=e.sqlite3_busy_timeout,_._sqlite3_interrupt=e.sqlite3_interrupt,_._sqlite3_is_interrupted=e.sqlite3_is_interrupted,_._sqlite3_create_function=e.sqlite3_create_function,_._sqlite3_create_function_v2=e.sqlite3_create_function_v2,_._sqlite3_create_window_function=e.sqlite3_create_window_function,_._sqlite3_overload_function=e.sqlite3_overload_function,_._sqlite3_trace_v2=e.sqlite3_trace_v2,_._sqlite3_commit_hook=e.sqlite3_commit_hook,_._sqlite3_update_hook=e.sqlite3_update_hook,_._sqlite3_rollback_hook=e.sqlite3_rollback_hook,_._sqlite3_preupdate_hook=e.sqlite3_preupdate_hook,_._sqlite3_set_errmsg=e.sqlite3_set_errmsg,_._sqlite3_error_offset=e.sqlite3_error_offset,_._sqlite3_errcode=e.sqlite3_errcode,_._sqlite3_extended_errcode=e.sqlite3_extended_errcode,_._sqlite3_errstr=e.sqlite3_errstr,_._sqlite3_limit=e.sqlite3_limit,_._sqlite3_open=e.sqlite3_open,_._sqlite3_open_v2=e.sqlite3_open_v2,_._sqlite3_create_collation=e.sqlite3_create_collation,_._sqlite3_create_collation_v2=e.sqlite3_create_collation_v2,_._sqlite3_collation_needed=e.sqlite3_collation_needed,_._sqlite3_get_autocommit=e.sqlite3_get_autocommit,_._sqlite3_table_column_metadata=e.sqlite3_table_column_metadata,_._sqlite3_extended_result_codes=e.sqlite3_extended_result_codes,_._sqlite3_uri_key=e.sqlite3_uri_key,_._sqlite3_uri_int64=e.sqlite3_uri_int64,_._sqlite3_db_name=e.sqlite3_db_name,_._sqlite3_db_filename=e.sqlite3_db_filename,_._sqlite3_db_readonly=e.sqlite3_db_readonly,_._sqlite3_compileoption_used=e.sqlite3_compileoption_used,_._sqlite3_compileoption_get=e.sqlite3_compileoption_get,_._sqlite3session_diff=e.sqlite3session_diff,_._sqlite3session_attach=e.sqlite3session_attach,_._sqlite3session_create=e.sqlite3session_create,_._sqlite3session_delete=e.sqlite3session_delete,_._sqlite3session_table_filter=e.sqlite3session_table_filter,_._sqlite3session_changeset=e.sqlite3session_changeset,_._sqlite3session_changeset_strm=e.sqlite3session_changeset_strm,_._sqlite3session_patchset_strm=e.sqlite3session_patchset_strm,_._sqlite3session_patchset=e.sqlite3session_patchset,_._sqlite3session_enable=e.sqlite3session_enable,_._sqlite3session_indirect=e.sqlite3session_indirect,_._sqlite3session_isempty=e.sqlite3session_isempty,_._sqlite3session_memory_used=e.sqlite3session_memory_used,_._sqlite3session_object_config=e.sqlite3session_object_config,_._sqlite3session_changeset_size=e.sqlite3session_changeset_size,_._sqlite3changeset_start=e.sqlite3changeset_start,_._sqlite3changeset_start_v2=e.sqlite3changeset_start_v2,_._sqlite3changeset_start_strm=e.sqlite3changeset_start_strm,_._sqlite3changeset_start_v2_strm=e.sqlite3changeset_start_v2_strm,_._sqlite3changeset_next=e.sqlite3changeset_next,_._sqlite3changeset_op=e.sqlite3changeset_op,_._sqlite3changeset_pk=e.sqlite3changeset_pk,_._sqlite3changeset_old=e.sqlite3changeset_old,_._sqlite3changeset_new=e.sqlite3changeset_new,_._sqlite3changeset_conflict=e.sqlite3changeset_conflict,_._sqlite3changeset_fk_conflicts=e.sqlite3changeset_fk_conflicts,_._sqlite3changeset_finalize=e.sqlite3changeset_finalize,_._sqlite3changeset_invert=e.sqlite3changeset_invert,_._sqlite3changeset_invert_strm=e.sqlite3changeset_invert_strm,_._sqlite3changeset_apply_v2=e.sqlite3changeset_apply_v2,_._sqlite3changeset_apply_v3=e.sqlite3changeset_apply_v3,_._sqlite3changeset_apply=e.sqlite3changeset_apply,_._sqlite3changeset_apply_v3_strm=e.sqlite3changeset_apply_v3_strm,_._sqlite3changeset_apply_v2_strm=e.sqlite3changeset_apply_v2_strm,_._sqlite3changeset_apply_strm=e.sqlite3changeset_apply_strm,_._sqlite3changegroup_new=e.sqlite3changegroup_new,_._sqlite3changegroup_add=e.sqlite3changegroup_add,_._sqlite3changegroup_output=e.sqlite3changegroup_output,_._sqlite3changegroup_add_strm=e.sqlite3changegroup_add_strm,_._sqlite3changegroup_output_strm=e.sqlite3changegroup_output_strm,_._sqlite3changegroup_delete=e.sqlite3changegroup_delete,_._sqlite3changeset_concat=e.sqlite3changeset_concat,_._sqlite3changeset_concat_strm=e.sqlite3changeset_concat_strm,_._sqlite3session_config=e.sqlite3session_config,_._sqlite3_sourceid=e.sqlite3_sourceid,_._sqlite3__wasm_pstack_ptr=e.sqlite3__wasm_pstack_ptr,_._sqlite3__wasm_pstack_restore=e.sqlite3__wasm_pstack_restore,_._sqlite3__wasm_pstack_alloc=e.sqlite3__wasm_pstack_alloc,_._sqlite3__wasm_pstack_remaining=e.sqlite3__wasm_pstack_remaining,_._sqlite3__wasm_pstack_quota=e.sqlite3__wasm_pstack_quota,_._sqlite3__wasm_test_struct=e.sqlite3__wasm_test_struct,_._sqlite3__wasm_enum_json=e.sqlite3__wasm_enum_json,_._sqlite3__wasm_vfs_unlink=e.sqlite3__wasm_vfs_unlink,_._sqlite3__wasm_db_vfs=e.sqlite3__wasm_db_vfs,_._sqlite3__wasm_db_reset=e.sqlite3__wasm_db_reset,_._sqlite3__wasm_db_export_chunked=e.sqlite3__wasm_db_export_chunked,_._sqlite3__wasm_db_serialize=e.sqlite3__wasm_db_serialize,_._sqlite3__wasm_vfs_create_file=e.sqlite3__wasm_vfs_create_file,_._sqlite3__wasm_posix_create_file=e.sqlite3__wasm_posix_create_file,_._sqlite3__wasm_kvvfsMakeKeyOnPstack=e.sqlite3__wasm_kvvfsMakeKeyOnPstack,_._sqlite3__wasm_kvvfs_methods=e.sqlite3__wasm_kvvfs_methods,_._sqlite3__wasm_vtab_config=e.sqlite3__wasm_vtab_config,_._sqlite3__wasm_db_config_ip=e.sqlite3__wasm_db_config_ip,_._sqlite3__wasm_db_config_pii=e.sqlite3__wasm_db_config_pii,_._sqlite3__wasm_db_config_s=e.sqlite3__wasm_db_config_s,_._sqlite3__wasm_config_i=e.sqlite3__wasm_config_i,_._sqlite3__wasm_config_ii=e.sqlite3__wasm_config_ii,_._sqlite3__wasm_config_j=e.sqlite3__wasm_config_j,_._sqlite3__wasm_qfmt_token=e.sqlite3__wasm_qfmt_token,_._sqlite3__wasm_init_wasmfs=e.sqlite3__wasm_init_wasmfs,_._sqlite3__wasm_test_intptr=e.sqlite3__wasm_test_intptr,_._sqlite3__wasm_test_voidptr=e.sqlite3__wasm_test_voidptr,_._sqlite3__wasm_test_int64_max=e.sqlite3__wasm_test_int64_max,_._sqlite3__wasm_test_int64_min=e.sqlite3__wasm_test_int64_min,_._sqlite3__wasm_test_int64_times2=e.sqlite3__wasm_test_int64_times2,_._sqlite3__wasm_test_int64_minmax=e.sqlite3__wasm_test_int64_minmax,_._sqlite3__wasm_test_int64ptr=e.sqlite3__wasm_test_int64ptr,_._sqlite3__wasm_test_stack_overflow=e.sqlite3__wasm_test_stack_overflow,_._sqlite3__wasm_test_str_hello=e.sqlite3__wasm_test_str_hello,_._sqlite3__wasm_SQLTester_strglob=e.sqlite3__wasm_SQLTester_strglob,_._malloc=e.malloc,_._free=e.free,_._realloc=e.realloc,Nt=e.emscripten_builtin_memalign,e._emscripten_stack_restore,e._emscripten_stack_alloc,e.emscripten_stack_get_current,e.__indirect_function_table}var Rt={__syscall_chmod:un,__syscall_faccessat:_n,__syscall_fchmod:fn,__syscall_fchown32:dn,__syscall_fcntl64:pn,__syscall_fstat64:hn,__syscall_ftruncate64:bn,__syscall_getcwd:yn,__syscall_ioctl:qn,__syscall_lstat64:vn,__syscall_mkdirat:wn,__syscall_newfstatat:Sn,__syscall_openat:En,__syscall_readlinkat:An,__syscall_rmdir:In,__syscall_stat64:kn,__syscall_unlinkat:Tn,__syscall_utimensat:xn,_localtime_js:Cn,_mmap_js:Nn,_munmap_js:Rn,_tzset_js:Dn,clock_time_get:jn,emscripten_date_now:Lt,emscripten_get_heap_max:Bn,emscripten_get_now:Pt,emscripten_resize_heap:Wn,environ_get:Qn,environ_sizes_get:Hn,fd_close:Vn,fd_fdstat_get:$n,fd_read:Kn,fd_seek:Jn,fd_sync:Xn,fd_write:Zn,memory:Ve};function ht(){if(Je>0){rt=ht;return}if(Bt(),Je>0){rt=ht;return}function e(){_.calledRun=!0,!We&&(Ut(),Be?.(_),_.onRuntimeInitialized?.(),Wt())}_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),e()},1)):e()}var Ye;return Ye=await Kt(),ht(),_.runSQLite3PostLoadInit=function(e,n,o){if(delete n.runSQLite3PostLoadInit,globalThis.sqlite3ApiBootstrap=async function t(a=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const s=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},a||{});Object.assign(s,{allocExportName:s.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:s.useStdAlloc?"free":"sqlite3_free",reallocExportName:s.useStdAlloc?"realloc":"sqlite3_realloc"}),["exports","memory","functionTable","wasmfsOpfsDir"].forEach(f=>{typeof s[f]=="function"&&(s[f]=s[f]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const r=Object.create(null),u=Object.create(null),T=f=>r.sqlite3_js_rc_str&&r.sqlite3_js_rc_str(f)||"Unknown result code #"+f,P=f=>typeof f=="number"&&f===(f|0)&&f<=2147483647&&f>=-2147483648;class G extends Error{constructor(...d){let A;if(d.length)if(P(d[0]))if(A=d[0],d.length===1)super(T(d[0]));else{const O=T(A);typeof d[1]=="object"?super(O,d[1]):(d[0]=O+":",super(d.join(" ")))}else d.length===2&&typeof d[1]=="object"?super(...d):super(d.join(" "));this.resultCode=A||r.SQLITE_ERROR,this.name="SQLite3Error"}}G.toss=(...f)=>{throw new G(...f)};const j=G.toss;s.wasmfsOpfsDir&&!/^\/[^/]+$/.test(s.wasmfsOpfsDir)&&j("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const w=function f(d){return f._max||(f._max=BigInt("0x7fffffffffffffff"),f._min=~f._max),d>=f._min&&d<=f._max},D=f=>f>=-0x7fffffffn-1n&&f<=0x7fffffffn,M=function f(d){return f._min||(f._min=Number.MIN_SAFE_INTEGER,f._max=Number.MAX_SAFE_INTEGER),d>=f._min&&d<=f._max},C=f=>f&&f.constructor&&P(f.constructor.BYTES_PER_ELEMENT)?f:!1,V=f=>f&&(f instanceof Uint8Array||f instanceof Int8Array||f instanceof ArrayBuffer),B=f=>f&&(f instanceof Uint8Array||f instanceof Int8Array||f instanceof ArrayBuffer),q=f=>V(f)||j("Value is not of a supported TypedArray type."),g=function(f){return B(f)?u.typedArrayToString(f instanceof ArrayBuffer?new Uint8Array(f):f,0,f.length):Array.isArray(f)?f.join(""):(u.isPtr(f)&&(f=u.cstrToJs(f)),f)};class x extends Error{constructor(...d){d.length===2&&typeof d[1]=="object"?super(...d):d.length?super(d.join(" ")):super("Allocation failed."),this.resultCode=r.SQLITE_NOMEM,this.name="WasmAllocError"}}x.toss=(...f)=>{throw new x(...f)},Object.assign(r,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(f,d,A,O,$,Y,oe,h,i)=>{},sqlite3_create_function:(f,d,A,O,$,Y,oe,h)=>{},sqlite3_create_window_function:(f,d,A,O,$,Y,oe,h,i,c)=>{},sqlite3_prepare_v3:(f,d,A,O,$,Y)=>{},sqlite3_prepare_v2:(f,d,A,O,$)=>{},sqlite3_exec:(f,d,A,O,$)=>{},sqlite3_randomness:(f,d)=>{}});const L={affirmBindableTypedArray:q,flexibleString:g,bigIntFits32:D,bigIntFits64:w,bigIntFitsDouble:M,isBindableTypedArray:V,isInt32:P,isSQLableTypedArray:B,isTypedArray:C,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,toss:function(...f){throw new Error(f.join(" "))},toss3:j,typedArrayPart:u.typedArrayPart,affirmDbHeader:function(f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));const d="SQLite format 3";d.length>f.byteLength&&j("Input does not contain an SQLite3 database header.");for(let A=0;A<d.length;++A)d.charCodeAt(A)!==f[A]&&j("Input does not contain an SQLite3 database header.")},affirmIsDb:function(f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));const d=f.byteLength;(d<512||d%512!==0)&&j("Byte array size",d,"is invalid for an SQLite3 db."),L.affirmDbHeader(f)}};Object.assign(u,{pointerIR:s.wasmPtrIR,bigIntEnabled:!!s.bigIntEnabled,exports:s.exports||j("Missing API config.exports (WASM module exports)."),memory:s.memory||s.exports.memory||j("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),functionTable:s.functionTable,alloc:void 0,realloc:void 0,dealloc:void 0}),u.allocFromTypedArray=function(f){f instanceof ArrayBuffer&&(f=new Uint8Array(f)),q(f);const d=u.alloc(f.byteLength||1);return u.heapForSize(f.constructor).set(f.byteLength?f:[0],Number(d)),d};{const f=s.allocExportName,d=s.deallocExportName,A=s.reallocExportName;for(const O of[f,d,A])u.exports[O]instanceof Function||j("Missing required exports[",O,"] function.");u.alloc=function O($){return O.impl($)||x.toss("Failed to allocate",$," bytes.")},u.alloc.impl=u.exports[f],u.realloc=function O($,Y){const oe=O.impl(u.ptr.coerce($),Y);return Y?oe||x.toss("Failed to reallocate",Y," bytes."):u.ptr.null},u.realloc.impl=u.exports[A],u.dealloc=function O($){O.impl(u.ptr.coerce($))},u.dealloc.impl=u.exports[d]}u.compileOptionUsed=function f(d){if(arguments.length){if(Array.isArray(d)){const A=Object.create(null);return d.forEach(O=>{A[O]=r.sqlite3_compileoption_used(O)}),A}else if(typeof d=="object")return Object.keys(d).forEach(A=>{d[A]=r.sqlite3_compileoption_used(A)}),d}else{if(f._result)return f._result;f._opt||(f._rx=/^([^=]+)=(.+)/,f._rxInt=/^-?\d+$/,f._opt=function(oe,h){const i=f._rx.exec(oe);h[0]=i?i[1]:oe,h[1]=i?f._rxInt.test(i[2])?+i[2]:i[2]:!0});const A=Object.create(null),O=[0,0];let $=0,Y;for(;Y=r.sqlite3_compileoption_get($++);)f._opt(Y,O),A[O[0]]=O[1];return f._result=A}return typeof d=="string"?!!r.sqlite3_compileoption_used(d):!1},u.pstack=Object.assign(Object.create(null),{restore:u.exports.sqlite3__wasm_pstack_restore,alloc:function(f){return typeof f=="string"&&!(f=u.sizeofIR(f))&&x.toss("Invalid value for pstack.alloc(",arguments[0],")"),u.exports.sqlite3__wasm_pstack_alloc(f)||x.toss("Could not allocate",f,"bytes from the pstack.")},allocChunks:function(f,d){typeof d=="string"&&!(d=u.sizeofIR(d))&&x.toss("Invalid size value for allocChunks(",arguments[1],")");const A=u.pstack.alloc(f*d),O=[A];let $=1,Y=d;for(;$<f;++$,Y+=d)O.push(u.ptr.add(A,Y));return O},allocPtr:(f=1,d=!0)=>f===1?u.pstack.alloc(d?8:u.ptr.size):u.pstack.allocChunks(f,d?8:u.ptr.size),call:function(f){const d=u.pstack.pointer;try{return f(z)}finally{u.pstack.restore(d)}}}),Object.defineProperties(u.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_remaining}}),r.sqlite3_randomness=(...f)=>{if(f.length===1&&L.isTypedArray(f[0])&&f[0].BYTES_PER_ELEMENT===1){const d=f[0];if(d.byteLength===0)return u.exports.sqlite3_randomness(0,u.ptr.null),d;const A=u.pstack.pointer;try{let O=d.byteLength,$=0;const Y=u.exports.sqlite3_randomness,oe=u.heap8u(),h=O<512?O:512,i=u.pstack.alloc(h);do{const c=O>h?h:O;Y(c,i),d.set(u.typedArrayPart(oe,i,u.ptr.add(i,c)),$),O-=c,$+=c}while(O>0)}catch(O){s.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",O)}finally{u.pstack.restore(A)}return d}u.exports.sqlite3_randomness(...f)};let E;if(r.sqlite3_wasmfs_opfs_dir=function(){if(E!==void 0)return E;const f=s.wasmfsOpfsDir;if(!f||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!u.exports.sqlite3__wasm_init_wasmfs)return E="";try{return f&&u.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],f)===0?E=f:E=""}catch{return E=""}},r.sqlite3_wasmfs_filename_is_persistent=function(f){const d=r.sqlite3_wasmfs_opfs_dir();return d&&f?f.startsWith(d+"/"):!1},r.sqlite3_js_db_uses_vfs=function(f,d,A=0){try{const O=r.sqlite3_vfs_find(d);return O?f?O===r.sqlite3_js_db_vfs(f,A)?O:!1:O===r.sqlite3_vfs_find(0)?O:!1:!1}catch{return!1}},r.sqlite3_js_vfs_list=function(){const f=[];let d=r.sqlite3_vfs_find(u.ptr.coerce(0));for(;d;){const A=new r.sqlite3_vfs(d);f.push(u.cstrToJs(A.$zName)),d=A.$pNext,A.dispose()}return f},r.sqlite3_js_db_export=function(f,d=0){f=u.xWrap.testConvertArg("sqlite3*",f),f||j("Invalid sqlite3* argument."),u.bigIntEnabled||j("BigInt support is not enabled.");const A=u.scopedAllocPush();let O;try{const $=u.scopedAlloc(8+u.ptr.size),Y=u.ptr.add($,8),oe=d?u.isPtr(d)?d:u.scopedAllocCString(""+d):u.ptr.null;let h=u.exports.sqlite3__wasm_db_serialize(f,oe,Y,$,0);h&&j("Database serialization failed with code",z.capi.sqlite3_js_rc_str(h)),O=u.peekPtr(Y);const i=u.peek($,"i64");return h=i?u.heap8u().slice(Number(O),Number(O)+Number(i)):new Uint8Array,h}finally{O&&u.exports.sqlite3_free(O),u.scopedAllocPop(A)}},r.sqlite3_js_db_vfs=(f,d=0)=>L.sqlite3__wasm_db_vfs(f,d),r.sqlite3_js_aggregate_context=(f,d)=>r.sqlite3_aggregate_context(f,d)||(d?x.toss("Cannot allocate",d,"bytes for sqlite3_aggregate_context()"):0),r.sqlite3_js_posix_create_file=function(f,d,A){let O;d&&u.isPtr(d)?O=d:d instanceof ArrayBuffer||d instanceof Uint8Array?(O=u.allocFromTypedArray(d),(arguments.length<3||!L.isInt32(A)||A<0)&&(A=d.byteLength)):G.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!L.isInt32(A)||A<0)&&G.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const $=L.sqlite3__wasm_posix_create_file(f,O,A);$&&G.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str($))}finally{O&&O!==d&&u.dealloc(O)}},r.sqlite3_js_vfs_create_file=function(f,d,A,O){s.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternatives.");let $;A?u.isPtr(A)?$=A:(A instanceof ArrayBuffer&&(A=new Uint8Array(A)),A instanceof Uint8Array?($=u.allocFromTypedArray(A),(arguments.length<4||!L.isInt32(O)||O<0)&&(O=A.byteLength)):G.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):$=0,(!L.isInt32(O)||O<0)&&($&&$!==A&&u.dealloc($),G.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const Y=L.sqlite3__wasm_vfs_create_file(f,d,$,O);Y&&G.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(Y))}finally{$&&$!==A&&u.dealloc($)}},r.sqlite3_js_sql_to_string=f=>{if(typeof f=="string")return f;const d=g(v);return d===v?void 0:d},L.isUIThread()){const f=function(d){const A=Object.create(null);return A.prefix="kvvfs-"+d,A.stores=[],(d==="session"||d==="")&&A.stores.push(globalThis.sessionStorage),(d==="local"||d==="")&&A.stores.push(globalThis.localStorage),A};r.sqlite3_js_kvvfs_clear=function(d=""){let A=0;const O=f(d);return O.stores.forEach($=>{const Y=[];let oe;for(oe=0;oe<$.length;++oe){const h=$.key(oe);h.startsWith(O.prefix)&&Y.push(h)}Y.forEach(h=>$.removeItem(h)),A+=Y.length}),A},r.sqlite3_js_kvvfs_size=function(d=""){let A=0;const O=f(d);return O.stores.forEach($=>{let Y;for(Y=0;Y<$.length;++Y){const oe=$.key(Y);oe.startsWith(O.prefix)&&(A+=oe.length,A+=$.getItem(oe).length)}}),A*2}}r.sqlite3_db_config=(function(f,d,...A){switch(d){case r.SQLITE_DBCONFIG_ENABLE_FKEY:case r.SQLITE_DBCONFIG_ENABLE_TRIGGER:case r.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case r.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case r.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case r.SQLITE_DBCONFIG_ENABLE_QPSG:case r.SQLITE_DBCONFIG_TRIGGER_EQP:case r.SQLITE_DBCONFIG_RESET_DATABASE:case r.SQLITE_DBCONFIG_DEFENSIVE:case r.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case r.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case r.SQLITE_DBCONFIG_DQS_DML:case r.SQLITE_DBCONFIG_DQS_DDL:case r.SQLITE_DBCONFIG_ENABLE_VIEW:case r.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case r.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case r.SQLITE_DBCONFIG_STMT_SCANSTATUS:case r.SQLITE_DBCONFIG_REVERSE_SCANORDER:case r.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case r.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case r.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=u.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(f,d,A[0],A[1]||0);case r.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=u.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(f,d,A[0],A[1],A[2]);case r.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=u.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(f,d,A[0]);default:return r.SQLITE_MISUSE}}).bind(Object.create(null)),r.sqlite3_value_to_js=function(f,d=!0){let A;const O=r.sqlite3_value_type(f);switch(O){case r.SQLITE_INTEGER:u.bigIntEnabled?(A=r.sqlite3_value_int64(f),L.bigIntFitsDouble(A)&&(A=Number(A))):A=r.sqlite3_value_double(f);break;case r.SQLITE_FLOAT:A=r.sqlite3_value_double(f);break;case r.SQLITE_TEXT:A=r.sqlite3_value_text(f);break;case r.SQLITE_BLOB:{const $=r.sqlite3_value_bytes(f),Y=r.sqlite3_value_blob(f);$&&!Y&&z.WasmAllocError.toss("Cannot allocate memory for blob argument of",$,"byte(s)"),A=$?u.heap8u().slice(Number(Y),Number(Y)+Number($)):null;break}case r.SQLITE_NULL:A=null;break;default:d&&j(r.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",O),A=void 0}return A},r.sqlite3_values_to_js=function(f,d,A=!0){let O;const $=[];for(O=0;O<f;++O)$.push(r.sqlite3_value_to_js(u.peekPtr(u.ptr.add(d,u.ptr.size*O)),A));return $},r.sqlite3_result_error_js=function(f,d){d instanceof x?r.sqlite3_result_error_nomem(f):r.sqlite3_result_error(f,""+d,-1)},r.sqlite3_result_js=function(f,d){if(d instanceof Error){r.sqlite3_result_error_js(f,d);return}try{switch(typeof d){case"undefined":break;case"boolean":r.sqlite3_result_int(f,d?1:0);break;case"bigint":L.bigIntFits32(d)?r.sqlite3_result_int(f,Number(d)):L.bigIntFitsDouble(d)?r.sqlite3_result_double(f,Number(d)):u.bigIntEnabled?L.bigIntFits64(d)?r.sqlite3_result_int64(f,d):j("BigInt value",d.toString(),"is too BigInt for int64."):j("BigInt value",d.toString(),"is too BigInt.");break;case"number":{let A;L.isInt32(d)?A=r.sqlite3_result_int:u.bigIntEnabled&&Number.isInteger(d)&&L.bigIntFits64(BigInt(d))?A=r.sqlite3_result_int64:A=r.sqlite3_result_double,A(f,d);break}case"string":{const[A,O]=u.allocCString(d,!0);r.sqlite3_result_text(f,A,O,r.SQLITE_WASM_DEALLOC);break}case"object":if(d===null){r.sqlite3_result_null(f);break}else if(L.isBindableTypedArray(d)){const A=u.allocFromTypedArray(d);r.sqlite3_result_blob(f,A,d.byteLength,r.SQLITE_WASM_DEALLOC);break}default:j("Don't not how to handle this UDF result value:",typeof d,d)}}catch(A){r.sqlite3_result_error_js(f,A)}},r.sqlite3_column_js=function(f,d,A=!0){const O=r.sqlite3_column_value(f,d);return O===0?void 0:r.sqlite3_value_to_js(O,A)};const I=(function(f,d,A){A=r[A],this.ptr?u.pokePtr(this.ptr,0):this.ptr=u.allocPtr();const O=A(f,d,this.ptr);if(O)return G.toss(O,arguments[2]+"() failed with code "+O);const $=u.peekPtr(this.ptr);return $?r.sqlite3_value_to_js($,!0):void 0}).bind(Object.create(null));r.sqlite3_preupdate_new_js=(f,d)=>I(f,d,"sqlite3_preupdate_new"),r.sqlite3_preupdate_old_js=(f,d)=>I(f,d,"sqlite3_preupdate_old"),r.sqlite3changeset_new_js=(f,d)=>I(f,d,"sqlite3changeset_new"),r.sqlite3changeset_old_js=(f,d)=>I(f,d,"sqlite3changeset_old");const z={WasmAllocError:x,SQLite3Error:G,capi:r,util:L,wasm:u,config:s,version:Object.create(null),client:void 0,asyncPostInit:async function f(){if(f.isReady instanceof Promise)return f.isReady;let d=t.initializersAsync;delete t.initializersAsync;const A=async()=>(z.__isUnderTest||(delete z.util,delete z.StructBinder),z),O=Y=>{throw s.error("an async sqlite3 initializer failed:",Y),Y};if(!d||!d.length)return f.isReady=A().catch(O);d=d.map(Y=>Y instanceof Function?async oe=>Y(z):Y),d.push(A);let $=Promise.resolve(z);for(;d.length;)$=$.then(d.shift());return f.isReady=$.catch(O)},scriptInfo:void 0};try{t.initializers.forEach(f=>{f(z)})}catch(f){throw console.error("sqlite3 bootstrap initializer threw:",f),f}if(delete t.initializers,t.sqlite3=z,delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig,e.debugModule("sqlite3ApiBootstrap() complete",z),z.scriptInfo=e,z.__isUnderTest=o){z.config.emscripten=n;const f=e.instantiateWasm;f&&(z.wasm.module=f.module,z.wasm.instance=f.instance,z.wasm.imports=f.imports)}return z.asyncPostInit().then(f=>(e.debugModule("sqlite3.asyncPostInit() complete",z),delete f.asyncPostInit,delete f.scriptInfo,delete f.emscripten,f))},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const a=(...i)=>{throw new Error(i.join(" "))};t.pointerSize&&!t.pointerIR&&(t.pointerIR=t.pointerSize===4?"i32":"i64");const s=t.pointerIR??="i32",r=t.pointerSize??=s==="i32"?4:s==="i64"?8:0;delete t.pointerSize,delete t.pointerIR,s!=="i32"&&s!=="i64"?a("Invalid pointerIR:",s):r!==8&&r!==4&&a("Invalid pointerSize:",r);const u=t.bigIntEnabled?i=>BigInt(i||0):i=>a("BigInt support is disabled in this build."),P=r===4?i=>Number(i||0):u,G=P(0),j=function(...i){let c=P(0);for(const p of i)c+=P(p);return c};{const i=Object.create(null);Object.defineProperty(t,"ptr",{enumerable:!0,get:()=>i,set:()=>a("The ptr property is read-only.")}),(function c(p,b){return Object.defineProperty(i,p,{enumerable:!0,get:()=>b,set:()=>a("ptr["+p+"] is read-only.")}),c})("null",G)("size",r)("ir",s)("coerce",P)("add",j)("addn",s===4?j:(...c)=>Number(j(...c)))}t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance?.exports});const w=Object.create(null);w.heapSize=0,w.memory=null,w.freeFuncIndexes=[],w.scopedAlloc=[],w.scopedAlloc.pushPtr=i=>(w.scopedAlloc[w.scopedAlloc.length-1].push(i),i),w.utf8Decoder=new TextDecoder,w.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=i=>{switch(i){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return r;default:return(""+i).endsWith("*")?r:void 0}};const D=function(){if(!w.memory)w.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(w.heapSize===w.memory.buffer.byteLength)return w;const i=w.memory.buffer;return w.HEAP8=new Int8Array(i),w.HEAP8U=new Uint8Array(i),w.HEAP16=new Int16Array(i),w.HEAP16U=new Uint16Array(i),w.HEAP32=new Int32Array(i),w.HEAP32U=new Uint32Array(i),w.HEAP32F=new Float32Array(i),w.HEAP64F=new Float64Array(i),t.bigIntEnabled&&(typeof BigInt64Array<"u"?(w.HEAP64=new BigInt64Array(i),w.HEAP64U=new BigUint64Array(i)):a("BigInt support is enabled, but the BigInt64Array type is missing.")),w.heapSize=i.byteLength,w};t.heap8=()=>D().HEAP8,t.heap8u=()=>D().HEAP8U,t.heap16=()=>D().HEAP16,t.heap16u=()=>D().HEAP16U,t.heap32=()=>D().HEAP32,t.heap32u=()=>D().HEAP32U,t.heapForSize=function(i,c=!0){const p=w.memory&&w.heapSize===w.memory.buffer.byteLength?w:D();switch(i){case Int8Array:return p.HEAP8;case Uint8Array:return p.HEAP8U;case Int16Array:return p.HEAP16;case Uint16Array:return p.HEAP16U;case Int32Array:return p.HEAP32;case Uint32Array:return p.HEAP32U;case 8:return c?p.HEAP8U:p.HEAP8;case 16:return c?p.HEAP16U:p.HEAP16;case 32:return c?p.HEAP32U:p.HEAP32;case 64:if(p.HEAP64)return c?p.HEAP64U:p.HEAP64;break;default:if(t.bigIntEnabled){if(i===globalThis.BigUint64Array)return p.HEAP64U;if(i===globalThis.BigInt64Array)return p.HEAP64;break}}a("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")};const M=t.functionTable;delete t.functionTable,t.functionTable=M?()=>M:()=>t.exports.__indirect_function_table,t.functionEntry=function(i){const c=t.functionTable();return i<c.length?c.get(P(i)):void 0},t.jsFuncToWasm=function i(c,p){if(i._||(i._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:s,P:s,s,j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:(ne,k,m)=>{m<128?ne[k](m):ne[k](m%128|128,m>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:ne=>{const k=i._.rxJSig.exec(ne);return k?k[2]:ne.substr(1)},letterType:ne=>i._.sigTypes[ne]||a("Invalid signature letter:",ne),pushSigType:(ne,k)=>ne.push(i._.typeCodes[i._.letterType(k)])}),typeof c=="string"){const ne=p;p=c,c=ne}const b=i._,R=b.sigParams(p),Q=[1,96];b.uleb128Encode(Q,"push",R.length);for(const ne of R)b.pushSigType(Q,ne);return p[0]==="v"?Q.push(0):(Q.push(1),b.pushSigType(Q,p[0])),b.uleb128Encode(Q,"unshift",Q.length),Q.unshift(0,97,115,109,1,0,0,0,1),Q.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(Q)),{e:{f:c}}).exports.f};const C=function(c,p,b){if(b&&!w.scopedAlloc.length&&a("No scopedAllocPush() scope is active."),typeof c=="string"){const k=p;p=c,c=k}(typeof p!="string"||!(c instanceof Function))&&a("Invalid arguments: expecting (function,signature) or (signature,function).");const R=t.functionTable(),Q=P(R.length);let ne;for(;w.freeFuncIndexes.length&&(ne=w.freeFuncIndexes.pop(),R.get(ne));){ne=null;continue}ne||(ne=P(Q),R.grow(P(1)));try{return R.set(ne,c),b&&w.scopedAlloc.pushPtr(ne),ne}catch(k){if(!(k instanceof TypeError))throw ne===Q&&w.freeFuncIndexes.push(Q),k}try{const k=t.jsFuncToWasm(c,p);R.set(ne,k),b&&w.scopedAlloc.pushPtr(ne)}catch(k){throw ne===Q&&w.freeFuncIndexes.push(Q),k}return ne};t.installFunction=(i,c)=>C(i,c,!1),t.scopedInstallFunction=(i,c)=>C(i,c,!0),t.uninstallFunction=function(i){if(!i&&i!==0)return;const c=w.freeFuncIndexes,p=t.functionTable();c.push(i);const b=p.get(i);return p.set(i,null),b},t.peek=function(c,p="i8"){p.endsWith("*")&&(p=s);const b=w.memory&&w.heapSize===w.memory.buffer.byteLength?w:D(),R=Array.isArray(c)?[]:void 0;let Q;do{switch(R&&(c=arguments[0].shift()),p){case"i1":case"i8":Q=b.HEAP8[Number(c)>>0];break;case"i16":Q=b.HEAP16[Number(c)>>1];break;case"i32":Q=b.HEAP32[Number(c)>>2];break;case"float":case"f32":Q=b.HEAP32F[Number(c)>>2];break;case"double":case"f64":Q=Number(b.HEAP64F[Number(c)>>3]);break;case"i64":if(b.HEAP64){Q=u(b.HEAP64[Number(c)>>3]);break}default:a("Invalid type for peek():",p)}R&&R.push(Q)}while(R&&arguments[0].length);return R||Q},t.poke=function(i,c,p="i8"){p.endsWith("*")&&(p=s);const b=w.memory&&w.heapSize===w.memory.buffer.byteLength?w:D();for(const R of Array.isArray(i)?i:[i])switch(p){case"i1":case"i8":b.HEAP8[Number(R)>>0]=c;continue;case"i16":b.HEAP16[Number(R)>>1]=c;continue;case"i32":b.HEAP32[Number(R)>>2]=c;continue;case"float":case"f32":b.HEAP32F[Number(R)>>2]=c;continue;case"double":case"f64":b.HEAP64F[Number(R)>>3]=c;continue;case"i64":if(b.HEAP64){b.HEAP64[Number(R)>>3]=u(c);continue}default:a("Invalid type for poke(): "+p)}return this},t.peekPtr=(...i)=>t.peek(i.length===1?i[0]:i,s),t.pokePtr=(i,c=0)=>t.poke(i,c,s),t.peek8=(...i)=>t.peek(i.length===1?i[0]:i,"i8"),t.poke8=(i,c)=>t.poke(i,c,"i8"),t.peek16=(...i)=>t.peek(i.length===1?i[0]:i,"i16"),t.poke16=(i,c)=>t.poke(i,c,"i16"),t.peek32=(...i)=>t.peek(i.length===1?i[0]:i,"i32"),t.poke32=(i,c)=>t.poke(i,c,"i32"),t.peek64=(...i)=>t.peek(i.length===1?i[0]:i,"i64"),t.poke64=(i,c)=>t.poke(i,c,"i64"),t.peek32f=(...i)=>t.peek(i.length===1?i[0]:i,"f32"),t.poke32f=(i,c)=>t.poke(i,c,"f32"),t.peek64f=(...i)=>t.peek(i.length===1?i[0]:i,"f64"),t.poke64f=(i,c)=>t.poke(i,c,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=i=>typeof i=="number"&&i>=0&&i===(i|0),t.isPtr64=i=>typeof i=="bigint"?i>=0:t.isPtr32(i),t.isPtr=r===4?t.isPtr32:t.isPtr64,t.cstrlen=function(i){if(!i||!t.isPtr(i))return null;i=Number(i);const c=D().HEAP8U;let p=i;for(;c[p]!==0;++p);return Number(p-i)};const V=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,B=i=>i.buffer instanceof V;t.isSharedTypedArray=B;const q=(i,c,p)=>(r===8&&(typeof c=="bigint"&&(c=Number(c)),typeof p=="bigint"&&(p=Number(p))),B(i)?i.slice(c,p):i.subarray(c,p));t.typedArrayPart=q;const g=(i,c,p)=>w.utf8Decoder.decode(q(i,c,p));t.typedArrayToString=g,t.cstrToJs=function(i){const c=t.cstrlen(i);return c?g(D().HEAP8U,Number(i),Number(i)+c):c===null?c:""},t.jstrlen=function(i){if(typeof i!="string")return null;const c=i.length;let p=0;for(let b=0;b<c;++b){let R=i.charCodeAt(b);R>=55296&&R<=57343&&(R=65536+((R&1023)<<10)|i.charCodeAt(++b)&1023),R<=127?++p:R<=2047?p+=2:R<=65535?p+=3:p+=4}return p},t.jstrcpy=function(i,c,p=0,b=-1,R=!0){if((!c||!(c instanceof Int8Array)&&!(c instanceof Uint8Array))&&a("jstrcpy() target must be an Int8Array or Uint8Array."),b=Number(b),p=Number(p),b<0&&(b=c.length-p),!(b>0)||!(p>=0))return 0;let Q=0,ne=i.length;const k=p,m=p+b-(R?1:0);for(;Q<ne&&p<m;++Q){let S=i.charCodeAt(Q);if(S>=55296&&S<=57343&&(S=65536+((S&1023)<<10)|i.charCodeAt(++Q)&1023),S<=127){if(p>=m)break;c[p++]=S}else if(S<=2047){if(p+1>=m)break;c[p++]=192|S>>6,c[p++]=128|S&63}else if(S<=65535){if(p+2>=m)break;c[p++]=224|S>>12,c[p++]=128|S>>6&63,c[p++]=128|S&63}else{if(p+3>=m)break;c[p++]=240|S>>18,c[p++]=128|S>>12&63,c[p++]=128|S>>6&63,c[p++]=128|S&63}}return R&&(c[p++]=0),p-k},t.cstrncpy=function(i,c,p){if((!i||!c)&&a("cstrncpy() does not accept NULL strings."),p<0)p=t.cstrlen(strPtr)+1;else if(!(p>0))return 0;const b=t.heap8u();let R=0,Q;const ne=Number(i),k=Number(c);for(;R<p&&(Q=b[k+R]);++R)b[ne+R]=Q;return R<p&&(b[ne+R++]=0),R},t.jstrToUintArray=(i,c=!1)=>w.utf8Encoder.encode(c?i+"\0":i);const x=(i,c)=>{(!(i.alloc instanceof Function)||!(i.dealloc instanceof Function))&&a("Object is missing alloc() and/or dealloc() function(s)","required by",c+"().")},L=function(i,c,p,b){if(x(t,b),typeof i!="string")return null;const R=w.utf8Encoder.encode(i),Q=p(R.length+1);let ne=Q;try{const k=D().HEAP8U;return k.set(R,Number(Q)),k[j(Q,R.length)]=0,ne=G,c?[Q,R.length]:Q}finally{ne&&t.dealloc(ne)}};t.allocCString=(i,c=!1)=>L(i,c,t.alloc,"allocCString()"),t.scopedAllocPush=function(){x(t,"scopedAllocPush");const i=[];return w.scopedAlloc.push(i),i},t.scopedAllocPop=function(i){x(t,"scopedAllocPop");const c=arguments.length?w.scopedAlloc.indexOf(i):w.scopedAlloc.length-1;c<0&&a("Invalid state object for scopedAllocPop()."),arguments.length===0&&(i=w.scopedAlloc[c]),w.scopedAlloc.splice(c,1);for(let p;p=i.pop();)t.functionEntry(p)?t.uninstallFunction(p):t.dealloc(p)},t.scopedAlloc=function(i){w.scopedAlloc.length||a("No scopedAllocPush() scope is active.");const c=P(t.alloc(i));return w.scopedAlloc.pushPtr(c)},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>w.scopedAlloc.length,set:()=>a("The 'active' property is read-only.")}),t.scopedAllocCString=(i,c=!1)=>L(i,c,t.scopedAlloc,"scopedAllocCString()");const E=function(i,c){const p=t[i?"scopedAlloc":"alloc"]((c.length+1)*t.ptr.size);let b=0;return c.forEach(R=>{t.pokePtr(j(p,t.ptr.size*b++),t[i?"scopedAllocCString":"allocCString"](""+R))}),t.pokePtr(j(p,t.ptr.size*b),0),p};t.scopedAllocMainArgv=i=>E(!0,i),t.allocMainArgv=i=>E(!1,i),t.cArgvToJs=(i,c)=>{const p=[];for(let b=0;b<i;++b){const R=t.peekPtr(j(c,t.ptr.size*b));p.push(R?t.cstrToJs(R):null)}return p},t.scopedAllocCall=function(i){t.scopedAllocPush();try{return i()}finally{t.scopedAllocPop()}};const I=function(i,c,p){x(t,p);const b=c?"i64":s;let R=t[p](i*(c?8:r));if(t.poke(R,0,b),i===1)return R;const Q=[R];for(let ne=1;ne<i;++ne)R=j(R,c?8:r),Q[ne]=R,t.poke(R,0,b);return Q};t.allocPtr=(i=1,c=!0)=>I(i,c,"alloc"),t.scopedAllocPtr=(i=1,c=!0)=>I(i,c,"scopedAlloc"),t.xGet=function(i){return t.exports[i]||a("Cannot find exported symbol:",i)};const z=(i,c)=>a(i+"() requires",c,"argument(s).");t.xCall=function(i,...c){const p=i instanceof Function?i:t.xGet(i);return p instanceof Function||a("Exported symbol",i,"is not a function."),p.length!==c.length&&z(p===i?p.name:i,p.length),arguments.length===2&&Array.isArray(arguments[1])?p.apply(null,arguments[1]):p.apply(null,c)},w.xWrap=Object.create(null),w.xWrap.convert=Object.create(null),w.xWrap.convert.arg=new Map,w.xWrap.convert.result=new Map;const f=w.xWrap.convert.arg,d=w.xWrap.convert.result,A=P;f.set("i64",u).set("i32",i=>i|0).set("i16",i=>(i|0)&65535).set("i8",i=>(i|0)&255).set("f32",i=>Number(i).valueOf()).set("float",f.get("f32")).set("f64",f.get("f32")).set("double",f.get("f64")).set("int",f.get("i32")).set("null",i=>i).set(null,f.get("null")).set("**",A).set("*",A),d.set("*",A).set("pointer",A).set("number",i=>Number(i)).set("void",i=>{}).set(void 0,d.get("void")).set("null",i=>i).set(null,d.get("null"));for(const i of["i8","i16","i32","i64","int","f32","float","f64","double"])f.set(i+"*",A),d.set(i+"*",A),d.set(i,f.get(i)||a("Maintenance required: missing arg converter for",i));const O=i=>typeof i=="string"?t.scopedAllocCString(i):P(i);f.set("string",O).set("utf8",O),d.set("string",i=>t.cstrToJs(i)).set("utf8",d.get("string")).set("string:dealloc",i=>{try{return i?t.cstrToJs(i):null}finally{t.dealloc(i)}}).set("utf8:dealloc",d.get("string:dealloc")).set("json",i=>JSON.parse(t.cstrToJs(i))).set("json:dealloc",i=>{try{return i?JSON.parse(t.cstrToJs(i)):null}finally{t.dealloc(i)}});const $=class{constructor(i){this.name=i.name||"unnamed adapter"}convertArg(i,c,p){a("AbstractArgAdapter must be subclassed.")}};f.FuncPtrAdapter=class $e extends ${constructor(c){super(c),f.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",c),this.name=c.name||"unnamed",this.signature=c.signature,c.contextKey instanceof Function&&(this.contextKey=c.contextKey,c.bindScope||(c.bindScope="context")),this.bindScope=c.bindScope||a("FuncPtrAdapter options requires a bindScope (explicit or implied)."),$e.bindScopes.indexOf(c.bindScope)<0&&a("Invalid options.bindScope ("+c.bindMod+") for FuncPtrAdapter. Expecting one of: ("+$e.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=c.callProxy instanceof Function?c.callProxy:void 0}contextKey(c,p){return this}contextMap(c){const p=this.__cmap||(this.__cmap=new Map);let b=p.get(c);return b===void 0&&p.set(c,b=[]),b}convertArg(c,p,b){let R=this.singleton;if(!R&&this.isContext&&(R=this.contextMap(this.contextKey(p,b))),R&&R.length===2&&R[0]===c)return R[1];if(c instanceof Function){this.callProxy&&(c=this.callProxy(c));const Q=C(c,this.signature,this.isTransient);if($e.debugFuncInstall&&$e.debugOut("FuncPtrAdapter installed",this,this.contextKey(p,b),"@"+Q,c),R){if(R[1]){$e.debugFuncInstall&&$e.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(p,b),"@"+R[1],c);try{w.scopedAlloc.pushPtr(R[1])}catch{}}R[0]=arguments[0]||G,R[1]=Q}return Q}else if(t.isPtr(c)||c===null||c===void 0){if(R&&R[1]&&R[1]!==c){$e.debugFuncInstall&&$e.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(p,b),"@"+R[1],c);try{w.scopedAlloc.pushPtr(R[1])}catch{}R[0]=R[1]=c||G}return c||G}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},f.FuncPtrAdapter.warnOnUse=!1,f.FuncPtrAdapter.debugFuncInstall=!1,f.FuncPtrAdapter.debugOut=console.debug.bind(console),f.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const Y=i=>f.get(i)||a("Argument adapter not found:",i),oe=i=>d.get(i)||a("Result adapter not found:",i);w.xWrap.convertArg=(i,...c)=>Y(i)(...c),w.xWrap.convertArgNoCheck=(i,...c)=>f.get(i)(...c),w.xWrap.convertResult=(i,c)=>i===null?c:i?oe(i)(c):void 0,w.xWrap.convertResultNoCheck=(i,c)=>i===null?c:i?d.get(i)(c):void 0,t.xWrap=function i(c,p,...b){arguments.length===3&&Array.isArray(arguments[2])&&(b=arguments[2]),t.isPtr(c)&&(c=t.functionEntry(c)||a("Function pointer not found in WASM function table."));const R=c instanceof Function,Q=R?c:t.xGet(c);if(R&&(c=Q.name||"unnamed function"),b.length!==Q.length&&z(c,Q.length),Q.length===0&&(p===null||p==="null"))return Q;oe(p);for(const k of b)k instanceof $?f.set(k,(...m)=>k.convertArg(...m)):Y(k);const ne=w.xWrap;return Q.length===0?(...k)=>k.length?z(c,Q.length):ne.convertResult(p,Q.call(null)):function(...k){k.length!==Q.length&&z(c,Q.length);const m=t.scopedAllocPush();try{let S=0;for(i.debug&&console.debug("xWrap() preparing: resultType ",p,"xf",Q,"argTypes",b,"args",k);S<k.length;++S)k[S]=ne.convertArgNoCheck(b[S],k[S],k,S);return i.debug&&console.debug("xWrap() calling: resultType ",p,"xf",Q,"argTypes",b,"args",k),ne.convertResultNoCheck(p,Q.apply(null,k))}finally{t.scopedAllocPop(m)}}};const h=function(i,c,p,b,R,Q){if(typeof p=="string"){if(c===1)return Q.get(p);if(c===2){if(b)b instanceof Function||a(R,"requires a function argument.");else return Q.delete(p),i;return Q.set(p,b),i}}a("Invalid arguments to",R)};return t.xWrap.resultAdapter=function i(c,p){return h(i,arguments.length,c,p,"resultAdapter()",d)},t.xWrap.argAdapter=function i(c,p){return h(i,arguments.length,c,p,"argAdapter()",f)},t.xWrap.FuncPtrAdapter=f.FuncPtrAdapter,t.xCallWrapped=function(i,c,p,...b){return Array.isArray(arguments[3])&&(b=arguments[3]),t.xWrap(i,c,p||[]).apply(null,b||[])},t.xWrap.testConvertArg=w.xWrap.convertArg,t.xWrap.testConvertResult=w.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const a=()=>fetch(t.uri,{credentials:"same-origin"}),s=this,r=function(T){if(t.wasmUtilTarget){const P=(...j)=>{throw new Error(j.join(" "))},G=t.wasmUtilTarget;if(G.module=T.module,G.instance=T.instance,G.instance.exports.memory||(G.memory=t?.imports?.env?.memory||P("Missing 'memory' object!")),!G.alloc&&T.instance.exports.malloc){const j=T.instance.exports;G.alloc=function(w){return j.malloc(w)||P("Allocation of",w,"bytes failed.")},G.dealloc=function(w){j.free(w)}}s(G)}return T.config=t,t.onload&&t.onload(T),T};return WebAssembly.instantiateStreaming?()=>WebAssembly.instantiateStreaming(a(),t.imports||{}).then(r):()=>a().then(T=>T.arrayBuffer()).then(T=>WebAssembly.instantiate(T,t.imports||{})).then(r)}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(a){const s=(...F)=>{throw new Error(F.join(" "))};!(a.heap instanceof WebAssembly.Memory)&&!(a.heap instanceof Function)&&s("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(F){a[F]instanceof Function||s("Config option '"+F+"' must be a function.")});const r=a.heap,u=t,T=r||(()=>new Uint8Array(r.buffer)),P=a.alloc,G=a.dealloc,j=a.log||console.debug.bind(console),w=a.memberPrefix||"",D=a.memberSuffix||"",M=globalThis.BigInt,C=globalThis.BigInt64Array,V=a.bigIntEnabled??!!C,B=a.pointerIR||a.ptrIR||"i32",q=a.ptrSize||(B==="i32"?4:8);B!=="i32"&&B!=="i64"&&s("Invalid pointer representation:",B),q!==4&&q!==8&&s("Invalid pointer size:",q);const g=V&&M?F=>M(F||0):F=>s("BigInt support is disabled in this build."),x=B=="i32"?Number:g,L=x(0),E=function(...F){let X=L;for(let ee=0;ee<F.length;++ee)X+=x(F[ee]);return X};u.debugFlags||(u.__makeDebugFlags=function(F=null){F&&F.__flags&&(F=F.__flags);const X=function ee(se){return arguments.length===0?ee.__flags:(se<0?(delete ee.__flags.getter,delete ee.__flags.setter,delete ee.__flags.alloc,delete ee.__flags.dealloc):(ee.__flags.getter=(1&se)!==0,ee.__flags.setter=(2&se)!==0,ee.__flags.alloc=(4&se)!==0,ee.__flags.dealloc=(8&se)!==0),ee._flags)};return Object.defineProperty(X,"__flags",{iterable:!1,writable:!1,value:Object.create(F)}),F||X(0),X},u.debugFlags=u.__makeDebugFlags());const I=(function(){const F=new ArrayBuffer(2);return new DataView(F).setInt16(0,256,!0),new Int16Array(F)[0]===256})(),z=F=>F[1]==="(",f=F=>F==="P",d=F=>z(F)?"p":F[0],A=function(F){switch(d(F)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return B;case"j":return"i64";case"f":return"float";case"d":return"double"}s("Unhandled signature IR:",F)},O=C?()=>!0:()=>s("BigInt64Array is not available."),$=function(F){switch(d(F)){case"p":case"P":case"s":{switch(q){case 4:return"getInt32";case 8:return O()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return O()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}s("Unhandled DataView getter for signature:",F)},Y=function(F){switch(d(F)){case"p":case"P":case"s":{switch(q){case 4:return"setInt32";case 8:return O()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return O()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}s("Unhandled DataView setter for signature:",F)},oe=function(F){switch(d(F)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return g;case"p":case"P":case"s":switch(q){case 4:return Number;case 8:return g}break}s("Unhandled DataView set wrapper for signature:",F)},h=(F,X)=>F+"::"+X,i=function(F,X){return()=>s(h(F,X),"is read-only.")},c=new WeakMap,p="(pointer-is-external)",b=F=>typeof F=="number"&&F===(F|0)&&F>=0,Q=q===4?b:F=>typeof F=="bigint"&&F>=0||b(F),ne=function(F,X,ee){if(ee||(ee=c.get(X)),ee){if(c.delete(X),Array.isArray(X.ondispose)){let se;for(;se=X.ondispose.shift();)try{se instanceof Function?se.call(X):se instanceof Ee?se.dispose():Q(se)&&G(se)}catch(be){console.warn("ondispose() for",F.structName,"@",ee,"threw. NOT propagating it.",be)}}else if(X.ondispose instanceof Function)try{X.ondispose()}catch(se){console.warn("ondispose() for",F.structName,"@",ee,"threw. NOT propagating it.",se)}delete X.ondispose,F.debugFlags.__flags.dealloc&&j("debug.dealloc:",X[p]?"EXTERNAL":"",F.structName,"instance:",F.structInfo.sizeof,"bytes @"+ee),X[p]||G(ee)}},k=F=>({configurable:!1,writable:!1,iterable:!1,value:F}),m=function(F,X,ee){let se=!ee;ee?Object.defineProperty(X,p,k(ee)):(ee=P(F.structInfo.sizeof),ee||s("Allocation of",F.structName,"structure failed."));try{F.debugFlags.__flags.alloc&&j("debug.alloc:",se?"":"EXTERNAL",F.structName,"instance:",F.structInfo.sizeof,"bytes @"+ee),se&&T().fill(0,Number(ee),Number(ee)+F.structInfo.sizeof),c.set(X,ee)}catch(be){throw ne(F,X,ee),be}},S=function(){const F=this.pointer;return F?new Uint8Array(T().slice(Number(F),Number(F)+this.structInfo.sizeof)):null},H=k(F=>w+F+D),Z=function(F,X,ee=!0){let se=F.members[X];if(!se&&(w||D)){for(const be of Object.values(F.members))if(be.key===X){se=be;break}!se&&ee&&s(h(F.name,X),"is not a mapped struct member.")}return se},y=function F(X,ee,se=!1){F._||(F._=Ce=>Ce.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const be=Z(X.structInfo,ee,!0);return se?F._(be.signature):be.signature},N={configurable:!1,enumerable:!1,get:function(){return c.get(this)},set:()=>s("Cannot assign the 'pointer' property of a struct.")},U=k(function(){const F=[];for(const X of Object.keys(this.structInfo.members))F.push(this.memberKey(X));return F}),J=new TextDecoder("utf-8"),K=new TextEncoder,le=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ce=function(F,X,ee){return q===8&&(X=Number(X),ee=Number(ee)),J.decode(F.buffer instanceof le?F.slice(X,ee):F.subarray(X,ee))},re=function(F,X,ee=!1){const se=Z(F.structInfo,X,ee);return se&&se.signature.length===1&&se.signature[0]==="s"?se:!1},Oe=function(F){F.signature!=="s"&&s("Invalid member type signature for C-string value:",JSON.stringify(F))},Fe=function(X,ee){const se=Z(X.structInfo,ee,!0);Oe(se);const be=X[se.key];if(!be)return null;let Ce=be;const Ne=T();for(;Ne[Ce]!==0;++Ce);return be===Ce?"":ce(Ne,be,Ce)},Le=function(F,...X){F.ondispose?Array.isArray(F.ondispose)||(F.ondispose=[F.ondispose]):F.ondispose=[],F.ondispose.push(...X)},De=function(F){const X=K.encode(F),ee=P(X.length+1);ee||s("Allocation error while duplicating string:",F);const se=T();return se.set(X,Number(ee)),se[E(ee,X.length)]=0,ee},Me=function(F,X,ee){const se=Z(F.structInfo,X,!0);Oe(se);const be=De(ee);return F[se.key]=be,Le(F,be),F},Ee=function(X,ee){arguments[2]!==k&&s("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:k(X),structInfo:k(ee)})};Ee.prototype=Object.create(null,{dispose:k(function(){ne(this.constructor,this)}),lookupMember:k(function(F,X=!0){return Z(this.structInfo,F,X)}),memberToJsString:k(function(F){return Fe(this,F)}),memberIsString:k(function(F,X=!0){return re(this,F,X)}),memberKey:H,memberKeys:U,memberSignature:k(function(F,X=!1){return y(this,F,X)}),memoryDump:k(S),pointer:N,setMemberCString:k(function(F,X){return Me(this,F,X)})}),Object.assign(Ee.prototype,{addOnDispose:function(...F){return Le(this,...F),this}}),Object.defineProperties(Ee,{allocCString:k(De),isA:k(F=>F instanceof Ee),hasExternalPointer:k(F=>F instanceof Ee&&!!F[p]),memberKey:H});const ot=function F(X,ee,se){if(!F._){F._={getters:{},setters:{},sw:{}};const je=["i","c","C","p","P","s","f","d","v()"];V&&je.push("j"),je.forEach(function(He){F._.getters[He]=$(He),F._.setters[He]=Y(He),F._.sw[He]=oe(He)});const tr=/^[ipPsjfdcC]$/,nr=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;F.sigCheck=function(He,rr,Dt,mt){Object.prototype.hasOwnProperty.call(He,Dt)&&s(He.structName,"already has a property named",Dt+"."),tr.test(mt)||nr.test(mt)||s("Malformed signature for",h(He.structName,rr)+":",mt)}}const be=X.memberKey(ee);F.sigCheck(X.prototype,ee,be,se.signature),se.key=be,se.name=ee;const Ce=d(se.signature),Ne=h(X.prototype.structName,be),Ae=X.prototype.debugFlags.__flags,ye=Object.create(null);ye.configurable=!1,ye.enumerable=!1,ye.get=function(){Ae.getter&&j("debug.getter:",F._.getters[Ce],"for",A(Ce),Ne,"@",this.pointer,"+",se.offset,"sz",se.sizeof);let je=new DataView(T().buffer,Number(this.pointer)+se.offset,se.sizeof)[F._.getters[Ce]](0,I);return Ae.getter&&j("debug.getter:",Ne,"result =",je),je},se.readOnly?ye.set=i(X.prototype.structName,be):ye.set=function(je){if(Ae.setter&&j("debug.setter:",F._.setters[Ce],"for",A(Ce),Ne,"@",this.pointer,"+",se.offset,"sz",se.sizeof,je),this.pointer||s("Cannot set struct property on disposed instance."),je===null)je=L;else for(;!Q(je);){if(f(se.signature)&&je instanceof Ee){je=je.pointer||L,Ae.setter&&j("debug.setter:",Ne,"resolved to",je);break}s("Invalid value for pointer-type",Ne+".")}new DataView(T().buffer,Number(this.pointer)+se.offset,se.sizeof)[F._.setters[Ce]](0,F._.sw[Ce](je),I)},Object.defineProperty(X.prototype,be,ye)},Qe=function F(X,ee){arguments.length===1?(ee=X,X=ee.name):ee.name||(ee.name=X),X||s("Struct name is required.");let se=!1;Object.keys(ee.members).forEach(Ae=>{const ye=ee.members[Ae];ye.sizeof?ye.sizeof===1?ye.signature==="c"||ye.signature==="C"||s("Unexpected sizeof==1 member",h(ee.name,Ae),"with signature",ye.signature):(ye.sizeof%4!==0&&(console.warn("Invalid struct member description =",ye,"from",ee),s(X,"member",Ae,"sizeof is not aligned. sizeof="+ye.sizeof)),ye.offset%4!==0&&(console.warn("Invalid struct member description =",ye,"from",ee),s(X,"member",Ae,"offset is not aligned. offset="+ye.offset))):s(X,"member",Ae,"is missing sizeof."),(!se||se.offset<ye.offset)&&(se=ye)}),se?ee.sizeof<se.offset+se.sizeof&&s("Invalid struct config:",X,"max member offset ("+se.offset+") ","extends past end of struct (sizeof="+ee.sizeof+")."):s("No member property descriptions found.");const be=k(u.__makeDebugFlags(F.debugFlags)),Ce=x(0),Ne=function Ae(ye){ye=x(ye),this instanceof Ae?arguments.length?((Number.isNaN(ye)||ye<=Ce)&&s("Invalid pointer value",arguments[0],"for",X,"constructor."),m(Ae,this,ye)):m(Ae,this):s("The",X,"constructor may only be called via 'new'.")};return Object.defineProperties(Ne,{debugFlags:be,isA:k(Ae=>Ae instanceof Ne),memberKey:H,memberKeys:U,methodInfoForKey:k(function(Ae){}),structInfo:k(ee),structName:k(X)}),Ne.prototype=new Ee(X,ee,k),Object.defineProperties(Ne.prototype,{debugFlags:be,constructor:k(Ne)}),Object.keys(ee.members).forEach(Ae=>ot(Ne,Ae,ee.members[Ae])),Ne};return Qe.StructType=Ee,Qe.config=a,Qe.allocCString=De,Qe.debugFlags||(Qe.debugFlags=u.__makeDebugFlags(u.debugFlags)),Qe},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const a=(...q)=>{throw new Error(q.join(" "))},s=t.capi,r=t.wasm,u=t.util;globalThis.WhWasmUtilInstaller(r),delete globalThis.WhWasmUtilInstaller;const T={core:[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(q,g)=>q[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:q=>q[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new r.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:q=>{let g;return(x,L,E,I)=>{try{const z=r.cArgvToJs(L,E);return g||(g=r.cArgvToJs(L,I)),q(z,g)|0}catch(z){return z.resultCode||s.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:q=>q[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_set_errmsg","int","sqlite3*","int","string"],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(q,g)=>q[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],int64:[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_db_status64","int","sqlite3*","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook::callback",signature:"v(pippj)",contextKey:q=>q[0],callProxy:q=>(g,x,L,E,I)=>{q(g,x,r.cstrToJs(L),r.cstrToJs(E),I)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],wasmInternal:[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]]};if(r.exports.sqlite3_progress_handler&&T.core.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(q,g)=>q[0]}),"*"]]),r.exports.sqlite3_stmt_explain&&T.core.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),r.exports.sqlite3_set_authorizer&&T.core.push(["sqlite3_set_authorizer","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(q,g)=>q[0],callProxy:q=>(g,x,L,E,I,z)=>{try{return L=L&&r.cstrToJs(L),E=E&&r.cstrToJs(E),I=I&&r.cstrToJs(I),z=z&&r.cstrToJs(z),q(g,x,L,E,I,z)|0}catch(f){return f.resultCode||s.SQLITE_ERROR}}}),"*"]]),r.exports.sqlite3_column_origin_name&&T.core.push(["sqlite3_column_database_name","string","sqlite3_stmt*","int"],["sqlite3_column_origin_name","string","sqlite3_stmt*","int"],["sqlite3_column_table_name","string","sqlite3_stmt*","int"]),r.bigIntEnabled&&r.exports.sqlite3_declare_vtab&&T.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),r.bigIntEnabled&&r.exports.sqlite3_preupdate_hook&&T.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:q=>q[0],callProxy:q=>(g,x,L,E,I,z,f)=>{q(g,x,L,r.cstrToJs(E),r.cstrToJs(I),z,f)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),r.bigIntEnabled&&r.exports.sqlite3changegroup_add&&r.exports.sqlite3session_create&&r.exports.sqlite3_preupdate_hook){const q={signature:"i(ps)",callProxy:g=>(x,L)=>{try{return g(x,r.cstrToJs(L))|0}catch(E){return E.resultCode||s.SQLITE_ERROR}}};T.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...q}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v3","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",signature:"i(pp)",bindScope:"transient"}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v3_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",signature:"i(pp)",bindScope:"transient"}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xFilter",...q,contextKey:(g,x)=>g[0]}),"*"]])}t.StructBinder=globalThis.Jaccwabyt({heap:r.heap8u,alloc:r.alloc,dealloc:r.dealloc,bigIntEnabled:r.bigIntEnabled,pointerIR:r.ptr.ir,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const q=r.xWrap.argAdapter("string");r.xWrap.argAdapter("string:flexible",E=>q(u.flexibleString(E))),r.xWrap.argAdapter("string:static",(function(E){return r.isPtr(E)?E:(E=""+E,this[E]||(this[E]=r.allocCString(E)))}).bind(Object.create(null)));const g=r.xWrap.argAdapter("*"),x=function(){};r.xWrap.argAdapter("sqlite3_filename",g)("sqlite3_context*",g)("sqlite3_value*",g)("void*",g)("sqlite3_changegroup*",g)("sqlite3_changeset_iter*",g)("sqlite3_session*",g)("sqlite3_stmt*",E=>g(E instanceof(t?.oo1?.Stmt||x)?E.pointer:E))("sqlite3*",E=>g(E instanceof(t?.oo1?.DB||x)?E.pointer:E))("sqlite3_vfs*",E=>typeof E=="string"?s.sqlite3_vfs_find(E)||t.SQLite3Error.toss(s.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",E):g(E instanceof(s.sqlite3_vfs||x)?E.pointer:E)),r.exports.sqlite3_declare_vtab&&r.xWrap.argAdapter("sqlite3_index_info*",E=>g(E instanceof(s.sqlite3_index_info||x)?E.pointer:E))("sqlite3_module*",E=>g(E instanceof(s.sqlite3_module||x)?E.pointer:E));const L=r.xWrap.resultAdapter("*");r.xWrap.resultAdapter("sqlite3*",L)("sqlite3_context*",L)("sqlite3_stmt*",L)("sqlite3_value*",L)("sqlite3_vfs*",L)("void*",L);for(const E of T.core)s[E[0]]=r.xWrap.apply(null,E);for(const E of T.wasmInternal)u[E[0]]=r.xWrap.apply(null,E);for(const E of T.int64)s[E[0]]=r.bigIntEnabled?r.xWrap.apply(null,E):()=>a(E[0]+"() is unavailable due to lack","of BigInt support in this build.");delete T.core,delete T.int64,delete T.wasmInternal,u.sqlite3__wasm_db_error=function(E,I,z){return E?(I instanceof t.WasmAllocError?(I=s.SQLITE_NOMEM,z=0):I instanceof Error&&(z=z||""+I,I=I.resultCode||s.SQLITE_ERROR),s.sqlite3_set_errmsg(E,I,z)||I):s.SQLITE_MISUSE}}{const q=r.xCall("sqlite3__wasm_enum_json");q||a("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),r.ctype=JSON.parse(r.cstrToJs(q));const g=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];r.bigIntEnabled&&g.push("serialize","session","vtab");for(const E of g)for(const I of Object.entries(r.ctype[E]))s[I[0]]=I[1];r.functionEntry(s.SQLITE_WASM_DEALLOC)||a("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+s.SQLITE_WASM_DEALLOC+").");const x=Object.create(null);for(const E of["resultCodes"])for(const I of Object.entries(r.ctype[E]))x[I[1]]=I[0];s.sqlite3_js_rc_str=E=>x[E];const L=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!u.isUIThread(),sqlite3_index_info:!r.bigIntEnabled,sqlite3_index_constraint:!r.bigIntEnabled,sqlite3_index_orderby:!r.bigIntEnabled,sqlite3_index_constraint_usage:!r.bigIntEnabled});for(const E of r.ctype.structs)L[E.name]||(s[E.name]=t.StructBinder(E));if(s.sqlite3_index_info){for(const E of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])s.sqlite3_index_info[E]=s[E],delete s[E];s.sqlite3_vtab_config=r.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const P=(q,g,x)=>u.sqlite3__wasm_db_error(q,s.SQLITE_MISUSE,g+"() requires "+x+" argument"+(x===1?"":"s")+"."),G=q=>u.sqlite3__wasm_db_error(q,s.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),j=q=>r.xWrap.argAdapter("sqlite3*")(q),w=q=>r.isPtr(q)?r.cstrToJs(q):q,D=(function(q,g){q=j(q);let x=this.dbMap.get(q);if(g)!x&&g>0&&this.dbMap.set(q,x=Object.create(null));else return this.dbMap.delete(q),x;return x}).bind(Object.assign(Object.create(null),{dbMap:new Map}));D.addCollation=function(q,g){const x=D(q,1);x.collation||(x.collation=new Set),x.collation.add(w(g).toLowerCase())},D._addUDF=function(q,g,x,L){g=w(g).toLowerCase();let E=L.get(g);E||L.set(g,E=new Set),E.add(x<0?-1:x)},D.addFunction=function(q,g,x){const L=D(q,1);L.udf||(L.udf=new Map),this._addUDF(q,g,x,L.udf)},r.exports.sqlite3_create_window_function&&(D.addWindowFunc=function(q,g,x){const L=D(q,1);L.wudf||(L.wudf=new Map),this._addUDF(q,g,x,L.wudf)}),D.cleanup=function(q){q=j(q);for(const L of[["sqlite3_busy_handler",3],["sqlite3_commit_hook",3],["sqlite3_preupdate_hook",3],["sqlite3_progress_handler",4],["sqlite3_rollback_hook",3],["sqlite3_set_authorizer",3],["sqlite3_trace_v2",4],["sqlite3_update_hook",3]]){const[E,I]=L;if(!r.exports[E])continue;const f=[q];f.length=I;try{s[E](...f)}catch(d){t.config.warn("close-time call of",E+"(",f,") threw:",d)}}const g=D(q,0);if(!g)return;if(g.collation){for(const L of g.collation)try{s.sqlite3_create_collation_v2(q,L,s.SQLITE_UTF8,0,0,0)}catch{}delete g.collation}let x;for(x=0;x<2;++x){const L=x?g.wudf:g.udf;if(!L)continue;const E=x?s.sqlite3_create_window_function:s.sqlite3_create_function_v2;for(const I of L){const z=I[0],f=I[1],d=[q,z,0,s.SQLITE_UTF8,0,0,0,0,0];x&&d.push(0);for(const A of f)try{d[2]=A,E.apply(null,d)}catch{}f.clear()}L.clear()}delete g.udf,delete g.wudf};{const q=r.xWrap("sqlite3_close_v2","int","sqlite3*");s.sqlite3_close_v2=function(g){if(arguments.length!==1)return P(g,"sqlite3_close_v2",1);if(g)try{D.cleanup(g)}catch{}return q(g)}}if(s.sqlite3session_create){const q=r.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);s.sqlite3session_delete=function(g){if(arguments.length!==1)return P(pDb,"sqlite3session_delete",1);g&&s.sqlite3session_table_filter(g,0,0),q(g)}}{const q=(x,L)=>"argv["+L+"]:"+x[0]+":"+r.cstrToJs(x[1]).toLowerCase(),g=r.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new r.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:q}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:q})]);s.sqlite3_create_collation_v2=function(x,L,E,I,z,f){if(arguments.length!==6)return P(x,"sqlite3_create_collation_v2",6);if((E&15)===0)E|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(E&15))return G(x);try{const d=g(x,L,E,I,z,f);return d===0&&z instanceof Function&&D.addCollation(x,L),d}catch(d){return u.sqlite3__wasm_db_error(x,d)}},s.sqlite3_create_collation=(x,L,E,I,z)=>arguments.length===5?s.sqlite3_create_collation_v2(x,L,E,I,z,0):P(x,"sqlite3_create_collation",5)}{const q=function(E,I){return E[0]+":"+(E[2]<0?-1:E[2])+":"+I+":"+r.cstrToJs(E[1]).toLowerCase()},g=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:q,callProxy:E=>(I,z,f)=>{try{E(I,...s.sqlite3_values_to_js(z,f))}catch(d){s.sqlite3_result_error_js(I,d)}}},xFinalAndValue:{signature:"v(p)",contextKey:q,callProxy:E=>I=>{try{s.sqlite3_result_js(I,E(I))}catch(z){s.sqlite3_result_error_js(I,z)}}},xFunc:{signature:"v(pip)",contextKey:q,callProxy:E=>(I,z,f)=>{try{s.sqlite3_result_js(I,E(I,...s.sqlite3_values_to_js(z,f)))}catch(d){s.sqlite3_result_error_js(I,d)}}},xDestroy:{signature:"v(p)",contextKey:q,callProxy:E=>I=>{try{E(I)}catch(z){console.error("UDF xDestroy method threw:",z)}}}}),x=r.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xFunc",...g.xFunc}),new r.xWrap.FuncPtrAdapter({name:"xStep",...g.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...g.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...g.xDestroy})]),L=r.exports.sqlite3_create_window_function?r.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xStep",...g.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...g.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xValue",...g.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xInverse",...g.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...g.xDestroy})]):void 0;s.sqlite3_create_function_v2=function E(I,z,f,d,A,O,$,Y,oe){if(E.length!==arguments.length)return P(I,"sqlite3_create_function_v2",E.length);if((d&15)===0)d|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(d&15))return G(I);try{const h=x(I,z,f,d,A,O,$,Y,oe);return h===0&&(O instanceof Function||$ instanceof Function||Y instanceof Function||oe instanceof Function)&&D.addFunction(I,z,f),h}catch(h){return console.error("sqlite3_create_function_v2() setup threw:",h),u.sqlite3__wasm_db_error(I,h,"Creation of UDF threw: "+h)}},s.sqlite3_create_function=function E(I,z,f,d,A,O,$,Y){return E.length===arguments.length?s.sqlite3_create_function_v2(I,z,f,d,A,O,$,Y,0):P(I,"sqlite3_create_function",E.length)},L?s.sqlite3_create_window_function=function E(I,z,f,d,A,O,$,Y,oe,h){if(E.length!==arguments.length)return P(I,"sqlite3_create_window_function",E.length);if((d&15)===0)d|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(d&15))return G(I);try{const i=L(I,z,f,d,A,O,$,Y,oe,h);return i===0&&(O instanceof Function||$ instanceof Function||Y instanceof Function||oe instanceof Function||h instanceof Function)&&D.addWindowFunc(I,z,f),i}catch(i){return console.error("sqlite3_create_window_function() setup threw:",i),u.sqlite3__wasm_db_error(I,i,"Creation of UDF threw: "+i)}}:delete s.sqlite3_create_window_function,s.sqlite3_create_function_v2.udfSetResult=s.sqlite3_create_function.udfSetResult=s.sqlite3_result_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfSetResult=s.sqlite3_result_js),s.sqlite3_create_function_v2.udfConvertArgs=s.sqlite3_create_function.udfConvertArgs=s.sqlite3_values_to_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfConvertArgs=s.sqlite3_values_to_js),s.sqlite3_create_function_v2.udfSetError=s.sqlite3_create_function.udfSetError=s.sqlite3_result_error_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfSetError=s.sqlite3_result_error_js)}{const q=(x,L)=>(typeof x=="string"?L=-1:u.isSQLableTypedArray(x)?(L=x.byteLength,x=r.typedArrayToString(x instanceof ArrayBuffer?new Uint8Array(x):x)):Array.isArray(x)&&(x=x.join(""),L=-1),[x,L]),g={basic:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};s.sqlite3_prepare_v3=function x(L,E,I,z,f,d){if(x.length!==arguments.length)return P(L,"sqlite3_prepare_v3",x.length);const[A,O]=q(E,Number(I));switch(typeof A){case"string":return g.basic(L,A,O,z,f,null);case typeof r.ptr.null:return g.full(L,r.ptr.coerce(A),O,z,f,d);default:return u.sqlite3__wasm_db_error(L,s.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3(). typeof="+typeof A)}},s.sqlite3_prepare_v2=function x(L,E,I,z,f){return x.length===arguments.length?s.sqlite3_prepare_v3(L,E,I,0,z,f):P(L,"sqlite3_prepare_v2",x.length)}}{const q=r.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),g=r.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);s.sqlite3_bind_text=function x(L,E,I,z,f){if(x.length!==arguments.length)return P(s.sqlite3_db_handle(L),"sqlite3_bind_text",x.length);if(r.isPtr(I)||I===null)return q(L,E,I,z,f);I instanceof ArrayBuffer?I=new Uint8Array(I):Array.isArray(pMem)&&(I=pMem.join(""));let d,A;try{if(u.isSQLableTypedArray(I))d=r.allocFromTypedArray(I),A=I.byteLength;else if(typeof I=="string")[d,A]=r.allocCString(I);else return u.sqlite3__wasm_db_error(s.sqlite3_db_handle(L),s.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return q(L,E,d,A,s.SQLITE_WASM_DEALLOC)}catch(O){return r.dealloc(d),u.sqlite3__wasm_db_error(s.sqlite3_db_handle(L),O)}},s.sqlite3_bind_blob=function x(L,E,I,z,f){if(x.length!==arguments.length)return P(s.sqlite3_db_handle(L),"sqlite3_bind_blob",x.length);if(r.isPtr(I)||I===null)return g(L,E,I,z,f);I instanceof ArrayBuffer?I=new Uint8Array(I):Array.isArray(I)&&(I=I.join(""));let d,A;try{if(u.isBindableTypedArray(I))d=r.allocFromTypedArray(I),A=z>=0?z:I.byteLength;else if(typeof I=="string")[d,A]=r.allocCString(I);else return u.sqlite3__wasm_db_error(s.sqlite3_db_handle(L),s.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return g(L,E,d,A,s.SQLITE_WASM_DEALLOC)}catch(O){return r.dealloc(d),u.sqlite3__wasm_db_error(s.sqlite3_db_handle(L),O)}}}s.sqlite3_config=function(q,...g){if(arguments.length<2)return s.SQLITE_MISUSE;switch(q){case s.SQLITE_CONFIG_COVERING_INDEX_SCAN:case s.SQLITE_CONFIG_MEMSTATUS:case s.SQLITE_CONFIG_SMALL_MALLOC:case s.SQLITE_CONFIG_SORTERREF_SIZE:case s.SQLITE_CONFIG_STMTJRNL_SPILL:case s.SQLITE_CONFIG_URI:return r.exports.sqlite3__wasm_config_i(q,g[0]);case s.SQLITE_CONFIG_LOOKASIDE:return r.exports.sqlite3__wasm_config_ii(q,g[0],g[1]);case s.SQLITE_CONFIG_MEMDB_MAXSIZE:return r.exports.sqlite3__wasm_config_j(q,g[0]);case s.SQLITE_CONFIG_GETMALLOC:case s.SQLITE_CONFIG_GETMUTEX:case s.SQLITE_CONFIG_GETPCACHE2:case s.SQLITE_CONFIG_GETPCACHE:case s.SQLITE_CONFIG_HEAP:case s.SQLITE_CONFIG_LOG:case s.SQLITE_CONFIG_MALLOC:case s.SQLITE_CONFIG_MMAP_SIZE:case s.SQLITE_CONFIG_MULTITHREAD:case s.SQLITE_CONFIG_MUTEX:case s.SQLITE_CONFIG_PAGECACHE:case s.SQLITE_CONFIG_PCACHE2:case s.SQLITE_CONFIG_PCACHE:case s.SQLITE_CONFIG_PCACHE_HDRSZ:case s.SQLITE_CONFIG_PMASZ:case s.SQLITE_CONFIG_SERIALIZED:case s.SQLITE_CONFIG_SINGLETHREAD:case s.SQLITE_CONFIG_SQLLOG:case s.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return s.SQLITE_NOTFOUND}};{const q=new Set;s.sqlite3_auto_extension=function(g){if(g instanceof Function)g=r.installFunction("i(ppp)",g);else if(arguments.length!==1||!r.isPtr(g))return s.SQLITE_MISUSE;const x=r.exports.sqlite3_auto_extension(g);return g!==arguments[0]&&(x===0?q.add(g):r.uninstallFunction(g)),x},s.sqlite3_cancel_auto_extension=function(g){return!g||arguments.length!==1||!r.isPtr(g)?0:r.exports.sqlite3_cancel_auto_extension(g)},s.sqlite3_reset_auto_extension=function(){r.exports.sqlite3_reset_auto_extension();for(const g of q)r.uninstallFunction(g);q.clear()}}const M=s.sqlite3_vfs_find("kvvfs");if(M)if(u.isUIThread()){const q=new s.sqlite3_kvvfs_methods(r.exports.sqlite3__wasm_kvvfs_methods());delete s.sqlite3_kvvfs_methods;const g=r.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,x=r.pstack,L=I=>r.peek(I)===115?sessionStorage:localStorage,E={xRead:(I,z,f,d)=>{const A=x.pointer,O=r.scopedAllocPush();try{const $=g(I,z);if(!$)return-3;const Y=r.cstrToJs($),oe=L(I).getItem(Y);if(!oe)return-1;const h=oe.length;if(d<=0)return h;if(d===1)return r.poke(f,0),h;const i=r.scopedAllocCString(oe);return d>h+1&&(d=h+1),r.heap8u().copyWithin(Number(f),Number(i),r.ptr.addn(i,d,-1)),r.poke(r.ptr.add(f,d,-1),0),d-1}catch($){return t.config.error("kvstorageRead()",$),-2}finally{x.restore(A),r.scopedAllocPop(O)}},xWrite:(I,z,f)=>{const d=x.pointer;try{const A=g(I,z);if(!A)return 1;const O=r.cstrToJs(A);return L(I).setItem(O,r.cstrToJs(f)),0}catch(A){return t.config.error("kvstorageWrite()",A),s.SQLITE_IOERR}finally{x.restore(d)}},xDelete:(I,z)=>{const f=x.pointer;try{const d=g(I,z);return d?(L(I).removeItem(r.cstrToJs(d)),0):1}catch(d){return t.config.error("kvstorageDelete()",d),s.SQLITE_IOERR}finally{x.restore(f)}}};for(const I of Object.keys(E))q[q.memberKey(I)]=r.installFunction(q.memberSignature(I),E[I])}else s.sqlite3_vfs_unregister(M);r.xWrap.FuncPtrAdapter.warnOnUse=!0;const C=t.StructBinder,V=function q(g,x,L,E=q.installMethodArgcCheck){if(g instanceof C.StructType?!(L instanceof Function)&&!r.isPtr(L)&&a("Usage error: expecting a Function or WASM pointer to one."):a("Usage error: target object is-not-a StructType."),arguments.length===1)return(d,A)=>q(g,d,A,E);q.argcProxy||(q.argcProxy=function(d,A,O,$){return function(...Y){return O.length!==arguments.length&&a("Argument mismatch for",d.structInfo.name+"::"+A+": Native signature is:",$),O.apply(this,Y)}},q.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((d,A)=>{if(r.isPtr(d))try{r.uninstallFunction(d)}catch{}}),delete this.ondispose.__removeFuncList)});const I=g.memberSignature(x);I.length<2&&a("Member",x,"does not have a function pointer signature:",I);const z=g.memberKey(x),f=E&&!r.isPtr(L)?q.argcProxy(g,z,L,I):L;if(r.isPtr(f))f&&!r.functionEntry(f)&&a("Pointer",f,"is not a WASM function table entry."),g[z]=f;else{const d=r.installFunction(f,g.memberSignature(x));g[z]=d,(!g.ondispose||!g.ondispose.__removeFuncList)&&(g.addOnDispose("ondispose.__removeFuncList handler",q.removeFuncList),g.ondispose.__removeFuncList=[]),g.ondispose.__removeFuncList.push(z,d)}return(d,A)=>q(g,d,A,E)};V.installMethodArgcCheck=!1;const B=function(q,g,x=V.installMethodArgcCheck){const L=new Map;for(const E of Object.keys(g)){const I=g[E],z=L.get(I);if(z){const f=q.memberKey(E);q[f]=q[q.memberKey(z)]}else V(q,E,I,x),L.set(I,E)}return q};C.StructType.prototype.installMethod=function(g,x,L=V.installMethodArgcCheck){return arguments.length<3&&g&&typeof g=="object"?B(this,...arguments):V(this,...arguments)},C.StructType.prototype.installMethods=function(q,g=V.installMethodArgcCheck){return B(this,q,g)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.51.1",libVersionNumber:3051001,sourceId:"2025-11-28 17:28:25 281fc0e9afc38674b9b0991943b9e9d1e64c6cbdb133d35f6f5c87ff6af38a88",downloadVersion:3510100,scm:{"sha3-256":"281fc0e9afc38674b9b0991943b9e9d1e64c6cbdb133d35f6f5c87ff6af38a88",branch:"branch-3.51",tags:"release version-3.51.1",datetime:"2025-11-28T17:28:25.933Z"}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const a=(...h)=>{throw new t.SQLite3Error(...h)},s=t.capi,r=t.wasm,u=t.util,T=new WeakMap,P=new Set,G=new WeakMap,j=(h,i,c)=>{const p=Object.getOwnPropertyDescriptor(h,i);return p?p.value:c},w=function(h,i){return i&&(h instanceof V&&(h=h.pointer),a(i,"sqlite3 result code",i+":",h?s.sqlite3_errmsg(h):s.sqlite3_errstr(i))),arguments[0]},D=r.installFunction("i(ippp)",(function(h,i,c,p){s.SQLITE_TRACE_STMT===h&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+i+":",r.cstrToJs(p))}).bind({counter:0})),M=Object.create(null),C=function h(...i){if(!h._name2vfs){h._name2vfs=Object.create(null);const b=typeof importScripts=="function"?R=>a("The VFS for",R,"is only available in the main window thread."):!1;h._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:b||(()=>"local")},h._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:b||(()=>"session")}}const c=h.normalizeArgs(...i);let p;if(p=c["sqlite3*"])c["sqlite3*:takeOwnership"]||P.add(this),this.filename=s.sqlite3_db_filename(p,"main");else{let b=c.filename,R=c.vfs,Q=c.flags;(typeof b!="string"&&!r.isPtr(b)||typeof Q!="string"||R&&typeof R!="string"&&!r.isPtr(R))&&(t.config.error("Invalid DB ctor args",c,arguments),a("Invalid arguments for DB constructor:",arguments,"opts:",c));let ne=r.isPtr(b)?r.cstrToJs(b):b;const k=h._name2vfs[ne];k&&(R=k.vfs,b=ne=k.filename(ne));let m=0;Q.indexOf("c")>=0&&(m|=s.SQLITE_OPEN_CREATE|s.SQLITE_OPEN_READWRITE),Q.indexOf("w")>=0&&(m|=s.SQLITE_OPEN_READWRITE),m===0&&(m|=s.SQLITE_OPEN_READONLY),m|=s.SQLITE_OPEN_EXRESCODE;const S=r.pstack.pointer;try{const W=r.pstack.allocPtr();let H=s.sqlite3_open_v2(b,W,m,R||r.ptr.null);p=r.peekPtr(W),w(p,H),s.sqlite3_extended_result_codes(p,1),Q.indexOf("t")>=0&&s.sqlite3_trace_v2(p,s.SQLITE_TRACE_STMT,D,p)}catch(W){throw p&&s.sqlite3_close_v2(p),W}finally{r.pstack.restore(S)}this.filename=ne}if(T.set(this,p),G.set(this,Object.create(null)),!c["sqlite3*"])try{const b=s.sqlite3_js_db_vfs(p)||a("Internal error: cannot get VFS for new db handle."),R=M[b];R&&(R instanceof Function?R(this,t):w(p,s.sqlite3_exec(p,R,0,0,0)))}catch(b){throw this.close(),b}};C.setVfsPostOpenCallback=function(h,i){i instanceof Function||a("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),M[h]=i},C.normalizeArgs=function(h=":memory:",i="c",c=null){const p={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(p,arguments[0]),p.flags===void 0&&(p.flags="c"),p.vfs===void 0&&(p.vfs=null),p.filename===void 0&&(p.filename=":memory:")):(p.filename=h,p.flags=i,p.vfs=c),p};const V=function(...h){C.apply(this,h)};V.dbCtorHelper=C;const B={null:1,number:2,string:3,boolean:4,blob:5};r.bigIntEnabled&&(B.bigint=B.number);const q=function(){B!==arguments[2]&&a(s.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],T.set(this,arguments[1]),arguments.length>3&&!arguments[3]&&P.add(this)},g=function(h){return h.pointer||a("DB has been closed."),h},x=function(h,i){return(i!==(i|0)||i<0||i>=h.columnCount)&&a("Column index",i,"is out of range."),h},L=function(h,i){const c=Object.create(null);switch(c.opt=Object.create(null),i.length){case 1:typeof i[0]=="string"||u.isSQLableTypedArray(i[0])||Array.isArray(i[0])?c.sql=i[0]:i[0]&&typeof i[0]=="object"&&(c.opt=i[0],c.sql=c.opt.sql);break;case 2:c.sql=i[0],c.opt=i[1];break;default:a("Invalid argument count for exec().")}c.sql=u.flexibleString(c.sql),typeof c.sql!="string"&&a("Missing SQL argument or unsupported SQL value type.");const p=c.opt;switch(p.returnValue){case"resultRows":p.resultRows||(p.resultRows=[]),c.returnVal=()=>p.resultRows;break;case"saveSql":p.saveSql||(p.saveSql=[]),c.returnVal=()=>p.saveSql;break;case void 0:case"this":c.returnVal=()=>h;break;default:a("Invalid returnValue value:",p.returnValue)}if(!p.callback&&!p.returnValue&&p.rowMode!==void 0&&(p.resultRows||(p.resultRows=[]),c.returnVal=()=>p.resultRows),p.callback||p.resultRows)switch(p.rowMode===void 0?"array":p.rowMode){case"object":c.cbArg=(b,R)=>{R.columnNames||(R.columnNames=b.getColumnNames([]));const Q=b.get([]),ne=Object.create(null);for(const k in R.columnNames)ne[R.columnNames[k]]=Q[k];return ne};break;case"array":c.cbArg=b=>b.get([]);break;case"stmt":Array.isArray(p.resultRows)&&a("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),c.cbArg=b=>b;break;default:if(u.isInt32(p.rowMode)){c.cbArg=b=>b.get(p.rowMode);break}else if(typeof p.rowMode=="string"&&p.rowMode.length>1&&p.rowMode[0]==="$"){const b=p.rowMode.substr(1);c.cbArg=R=>{const Q=R.get(Object.create(null))[b];return Q===void 0?a(s.SQLITE_NOTFOUND,"exec(): unknown result column:",b):Q};break}a("Invalid rowMode:",p.rowMode)}return c},E=(h,i,c,...p)=>{const b=h.prepare(i);try{const R=b.bind(c).step()?b.get(...p):void 0;return b.reset(),R}finally{b.finalize()}},I=(h,i,c,p)=>h.exec({sql:i,bind:c,rowMode:p,returnValue:"resultRows"});V.checkRc=(h,i)=>w(h,i),V.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return g(this)},close:function(){const h=this.pointer;if(h){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}if(Object.keys(G.get(this)).forEach((i,c)=>{if(c&&c.pointer)try{c.finalize()}catch{}}),T.delete(this),G.delete(this),P.delete(this)||s.sqlite3_close_v2(h),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(h=!1,i=!1){const c=g(this).pointer;return h?i?s.sqlite3_total_changes64(c):s.sqlite3_total_changes(c):i?s.sqlite3_changes64(c):s.sqlite3_changes(c)},dbFilename:function(h="main"){return s.sqlite3_db_filename(g(this).pointer,h)},dbName:function(h=0){return s.sqlite3_db_name(g(this).pointer,h)},dbVfsName:function(h=0){let i;const c=s.sqlite3_js_db_vfs(g(this).pointer,h);if(c){const p=new s.sqlite3_vfs(c);try{i=r.cstrToJs(p.$zName)}finally{p.dispose()}}return i},prepare:function(h){g(this);const i=r.pstack.pointer;let c,p;try{c=r.pstack.alloc(8),V.checkRc(this,s.sqlite3_prepare_v2(this.pointer,h,-1,c,null)),p=r.peekPtr(c)}finally{r.pstack.restore(i)}p||a("Cannot prepare empty SQL.");const b=new q(this,p,B);return G.get(this)[p]=b,b},exec:function(){g(this);const h=L(this,arguments);if(!h.sql)return a("exec() requires an SQL string.");const i=h.opt,c=i.callback,p=Array.isArray(i.resultRows)?i.resultRows:void 0;let b,R=i.bind,Q=!!(h.cbArg||i.columnNames||p);const ne=r.scopedAllocPush(),k=Array.isArray(i.saveSql)?i.saveSql:void 0;try{const m=u.isSQLableTypedArray(h.sql);let S=m?h.sql.byteLength:r.jstrlen(h.sql);const W=r.scopedAlloc(2*r.ptr.size+(S+1)),H=r.ptr.add(W,r.ptr.size);let Z=r.ptr.add(H,r.ptr.size);const y=r.ptr.add(Z,S);for(m?r.heap8().set(h.sql,Z):r.jstrcpy(h.sql,r.heap8(),Z,S,!1),r.poke(r.ptr.add(Z,S),0);Z&&r.peek(Z,"i8");){r.pokePtr([W,H],0),V.checkRc(this,s.sqlite3_prepare_v3(this.pointer,Z,S,0,W,H));const N=r.peekPtr(W);if(Z=r.peekPtr(H),S=Number(r.ptr.add(y,-Z)),!!N){if(k&&k.push(s.sqlite3_sql(N).trim()),b=new q(this,N,B),R&&b.parameterCount&&(b.bind(R),R=null),Q&&b.columnCount){let U=Array.isArray(i.columnNames)?0:1;if(Q=!1,h.cbArg||p){const J=Object.create(null);for(;b.step();O.delete(b)){U++===0&&b.getColumnNames(J.columnNames=i.columnNames||[]),O.add(b);const K=h.cbArg(b,J);if(p&&p.push(K),c&&c.call(i,K,b)===!1)break}O.delete(b)}U===0&&b.getColumnNames(i.columnNames)}else b.step();b.reset().finalize(),b=null}}}finally{r.scopedAllocPop(ne),b&&(O.delete(b),b.finalize())}return h.returnVal()},createFunction:function(i,c,p){const b=J=>J instanceof Function;switch(arguments.length){case 1:p=i,i=p.name,c=p.xFunc||0;break;case 2:b(c)||(p=c,c=p.xFunc||0);break}p||(p={}),typeof i!="string"&&a("Invalid arguments: missing function name.");let R=p.xStep||0,Q=p.xFinal||0;const ne=p.xValue||0,k=p.xInverse||0;let m;b(c)?(m=!1,(b(R)||b(Q))&&a("Ambiguous arguments: scalar or aggregate?"),R=Q=null):b(R)?(b(Q)||a("Missing xFinal() callback for aggregate or window UDF."),c=null):b(Q)?a("Missing xStep() callback for aggregate or window UDF."):a("Missing function-type properties."),m===!1?(b(ne)||b(k))&&a("xValue and xInverse are not permitted for non-window UDFs."):b(ne)?(b(k)||a("xInverse must be provided if xValue is."),m=!0):b(k)&&a("xValue must be provided if xInverse is.");const S=p.pApp;S!=null&&!r.isPtr(S)&&a("Invalid value for pApp property. Must be a legal WASM pointer value.");const W=p.xDestroy||0;W&&!b(W)&&a("xDestroy property must be a function.");let H=0;j(p,"deterministic")&&(H|=s.SQLITE_DETERMINISTIC),j(p,"directOnly")&&(H|=s.SQLITE_DIRECTONLY),j(p,"innocuous")&&(H|=s.SQLITE_INNOCUOUS),i=i.toLowerCase();const Z=c||R,y=j(p,"arity"),N=typeof y=="number"?y:Z.length?Z.length-1:0;let U;return m?U=s.sqlite3_create_window_function(this.pointer,i,N,s.SQLITE_UTF8|H,S||0,R,Q,ne,k,W):U=s.sqlite3_create_function_v2(this.pointer,i,N,s.SQLITE_UTF8|H,S||0,c,R,Q,W),V.checkRc(this,U),this},selectValue:function(h,i,c){return E(this,h,i,0,c)},selectValues:function(h,i,c){const p=this.prepare(h),b=[];try{for(p.bind(i);p.step();)b.push(p.get(0,c));p.reset()}finally{p.finalize()}return b},selectArray:function(h,i){return E(this,h,i,[])},selectObject:function(h,i){return E(this,h,i,{})},selectArrays:function(h,i){return I(this,h,i,"array")},selectObjects:function(h,i){return I(this,h,i,"object")},openStatementCount:function(){return this.pointer?Object.keys(G.get(this)).length:0},transaction:function(h){let i="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&a(s.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),i+=" "+arguments[0],h=arguments[1]),g(this).exec(i);try{const c=h(this);return this.exec("COMMIT"),c}catch(c){throw this.exec("ROLLBACK"),c}},savepoint:function(h){g(this).exec("SAVEPOINT oo1");try{const i=h(this);return this.exec("RELEASE oo1"),i}catch(i){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),i}},checkRc:function(h){return w(this,h)}},V.wrapHandle=function(h,i=!1){if(!h||!r.isPtr(h))throw new t.SQLite3Error(s.SQLITE_MISUSE,"Argument must be a WASM sqlite3 pointer");return new V({"sqlite3*":h,"sqlite3*:takeOwnership":!!i})};const z=function(h){return h.pointer||a("Stmt has been closed."),h},f=function(h){let i=B[h==null?"null":typeof h];switch(i){case B.boolean:case B.null:case B.number:case B.string:return i;case B.bigint:return r.bigIntEnabled?i:void 0;default:return u.isBindableTypedArray(h)?B.blob:void 0}},d=function(h){return f(h)||a("Unsupported bind() argument type:",typeof h)},A=function(h,i){const c=typeof i=="number"?i:s.sqlite3_bind_parameter_index(h.pointer,i);return c===0||!u.isInt32(c)?a("Invalid bind() parameter name: "+i):(c<1||c>h.parameterCount)&&a("Bind index",i,"is out of range."),c},O=new Set,$=new Set,Y=function(h,i){return O.has(h)&&a("Operation is illegal when statement is locked:",i),h},oe=function h(i,c,p,b){Y(z(i),"bind()"),h._||(h._tooBigInt=Q=>a("BigInt value is too big to store without precision loss:",Q),h._={string:function(Q,ne,k,m){const[S,W]=r.allocCString(k,!0);return(m?s.sqlite3_bind_blob:s.sqlite3_bind_text)(Q.pointer,ne,S,W,s.SQLITE_WASM_DEALLOC)}}),d(b),c=A(i,c);let R=0;switch(b==null?B.null:p){case B.null:R=s.sqlite3_bind_null(i.pointer,c);break;case B.string:R=h._.string(i,c,b,!1);break;case B.number:{let Q;u.isInt32(b)?Q=s.sqlite3_bind_int:typeof b=="bigint"?u.bigIntFits64(b)?r.bigIntEnabled?Q=s.sqlite3_bind_int64:u.bigIntFitsDouble(b)?(b=Number(b),Q=s.sqlite3_bind_double):h._tooBigInt(b):h._tooBigInt(b):(b=Number(b),r.bigIntEnabled&&Number.isInteger(b)?Q=s.sqlite3_bind_int64:Q=s.sqlite3_bind_double),R=Q(i.pointer,c,b);break}case B.boolean:R=s.sqlite3_bind_int(i.pointer,c,b?1:0);break;case B.blob:{if(typeof b=="string"){R=h._.string(i,c,b,!0);break}else b instanceof ArrayBuffer?b=new Uint8Array(b):u.isBindableTypedArray(b)||a("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const Q=r.alloc(b.byteLength||1);r.heap8().set(b.byteLength?b:[0],Number(Q)),R=s.sqlite3_bind_blob(i.pointer,c,Q,b.byteLength,s.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",b),a("Unsupported bind() argument type: "+typeof b)}return R&&V.checkRc(i.db.pointer,R),i};q.prototype={finalize:function(){const h=this.pointer;if(h){Y(this,"finalize()");const i=P.delete(this)?0:s.sqlite3_finalize(h);return delete G.get(this.db)[h],T.delete(this),O.delete(this),$.delete(this),delete this.parameterCount,delete this.db,i}},clearBindings:function(){return Y(z(this),"clearBindings()"),s.sqlite3_clear_bindings(this.pointer),$.delete(this),this},reset:function(h){Y(this,"reset()"),h&&this.clearBindings();const i=s.sqlite3_reset(z(this).pointer);return $.delete(this),w(this.db,i),this},bind:function(){z(this);let h,i;switch(arguments.length){case 1:h=1,i=arguments[0];break;case 2:h=arguments[0],i=arguments[1];break;default:a("Invalid bind() arguments.")}return i===void 0?this:(this.parameterCount||a("This statement has no bindable parameters."),$.delete(this),i===null?oe(this,h,B.null,i):Array.isArray(i)?(arguments.length!==1&&a("When binding an array, an index argument is not permitted."),i.forEach((c,p)=>oe(this,p+1,d(c),c)),this):(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),typeof i=="object"&&!u.isBindableTypedArray(i)?(arguments.length!==1&&a("When binding an object, an index argument is not permitted."),Object.keys(i).forEach(c=>oe(this,c,d(i[c]),i[c])),this):oe(this,h,d(i),i)))},bindAsBlob:function(h,i){z(this),arguments.length===1&&(i=h,h=1);const c=d(i);return B.string!==c&&B.blob!==c&&B.null!==c&&a("Invalid value type for bindAsBlob()"),oe(this,h,B.blob,i)},step:function(){Y(this,"step()");const h=s.sqlite3_step(z(this).pointer);switch(h){case s.SQLITE_DONE:return $.delete(this),!1;case s.SQLITE_ROW:return $.add(this),!0;default:$.delete(this),t.config.warn("sqlite3_step() rc=",h,s.sqlite3_js_rc_str(h),"SQL =",s.sqlite3_sql(this.pointer)),V.checkRc(this.db.pointer,h)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const h=this.step();return this.reset(),h}finally{try{this.finalize()}catch{}}},get:function(h,i){if($.has(z(this))||a("Stmt.step() has not (recently) returned true."),Array.isArray(h)){let c=0;const p=this.columnCount;for(;c<p;)h[c]=this.get(c++);return h}else if(h&&typeof h=="object"){let c=0;const p=this.columnCount;for(;c<p;)h[s.sqlite3_column_name(this.pointer,c)]=this.get(c++);return h}switch(x(this,h),i===void 0?s.sqlite3_column_type(this.pointer,h):i){case s.SQLITE_NULL:return null;case s.SQLITE_INTEGER:if(r.bigIntEnabled){const c=s.sqlite3_column_int64(this.pointer,h);return c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c).valueOf():c}else{const c=s.sqlite3_column_double(this.pointer,h);return(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&a("Integer is out of range for JS integer range: "+c),u.isInt32(c)?c|0:c}case s.SQLITE_FLOAT:return s.sqlite3_column_double(this.pointer,h);case s.SQLITE_TEXT:return s.sqlite3_column_text(this.pointer,h);case s.SQLITE_BLOB:{const c=s.sqlite3_column_bytes(this.pointer,h),p=s.sqlite3_column_blob(this.pointer,h),b=new Uint8Array(c);return c&&(b.set(r.heap8u().slice(Number(p),Number(p)+c),0),this.db._blobXfer instanceof Array&&this.db._blobXfer.push(b.buffer)),b}default:a("Don't know how to translate","type of result column #"+h+".")}a("Not reached.")},getInt:function(h){return this.get(h,s.SQLITE_INTEGER)},getFloat:function(h){return this.get(h,s.SQLITE_FLOAT)},getString:function(h){return this.get(h,s.SQLITE_TEXT)},getBlob:function(h){return this.get(h,s.SQLITE_BLOB)},getJSON:function(h){const i=this.get(h,s.SQLITE_STRING);return i===null?i:JSON.parse(i)},getColumnName:function(h){return s.sqlite3_column_name(x(z(this),h).pointer,h)},getColumnNames:function(h=[]){x(z(this),0);const i=this.columnCount;for(let c=0;c<i;++c)h.push(s.sqlite3_column_name(this.pointer,c));return h},getParamIndex:function(h){return z(this).parameterCount?s.sqlite3_bind_parameter_index(this.pointer,h):void 0},getParamName:function(h){return z(this).parameterCount?s.sqlite3_bind_parameter_name(this.pointer,h):void 0},isBusy:function(){return s.sqlite3_stmt_busy(z(this))!==0},isReadOnly:function(){return s.sqlite3_stmt_readonly(z(this))!==0}};{const h={enumerable:!0,get:function(){return T.get(this)},set:()=>a("The pointer property is read-only.")};Object.defineProperty(q.prototype,"pointer",h),Object.defineProperty(V.prototype,"pointer",h)}if(Object.defineProperty(q.prototype,"columnCount",{enumerable:!1,get:function(){return s.sqlite3_column_count(this.pointer)},set:()=>a("The columnCount property is read-only.")}),Object.defineProperty(q.prototype,"parameterCount",{enumerable:!1,get:function(){return s.sqlite3_bind_parameter_count(this.pointer)},set:()=>a("The parameterCount property is read-only.")}),q.wrapHandle=function(h,i,c=!1){if(!(h instanceof V)||!h.pointer)throw new t.SQLite3Error(t.SQLITE_MISUSE,"First argument must be an opened sqlite3.oo1.DB instance");if(!i||!r.isPtr(i))throw new t.SQLite3Error(t.SQLITE_MISUSE,"Second argument must be a WASM sqlite3_stmt pointer");return new q(h,i,B,!!c)},t.oo1={DB:V,Stmt:q},u.isUIThread()){t.oo1.JsStorageDb=function(i="session"){const c=C.normalizeArgs(...arguments);i=c.filename,i!=="session"&&i!=="local"&&a("JsStorageDb db name must be one of 'session' or 'local'."),c.vfs="kvvfs",C.call(this,c)};const h=t.oo1.JsStorageDb;h.prototype=Object.create(V.prototype),h.clearStorage=s.sqlite3_js_kvvfs_clear,h.prototype.clearStorage=function(){return h.clearStorage(g(this).filename)},h.storageSize=s.sqlite3_js_kvvfs_size,h.prototype.storageSize=function(){return h.storageSize(g(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const a=t.util;t.initWorker1API=(function(){const s=(...M)=>{throw new Error(M.join(" "))};globalThis.WorkerGlobalScope instanceof Function||s("initWorker1API() must be run from a Worker thread.");const r=this.sqlite3||s("Missing this.sqlite3 object."),u=r.oo1.DB,T=function(M){let C=P.idMap.get(M);return C||(C="db#"+ ++P.idSeq+":"+Math.floor(Math.random()*1e8)+":"+Math.floor(Math.random()*1e8),P.idMap.set(M,C),C)},P={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(M){const C=new u(M);return this.dbs[T(C)]=C,this.dbList.indexOf(C)<0&&this.dbList.push(C),C},close:function(M,C){if(M){delete this.dbs[T(M)];const V=M.filename,B=a.sqlite3__wasm_db_vfs(M.pointer,0);M.close();const q=this.dbList.indexOf(M);q>=0&&this.dbList.splice(q,1),C&&V&&B&&a.sqlite3__wasm_vfs_unlink(B,V)}},post:function(M,C){C&&C.length?(globalThis.postMessage(M,Array.from(C)),C.length=0):globalThis.postMessage(M)},dbs:Object.create(null),getDb:function(M,C=!0){return this.dbs[M]||(C?s("Unknown (or closed) DB ID:",M):void 0)}},G=function(M=P.dbList[0]){return M&&M.pointer?M:s("DB is not opened.")},j=function(M,C=!0){const V=P.getDb(M.dbId,!1)||P.dbList[0];return C?G(V):V},w=function(){return P.dbList[0]&&T(P.dbList[0])},D={open:function(M){const C=Object.create(null),V=M.args||Object.create(null);V.simulateError&&s("Throwing because of simulateError flag.");const B=Object.create(null);C.vfs=V.vfs,C.filename=V.filename||"";const q=P.open(C);return B.filename=q.filename,B.persistent=!!r.capi.sqlite3_js_db_uses_vfs(q.pointer,"opfs"),B.dbId=T(q),B.vfs=q.dbVfsName(),B},close:function(M){const C=j(M,!1),V={filename:C&&C.filename};if(C){const B=M.args&&typeof M.args=="object"?!!M.args.unlink:!1;P.close(C,B)}return V},exec:function(M){const C=typeof M.args=="string"?{sql:M.args}:M.args||Object.create(null);C.rowMode==="stmt"?s("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):C.sql||s("'exec' requires input SQL.");const V=j(M);(C.callback||Array.isArray(C.resultRows))&&(V._blobXfer=P.xfer);const B=C.callback;let q=0;const g=!!C.columnNames;typeof B=="string"&&(g||(C.columnNames=[]),C.callback=function(x,L){P.post({type:B,columnNames:C.columnNames,rowNumber:++q,row:x},P.xfer)});try{const x=C.countChanges?V.changes(!0,C.countChanges===64):void 0;V.exec(C),x!==void 0&&(C.changeCount=V.changes(!0,C.countChanges===64)-x);const L=C.lastInsertRowId?r.capi.sqlite3_last_insert_rowid(V):void 0;L!==void 0&&(C.lastInsertRowId=L),C.callback instanceof Function&&(C.callback=B,P.post({type:B,columnNames:C.columnNames,rowNumber:null,row:void 0}))}finally{delete V._blobXfer,C.callback&&(C.callback=B)}return C},"config-get":function(){const M=Object.create(null),C=r.config;return["bigIntEnabled"].forEach(function(V){Object.getOwnPropertyDescriptor(C,V)&&(M[V]=C[V])}),M.version=r.version,M.vfsList=r.capi.sqlite3_js_vfs_list(),M},export:function(M){const C=j(M),V={byteArray:r.capi.sqlite3_js_db_export(C.pointer),filename:C.filename,mimetype:"application/x-sqlite3"};return P.xfer.push(V.byteArray.buffer),V},toss:function(M){s("Testing worker exception")}};globalThis.onmessage=async function(M){M=M.data;let C,V=M.dbId,B=M.type;const q=performance.now();try{D.hasOwnProperty(B)&&D[B]instanceof Function?C=await D[B](M):s("Unknown db worker message type:",M.type)}catch(g){B="error",C={operation:M.type,message:g.message,errorClass:g.name,input:M},g.stack&&(C.stack=typeof g.stack=="string"?g.stack.split(/\n\s*/):g.stack)}V||(V=C.dbId||w()),P.post({type:B,dbId:V,messageId:M.messageId,workerReceivedTime:q,workerRespondTime:performance.now(),departureTime:M.departureTime,result:C},P.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const a=t.wasm,s=t.capi,r=t.util.toss3,u=Object.create(null);t.vfs=u,s.sqlite3_vfs.prototype.registerVfs=function(T=!1){this instanceof t.capi.sqlite3_vfs||r("Expecting a sqlite3_vfs-type argument.");const P=s.sqlite3_vfs_register(this,T?1:0);return P&&r("sqlite3_vfs_register(",this,") failed with rc",P),this.pointer!==s.sqlite3_vfs_find(this.$zName)&&r("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},u.installVfs=function(T){let P=0;const G=["io","vfs"];for(const j of G){const w=T[j];w&&(++P,w.struct.installMethods(w.methods,!!w.applyArgcCheck),j==="vfs"&&(!w.struct.$zName&&typeof w.name=="string"&&w.struct.addOnDispose(w.struct.$zName=a.allocCString(w.name)),w.struct.registerVfs(!!w.asDefault)))}return P||r("Misuse: installVfs() options object requires at least","one of:",G),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;const a=t.wasm,s=t.capi,r=t.util.toss3,u=Object.create(null);t.vtab=u;const T=s.sqlite3_index_info;T.prototype.nthConstraint=function(j,w=!1){if(j<0||j>=this.$nConstraint)return!1;const D=a.ptr.add(this.$aConstraint,T.sqlite3_index_constraint.structInfo.sizeof*j);return w?D:new T.sqlite3_index_constraint(D)},T.prototype.nthConstraintUsage=function(j,w=!1){if(j<0||j>=this.$nConstraint)return!1;const D=a.ptr.add(this.$aConstraintUsage,T.sqlite3_index_constraint_usage.structInfo.sizeof*j);return w?D:new T.sqlite3_index_constraint_usage(D)},T.prototype.nthOrderBy=function(j,w=!1){if(j<0||j>=this.$nOrderBy)return!1;const D=a.ptr.add(this.$aOrderBy,T.sqlite3_index_orderby.structInfo.sizeof*j);return w?D:new T.sqlite3_index_orderby(D)};const P=function(j,w){return(function(D,M=!1){if(arguments.length===0&&(D=new w),D instanceof w)return this.set(D.pointer,D),D;a.isPtr(D)||t.SQLite3Error.toss("Invalid argument to",j+"()");let C=this.get(D);return M&&this.delete(D),C}).bind(new Map)},G=function(j,w){const D=P(j,w);return Object.assign(Object.create(null),{StructType:w,create:M=>{const C=D();return a.pokePtr(M,C.pointer),C},get:M=>D(M),unget:M=>D(M,!0),dispose:M=>{const C=D(M,!0);C&&C.dispose()}})};u.xVtab=G("xVtab",s.sqlite3_vtab),u.xCursor=G("xCursor",s.sqlite3_vtab_cursor),u.xIndexInfo=j=>new s.sqlite3_index_info(j),u.xError=function j(w,D,M){if(j.errorReporter instanceof Function)try{j.errorReporter("sqlite3_module::"+w+"(): "+D.message)}catch{}let C;return D instanceof t.WasmAllocError?C=s.SQLITE_NOMEM:arguments.length>2?C=M:D instanceof t.SQLite3Error&&(C=D.resultCode),C||s.SQLITE_ERROR},u.xError.errorReporter=t.config.error.bind(t.config),u.xRowid=(j,w)=>a.poke(j,w,"i64"),u.setupModule=function(j){let w=!1;const D=this instanceof s.sqlite3_module?this:j.struct||(w=new s.sqlite3_module);try{const M=j.methods||r("Missing 'methods' object.");for(const C of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const V=C[0],B=C[1];M[V]===!0?M[V]=M[B]:M[B]===!0&&(M[B]=M[V])}if(j.catchExceptions){const C=function(q,g){return["xConnect","xCreate"].indexOf(q)>=0?function(x,L,E,I,z,f){try{return g(...arguments)||0}catch(d){return d instanceof t.WasmAllocError||(a.dealloc(a.peekPtr(f)),a.pokePtr(f,a.allocCString(d.message))),u.xError(q,d)}}:function(...x){try{return g(...x)||0}catch(L){return u.xError(q,L)}}},V=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],B=Object.create(null);for(const q of V){const g=M[q];if(g instanceof Function)q==="xConnect"&&M.xCreate===g?B[q]=M.xCreate:q==="xCreate"&&M.xConnect===g?B[q]=M.xConnect:B[q]=C(q,g);else continue}D.installMethods(B,!1)}else D.installMethods(M,!!j.applyArgcCheck);if(D.$iVersion===0){let C;typeof j.iVersion=="number"?C=j.iVersion:D.$xIntegrity?C=4:D.$xShadowName?C=3:D.$xSavePoint||D.$xRelease||D.$xRollbackTo?C=2:C=1,D.$iVersion=C}}catch(M){throw w&&w.dispose(),M}return D},s.sqlite3_module.prototype.setupModule=function(j){return u.setupModule.call(this,j)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const a=function s(r){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!r||typeof r!="object")&&(r=Object.create(null));const u=new URL(globalThis.location.href).searchParams;return u.has("opfs-disable")?Promise.resolve(t):(r.verbose===void 0&&(r.verbose=u.has("opfs-verbose")?+u.get("opfs-verbose")||2:1),r.sanityChecks===void 0&&(r.sanityChecks=u.has("opfs-sanity-check")),r.proxyUri===void 0&&(r.proxyUri=s.defaultProxyUri),typeof r.proxyUri=="function"&&(r.proxyUri=r.proxyUri()),new Promise(function(P,G){const j=[t.config.error,t.config.warn,t.config.log],w=(y,...N)=>{r.verbose>y&&j[y]("OPFS syncer:",...N)},D=(...y)=>w(2,...y),M=(...y)=>w(1,...y),C=(...y)=>w(0,...y),V=t.util.toss,B=t.capi,q=t.util,g=t.wasm,x=B.sqlite3_vfs,L=B.sqlite3_file,E=B.sqlite3_io_methods,I=Object.create(null),z=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;I.metrics={dump:function(){let y,N=0,U=0,J=0;for(y in i.opIds){const K=c[y];N+=K.count,U+=K.time,J+=K.wait,K.avgTime=K.count&&K.time?K.time/K.count:0,K.avgWait=K.count&&K.wait?K.wait/K.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",c,`
Total of`,N,"op(s) for",U,"ms (incl. "+J+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",c.s11n),Y.postMessage({type:"opfs-async-metrics"})},reset:function(){let y;const N=J=>J.count=J.time=J.wait=0;for(y in i.opIds)N(c[y]=Object.create(null));let U=c.s11n=Object.create(null);U=U.serialize=Object.create(null),U.count=U.time=0,U=c.s11n.deserialize=Object.create(null),U.count=U.time=0}};const f=new E,d=new x().addOnDispose(()=>f.dispose());let A;const O=y=>(A=!0,d.dispose(),G(y)),$=()=>(A=!1,P(t)),Y=new Worker(new URL(r.proxyUri,import.meta.url));setTimeout(()=>{A===void 0&&O(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),Y._originalOnError=Y.onerror,Y.onerror=function(y){C("Error initializing OPFS asyncer:",y),O(new Error("Loading OPFS async Worker failed for unknown reasons."))};const oe=B.sqlite3_vfs_find(null),h=oe?new x(oe):null;f.$iVersion=1,d.$iVersion=2,d.$szOsFile=B.sqlite3_file.structInfo.sizeof,d.$mxPathname=1024,d.$zName=g.allocCString("opfs"),d.$xDlOpen=d.$xDlError=d.$xDlSym=d.$xDlClose=null,d.addOnDispose("$zName",d.$zName,"cleanup default VFS wrapper",()=>h?h.dispose():null);const i=Object.create(null);i.verbose=r.verbose,i.littleEndian=(()=>{const y=new ArrayBuffer(2);return new DataView(y).setInt16(0,256,!0),new Int16Array(y)[0]===256})(),i.asyncIdleWaitTime=150,i.asyncS11nExceptions=1,i.fileBufferSize=1024*64,i.sabS11nOffset=i.fileBufferSize,i.sabS11nSize=d.$mxPathname*2,i.sabIO=new SharedArrayBuffer(i.fileBufferSize+i.sabS11nSize),i.opIds=Object.create(null);const c=Object.create(null);{let y=0;i.opIds.whichOp=y++,i.opIds.rc=y++,i.opIds.xAccess=y++,i.opIds.xClose=y++,i.opIds.xDelete=y++,i.opIds.xDeleteNoWait=y++,i.opIds.xFileSize=y++,i.opIds.xLock=y++,i.opIds.xOpen=y++,i.opIds.xRead=y++,i.opIds.xSleep=y++,i.opIds.xSync=y++,i.opIds.xTruncate=y++,i.opIds.xUnlock=y++,i.opIds.xWrite=y++,i.opIds.mkdir=y++,i.opIds["opfs-async-metrics"]=y++,i.opIds["opfs-async-shutdown"]=y++,i.opIds.retry=y++,i.sabOP=new SharedArrayBuffer(y*4),I.metrics.reset()}i.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(y=>{(i.sq3Codes[y]=B[y])===void 0&&V("Maintenance required: not found:",y)}),i.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const p=(y,...N)=>{const U=i.opIds[y]||V("Invalid op ID:",y);i.s11n.serialize(...N),Atomics.store(i.sabOPView,i.opIds.rc,-1),Atomics.store(i.sabOPView,i.opIds.whichOp,U),Atomics.notify(i.sabOPView,i.opIds.whichOp);const J=performance.now();for(;Atomics.wait(i.sabOPView,i.opIds.rc,-1)!=="not-equal";);const K=Atomics.load(i.sabOPView,i.opIds.rc);if(c[y].wait+=performance.now()-J,K&&i.asyncS11nExceptions){const le=i.s11n.deserialize();le&&C(y+"() async error:",...le)}return K};I.debug={asyncShutdown:()=>{M("Shutting down OPFS async listener. The OPFS VFS will no longer work."),p("opfs-async-shutdown")},asyncRestart:()=>{M("Attempting to restart OPFS VFS async listener. Might work, might not."),Y.postMessage({type:"opfs-async-restart"})}};const b=()=>{if(i.s11n)return i.s11n;const y=new TextDecoder,N=new TextEncoder("utf-8"),U=new Uint8Array(i.sabIO,i.sabS11nOffset,i.sabS11nSize),J=new DataView(i.sabIO,i.sabS11nOffset,i.sabS11nSize);i.s11n=Object.create(null);const K=Object.create(null);K.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},K.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},K.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},K.string={id:4};const le=re=>K[typeof re]||V("Maintenance required: this value type cannot be serialized.",re),ce=re=>{switch(re){case K.number.id:return K.number;case K.bigint.id:return K.bigint;case K.boolean.id:return K.boolean;case K.string.id:return K.string;default:V("Invalid type ID:",re)}};return i.s11n.deserialize=function(re=!1){++c.s11n.deserialize.count;const Oe=performance.now(),Fe=U[0],Le=Fe?[]:null;if(Fe){const De=[];let Me=1,Ee,ot,Qe;for(Ee=0;Ee<Fe;++Ee,++Me)De.push(ce(U[Me]));for(Ee=0;Ee<Fe;++Ee){const F=De[Ee];F.getter?(Qe=J[F.getter](Me,i.littleEndian),Me+=F.size):(ot=J.getInt32(Me,i.littleEndian),Me+=4,Qe=y.decode(U.slice(Me,Me+ot)),Me+=ot),Le.push(Qe)}}return re&&(U[0]=0),c.s11n.deserialize.time+=performance.now()-Oe,Le},i.s11n.serialize=function(...re){const Oe=performance.now();if(++c.s11n.serialize.count,re.length){const Fe=[];let Le=0,De=1;for(U[0]=re.length&255;Le<re.length;++Le,++De)Fe.push(le(re[Le])),U[De]=Fe[Le].id;for(Le=0;Le<re.length;++Le){const Me=Fe[Le];if(Me.setter)J[Me.setter](De,re[Le],i.littleEndian),De+=Me.size;else{const Ee=N.encode(re[Le]);J.setInt32(De,Ee.byteLength,i.littleEndian),De+=4,U.set(Ee,De),De+=Ee.byteLength}}}else U[0]=0;c.s11n.serialize.time+=performance.now()-Oe},i.s11n},R=function y(N=16){y._chars||(y._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",y._n=y._chars.length);const U=[];let J=0;for(;J<N;++J){const K=Math.random()*(y._n*64)%y._n|0;U[J]=y._chars[K]}return U.join("")},Q=Object.create(null),ne=Object.create(null);ne.op=void 0,ne.start=void 0;const k=y=>{ne.start=performance.now(),ne.op=y,++c[y].count},m=()=>c[ne.op].time+=performance.now()-ne.start,S={xCheckReservedLock:function(y,N){return g.poke(N,0,"i32"),0},xClose:function(y){k("xClose");let N=0;const U=Q[y];return U&&(delete Q[y],N=p("xClose",y),U.sq3File&&U.sq3File.dispose()),m(),N},xDeviceCharacteristics:function(y){return B.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(y,N,U){return B.SQLITE_NOTFOUND},xFileSize:function(y,N){k("xFileSize");let U=p("xFileSize",y);if(U==0)try{const J=i.s11n.deserialize()[0];g.poke(N,J,"i64")}catch(J){C("Unexpected error reading xFileSize() result:",J),U=i.sq3Codes.SQLITE_IOERR}return m(),U},xLock:function(y,N){k("xLock");const U=Q[y];let J=0;return U.lockType?U.lockType=N:(J=p("xLock",y,N),J===0&&(U.lockType=N)),m(),J},xRead:function(y,N,U,J){k("xRead");const K=Q[y];let le;try{le=p("xRead",y,U,Number(J)),(le===0||B.SQLITE_IOERR_SHORT_READ===le)&&g.heap8u().set(K.sabView.subarray(0,U),Number(N))}catch(ce){C("xRead(",arguments,") failed:",ce,K),le=B.SQLITE_IOERR_READ}return m(),le},xSync:function(y,N){k("xSync"),++c.xSync.count;const U=p("xSync",y,N);return m(),U},xTruncate:function(y,N){k("xTruncate");const U=p("xTruncate",y,Number(N));return m(),U},xUnlock:function(y,N){k("xUnlock");const U=Q[y];let J=0;return B.SQLITE_LOCK_NONE===N&&U.lockType&&(J=p("xUnlock",y,N)),J===0&&(U.lockType=N),m(),J},xWrite:function(y,N,U,J){k("xWrite");const K=Q[y];let le;try{K.sabView.set(g.heap8u().subarray(Number(N),Number(N)+U)),le=p("xWrite",y,U,Number(J))}catch(ce){C("xWrite(",arguments,") failed:",ce,K),le=B.SQLITE_IOERR_WRITE}return m(),le}},W={xAccess:function(y,N,U,J){k("xAccess");const K=p("xAccess",g.cstrToJs(N));return g.poke(J,K?0:1,"i32"),m(),0},xCurrentTime:function(y,N){return g.poke(N,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(y,N){return g.poke(N,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(y,N,U){k("xDelete");const J=p("xDelete",g.cstrToJs(N),U,!1);return m(),J},xFullPathname:function(y,N,U,J){return g.cstrncpy(J,N,U)<U?0:B.SQLITE_CANTOPEN},xGetLastError:function(y,N,U){return M("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(N,U,J,K,le){k("xOpen");let ce=0;U===0?U=R():g.isPtr(U)&&(B.sqlite3_uri_boolean(U,"opfs-unlock-asap",0)&&(ce|=i.opfsFlags.OPFS_UNLOCK_ASAP),B.sqlite3_uri_boolean(U,"delete-before-open",0)&&(ce|=i.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),U=g.cstrToJs(U));const re=Object.create(null);re.fid=J,re.filename=U,re.sab=new SharedArrayBuffer(i.fileBufferSize),re.flags=K,re.readOnly=!(t.SQLITE_OPEN_CREATE&K)&&!!(K&B.SQLITE_OPEN_READONLY);const Oe=p("xOpen",J,U,K,ce);return Oe||(re.readOnly&&g.poke(le,B.SQLITE_OPEN_READONLY,"i32"),Q[J]=re,re.sabView=i.sabFileBufView,re.sq3File=new L(J),re.sq3File.$pMethods=f.pointer,re.lockType=B.SQLITE_LOCK_NONE),m(),Oe}};h&&(d.$xRandomness=h.$xRandomness,d.$xSleep=h.$xSleep),d.$xRandomness||(W.xRandomness=function(y,N,U){const J=g.heap8u();let K=0;const le=Number(U);for(;K<N;++K)J[le+K]=Math.random()*255e3&255;return K}),d.$xSleep||(W.xSleep=function(y,N){return Atomics.wait(i.sabOPView,i.opIds.xSleep,0,N),0}),I.getResolvedPath=function(y,N){const U=new URL(y,"file://irrelevant").pathname;return N?U.split("/").filter(J=>!!J):U},I.getDirForFilename=async function(N,U=!1){const J=I.getResolvedPath(N,!0),K=J.pop();let le=I.rootDirectory;for(const ce of J)ce&&(le=await le.getDirectoryHandle(ce,{create:!!U}));return[le,K]},I.mkdir=async function(y){try{return await I.getDirForFilename(y+"/filepart",!0),!0}catch{return!1}},I.entryExists=async function(y){try{const[N,U]=await I.getDirForFilename(y);return await N.getFileHandle(U),!0}catch{return!1}},I.randomFilename=R,I.treeList=async function(){const y=async function U(J,K){K.name=J.name,K.dirs=[],K.files=[];for await(const le of J.values())if(le.kind==="directory"){const ce=Object.create(null);K.dirs.push(ce),await U(le,ce)}else K.files.push(le.name)},N=Object.create(null);return await y(I.rootDirectory,N),N},I.rmfr=async function(){const y=I.rootDirectory,N={recurse:!0};for await(const U of y.values())y.removeEntry(U.name,N)},I.unlink=async function(y,N=!1,U=!1){try{const[J,K]=await I.getDirForFilename(y,!1);return await J.removeEntry(K,{recursive:N}),!0}catch(J){if(U)throw new Error("unlink(",arguments[0],") failed: "+J.message,{cause:J});return!1}},I.traverse=async function(y){const N={recursive:!0,directory:I.rootDirectory};typeof y=="function"&&(y={callback:y}),y=Object.assign(N,y||{}),async function J(K,le){for await(const ce of K.values()){if(y.callback(ce,K,le)===!1)return!1;if(y.recursive&&ce.kind==="directory"&&await J(ce,le+1)===!1)break}}(y.directory,0)};const H=async function(y,N){const[U,J]=await I.getDirForFilename(y,!0);let le=await(await U.getFileHandle(J,{create:!0})).createSyncAccessHandle(),ce=0,re,Oe=!1;try{for(le.truncate(0);(re=await N())!==void 0;)re instanceof ArrayBuffer&&(re=new Uint8Array(re)),!Oe&&ce===0&&re.byteLength>=15&&(q.affirmDbHeader(re),Oe=!0),le.write(re,{at:ce}),ce+=re.byteLength;if((ce<512||ce%512!==0)&&V("Input size",ce,"is not correct for an SQLite database."),!Oe){const Fe=new Uint8Array(20);le.read(Fe,{at:0}),q.affirmDbHeader(Fe)}return le.write(new Uint8Array([1,1]),{at:18}),ce}catch(Fe){throw await le.close(),le=void 0,await U.removeEntry(J).catch(()=>{}),Fe}finally{le&&await le.close()}};if(I.importDb=async function(y,N){if(N instanceof Function)return H(y,N);N instanceof ArrayBuffer&&(N=new Uint8Array(N)),q.affirmIsDb(N);const U=N.byteLength,[J,K]=await I.getDirForFilename(y,!0);let le,ce=0;try{return le=await(await J.getFileHandle(K,{create:!0})).createSyncAccessHandle(),le.truncate(0),ce=le.write(N,{at:0}),ce!=U&&V("Expected to write "+U+" bytes but wrote "+ce+"."),le.write(new Uint8Array([1,1]),{at:18}),ce}catch(re){throw le&&(await le.close(),le=void 0),await J.removeEntry(K).catch(()=>{}),re}finally{le&&await le.close()}},t.oo1){const y=function(...N){const U=t.oo1.DB.dbCtorHelper.normalizeArgs(...N);U.vfs=d.$zName,t.oo1.DB.dbCtorHelper.call(this,U)};y.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=y,y.importDb=I.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(d.pointer,function(N,U){U.capi.sqlite3_busy_timeout(N,1e4)})}const Z=function(){const y=g.scopedAllocPush(),N=new L;try{const U=N.pointer,J=B.SQLITE_OPEN_CREATE|B.SQLITE_OPEN_READWRITE|B.SQLITE_OPEN_MAIN_DB,K=g.scopedAlloc(8),le="/sanity/check/file"+R(8),ce=g.scopedAllocCString(le);let re;if(i.s11n.serialize("This is  string."),re=i.s11n.deserialize(),D("deserialize() says:",re),re[0]!=="This is  string."&&V("String d13n error."),W.xAccess(d.pointer,ce,0,K),re=g.peek(K,"i32"),D("xAccess(",le,") exists ?=",re),re=W.xOpen(d.pointer,ce,U,J,K),D("open rc =",re,"state.sabOPView[xOpen] =",i.sabOPView[i.opIds.xOpen]),re!==0){C("open failed with code",re);return}W.xAccess(d.pointer,ce,0,K),re=g.peek(K,"i32"),re||V("xAccess() failed to detect file."),re=S.xSync(N.pointer,0),re&&V("sync failed w/ rc",re),re=S.xTruncate(N.pointer,1024),re&&V("truncate failed w/ rc",re),g.poke(K,0,"i64"),re=S.xFileSize(N.pointer,K),re&&V("xFileSize failed w/ rc",re),D("xFileSize says:",g.peek(K,"i64")),re=S.xWrite(N.pointer,ce,10,1),re&&V("xWrite() failed!");const Oe=g.scopedAlloc(16);re=S.xRead(N.pointer,Oe,6,2),g.poke(Oe+6,0);let Fe=g.cstrToJs(Oe);D("xRead() got:",Fe),Fe!=="sanity"&&V("Unexpected xRead() value."),W.xSleep&&(D("xSleep()ing before close()ing..."),W.xSleep(d.pointer,2e3),D("waking up from xSleep()")),re=S.xClose(U),D("xClose rc =",re,"sabOPView =",i.sabOPView),D("Deleting file:",le),W.xDelete(d.pointer,ce,4660),W.xAccess(d.pointer,ce,0,K),re=g.peek(K,"i32"),re&&V("Expecting 0 from xAccess(",le,") after xDelete()."),M("End of OPFS sanity checks.")}finally{N.dispose(),g.scopedAllocPop(y)}};Y.onmessage=function({data:y}){switch(y.type){case"opfs-unavailable":O(new Error(y.payload.join(" ")));break;case"opfs-async-loaded":Y.postMessage({type:"opfs-async-init",args:i});break;case"opfs-async-inited":{if(A===!0)break;try{t.vfs.installVfs({io:{struct:f,methods:S},vfs:{struct:d,methods:W}}),i.sabOPView=new Int32Array(i.sabOP),i.sabFileBufView=new Uint8Array(i.sabIO,0,i.fileBufferSize),i.sabS11nView=new Uint8Array(i.sabIO,i.sabS11nOffset,i.sabS11nSize),b(),r.sanityChecks&&(M("Running sanity checks because of opfs-sanity-check URL arg..."),Z()),z()?navigator.storage.getDirectory().then(N=>{Y.onerror=Y._originalOnError,delete Y._originalOnError,t.opfs=I,I.rootDirectory=N,D("End of OPFS sqlite3_vfs setup.",d),$()}).catch(O):$()}catch(N){C(N),O(N)}break}default:{const N="Unexpected message from the OPFS async worker: "+JSON.stringify(y);C(N),O(new Error(N));break}}}}))};a.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async s=>{try{let r=a.defaultProxyUri;return s.scriptInfo.sqlite3Dir&&(a.defaultProxyUri=s.scriptInfo.sqlite3Dir+r),a().catch(u=>{s.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",u.message)})}catch(r){return s.config.error("installOpfsVfs() exception:",r),Promise.reject(r)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const a=t.util.toss,s=t.util.toss3,r=Object.create(null),u=t.capi,T=t.util,P=t.wasm,G=4096,j=512,w=4,D=8,M=j+w,C=j,V=M,B=G,q=u.SQLITE_OPEN_MAIN_DB|u.SQLITE_OPEN_MAIN_JOURNAL|u.SQLITE_OPEN_SUPER_JOURNAL|u.SQLITE_OPEN_WAL,g=u.SQLITE_OPEN_MEMORY,x=".opaque",L=()=>Math.random().toString(36).slice(2),E=new TextDecoder,I=new TextEncoder,z=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),f=[t.config.error,t.config.warn,t.config.log];t.config.log;const d=t.config.warn;t.config.error;const A=new Map,O=k=>A.get(k),$=(k,m)=>{m?A.set(k,m):A.delete(k)},Y=new Map,oe=k=>Y.get(k),h=(k,m)=>{m?Y.set(k,m):Y.delete(k)},i={xCheckReservedLock:function(k,m){const S=oe(k);return S.log("xCheckReservedLock"),S.storeErr(),P.poke32(m,1),0},xClose:function(k){const m=oe(k);m.storeErr();const S=m.getOFileForS3File(k);if(S)try{m.log(`xClose ${S.path}`),m.mapS3FileToOFile(k,!1),S.sah.flush(),S.flags&u.SQLITE_OPEN_DELETEONCLOSE&&m.deletePath(S.path)}catch(W){return m.storeErr(W,u.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(k){return u.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(k,m,S){return u.SQLITE_NOTFOUND},xFileSize:function(k,m){const S=oe(k);S.log("xFileSize");const H=S.getOFileForS3File(k).sah.getSize()-B;return P.poke64(m,BigInt(H)),0},xLock:function(k,m){const S=oe(k);S.log(`xLock ${m}`),S.storeErr();const W=S.getOFileForS3File(k);return W.lockType=m,0},xRead:function(k,m,S,W){const H=oe(k);H.storeErr();const Z=H.getOFileForS3File(k);H.log(`xRead ${Z.path} ${S} @ ${W}`);try{const y=Z.sah.read(P.heap8u().subarray(Number(m),Number(m)+S),{at:B+Number(W)});return y<S?(P.heap8u().fill(0,Number(m)+y,Number(m)+S),u.SQLITE_IOERR_SHORT_READ):0}catch(y){return H.storeErr(y,u.SQLITE_IOERR)}},xSectorSize:function(k){return G},xSync:function(k,m){const S=oe(k);S.log(`xSync ${m}`),S.storeErr();const W=S.getOFileForS3File(k);try{return W.sah.flush(),0}catch(H){return S.storeErr(H,u.SQLITE_IOERR)}},xTruncate:function(k,m){const S=oe(k);S.log(`xTruncate ${m}`),S.storeErr();const W=S.getOFileForS3File(k);try{return W.sah.truncate(B+Number(m)),0}catch(H){return S.storeErr(H,u.SQLITE_IOERR)}},xUnlock:function(k,m){const S=oe(k);S.log("xUnlock");const W=S.getOFileForS3File(k);return W.lockType=m,0},xWrite:function(k,m,S,W){const H=oe(k);H.storeErr();const Z=H.getOFileForS3File(k);H.log(`xWrite ${Z.path} ${S} ${W}`);try{const y=Z.sah.write(P.heap8u().subarray(Number(m),Number(m)+S),{at:B+Number(W)});return S===y?0:a("Unknown write() failure.")}catch(y){return H.storeErr(y,u.SQLITE_IOERR)}}},c=new u.sqlite3_io_methods;c.$iVersion=1,t.vfs.installVfs({io:{struct:c,methods:i}});const p={xAccess:function(k,m,S,W){const H=O(k);H.storeErr();try{const Z=H.getPath(m);P.poke32(W,H.hasFilename(Z)?1:0)}catch{P.poke32(W,0)}return 0},xCurrentTime:function(k,m){return P.poke(m,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(k,m){return P.poke(m,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(k,m,S){const W=O(k);W.log(`xDelete ${P.cstrToJs(m)}`),W.storeErr();try{return W.deletePath(W.getPath(m)),0}catch(H){return W.storeErr(H),u.SQLITE_IOERR_DELETE}},xFullPathname:function(k,m,S,W){return P.cstrncpy(W,m,S)<S?0:u.SQLITE_CANTOPEN},xGetLastError:function(k,m,S){const W=O(k),H=W.popErr();if(W.log(`xGetLastError ${m} e =`,H),H){const Z=P.scopedAllocPush();try{const[y,N]=P.scopedAllocCString(H.message,!0);P.cstrncpy(S,y,m),N>m&&P.poke8(S+m-1,0)}catch{return u.SQLITE_NOMEM}finally{P.scopedAllocPop(Z)}}return H?H.sqlite3Rc||u.SQLITE_IOERR:0},xOpen:function(m,S,W,H,Z){const y=O(m);try{H&=~g,y.log(`xOpen ${P.cstrToJs(S)} ${H}`);const N=S&&P.peek8(S)?y.getPath(S):L();let U=y.getSAHForPath(N);!U&&H&u.SQLITE_OPEN_CREATE&&(y.getFileCount()<y.getCapacity()?(U=y.nextAvailableSAH(),y.setAssociatedPath(U,N,H)):a("SAH pool is full. Cannot create file",N)),U||a("file not found:",N);const J={path:N,flags:H,sah:U};y.mapS3FileToOFile(W,J),J.lockType=u.SQLITE_LOCK_NONE;const K=new u.sqlite3_file(W);return K.$pMethods=c.pointer,K.dispose(),P.poke32(Z,H),0}catch(N){return y.storeErr(N),u.SQLITE_CANTOPEN}}},b=function(k){t.capi.sqlite3_vfs_find(k)&&s("VFS name is already registered:",k);const m=new u.sqlite3_vfs,S=u.sqlite3_vfs_find(null),W=S?new u.sqlite3_vfs(S):null;return m.$iVersion=2,m.$szOsFile=u.sqlite3_file.structInfo.sizeof,m.$mxPathname=j,m.addOnDispose(m.$zName=P.allocCString(k),()=>$(m.pointer,0)),W&&(m.$xRandomness=W.$xRandomness,m.$xSleep=W.$xSleep,W.dispose()),!m.$xRandomness&&!p.xRandomness&&(p.xRandomness=function(H,Z,y){const N=P.heap8u();let U=0;const J=Number(y);for(;U<Z;++U)N[J+U]=Math.random()*255e3&255;return U}),!m.$xSleep&&!p.xSleep&&(p.xSleep=(H,Z)=>0),t.vfs.installVfs({vfs:{struct:m,methods:p}}),m};class R{vfsDir;#e;#o;#a;#r=new Map;#t=new Map;#i=new Set;#l=new Map;#n=new Uint8Array(M);#c;#s;#_;constructor(m=Object.create(null)){this.#_=m.verbosity??z.verbosity,this.vfsName=m.name||z.name,this.#s=b(this.vfsName),$(this.#s.pointer,this),this.vfsDir=m.directory||"."+this.vfsName,this.#c=new DataView(this.#n.buffer,this.#n.byteOffset),this.isReady=this.reset(!!(m.clearOnInit??z.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(m.initialCapacity||z.initialCapacity)})}#u(m,...S){this.#_>m&&f[m](this.vfsName+":",...S)}log(...m){this.#u(2,...m)}warn(...m){this.#u(1,...m)}error(...m){this.#u(0,...m)}getVfs(){return this.#s}getCapacity(){return this.#r.size}getFileCount(){return this.#t.size}getFileNames(){const m=[];for(const S of this.#t.keys())m.push(S);return m}async addCapacity(m){for(let S=0;S<m;++S){const W=L(),Z=await(await this.#o.getFileHandle(W,{create:!0})).createSyncAccessHandle();this.#r.set(Z,W),this.setAssociatedPath(Z,"",0)}return this.getCapacity()}async reduceCapacity(m){let S=0;for(const W of Array.from(this.#i)){if(S===m||this.getFileCount()===this.getCapacity())break;const H=this.#r.get(W);W.close(),await this.#o.removeEntry(H),this.#r.delete(W),this.#i.delete(W),++S}return S}releaseAccessHandles(){for(const m of this.#r.keys())m.close();this.#r.clear(),this.#t.clear(),this.#i.clear()}async acquireAccessHandles(m=!1){const S=[];for await(const[W,H]of this.#o)H.kind==="file"&&S.push([W,H]);return Promise.all(S.map(async([W,H])=>{try{const Z=await H.createSyncAccessHandle();if(this.#r.set(Z,W),m)Z.truncate(B),this.setAssociatedPath(Z,"",0);else{const y=this.getAssociatedPath(Z);y?this.#t.set(y,Z):this.#i.add(Z)}}catch(Z){throw this.storeErr(Z),this.releaseAccessHandles(),Z}}))}getAssociatedPath(m){m.read(this.#n,{at:0});const S=this.#c.getUint32(C);if(this.#n[0]&&(S&u.SQLITE_OPEN_DELETEONCLOSE||(S&q)===0))return d(`Removing file with unexpected flags ${S.toString(16)}`,this.#n),this.setAssociatedPath(m,"",0),"";const W=new Uint32Array(D/4);m.read(W,{at:V});const H=this.computeDigest(this.#n,S);if(W.every((Z,y)=>Z===H[y])){const Z=this.#n.findIndex(y=>y===0);return Z===0&&m.truncate(B),Z?E.decode(this.#n.subarray(0,Z)):""}else return d("Disassociating file with bad digest."),this.setAssociatedPath(m,"",0),""}setAssociatedPath(m,S,W){const H=I.encodeInto(S,this.#n);j<=H.written+1&&a("Path too long:",S),S&&W&&(W|=g),this.#n.fill(0,H.written,j),this.#c.setUint32(C,W);const Z=this.computeDigest(this.#n,W);m.write(this.#n,{at:0}),m.write(Z,{at:V}),m.flush(),S?(this.#t.set(S,m),this.#i.delete(m)):(m.truncate(B),this.#i.add(m))}computeDigest(m,S){if(S&g){let W=3735928559,H=1103547991;for(const Z of m)W=Math.imul(W^Z,2654435761),H=Math.imul(H^Z,104729);return new Uint32Array([W>>>0,H>>>0])}else return new Uint32Array([0,0])}async reset(m){await this.isReady;let S=await navigator.storage.getDirectory(),W;for(const H of this.vfsDir.split("/"))H&&(W=S,S=await S.getDirectoryHandle(H,{create:!0}));return this.#e=S,this.#a=W,this.#o=await this.#e.getDirectoryHandle(x,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(m)}getPath(m){return P.isPtr(m)&&(m=P.cstrToJs(m)),(m instanceof URL?m:new URL(m,"file://localhost/")).pathname}deletePath(m){const S=this.#t.get(m);return S&&(this.#t.delete(m),this.setAssociatedPath(S,"",0)),!!S}storeErr(m,S){return m&&(m.sqlite3Rc=S||u.SQLITE_IOERR,this.error(m)),this.$error=m,S}popErr(){const m=this.$error;return this.$error=void 0,m}nextAvailableSAH(){const[m]=this.#i.keys();return m}getOFileForS3File(m){return this.#l.get(m)}mapS3FileToOFile(m,S){S?(this.#l.set(m,S),h(m,this)):(this.#l.delete(m),h(m,!1))}hasFilename(m){return this.#t.has(m)}getSAHForPath(m){return this.#t.get(m)}async removeVfs(){if(!this.#s.pointer||!this.#o)return!1;u.sqlite3_vfs_unregister(this.#s.pointer),this.#s.dispose(),delete r[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(x,{recursive:!0}),this.#o=void 0,await this.#a.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#a=void 0}catch(m){t.config.error(this.vfsName,"removeVfs() failed with no recovery strategy:",m)}return!0}pauseVfs(){return this.#l.size>0&&t.SQLite3Error.toss(u.SQLITE_MISUSE,"Cannot pause VFS",this.vfsName,"because it has opened files."),this.#r.size>0&&(u.sqlite3_vfs_unregister(this.vfsName),this.releaseAccessHandles()),this}isPaused(){return this.#r.size===0}async unpauseVfs(){return this.#r.size===0?this.acquireAccessHandles(!1).then(()=>u.sqlite3_vfs_register(this.#s,0),this):this}exportFile(m){const S=this.#t.get(m)||a("File not found:",m),W=S.getSize()-B,H=new Uint8Array(W>0?W:0);if(W>0){const Z=S.read(H,{at:B});Z!=W&&a("Expected to read "+W+" bytes but read "+Z+".")}return H}async importDbChunked(m,S){const W=this.#t.get(m)||this.nextAvailableSAH()||a("No available handles to import to.");W.truncate(0);let H=0,Z,y=!1;try{for(;(Z=await S())!==void 0;)Z instanceof ArrayBuffer&&(Z=new Uint8Array(Z)),!y&&H===0&&Z.byteLength>=15&&(T.affirmDbHeader(Z),y=!0),W.write(Z,{at:B+H}),H+=Z.byteLength;if((H<512||H%512!==0)&&a("Input size",H,"is not correct for an SQLite database."),!y){const N=new Uint8Array(20);W.read(N,{at:0}),T.affirmDbHeader(N)}W.write(new Uint8Array([1,1]),{at:B+18})}catch(N){throw this.setAssociatedPath(W,"",0),N}return this.setAssociatedPath(W,m,u.SQLITE_OPEN_MAIN_DB),H}importDb(m,S){if(S instanceof ArrayBuffer)S=new Uint8Array(S);else if(S instanceof Function)return this.importDbChunked(m,S);const W=this.#t.get(m)||this.nextAvailableSAH()||a("No available handles to import to."),H=S.byteLength;(H<512||H%512!=0)&&a("Byte array size is invalid for an SQLite db.");const Z="SQLite format 3";for(let N=0;N<Z.length;++N)Z.charCodeAt(N)!==S[N]&&a("Input does not contain an SQLite database header.");const y=W.write(S,{at:B});return y!=H?(this.setAssociatedPath(W,"",0),a("Expected to write "+H+" bytes but wrote "+y+".")):(W.write(new Uint8Array([1,1]),{at:B+18}),this.setAssociatedPath(W,m,u.SQLITE_OPEN_MAIN_DB)),y}}class Q{#e;constructor(m){this.#e=m,this.vfsName=m.vfsName}async addCapacity(m){return this.#e.addCapacity(m)}async reduceCapacity(m){return this.#e.reduceCapacity(m)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(m){const S=this.#e.getCapacity();return S<m?this.#e.addCapacity(m-S):S}exportFile(m){return this.#e.exportFile(m)}importDb(m,S){return this.#e.importDb(m,S)}async wipeFiles(){return this.#e.reset(!0)}unlink(m){return this.#e.deletePath(m)}async removeVfs(){return this.#e.removeVfs()}pauseVfs(){return this.#e.pauseVfs(),this}async unpauseVfs(){return this.#e.unpauseVfs().then(()=>this)}isPaused(){return this.#e.isPaused()}}const ne=async()=>{const k=await navigator.storage.getDirectory(),m=".opfs-sahpool-sync-check-"+L(),H=(await(await k.getFileHandle(m,{create:!0})).createSyncAccessHandle()).close();return await H,await k.removeEntry(m),H?.then&&a("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(k=Object.create(null)){k=Object.assign(Object.create(null),z,k||{});const m=k.name;if(k.$testThrowPhase1)throw k.$testThrowPhase1;if(r[m])try{return await r[m]}catch(S){if(k.forceReinitIfPreviouslyFailed)delete r[m];else throw S}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?r[m]=Promise.reject(new Error("Missing required OPFS APIs.")):r[m]=ne().then(async function(){if(k.$testThrowPhase2)throw k.$testThrowPhase2;const S=new R(k);return S.isReady.then(async()=>{const W=new Q(S);if(t.oo1){const H=t.oo1,Z=S.getVfs(),y=function(...N){const U=H.DB.dbCtorHelper.normalizeArgs(...N);U.vfs=Z.$zName,H.DB.dbCtorHelper.call(this,U)};y.prototype=Object.create(H.DB.prototype),W.OpfsSAHPoolDb=y}return S.log("VFS initialized."),W}).catch(async W=>{throw await S.removeVfs().catch(()=>{}),W})}).catch(S=>r[m]=Promise.reject(S))}}),typeof n>"u")throw console.warn("This is not running in the context of Module.runSQLite3PostLoadInit()"),new Error("sqlite3-api-cleanup.js expects to be running in the context of its Emscripten module loader.");try{const t=Object.assign(Object.create(null),globalThis.sqlite3ApiBootstrap.defaultConfig,globalThis.sqlite3ApiConfig||{},{memory:typeof Ve<"u"?Ve:n.wasmMemory,exports:typeof Ye<"u"?Ye:Object.prototype.hasOwnProperty.call(n,"wasmExports")?n.wasmExports:n.asm});t.wasmPtrIR=typeof t.exports.sqlite3_libversion()=="number"?"i32":"i64";const a=e;a.debugModule("Bootstrapping lib config",a);const s=globalThis.sqlite3ApiBootstrap(t);return delete globalThis.sqlite3ApiBootstrap,s}catch(t){throw console.error("sqlite3ApiBootstrap() error:",t),t}throw new Error("Maintenance required: this line should never be reached")},bt?te=_:te=new Promise((e,n)=>{Be=e,Ge=n}),te}const ir=(function(){const de=gt;if(!de)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const te=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams,wasmFilename:"sqlite3.wasm"});if(te.debugModule=te.urlParams.has("sqlite3.debugModule")?(...ve)=>console.warn("sqlite3.debugModule:",...ve):()=>{},te.urlParams.has("sqlite3.dir"))te.sqlite3Dir=te.urlParams.get("sqlite3.dir")+"/";else if(te.moduleScript){const ve=te.moduleScript.src.split("/");ve.pop(),te.sqlite3Dir=ve.join("/")+"/"}const _=globalThis.sqlite3InitModule=function ve(...qe){return de(...qe).then(ge=>{te.debugModule("sqlite3InitModule() sIMS =",te),te.debugModule("sqlite3InitModule() EmscriptenModule =",ge);const _e=ge.runSQLite3PostLoadInit(te,ge,!!ve.__isUnderTest);return te.debugModule("sqlite3InitModule() sqlite3 =",_e),_e}).catch(ge=>{throw console.error("Exception loading sqlite3 module:",ge),ge})};if(_.ready=de.ready,te.moduleScript){let ve=te.moduleScript.src.split("/");ve.pop(),te.scriptDir=ve.join("/")+"/"}return te.debugModule("extern-post-js.c-pp.js sqlite3InitModuleState =",te),_})();gt=ir;var sr=gt;globalThis.sqlite3Worker1Promiser=function de(te=de.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const ie=te;te=Object.assign(Object.create(null),de.defaultConfig),te.onready=ie}else te=Object.assign(Object.create(null),de.defaultConfig,te);const _=Object.create(null),ve=function(){},qe=te.onerror||ve,ge=te.debug||ve,_e=te.generateMessageId?void 0:Object.create(null),Se=te.generateMessageId||function(ie){return ie.type+"#"+(_e[ie.type]=(_e[ie.type]||0)+1)},ke=(...ie)=>{throw new Error(ie.join(" "))};te.worker||(te.worker=de.defaultConfig.worker),typeof te.worker=="function"&&(te.worker=te.worker());let Te,we;return te.worker.onmessage=function(ie){ie=ie.data,ge("worker1.onmessage",ie);let fe=_[ie.messageId];if(!fe){if(ie&&ie.type==="sqlite3-api"&&ie.result==="worker1-ready"){te.onready&&te.onready(we);return}if(fe=_[ie.type],fe&&fe.onrow){fe.onrow(ie);return}te.onunhandled?te.onunhandled(arguments[0]):qe("sqlite3Worker1Promiser() unhandled worker message:",ie);return}switch(delete _[ie.messageId],ie.type){case"error":fe.reject(ie);return;case"open":Te||(Te=ie.dbId);break;case"close":ie.dbId===Te&&(Te=void 0);break}try{fe.resolve(ie)}catch(xe){fe.reject(xe)}},we=function(){let ie;arguments.length===1?ie=arguments[0]:arguments.length===2?(ie=Object.create(null),ie.type=arguments[0],ie.args=arguments[1],ie.dbId=ie.args.dbId):ke("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!ie.dbId&&ie.type!=="open"&&(ie.dbId=Te),ie.messageId=Se(ie),ie.departureTime=performance.now();const fe=Object.create(null);fe.message=ie;let xe;ie.type==="exec"&&ie.args&&(typeof ie.args.callback=="function"?(xe=ie.messageId+":row",fe.onrow=ie.args.callback,ie.args.callback=xe,_[xe]=fe):typeof ie.args.callback=="string"&&ke("exec callback may not be a string when using the Promise interface."));let We=new Promise(function(Be,Ge){fe.resolve=Be,fe.reject=Ge,_[ie.messageId]=fe,ge("Posting",ie.type,"message to Worker dbId="+(Te||"default")+":",ie),te.worker.postMessage(ie)});return xe&&(We=We.finally(()=>delete _[xe])),We}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL(""+new URL("sqlite3-worker1-BDaVmmfy.js",import.meta.url).href,import.meta.url))},onerror:(...de)=>console.error("worker1 promiser error",...de)};globalThis.sqlite3Worker1Promiser.v2=(function de(te=de.defaultConfig){let _;typeof te=="function"?(_=te,te={}):typeof te?.onready=="function"&&(_=te.onready,delete te.onready);const ve=Object.create(null);te=Object.assign(te||Object.create(null),{onready:async function(ge){try{_&&await _(ge),ve.resolve(ge)}catch(_e){ve.reject(_e)}}});const qe=new Promise(function(ge,_e){ve.resolve=ge,ve.reject=_e});try{this.original(te)}catch(ge){ve.reject(ge)}return qe}).bind({original:sqlite3Worker1Promiser});globalThis.sqlite3Worker1Promiser.v2.defaultConfig=globalThis.sqlite3Worker1Promiser.defaultConfig;sqlite3Worker1Promiser.v2;let Ie=null,ct=null;async function Mt(){if(ct)return ct;try{return ct=await sr({print:console.log,printErr:console.error,locateFile:de=>de.endsWith(".wasm")?`/sqlite-wasm/${de}`:de}),console.log("SQLite WASM initialized successfully"),ct}catch(de){throw console.error("Failed to initialize SQLite:",de),de}}async function or(de){const te=await Mt();if(!te)throw new Error("Failed to initialize SQLite");try{console.log("Fetching database from:",de);const _=await fetch(de);if(!_.ok)throw new Error(`Failed to fetch database: ${_.status} ${_.statusText}`);const ve=await _.arrayBuffer(),qe=new Uint8Array(ve);if(Ie&&(Ie.close(),Ie=null),Ie=new te.oo1.DB(":memory:"),typeof te.capi.sqlite3_deserialize!="function")throw console.error("sqlite3_deserialize is not available!"),new Error("sqlite3_deserialize is not available in this SQLite build");const ge=te.capi.sqlite3_malloc(qe.byteLength);if(!ge)throw new Error("Failed to allocate memory for database");try{te.wasm.heap8u().set(qe,ge)}catch(we){throw console.error("Failed to copy to WASM memory:",we),we}const _e=te.capi.SQLITE_DESERIALIZE_FREEONCLOSE|te.capi.SQLITE_DESERIALIZE_READONLY;if(!Ie.pointer)throw new Error("Database pointer is undefined");const Se=te.capi.sqlite3_deserialize(Ie.pointer,"main",ge,qe.byteLength,qe.byteLength,_e);if(Se!==te.capi.SQLITE_OK){const we=te.capi.sqlite3_errmsg(Ie.pointer),ie=te.capi.sqlite3_extended_errcode(Ie.pointer);throw console.error("Deserialize failed:",{returnCode:Se,errorMessage:we,extendedErrorCode:ie}),new Error(`Failed to deserialize database: ${we} (code: ${Se}, extended: ${ie})`)}const Te=Ie.exec({sql:"SELECT COUNT(*) as count FROM movies",returnValue:"resultRows",rowMode:"object"})[0];return console.log("Database loaded successfully, movies count:",Te?.count),!0}catch(_){throw console.error("Failed to load remote database:",_),_}}self.onmessage=async de=>{const{type:te,sql:_,params:ve,id:qe,url:ge}=de.data;try{if(te==="init"){await Mt(),ge&&await or(ge),self.postMessage({id:qe,success:!0});return}if(!Ie)throw new Error("Database not initialized. Call init first.");if(te==="exec"){const _e=Ie.exec({sql:_,bind:ve,returnValue:"resultRows",rowMode:"object"});self.postMessage({id:qe,result:_e})}else if(te==="query"){const{select:_e="*",from:Se,where:ke="",params:Te=[],groupBy:we="",orderBy:ie="",limit:fe,offset:xe,includeCount:We=!1}=de.data;let Be=`SELECT ${_e} FROM ${Se}`;ke&&(Be+=` WHERE ${ke}`),we&&(Be+=` GROUP BY ${we}`),ie&&(Be+=` ORDER BY ${ie}`),fe!==void 0&&(Be+=` LIMIT ${fe}`),xe!==void 0&&(Be+=` OFFSET ${xe}`);const Ge=Ie.exec({sql:Be,bind:Te,returnValue:"resultRows",rowMode:"object"});let Pe;if(We){let Ue=`SELECT COUNT(*) as count FROM (SELECT 1 FROM ${Se}`;ke&&(Ue+=` WHERE ${ke}`),we&&(Ue+=` GROUP BY ${we}`),Ue+=")",Pe=Ie.exec({sql:Ue,bind:Te,returnValue:"resultRows",rowMode:"object"})[0]?.count}self.postMessage({id:qe,result:Ge,totalCount:Pe})}else if(te==="query-lightweight"){const{where:_e="",params:Se=[],orderBy:ke="",limit:Te,offset:we,includeCount:ie=!1}=de.data;let fe="SELECT m.imdbId, m.title, m.year, m.imdbRating, m.imdbVotes, m.language, m.primarySourceType as sourceType, m.primaryChannelName as channelName, m.verified FROM movies m";_e&&(fe+=` WHERE ${_e}`),ke&&(fe+=` ORDER BY ${ke}`),Te!==void 0&&(fe+=` LIMIT ${Te}`),we!==void 0&&(fe+=` OFFSET ${we}`);const xe=Ie.exec({sql:fe,bind:Se,returnValue:"resultRows",rowMode:"object"});let We;if(ie){let Be="SELECT COUNT(*) as count FROM movies m";_e&&(Be+=` WHERE ${_e}`),We=Ie.exec({sql:Be,bind:Se,returnValue:"resultRows",rowMode:"object"})[0]?.count}self.postMessage({id:qe,result:xe,totalCount:We})}else if(te==="query-by-ids"){const{imdbIds:_e}=de.data;if(!_e||_e.length===0){self.postMessage({id:qe,result:[]});return}const ke=`
        SELECT m.*
        FROM movies m
        WHERE m.imdbId IN (${_e.map(()=>"?").join(",")})
      `,we=Ie.exec({sql:ke,bind:_e,returnValue:"resultRows",rowMode:"object"}).map(ie=>({...ie,verified:ie.verified===1}));self.postMessage({id:qe,result:we})}else if(te==="query-related")self.postMessage({id:qe,result:[]});else if(te==="query-collections-for-movie"){const{movieId:_e}=de.data,ke=Ie.exec({sql:`
        SELECT c.id, c.name, c.description, c.createdAt, c.updatedAt
        FROM collections c
        INNER JOIN collection_movies cm ON c.id = cm.collectionId
        WHERE cm.movieId = ?
        ORDER BY c.name ASC
      `,bind:[_e],returnValue:"resultRows",rowMode:"object"});self.postMessage({id:qe,result:ke})}else if(te==="get-filter-options"){const _e=Ie.exec({sql:"SELECT name, movie_count as count FROM genres ORDER BY movie_count DESC, name ASC",returnValue:"resultRows",rowMode:"object"}),Se=Ie.exec({sql:"SELECT name, movie_count as count FROM countries ORDER BY movie_count DESC, name ASC",returnValue:"resultRows",rowMode:"object"}),ke=Ie.exec({sql:`
          SELECT primaryChannelName as name, COUNT(*) as count
          FROM movies
          WHERE primaryChannelName IS NOT NULL
          GROUP BY primaryChannelName
          ORDER BY count DESC, primaryChannelName ASC
        `,returnValue:"resultRows",rowMode:"object"});self.postMessage({id:qe,genres:_e,countries:Se,channels:ke})}}catch(_e){console.error("Worker error:",_e),self.postMessage({id:qe,error:_e.message||String(_e)})}};
