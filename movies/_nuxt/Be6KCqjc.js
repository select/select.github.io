import{E as A,c as a,o as r,J as O,a as t,O as M,t as k,K as W,P as Fe,e as V,z as e,F as Z,b as $,N as G,r as S,Q as Me,R as Ae,n as j,S as je,T as Oe,w as T,U as ae,V as Re,W as ue,X as Be,Y as Ve,x as te,_ as z,Z as E,$ as K,a0 as Q,a1 as oe,L as q,H as J,a2 as Ye,a3 as Te,a4 as Le,a5 as Ie,a6 as ce,a7 as Ge,a8 as De,d as Ue,u as He,a9 as Pe,aa as Ne}from"./C1DehbHX.js";import{u as D}from"./BPf94GNk.js";import{u as Ee}from"./Kaf5tOm6.js";import{u as ne}from"./BDUZSP7Z.js";import{_ as Ke}from"./C_3uOQ0x.js";import{_ as Qe}from"./IPpBPpdD.js";import"./DLv0zqK_.js";import"./DMOTkeJ5.js";import"./BmM4d4Y4.js";const We={class:"text-theme-primary font-bold"},Ze={key:3,class:"i-mdi-chevron-down text-xs opacity-50 group-hover:opacity-100 transition-opacity"},ze=A({__name:"FilterButton",props:{category:{},icon:{},activeValue:{},isActive:{type:Boolean}},emits:["click","clear"],setup(s){return(n,o)=>(r(),a("button",{class:M(["group flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all whitespace-nowrap border",[s.isActive?"bg-theme-primary/10 text-theme-primary border-theme-primary/30 shadow-sm":"bg-transparent text-theme-textmuted border-theme-border/50 hover:bg-theme-surface hover:border-theme-border"]]),onClick:o[1]||(o[1]=h=>n.$emit("click",h))},[s.icon?(r(),a("div",{key:0,class:M([s.icon,"text-sm transition-colors",s.isActive?"text-theme-primary":"text-theme-textmuted group-hover:text-theme-text"])},null,2)):O("",!0),t("span",{class:M({"text-theme-text":!s.isActive})},k(s.category),3),s.isActive&&s.activeValue?(r(),a(W,{key:1},[o[2]||(o[2]=t("span",{class:"w-px h-3 bg-theme-primary/30 mx-0.5"},null,-1)),t("span",We,k(s.activeValue),1)],64)):O("",!0),s.isActive?(r(),a("div",{key:2,class:"ml-1 -mr-1 p-0.5 rounded-full hover:bg-theme-primary hover:text-white transition-colors",onClick:o[0]||(o[0]=Fe(h=>n.$emit("clear"),["stop"]))},[...o[3]||(o[3]=[t("div",{class:"i-mdi-close text-[10px]"},null,-1)])])):(r(),a("div",Ze))],2))}}),qe=Object.assign(ze,{__name:"FilterButton"}),Je=A({__name:"AppSortButton",props:{option:{},isActive:{type:Boolean}},emits:["select"],setup(s){const n=s,o=()=>{const{field:h}=n.option;switch(h){case"relevance":return"i-mdi-target";case"votes":return"i-mdi-account-group";default:return"i-mdi-sort"}};return(h,m)=>(r(),a("button",{class:M(["flex items-center justify-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-colors flex-1 min-w-[100px] border border-theme-border/50 whitespace-nowrap",{"bg-theme-primary text-white border-theme-primary":s.isActive,"bg-theme-surface text-theme-textmuted hover:bg-theme-selection hover:border-theme-border":!s.isActive}]),onClick:m[0]||(m[0]=l=>h.$emit("select",s.option))},[t("div",{class:M(["text-sm",{[o()]:!0,"text-white":s.isActive,"text-theme-textmuted":!s.isActive}])},null,2),t("span",null,k(s.option.label),1)],2))}}),Xe=Object.assign(Je,{__name:"AppSortButton"}),et={class:"flex flex-1 min-w-[140px] rounded-full border border-theme-border/50 overflow-hidden"},tt=A({__name:"AppSortToggleButton",props:{label:{},icon:{},optionA:{},optionB:{},currentSort:{}},emits:["select"],setup(s){const n=s,o=V(()=>n.currentSort.field===n.optionA.field&&n.currentSort.direction===n.optionA.direction),h=V(()=>n.currentSort.field===n.optionB.field&&n.currentSort.direction===n.optionB.direction);return(m,l)=>(r(),a("div",et,[t("button",{class:M(["flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs font-medium transition-colors border-r border-theme-border/50 flex-1 whitespace-nowrap",{"bg-theme-primary text-white":e(o),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!e(o)}]),onClick:l[0]||(l[0]=c=>m.$emit("select",s.optionA))},[t("div",{class:M(["text-sm",[s.icon,{"text-white":e(o),"text-theme-textmuted":!e(o)}]])},null,2),t("span",null,k(s.optionA.label),1)],2),t("button",{class:M(["flex items-center justify-center px-2 py-1.5 text-xs font-medium transition-colors flex-1 whitespace-nowrap",{"bg-theme-primary text-white":e(h),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!e(h)}]),onClick:l[1]||(l[1]=c=>m.$emit("select",s.optionB))},k(s.optionB.label),3)]))}}),ot=Object.assign(tt,{__name:"AppSortToggleButton"}),st={class:"flex flex-wrap gap-2"},nt=A({__name:"AppSortButtonGroup",props:{currentSort:{},showRelevance:{type:Boolean,default:!1}},emits:["select"],setup(s,{emit:n}){const o=s,h={field:"relevance",direction:"desc",label:"Relevance"},m={field:"year",direction:"desc",label:"Newest"},l={field:"year",direction:"asc",label:"Oldest"},c={field:"rating",direction:"desc",label:"High"},b={field:"rating",direction:"asc",label:"Low"},_={field:"title",direction:"asc",label:"A-Z"},g={field:"title",direction:"desc",label:"Z-A"},u={field:"votes",direction:"desc",label:"Most Popular"},d=p=>o.currentSort.field===p.field&&o.currentSort.direction===p.direction;return(p,y)=>{const C=Xe,x=ot;return r(),a("div",st,[s.showRelevance?(r(),Z(C,{key:0,option:h,"is-active":d(h),onSelect:y[0]||(y[0]=f=>p.$emit("select",h))},null,8,["is-active"])):O("",!0),$(x,{label:"Year",icon:"i-mdi-calendar","option-a":m,"option-b":l,"current-sort":s.currentSort,onSelect:y[1]||(y[1]=f=>p.$emit("select",f))},null,8,["current-sort"]),$(x,{label:"Rating",icon:"i-mdi-star","option-a":c,"option-b":b,"current-sort":s.currentSort,onSelect:y[2]||(y[2]=f=>p.$emit("select",f))},null,8,["current-sort"]),$(x,{label:"Title",icon:"i-mdi-sort-alphabetical-ascending","option-a":_,"option-b":g,"current-sort":s.currentSort,onSelect:y[3]||(y[3]=f=>p.$emit("select",f))},null,8,["current-sort"]),$(C,{option:u,"is-active":d(u),onSelect:y[4]||(y[4]=f=>p.$emit("select",u))},null,8,["is-active"])])}}}),it=Object.assign(nt,{__name:"AppSortButtonGroup"}),rt={class:"space-y-4"},lt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},at=A({__name:"FilterSortControl",setup(s){const n=D(),{filters:o}=G(n),{setSort:h}=n,m=V(()=>o.value.sort.field==="year"&&o.value.sort.direction==="desc"),l=()=>{h({field:"year",direction:"desc"})};return(c,b)=>{const _=it;return r(),a("div",rt,[$(_,{"current-sort":e(o).sort,"show-relevance":!!e(o).searchQuery,onSelect:e(h)},null,8,["current-sort","show-relevance","onSelect"]),e(m)?O("",!0):(r(),a("div",lt,[t("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:l}," Reset to Default ")]))])}}}),ct=Object.assign(at,{__name:"FilterSortControl"}),ut={key:0,class:"fixed inset-0 z-[100] overflow-hidden flex flex-col"},dt={class:"flex items-center justify-between p-4 border-b border-theme-border/30"},mt={class:"text-xs font-bold text-theme-textmuted uppercase tracking-widest"},pt={class:"p-4 overflow-y-auto scrollbar-thin max-h-[60vh] md:max-h-[400px]"},vt=A({__name:"FilterPopup",props:{isOpen:{type:Boolean},title:{},anchorEl:{}},emits:["close"],setup(s,{emit:n}){const o=s,h=n,m=S(null),{width:l,height:c}=Oe(),_=Me(Ve).smaller("md"),g=Ae(typeof window<"u"?document.body:null),{activate:u,deactivate:d}=Ee(m,{immediate:!1,allowOutsideClick:!0,escapeDeactivates:!0,returnFocusOnDeactivate:!0});j(()=>o.isOpen,y=>{g.value=y,y?te(()=>{setTimeout(()=>u(),50)}):d()}),je("Escape",y=>{o.isOpen&&(y.preventDefault(),h("close"))});const p=V(()=>{if(_.value||!o.anchorEl)return{};const y=o.anchorEl.getBoundingClientRect(),C=320;let x=y.left,f=y.bottom+8;x+C>l.value-16&&(x=l.value-C-16),x<16&&(x=16);const F=m.value?.offsetHeight||300;return f+F>c.value-16&&(f=y.top-F-8),f<16&&(f=16),{top:`${f}px`,left:`${x}px`,width:`${C}px`}});return(y,C)=>(r(),Z(Be,{to:"body"},[$(ae,{name:"fade"},{default:T(()=>[s.isOpen?(r(),a("div",ut,[t("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-[2px] transition-opacity duration-300",onClick:C[0]||(C[0]=x=>y.$emit("close"))}),$(ae,{name:"pop",appear:""},{default:T(()=>[t("div",{ref_key:"popupRef",ref:m,class:M(["absolute glass shadow-2xl overflow-hidden flex flex-col border border-theme-border/50",[e(_)?"bottom-0 left-0 right-0 rounded-t-3xl max-h-[85vh] w-full":"rounded-2xl max-w-xs"]]),style:Re(e(p))},[t("div",dt,[t("h3",mt,k(s.title),1),t("button",{class:"p-1 hover:bg-theme-selection rounded-full transition-colors text-theme-textmuted hover:text-theme-text",onClick:C[1]||(C[1]=x=>y.$emit("close"))},[...C[2]||(C[2]=[t("div",{class:"i-mdi-close text-lg"},null,-1)])])]),t("div",pt,[ue(y.$slots,"default",{},void 0,!0)])],6)]),_:3})])):O("",!0)]),_:3})]))}}),xt=Object.assign(z(vt,[["__scopeId","data-v-697d5914"]]),{__name:"FilterPopup"}),ft={class:"space-y-6 py-2"},ht={class:"flex items-center justify-between"},bt={class:"text-lg font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},gt={class:"relative px-2"},_t={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},yt=A({__name:"FilterRatingControl",setup(s){const n=D(),{filters:o}=G(n),{setMinRating:h}=n,m=S(o.value.minRating),l=oe(c=>{h(c)},300);return j(m,c=>{l(c)}),j(()=>o.value.minRating,c=>{c!==m.value&&(m.value=c)}),(c,b)=>(r(),a("div",ft,[t("div",ht,[b[2]||(b[2]=t("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Minimum Rating ",-1)),t("div",bt,k(e(m)===0?"All Ratings":`${e(m).toFixed(1)}+`),1)]),t("div",gt,[E(t("input",{"onUpdate:modelValue":b[0]||(b[0]=_=>Q(m)?m.value=_:null),type:"range",min:"0",max:"10",step:"0.5",class:"filter-range-input"},null,512),[[K,e(m),void 0,{number:!0}]]),b[3]||(b[3]=t("div",{class:"flex justify-between mt-2 text-[10px] text-theme-textmuted font-medium px-1"},[t("span",null,"0"),t("span",null,"5"),t("span",null,"10")],-1))]),e(m)>0?(r(),a("div",_t,[t("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:b[1]||(b[1]=_=>m.value=0)}," Clear Filter ")])):O("",!0)]))}}),$t=Object.assign(z(yt,[["__scopeId","data-v-09f5edd8"]]),{__name:"FilterRatingControl"}),kt={class:"space-y-6 py-2"},Ct={class:"flex items-center justify-between"},wt={class:"text-sm font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},St={class:"space-y-4 px-2"},Ft={class:"space-y-1"},Mt={class:"flex justify-between text-[10px] text-theme-textmuted"},At={class:"font-bold text-theme-text"},jt={class:"space-y-1"},Ot={class:"flex justify-between text-[10px] text-theme-textmuted"},Rt={class:"font-bold text-theme-text"},Bt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Vt=A({__name:"FilterYearControl",setup(s){const n=D(),{filters:o}=G(n),{setMinYear:h,setMaxYear:m}=n,l=S(o.value.minYear||1910),c=S(o.value.maxYear||2025),b=V(()=>l.value!==1910||c.value!==2025),_=()=>{l.value=1910,c.value=2025};j(l,u=>{u>c.value&&(c.value=u),g()}),j(c,u=>{u<l.value&&(l.value=u),g()});const g=oe(()=>{h(l.value===1910?0:l.value),m(c.value===2025?0:c.value)},300);return j(()=>o.value.minYear,u=>{const d=u||1910;d!==l.value&&(l.value=d)}),j(()=>o.value.maxYear,u=>{const d=u||2025;d!==c.value&&(c.value=d)}),(u,d)=>(r(),a("div",kt,[t("div",Ct,[d[2]||(d[2]=t("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Year Range ",-1)),t("div",wt,k(e(l))+" — "+k(e(c)),1)]),t("div",St,[t("div",Ft,[t("div",Mt,[d[3]||(d[3]=t("span",null,"From",-1)),t("span",At,k(e(l)),1)]),E(t("input",{"onUpdate:modelValue":d[0]||(d[0]=p=>Q(l)?l.value=p:null),type:"range",min:"1910",max:"2025",step:"1",class:"filter-range-input"},null,512),[[K,e(l),void 0,{number:!0}]])]),t("div",jt,[t("div",Ot,[d[4]||(d[4]=t("span",null,"To",-1)),t("span",Rt,k(e(c)),1)]),E(t("input",{"onUpdate:modelValue":d[1]||(d[1]=p=>Q(c)?c.value=p:null),type:"range",min:"1910",max:"2025",step:"1",class:"filter-range-input"},null,512),[[K,e(c),void 0,{number:!0}]])]),d[5]||(d[5]=t("div",{class:"flex justify-between text-[10px] text-theme-textmuted font-medium px-1"},[t("span",null,"1910"),t("span",null,"1970"),t("span",null,"2025")],-1))]),e(b)?(r(),a("div",Bt,[t("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:_}," Clear Filter ")])):O("",!0)]))}}),Yt=Object.assign(z(Vt,[["__scopeId","data-v-bc5753a7"]]),{__name:"FilterYearControl"});function L(s){if(s>=1e6){const n=s/1e6;return`${n>=10?Math.round(n):n.toFixed(1).replace(/\.0$/,"")}M`}if(s>=1e3){const n=s/1e3;return`${n>=10?Math.round(n):n.toFixed(1).replace(/\.0$/,"")}K`}return s.toString()}const Tt={class:"space-y-6 py-2"},Lt={class:"flex items-center justify-between"},It={class:"text-sm font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},Gt={class:"space-y-4 px-2"},Dt={class:"space-y-1"},Ut={class:"flex justify-between text-[10px] text-theme-textmuted"},Ht={class:"font-bold text-theme-text"},Pt={class:"space-y-1"},Nt={class:"flex justify-between text-[10px] text-theme-textmuted"},Et={class:"font-bold text-theme-text"},Kt={class:"flex justify-between text-[8px] text-theme-textmuted font-medium px-0 opacity-70"},Qt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Wt=A({__name:"FilterVotesControl",setup(s){const n=D(),{filters:o}=G(n),{setMinVotes:h,setMaxVotes:m}=n,l=[0,100,500,1e3,5e3,1e4,5e4,1e5,5e5,1e6],c=["0","1K","5K","50K","500K","1M+"],b=x=>{const f=l.findIndex(F=>F>=x);return f===-1?9:f},_=S(b(o.value.minVotes)),g=S(o.value.maxVotes?b(o.value.maxVotes):9),u=V(()=>l[_.value]),d=V(()=>l[g.value]),p=V(()=>_.value!==0||g.value!==9),y=()=>{_.value=0,g.value=9};j(_,x=>{x>g.value&&(g.value=x),C()}),j(g,x=>{x<_.value&&(_.value=x),C()});const C=oe(()=>{h(u.value),m(g.value===9?0:d.value)},300);return j(()=>o.value.minVotes,x=>{const f=b(x);f!==_.value&&(_.value=f)}),j(()=>o.value.maxVotes,x=>{const f=x?b(x):9;f!==g.value&&(g.value=f)}),(x,f)=>(r(),a("div",Tt,[t("div",Lt,[f[2]||(f[2]=t("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Votes Range ",-1)),t("div",It,k(("formatCount"in x?x.formatCount:e(L))(e(u)))+" — "+k(e(g)===9?"Any":("formatCount"in x?x.formatCount:e(L))(e(d))),1)]),t("div",Gt,[t("div",Dt,[t("div",Ut,[f[3]||(f[3]=t("span",null,"Min",-1)),t("span",Ht,k(("formatCount"in x?x.formatCount:e(L))(e(u))),1)]),E(t("input",{"onUpdate:modelValue":f[0]||(f[0]=F=>Q(_)?_.value=F:null),type:"range",min:"0",max:"9",step:"1",class:"filter-range-input"},null,512),[[K,e(_),void 0,{number:!0}]])]),t("div",Pt,[t("div",Nt,[f[4]||(f[4]=t("span",null,"Max",-1)),t("span",Et,k(e(g)===9?"Any":("formatCount"in x?x.formatCount:e(L))(e(d))),1)]),E(t("input",{"onUpdate:modelValue":f[1]||(f[1]=F=>Q(g)?g.value=F:null),type:"range",min:"0",max:"9",step:"1",class:"filter-range-input"},null,512),[[K,e(g),void 0,{number:!0}]])]),t("div",Kt,[(r(),a(W,null,q(c,F=>t("span",{key:F,class:"w-8 text-center"},k(F),1)),64))])]),e(p)?(r(),a("div",Qt,[t("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:y}," Clear Filter ")])):O("",!0)]))}}),Zt=Object.assign(z(Wt,[["__scopeId","data-v-720fdf2e"]]),{__name:"FilterVotesControl"}),zt={class:"space-y-4"},qt={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},Jt={key:1,class:"text-xs text-red-500 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"},Xt={key:2,class:"space-y-4"},eo={class:"flex flex-wrap gap-2 max-h-[300px] overflow-y-auto pr-2 scrollbar-thin"},to=["onClick"],oo={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},so=A({__name:"FilterGenresControl",setup(s){const n=D(),{filters:o}=G(n),{toggleGenre:h,setGenres:m}=n,l=S([]),c=S(!0),b=S(null),_=async()=>{c.value=!0,b.value=null;try{const d=await ne().getFilterOptions();l.value=d.genres}catch(u){b.value="Failed to load genres",console.error(u)}finally{c.value=!1}},g=()=>{m([])};return J(()=>{_()}),(u,d)=>(r(),a("div",zt,[e(c)?(r(),a("div",qt,[...d[0]||(d[0]=[t("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),t("span",{class:"text-xs text-theme-textmuted"},"Loading genres...",-1)])])):e(b)?(r(),a("div",Jt,k(e(b)),1)):(r(),a("div",Xt,[t("div",eo,[(r(!0),a(W,null,q(e(l),p=>(r(),a("button",{key:p.name,class:M(["px-3 py-1.5 text-xs rounded-full transition-all inline-flex items-center gap-1.5 border",[e(o).genres.includes(p.name)?"bg-theme-primary text-white border-theme-primary shadow-sm":"bg-theme-selection text-theme-text border-theme-border/50 hover:border-theme-border hover:bg-theme-border/30"]]),onClick:y=>e(h)(p.name)},[t("span",null,k(p.name),1),t("span",{class:M(["text-[10px] opacity-70",{"text-white/80":e(o).genres.includes(p.name)}])},k(("formatCount"in u?u.formatCount:e(L))(p.count)),3)],10,to))),128))]),e(o).genres.length>0?(r(),a("div",oo,[t("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:g}," Clear ("+k(e(o).genres.length)+") ",1)])):O("",!0)]))]))}}),no=Object.assign(so,{__name:"FilterGenresControl"}),io={class:"space-y-4"},ro={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},lo={key:1,class:"text-xs text-red-500 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"},ao={key:2,class:"space-y-4"},co={class:"flex flex-wrap gap-2 max-h-[300px] overflow-y-auto pr-2 scrollbar-thin"},uo=["onClick"],mo={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},po=A({__name:"FilterCountriesControl",setup(s){const n=D(),{filters:o}=G(n),{toggleCountry:h,setCountries:m}=n,l=S([]),c=S(!0),b=S(null),_=async()=>{c.value=!0,b.value=null;try{const d=await ne().getFilterOptions();l.value=d.countries}catch(u){b.value="Failed to load countries",console.error(u)}finally{c.value=!1}},g=()=>{m([])};return J(()=>{_()}),(u,d)=>(r(),a("div",io,[e(c)?(r(),a("div",ro,[...d[0]||(d[0]=[t("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),t("span",{class:"text-xs text-theme-textmuted"},"Loading countries...",-1)])])):e(b)?(r(),a("div",lo,k(e(b)),1)):(r(),a("div",ao,[t("div",co,[(r(!0),a(W,null,q(e(l),p=>(r(),a("button",{key:p.name,class:M(["px-3 py-1.5 text-xs rounded-full transition-all inline-flex items-center gap-1.5 border",[e(o).countries.includes(p.name)?"bg-theme-primary text-white border-theme-primary shadow-sm":"bg-theme-selection text-theme-text border-theme-border/50 hover:border-theme-border hover:bg-theme-border/30"]]),onClick:y=>e(h)(p.name)},[t("span",null,k(p.name),1),t("span",{class:M(["text-[10px] opacity-70",{"text-white/80":e(o).countries.includes(p.name)}])},k(("formatCount"in u?u.formatCount:e(L))(p.count)),3)],10,uo))),128))]),e(o).countries.length>0?(r(),a("div",mo,[t("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:g}," Clear ("+k(e(o).countries.length)+") ",1)])):O("",!0)]))]))}}),vo=Object.assign(po,{__name:"FilterCountriesControl"}),xo=["aria-checked","aria-disabled"],fo={key:0,class:"i-mdi-checkbox-marked text-xl"},ho={key:1,class:"i-mdi-checkbox-blank-outline text-xl"},bo=["checked","value","disabled"],go=A({__name:"AppInputCheckbox",props:{checked:{type:Boolean},value:{type:[String,Number,Boolean]},label:{},disabled:{type:Boolean}},emits:["change"],setup(s,{emit:n}){const o=n,h=m=>{const l=m.target;o("change",l.checked)};return(m,l)=>(r(),a("label",{class:M(["flex items-center gap-2 cursor-pointer group",{"opacity-50 cursor-not-allowed":s.disabled}])},[t("div",{class:M(["flex items-center justify-center w-5 h-5 transition-colors",{"text-theme-primary":s.checked,"text-theme-textmuted group-hover:text-theme-text":!s.checked}]),role:"checkbox","aria-checked":s.checked,"aria-disabled":s.disabled},[s.checked?(r(),a("div",fo)):(r(),a("div",ho))],10,xo),t("input",{checked:s.checked,type:"checkbox",value:s.value,disabled:s.disabled,class:"sr-only",onChange:h},null,40,bo),s.label?(r(),a("span",{key:0,class:M(["text-sm select-none",{"text-theme-textmuted":s.disabled}])},k(s.label),3)):O("",!0),ue(m.$slots,"default")],2))}}),_o=Object.assign(go,{__name:"AppInputCheckbox"}),yo={class:"space-y-4"},$o={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},ko={key:1,class:"space-y-4"},Co={class:"space-y-2"},wo={class:"space-y-3"},So={class:"pl-2 space-y-2 border-l-2 border-theme-border/30 max-h-[250px] overflow-y-auto scrollbar-thin pr-2"},Fo={class:"flex items-center justify-between gap-2 flex-1"},Mo={class:"text-sm text-theme-text"},Ao={class:"text-[10px] text-theme-textmuted font-medium"},jo={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Oo=A({__name:"FilterSourceControl",setup(s){const n=D(),{filters:o}=G(n),{toggleSource:h,setSources:m}=n,l=S([]),c=S(!0),b=async()=>{c.value=!0;try{const u=await ne().getFilterOptions();l.value=u.channels}catch(g){console.error(g)}finally{c.value=!1}},_=()=>{m([])};return J(()=>{b()}),(g,u)=>{const d=_o;return r(),a("div",yo,[e(c)?(r(),a("div",$o,[...u[1]||(u[1]=[t("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),t("span",{class:"text-xs text-theme-textmuted"},"Loading sources...",-1)])])):(r(),a("div",ko,[t("div",Co,[$(d,{checked:e(o).sources.includes("archive.org"),onChange:u[0]||(u[0]=p=>e(h)("archive.org"))},{default:T(()=>[...u[2]||(u[2]=[t("span",{class:"flex items-center justify-between gap-2 flex-1"},[t("span",{class:"text-sm font-medium text-theme-text"},"Archive.org")],-1)])]),_:1},8,["checked"])]),t("div",wo,[u[3]||(u[3]=t("div",{class:"text-[10px] font-bold text-theme-textmuted uppercase tracking-widest pl-1"}," YouTube Channels ",-1)),t("div",So,[(r(!0),a(W,null,q(e(l),p=>(r(),Z(d,{key:p.id,checked:e(o).sources.includes(p.name),onChange:y=>e(h)(p.name)},{default:T(()=>[t("span",Fo,[t("span",Mo,k(p.name),1),t("span",Ao,k(("formatCount"in g?g.formatCount:e(L))(p.count)),1)])]),_:2},1032,["checked","onChange"]))),128))])]),e(o).sources.length>0?(r(),a("div",jo,[t("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:_}," Clear ("+k(e(o).sources.length)+") ",1)])):O("",!0)]))])}}}),Ro=Object.assign(Oo,{__name:"FilterSourceControl"}),Bo={class:"max-w-4xl mx-auto px-4 py-4 space-y-4"},Vo={class:"flex items-center gap-4"},Yo={class:"relative flex-1"},To={class:"flex flex-wrap items-center gap-2 pb-1"},Lo=A({__name:"SearchHeader",setup(s){const n=D(),{filters:o,hasActiveFilters:h}=G(n),{setSearchQuery:m,setSort:l,setMinRating:c,setMinYear:b,setMaxYear:_,setMinVotes:g,setMaxVotes:u,setGenres:d,setCountries:p,setSources:y,resetFilters:C}=n,x=Ye(),{isSearchOpen:f}=G(x),{setSearchOpen:F}=x,X=S(null),ee=S(null),Y=Te(),R=S(o.value.searchQuery),B=S(null),I=S(null),H=(v,i)=>{B.value===v?(B.value=null,I.value=null):(B.value=v,I.value=i.currentTarget)},U=()=>{B.value=null,I.value=null},ie=V(()=>o.value.sort.field==="year"&&o.value.sort.direction==="desc"),de=V(()=>{if(ie.value)return"";const v=o.value.sort.field,i=o.value.sort.direction;return v==="relevance"?"Relevance":v==="year"?i==="desc"?"Newest":"Oldest":v==="rating"?i==="desc"?"High":"Low":v==="title"?i==="asc"?"A-Z":"Z-A":v==="votes"?"Popular":""}),me=V(()=>{const v=o.value.minYear,i=o.value.maxYear;return v&&i&&v!==1910&&i!==2025?`${v}-${i}`:v&&v!==1910?`${v}+`:i&&i!==2025?`Up to ${i}`:""}),pe=V(()=>{const v=o.value.minVotes,i=o.value.maxVotes;return v&&i&&i<1e6?`${L(v)}-${L(i)}`:v?`${L(v)}+`:i&&i<1e6?`< ${L(i)}`:""}),ve=()=>l({field:"year",direction:"desc"}),xe=()=>{b(0),_(0)},fe=()=>{g(0),u(0)};J(()=>{const v=Y.query.q;v&&v!==R.value&&(R.value=v,F(!0))});const he=oe(v=>{if(m(v),!Y.path.startsWith("/admin")){const i=Ge();v?i.replace({query:{q:v}}):i.replace({query:{}})}v&&Y.path!=="/search"&&!Y.path.startsWith("/admin")&&De("/search"),v&&o.value.sort.field!=="relevance"&&l({field:"relevance",direction:"desc"})},500);j(R,v=>{he(v)}),j(()=>o.value.searchQuery,v=>{v!==R.value&&(R.value=v)});const re=V(()=>Y.path==="/search"?!0:f.value||R.value!=="");j([f,()=>Y.path],([v,i])=>{(v||i==="/search")&&te(()=>{X.value?.focus()})},{immediate:!0}),j(()=>Y.path,v=>{(v==="/search"||v==="/"&&R.value)&&F(!0)}),Le(ee,()=>{Y.path!=="/search"&&!R.value&&!B.value&&se()});const le=()=>{R.value=""},se=()=>{Y.path!=="/search"&&F(!1)},be=()=>{B.value?U():R.value?le():Y.path!=="/search"&&se()},ge=()=>{!B.value&&Y.path!=="/search"&&se()};return(v,i)=>{const P=qe,_e=ct,N=xt,ye=$t,$e=Yt,ke=Zt,Ce=no,we=vo,Se=Ro;return E((r(),a("div",{ref_key:"searchContainer",ref:ee,class:M(["fixed top-0 left-0 right-0 z-50 bg-theme-surface border-b border-theme-border shadow-xl transition-all duration-300",e(re)?"translate-y-0":"-translate-y-full"])},[t("div",Bo,[t("div",Vo,[t("div",Yo,[i[14]||(i[14]=t("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[t("div",{class:"i-mdi-magnify text-2xl text-theme-textmuted"})],-1)),E(t("input",{ref_key:"searchInput",ref:X,"onUpdate:modelValue":i[0]||(i[0]=w=>Q(R)?R.value=w:null),type:"text",class:"block w-full pl-12 pr-12 py-3 md:py-4 bg-theme-background border-2 border-transparent focus:border-theme-primary rounded-2xl text-xl md:text-2xl text-theme-text placeholder-theme-text-muted focus:outline-none transition-all shadow-inner",placeholder:"Search movies, actors, directors...",onKeydown:[ce(be,["esc"]),ce(ge,["enter"])]},null,544),[[K,e(R)]]),e(R)?(r(),a("button",{key:0,class:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:le},[...i[13]||(i[13]=[t("div",{class:"i-mdi-close text-xl text-theme-textmuted hover:text-theme-text"},null,-1)])])):O("",!0)])]),t("div",To,[$(P,{category:"Sort",icon:"i-mdi-sort","active-value":e(de),"is-active":!e(ie),onClick:i[1]||(i[1]=w=>H("sort",w)),onClear:ve},null,8,["active-value","is-active"]),$(P,{category:"Rating",icon:"i-mdi-star","active-value":e(o).minRating>0?`${e(o).minRating.toFixed(1)}+`:"","is-active":e(o).minRating>0,onClick:i[2]||(i[2]=w=>H("rating",w)),onClear:i[3]||(i[3]=w=>e(c)(0))},null,8,["active-value","is-active"]),$(P,{category:"Year",icon:"i-mdi-calendar","active-value":e(me),"is-active":e(o).minYear>0||(e(o).maxYear??0)>0,onClick:i[4]||(i[4]=w=>H("year",w)),onClear:xe},null,8,["active-value","is-active"]),$(P,{category:"Votes",icon:"i-mdi-account-group","active-value":e(pe),"is-active":e(o).minVotes>0||(e(o).maxVotes??0)>0&&(e(o).maxVotes??0)<1e6,onClick:i[5]||(i[5]=w=>H("votes",w)),onClear:fe},null,8,["active-value","is-active"]),$(P,{category:"Genres",icon:"i-mdi-movie-filter","active-value":e(o).genres.length>0?e(o).genres.length:"","is-active":e(o).genres.length>0,onClick:i[6]||(i[6]=w=>H("genres",w)),onClear:i[7]||(i[7]=w=>e(d)([]))},null,8,["active-value","is-active"]),$(P,{category:"Countries",icon:"i-mdi-earth","active-value":e(o).countries.length>0?e(o).countries.length:"","is-active":e(o).countries.length>0,onClick:i[8]||(i[8]=w=>H("countries",w)),onClear:i[9]||(i[9]=w=>e(p)([]))},null,8,["active-value","is-active"]),$(P,{category:"Source",icon:"i-mdi-source-branch","active-value":e(o).sources.length>0?e(o).sources.length:"","is-active":e(o).sources.length>0,onClick:i[10]||(i[10]=w=>H("source",w)),onClear:i[11]||(i[11]=w=>e(y)([]))},null,8,["active-value","is-active"]),e(h)?(r(),a("button",{key:0,class:"text-xs font-bold text-theme-primary hover:bg-theme-primary/10 px-3 py-1.5 rounded-full transition-colors whitespace-nowrap md:ml-auto",onClick:i[12]||(i[12]=(...w)=>e(C)&&e(C)(...w))}," Clear All ")):O("",!0)])]),$(N,{"is-open":e(B)==="sort",title:"Sort By","anchor-el":e(I),onClose:U},{default:T(()=>[$(_e)]),_:1},8,["is-open","anchor-el"]),$(N,{"is-open":e(B)==="rating",title:"Minimum Rating","anchor-el":e(I),onClose:U},{default:T(()=>[$(ye)]),_:1},8,["is-open","anchor-el"]),$(N,{"is-open":e(B)==="year",title:"Year Range","anchor-el":e(I),onClose:U},{default:T(()=>[$($e)]),_:1},8,["is-open","anchor-el"]),$(N,{"is-open":e(B)==="votes",title:"Votes Range","anchor-el":e(I),onClose:U},{default:T(()=>[$(ke)]),_:1},8,["is-open","anchor-el"]),$(N,{"is-open":e(B)==="genres",title:"Genres","anchor-el":e(I),onClose:U},{default:T(()=>[$(Ce)]),_:1},8,["is-open","anchor-el"]),$(N,{"is-open":e(B)==="countries",title:"Countries","anchor-el":e(I),onClose:U},{default:T(()=>[$(we)]),_:1},8,["is-open","anchor-el"]),$(N,{"is-open":e(B)==="source",title:"Sources","anchor-el":e(I),onClose:U},{default:T(()=>[$(Se)]),_:1},8,["is-open","anchor-el"])],2)),[[Ie,e(re)]])}}}),Io=Object.assign(Lo,{__name:"SearchHeader"}),Go={class:"mb-8"},Do={class:"flex flex-wrap gap-6 text-sm"},Uo={class:"text-theme-text"},Ho=A({__name:"MovieStats",props:{totalMovies:{}},setup(s){return(n,o)=>(r(),a("div",Go,[t("div",Do,[t("div",Uo,[o[0]||(o[0]=t("span",{class:"text-theme-textmuted"},"Total Movies:",-1)),Ue(" "+k(s.totalMovies),1)])])]))}}),Po=Object.assign(Ho,{__name:"MovieStats"}),No={class:"min-h-screen bg-theme-background"},Eo={class:"md:ml-16 md:pt-16"},Ko={class:"px-4 lg:px-[6%] py-8"},Qo={class:"relative lg:px-[6%] px-4"},Wo={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},Zo={key:2,class:"text-center py-12"},zo=A({__name:"search",setup(s){He({title:"Search Movies - Movies Deluxe",meta:[{name:"description",content:"Search and filter thousands of free public domain movies from Archive.org and YouTube. Classic films, documentaries, and more."},{property:"og:title",content:"Search Movies - Movies Deluxe"},{property:"og:type",content:"website"}]});const n=D(),{isInitialLoading:o,isFiltering:h,currentMovieList:m,totalFiltered:l,filters:c,lightweightMovies:b}=G(n),{loadFromFile:_,setCurrentPage:g,setScrollY:u}=n,d=V(()=>l.value||0),{y:p}=Pe();J(async()=>{await _(),b.value.length===0&&n.fetchLightweightMovies({limit:50}),await te(),await te();const C=c.value.lastScrollY;C>0&&requestAnimationFrame(()=>{window.scrollTo({top:C,behavior:"instant"}),setTimeout(()=>{Math.abs(window.scrollY-C)>10&&window.scrollTo({top:C,behavior:"instant"})},50)})}),Ne(()=>{u(p.value)});const y=()=>{g(c.value.currentPage+1)};return(C,x)=>{const f=Io,F=Po,X=Ke,ee=Qe;return r(),a("div",No,[$(f),t("main",Eo,[t("div",Ko,[!e(o)&&e(d)>0?(r(),Z(F,{key:0,"total-movies":e(d)},null,8,["total-movies"])):O("",!0)]),t("div",Qo,[e(o)||e(h)?(r(),a("div",Wo,[(r(),a(W,null,q(12,Y=>$(X,{key:Y})),64))])):e(m).length>0?(r(),Z(ee,{key:1,movies:e(m),"total-movies":e(d),onLoadMore:y},null,8,["movies","total-movies"])):(r(),a("div",Zo,[...x[0]||(x[0]=[t("p",{class:"text-theme-textmuted"},"No movies found.",-1)])]))])])])}}}),rs=z(zo,[["__scopeId","data-v-63638a36"]]);export{rs as default};
