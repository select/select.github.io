import{e as E,s as A,D as N,m as S,E as H,h as I,p as z,Z as q,f as Q,n as K,a0 as X,v as R,a1 as Y,l as e,c as r,o as i,q as u,a as t,k as g,B as L,y as J,z as Z,a2 as ee,K as U,b,w,U as te,F as B,t as M,J as D,a3 as se,r as oe,_ as le,G as ne,H as re,Y as W,R as ie}from"./jGiJbwLY.js";import{u as V}from"./njuUf3Z1.js";import{_ as G}from"./BiGhwYSR.js";import{_ as ae}from"./BWl1tqeY.js";import"./BF8-GqbO.js";import"./BH85bPq3.js";const ce={class:"max-w-4xl mx-auto flex items-center gap-4"},ue={class:"relative flex-1"},de=E({__name:"SearchHeader",setup(F){const c=V(),{filters:m}=A(c),{setSearchQuery:y,setSort:x}=c,o=N(),{isSearchOpen:h}=A(o),{setSearchOpen:l}=o,p=S(null),d=S(null),v=H(),a=S(m.value.searchQuery);I(()=>{const n=v.query.q;n&&n!==a.value&&(a.value=n,l(!0))});const $=q(n=>{y(n);const f=ee();n?f.replace({query:{q:n}}):f.replace({query:{}}),n&&v.path!=="/"&&!v.path.startsWith("/admin")&&U("/"),n&&m.value.sort.field!=="relevance"&&x({field:"relevance",direction:"desc"})},500);z(a,n=>{$(n)}),z(()=>m.value.searchQuery,n=>{n!==a.value&&(a.value=n)});const _=Q(()=>v.path!=="/"?!1:h.value||a.value!=="");z(h,n=>{n&&K(()=>{p.value?.focus()})}),z(()=>v.path,n=>{n==="/"&&a.value&&l(!0)}),X(d,()=>{a.value||T()});const C=()=>{a.value=""},T=()=>{l(!1)},O=()=>{a.value?C():T()},j=()=>{T()};return(n,f)=>R((i(),r("div",{ref_key:"searchContainer",ref:d,class:u(["fixed top-0 left-0 right-0 z-50 bg-theme-surface border-b border-theme-border shadow-xl px-4 py-4 md:py-6 transition-transform duration-300",e(_)?"translate-y-0":"-translate-y-full"])},[t("div",ce,[t("div",ue,[f[2]||(f[2]=t("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[t("div",{class:"i-mdi-magnify text-2xl text-theme-textmuted"})],-1)),R(t("input",{ref_key:"searchInput",ref:p,"onUpdate:modelValue":f[0]||(f[0]=s=>J(a)?a.value=s:null),type:"text",class:"block w-full pl-12 pr-12 py-3 md:py-4 bg-theme-background border-2 border-transparent focus:border-theme-primary rounded-2xl text-xl md:text-2xl text-theme-text placeholder-theme-text-muted focus:outline-none transition-all shadow-inner",placeholder:"Search movies, actors, directors...",onKeydown:[L(O,["esc"]),L(j,["enter"])]},null,544),[[Z,e(a)]]),e(a)?(i(),r("button",{key:0,class:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:C},[...f[1]||(f[1]=[t("div",{class:"i-mdi-close text-xl text-theme-textmuted hover:text-theme-text"},null,-1)])])):g("",!0)]),e(a)?g("",!0):(i(),r("button",{key:0,class:"p-2 md:p-3 rounded-xl hover:bg-theme-background text-theme-textmuted hover:text-theme-text transition-colors",title:"Close search",onClick:T},[...f[3]||(f[3]=[t("div",{class:"i-mdi-close text-2xl md:text-3xl"},null,-1)])]))])],2)),[[Y,e(_)]])}}),me=Object.assign(de,{__name:"SearchHeader"}),he={class:"transition-all duration-300"},pe={key:0,class:"text-base md:text-lg text-theme-textmuted mt-2 max-w-2xl transition-opacity duration-300"},fe=E({__name:"MovieHeader",setup(F){const c=H(),m=Q(()=>c.path==="/"||c.path==="/collections"||c.path==="/collections/");return(y,x)=>{const o=G;return i(),r("header",he,[t("div",{class:u(["md:ml-16 max-w-none mx-auto px-4 flex lg:flex-row flex-col lg:items-end justify-between gap-8",{"py-6 md:py-10 lg:px-[6%]":e(m),"py-3":!e(m)}])},[b(o,{to:"/",class:"grow"},{default:w(()=>[t("div",{class:u(["w-full i-app-logo text-theme-text transition-all duration-300",{" max-w-md h-16":e(m),"max-w-xs h-12":!e(m)}])},null,2)]),_:1}),e(m)?(i(),r("p",pe," Free legal movie streams from Archive.org and YouTube ")):g("",!0)],2)])}}}),xe=Object.assign(fe,{__name:"MovieHeader"}),ve={class:"hidden md:block fixed left-4 top-1/2 -translate-y-1/2 z-40 glass shadow-2xl rounded-full w-12 border-theme-border/30"},be={class:"flex flex-col items-center gap-2 py-2"},ge={key:0,class:"absolute top-0 -right-1 bg-theme-accent text-white text-xs rounded-full size-4 flex items-center justify-center font-medium"},_e={key:0,class:"i-material-symbols-light-wb-sunny text-xl"},ye={key:1,class:"i-material-symbols-light-dark-mode text-xl"},ke={class:"relative group"},we={key:0,class:"absolute top-0 -right-1 bg-theme-primary text-white text-xs rounded-full size-4 flex items-center justify-center font-medium"},Se={class:"md:hidden fixed bottom-6 left-1/2 -translate-x-1/2 z-50 glass shadow-2xl rounded-full h-14 border-theme-border/30 max-w-[calc(100vw-2rem)] flex items-center group/sidebar"},Ce={key:0,class:"absolute -top-1 -right-1 bg-theme-accent text-white text-xs rounded-full size-5 flex items-center justify-center font-medium"},Te={key:0,class:"i-material-symbols-light-wb-sunny text-2xl text-theme-accent"},$e={key:1,class:"i-material-symbols-light-dark-mode text-2xl text-theme-primary"},ze={class:"relative group flex-shrink-0"},Me={key:0,class:"absolute -top-1 -right-1 bg-theme-primary text-white text-xs rounded-full size-5 flex items-center justify-center font-medium"},Ee=E({__name:"Sidebar",emits:["openFilters","openThemeSelection"],setup(F,{emit:c}){const m=c,y=V(),{likedCount:x,activeFiltersCount:o}=A(y),h=N(),{setSearchOpen:l}=h,{isDark:p}=A(h),d=H(),v=S(null),a=S(!1),$=S(!1),_=()=>{if(!v.value)return;const{scrollLeft:f,scrollWidth:s,clientWidth:k}=v.value;a.value=f>5,$.value=f+k<s-5};I(()=>{_(),window.addEventListener("resize",_)}),te(()=>{window.removeEventListener("resize",_)}),z(o,()=>{K(_)});const C=()=>{m("openFilters")},T=()=>{m("openThemeSelection")},O=()=>{y.resetFilters()},j=f=>{if(!v.value)return;const s=100;v.value.scrollBy({left:f==="left"?-s:s,behavior:"smooth"})},n=async()=>{d.path!=="/"&&await U("/"),l(!0)};return(f,s)=>{const k=G;return i(),r(B,null,[t("aside",ve,[t("div",be,[b(k,{to:"/",class:u(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":e(d).path==="/"}]),title:"All Movies"},{default:w(()=>[...s[2]||(s[2]=[t("div",{class:"i-mdi-home text-xl"},null,-1)])]),_:1},8,["class"]),t("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors relative group",title:"Search (Shift+S)",onClick:n},[...s[3]||(s[3]=[t("div",{class:"i-mdi-magnify text-xl"},null,-1)])]),b(k,{to:"/liked",class:u(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-accent/20":e(d).path==="/liked"}]),title:"Liked Movies"},{default:w(()=>[t("div",{class:u(["i-mdi-heart text-xl",{"text-theme-accent":e(d).path==="/liked"}])},null,2),e(x)>0?(i(),r("span",ge,M(e(x)>99?"99+":e(x)),1)):g("",!0)]),_:1},8,["class"]),b(k,{to:"/collections",class:u(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":e(d).path.startsWith("/collections")}]),title:"Collections"},{default:w(()=>[t("div",{class:u(["i-mdi:movie-roll text-xl",{"text-theme-primary":e(d).path.startsWith("/collections")}])},null,2)]),_:1},8,["class"]),t("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors",title:"Theme Selection",onClick:T},[e(p)?(i(),r("div",_e)):(i(),r("div",ye))]),t("div",ke,[t("button",{class:u(["p-2 hover:bg-theme-selection rounded-full transition-colors relative",{"bg-theme-primary/20":e(o)>0}]),title:"Filters",onClick:C},[t("div",{class:u(["i-mdi-filter-variant text-xl",{"text-theme-primary":e(o)>0}])},null,2),e(o)>0?(i(),r("span",we,M(e(o)>9?"9+":e(o)),1)):g("",!0)],2),e(o)>0?(i(),r("button",{key:0,class:"absolute -top-1 -right-1 size-5 rounded-full bg-theme-surface/90 backdrop-blur-sm border border-theme-border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-theme-accent/20 hover:border-theme-accent z-10",title:"Clear all filters",onClick:D(O,["stop"])},[...s[4]||(s[4]=[t("div",{class:"i-mdi-close text-xs text-theme-textmuted hover:text-theme-accent"},null,-1)])])):g("",!0)]),s[5]||(s[5]=t("a",{href:"https://github.com/select/movies-deluxe",target:"_blank",rel:"noopener noreferrer",class:"p-2 hover:bg-theme-selection rounded-full transition-colors",title:"View on GitHub"},[t("div",{class:"i-mdi-github text-xl"})],-1))])]),t("aside",Se,[e(a)?(i(),r("button",{key:0,class:"absolute left-1 z-10 p-1 rounded-full bg-theme-surface/80 backdrop-blur-sm text-theme-textmuted animate-pulse hover:bg-theme-selection transition-colors","aria-label":"Scroll left",onClick:s[0]||(s[0]=P=>j("left"))},[...s[6]||(s[6]=[t("div",{class:"i-mdi-chevron-left text-lg"},null,-1)])])):g("",!0),t("div",{ref_key:"scrollContainer",ref:v,class:"flex items-center gap-1 px-2 h-full overflow-x-auto scrollbar-hidden scroll-smooth",onScroll:_},[t("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors relative flex-shrink-0","aria-label":"Search",onClick:n},[...s[7]||(s[7]=[t("div",{class:"i-mdi-magnify text-2xl"},null,-1)])]),b(k,{to:"/",class:u(["p-2 hover:bg-theme-selection rounded-full transition-colors relative flex-shrink-0",{"bg-theme-primary/20":e(d).path==="/"}]),"aria-label":"All Movies"},{default:w(()=>[...s[8]||(s[8]=[t("div",{class:"i-mdi-home text-2xl"},null,-1)])]),_:1},8,["class"]),b(k,{to:"/liked",class:u(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-accent/20":e(d).path==="/liked"}]),"aria-label":"Liked Movies"},{default:w(()=>[t("div",{class:u(["i-mdi-heart text-2xl",{"text-theme-accent":e(d).path==="/liked"}])},null,2),e(x)>0?(i(),r("span",Ce,M(e(x)>99?"99+":e(x)),1)):g("",!0)]),_:1},8,["class"]),b(k,{to:"/collections",class:u(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-primary/20":e(d).path.startsWith("/collections")}]),"aria-label":"Collections"},{default:w(()=>[t("div",{class:u(["i-mdi:movie-roll text-2xl",{"text-theme-primary":e(d).path.startsWith("/collections")}])},null,2)]),_:1},8,["class"]),t("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors flex-shrink-0","aria-label":"Theme Selection",onClick:T},[e(p)?(i(),r("div",Te)):(i(),r("div",$e))]),t("div",ze,[t("button",{class:u(["p-2 hover:bg-theme-selection rounded-full transition-colors relative",{"bg-theme-primary/20":e(o)>0}]),"aria-label":"Filters",onClick:C},[t("div",{class:u(["i-mdi-filter-variant text-2xl",{"text-theme-primary":e(o)>0}])},null,2),e(o)>0?(i(),r("span",Me,M(e(o)>9?"9+":e(o)),1)):g("",!0)],2),e(o)>0?(i(),r("button",{key:0,class:"absolute -top-1 -right-1 size-6 rounded-full bg-theme-surface/90 backdrop-blur-sm border border-theme-border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-theme-accent/20 hover:border-theme-accent z-10","aria-label":"Clear all filters",onClick:D(O,["stop"])},[...s[9]||(s[9]=[t("div",{class:"i-mdi-close text-sm text-theme-textmuted hover:text-theme-accent"},null,-1)])])):g("",!0)]),s[10]||(s[10]=t("a",{href:"https://github.com/select/movies-deluxe",target:"_blank",rel:"noopener noreferrer",class:"p-2 hover:bg-theme-selection rounded-full transition-colors flex-shrink-0","aria-label":"View on GitHub"},[t("div",{class:"i-mdi-github text-2xl"})],-1))],544),e($)?(i(),r("button",{key:1,class:"absolute right-1 z-10 p-1 rounded-full bg-theme-surface/80 backdrop-blur-sm text-theme-textmuted animate-pulse hover:bg-theme-selection transition-colors","aria-label":"Scroll right",onClick:s[1]||(s[1]=P=>j("right"))},[...s[11]||(s[11]=[t("div",{class:"i-mdi-chevron-right text-lg"},null,-1)])])):g("",!0)])],64)}}}),Fe=Object.assign(Ee,{__name:"Sidebar"}),Oe={class:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none"},je={class:"flex-1"},Ae=["onClick"],Ne=E({__name:"AppToastContainer",setup(F){const{toasts:c,removeToast:m}=N(),y=o=>{const h={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600",warning:"bg-yellow-600"};return h[o]||h.info},x=o=>{const h={success:"i-mdi-check-circle text-lg",error:"i-mdi-alert-circle text-lg",info:"i-mdi-information text-lg",warning:"i-mdi-alert text-lg"};return h[o]||h.info};return(o,h)=>(i(),r("div",Oe,[b(se,{name:"toast",tag:"div",class:"flex flex-col gap-2"},{default:w(()=>[(i(!0),r(B,null,oe(e(c),l=>(i(),r("div",{key:l.id,class:u(["pointer-events-auto p-3 rounded-lg shadow-lg text-white text-sm flex items-center gap-2 min-w-[300px] max-w-md",y(l.type)])},[t("div",{class:u(x(l.type))},null,2),t("span",je,M(l.message),1),t("button",{class:"p-1 hover:bg-white/20 rounded transition-colors",onClick:p=>e(m)(l.id)},[...h[0]||(h[0]=[t("div",{class:"i-mdi-close text-lg"},null,-1)])],8,Ae)],2))),128))]),_:1})]))}}),He=Object.assign(le(Ne,[["__scopeId","data-v-c1ef2144"]]),{__name:"AppToastContainer"}),Ke={class:"min-h-screen bg-theme-background text-theme-text transition-colors duration-300"},Ue=E({__name:"default",setup(F){const c=S(!1),m=S(),y=()=>{c.value=!0,K(()=>{setTimeout(()=>{m.value?.scrollToThemeSection()},300)})},x=ne(),{Escape:o}=x;o&&re(o,()=>{c.value&&(c.value=!1)}),W("k",l=>{if(l.ctrlKey||l.metaKey){const p=window.document.activeElement;p?.tagName==="INPUT"||p?.tagName==="TEXTAREA"||(l.preventDefault(),c.value=!c.value)}});const{setSearchOpen:h}=N();return W(["s","S","/"],l=>{const p=window.document.activeElement;p?.tagName==="INPUT"||p?.tagName==="TEXTAREA"||((l.key==="s"||l.key==="S")&&!l.ctrlKey&&!l.metaKey&&!l.altKey||l.key==="/")&&(l.preventDefault(),h(!0))}),(l,p)=>{const d=me,v=xe,a=Fe,$=ae,_=He;return i(),r("div",Ke,[b(d),b(v),b(a,{onOpenFilters:p[0]||(p[0]=C=>c.value=!0),onOpenThemeSelection:y}),b($,{ref_key:"filterMenuRef",ref:m,"is-open":e(c),onClose:p[1]||(p[1]=C=>c.value=!1)},null,8,["is-open"]),ie(l.$slots,"default"),b(_)])}}});export{Ue as default};
