import{e as Y,s as de,D as he,m as P,E as Re,p as q,Z as it,f as ne,n as te,$ as We,v as je,a0 as ot,l as o,c as g,o as h,q as k,a as i,k as L,B as Pe,y as st,z as lt,K as Qe,b as R,w as M,h as De,U as ct,F as J,t as j,J as Be,j as ke,a1 as Ze,a2 as ut,R as Ee,a3 as Le,a4 as dt,a5 as Me,a6 as ft,a7 as mt,a8 as vt,a9 as bt,aa as ht,d as ye,r as ue,N as le,ab as pt,_ as gt,G as xt,H as yt,ac as Ke}from"./BBemdg-k.js";import{u as Se}from"./veKNg0ie.js";import{_ as qe}from"./B9Yg7k_6.js";import{u as ze}from"./DOsM1U9P.js";import{i as wt}from"./BH85bPq3.js";const kt={class:"max-w-4xl mx-auto flex items-center gap-4"},St={class:"relative flex-1"},_t=Y({__name:"SearchHeader",setup(n){const e=Se(),{filters:t}=de(e),{setSearchQuery:a,setSort:s}=e,l=he(),{isSearchOpen:r}=de(l),{setSearchOpen:d}=l,v=P(null),p=P(null),w=Re(),x=P(t.value.searchQuery),E=it(D=>{a(D);const B=w.path==="/"||w.path==="/liked"||w.path==="/collections";D&&!B&&Qe("/"),D&&t.value.sort.field!=="relevance"&&s({field:"relevance",direction:"desc",label:"Relevance"})},500);q(x,D=>{E(D)}),q(()=>t.value.searchQuery,D=>{D!==x.value&&(x.value=D)});const O=ne(()=>w.path==="/"||w.path==="/liked"||w.path==="/collections"?r.value||x.value!=="":!1);q(r,D=>{D&&te(()=>{v.value?.focus()})}),q(()=>w.path,D=>{(D==="/"||D==="/liked"||D==="/collections")&&x.value&&d(!0)}),We(p,()=>{x.value||G()});const _=()=>{x.value=""},G=()=>{d(!1)},K=()=>{x.value?_():G()},U=()=>{G()};return(D,B)=>je((h(),g("div",{ref_key:"searchContainer",ref:p,class:k(["fixed top-0 left-0 right-0 z-50 bg-theme-surface border-b border-theme-border shadow-xl px-4 py-4 md:py-6 transition-transform duration-300",o(O)?"translate-y-0":"-translate-y-full"])},[i("div",kt,[i("div",St,[B[2]||(B[2]=i("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[i("div",{class:"i-mdi-magnify text-2xl text-theme-textmuted"})],-1)),je(i("input",{ref_key:"searchInput",ref:v,"onUpdate:modelValue":B[0]||(B[0]=T=>st(x)?x.value=T:null),type:"text",class:"block w-full pl-12 pr-12 py-3 md:py-4 bg-theme-background border-2 border-transparent focus:border-theme-primary rounded-2xl text-xl md:text-2xl text-theme-text placeholder-theme-text-muted focus:outline-none transition-all shadow-inner",placeholder:"Search movies, actors, directors...",onKeydown:[Pe(K,["esc"]),Pe(U,["enter"])]},null,544),[[lt,o(x)]]),o(x)?(h(),g("button",{key:0,class:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:_},[...B[1]||(B[1]=[i("div",{class:"i-mdi-close text-xl text-theme-textmuted hover:text-theme-text"},null,-1)])])):L("",!0)]),o(x)?L("",!0):(h(),g("button",{key:0,class:"p-2 md:p-3 rounded-xl hover:bg-theme-background text-theme-textmuted hover:text-theme-text transition-colors",title:"Close search",onClick:G},[...B[3]||(B[3]=[i("div",{class:"i-mdi-close text-2xl md:text-3xl"},null,-1)])]))])],2)),[[ot,o(O)]])}}),Tt=Object.assign(_t,{__name:"SearchHeader"}),Ct={class:"transition-all duration-300"},Ft={key:0,class:"text-base md:text-lg text-theme-textmuted mt-2 max-w-2xl transition-opacity duration-300"},Et=Y({__name:"MovieHeader",setup(n){const e=Re(),t=ne(()=>e.path==="/"||e.path==="/collections"||e.path==="/collections/");return(a,s)=>{const l=qe;return h(),g("header",Ct,[i("div",{class:k(["md:ml-16 max-w-none mx-auto px-4 flex lg:flex-row flex-col lg:items-end justify-between gap-8",{"py-6 md:py-10 lg:px-[6%]":o(t),"py-3":!o(t)}])},[R(l,{to:"/",class:"grow"},{default:M(()=>[i("div",{class:k(["w-full i-app-logo text-theme-text transition-all duration-300",{" max-w-md h-16":o(t),"max-w-xs h-12":!o(t)}])},null,2)]),_:1}),o(t)?(h(),g("p",Ft," Free legal movie streams from Archive.org and YouTube ")):L("",!0)],2)])}}}),Nt=Object.assign(Et,{__name:"MovieHeader"}),At={class:"hidden md:block fixed left-4 top-1/2 -translate-y-1/2 z-40 glass shadow-2xl rounded-full w-12 border-theme-border/30"},$t={class:"flex flex-col items-center gap-2 py-2"},Ot={key:0,class:"absolute top-0 -right-1 bg-theme-accent text-white text-xs rounded-full size-4 flex items-center justify-center font-medium"},It={key:0,class:"i-material-symbols-light-wb-sunny text-xl"},Rt={key:1,class:"i-material-symbols-light-dark-mode text-xl"},Dt={class:"relative group"},jt={key:0,class:"absolute top-0 -right-1 bg-theme-primary text-white text-xs rounded-full size-4 flex items-center justify-center font-medium"},Pt={class:"md:hidden fixed bottom-6 left-1/2 -translate-x-1/2 z-50 glass shadow-2xl rounded-full h-14 border-theme-border/30 max-w-[calc(100vw-2rem)] flex items-center group/sidebar"},Bt={key:0,class:"absolute -top-1 -right-1 bg-theme-accent text-white text-xs rounded-full size-5 flex items-center justify-center font-medium"},Lt={key:0,class:"i-material-symbols-light-wb-sunny text-2xl text-theme-accent"},Mt={key:1,class:"i-material-symbols-light-dark-mode text-2xl text-theme-primary"},Kt={class:"relative group flex-shrink-0"},zt={key:0,class:"absolute -top-1 -right-1 bg-theme-primary text-white text-xs rounded-full size-5 flex items-center justify-center font-medium"},Gt=Y({__name:"Sidebar",emits:["openFilters","openThemeSelection"],setup(n,{emit:e}){const t=e,a=Se(),{likedCount:s,activeFiltersCount:l}=de(a),r=he(),{setSearchOpen:d}=r,{isDark:v}=de(r),p=Re(),w=P(null),x=P(!1),E=P(!1),O=()=>{if(!w.value)return;const{scrollLeft:B,scrollWidth:T,clientWidth:V}=w.value;x.value=B>5,E.value=B+V<T-5};De(()=>{O(),window.addEventListener("resize",O)}),ct(()=>{window.removeEventListener("resize",O)}),q(l,()=>{te(O)});const _=()=>{t("openFilters")},G=()=>{t("openThemeSelection")},K=()=>{a.resetFilters()},U=B=>{if(!w.value)return;const T=100;w.value.scrollBy({left:B==="left"?-T:T,behavior:"smooth"})},D=async()=>{p.path!=="/"&&await Qe("/"),d(!0)};return(B,T)=>{const V=qe;return h(),g(J,null,[i("aside",At,[i("div",$t,[R(V,{to:"/",class:k(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":o(p).path==="/"}]),title:"All Movies"},{default:M(()=>[...T[2]||(T[2]=[i("div",{class:"i-mdi-home text-xl"},null,-1)])]),_:1},8,["class"]),i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors relative group",title:"Search (Shift+S)",onClick:D},[...T[3]||(T[3]=[i("div",{class:"i-mdi-magnify text-xl"},null,-1)])]),R(V,{to:"/liked",class:k(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-accent/20":o(p).path==="/liked"}]),title:"Liked Movies"},{default:M(()=>[i("div",{class:k(["i-mdi-heart text-xl",{"text-theme-accent":o(p).path==="/liked"}])},null,2),o(s)>0?(h(),g("span",Ot,j(o(s)>99?"99+":o(s)),1)):L("",!0)]),_:1},8,["class"]),R(V,{to:"/collections",class:k(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":o(p).path.startsWith("/collections")}]),title:"Collections"},{default:M(()=>[i("div",{class:k(["i-mdi:movie-roll text-xl",{"text-theme-primary":o(p).path.startsWith("/collections")}])},null,2)]),_:1},8,["class"]),i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors",title:"Theme Selection",onClick:G},[o(v)?(h(),g("div",It)):(h(),g("div",Rt))]),i("div",Dt,[i("button",{class:k(["p-2 hover:bg-theme-selection rounded-full transition-colors relative",{"bg-theme-primary/20":o(l)>0}]),title:"Filters",onClick:_},[i("div",{class:k(["i-mdi-filter-variant text-xl",{"text-theme-primary":o(l)>0}])},null,2),o(l)>0?(h(),g("span",jt,j(o(l)>9?"9+":o(l)),1)):L("",!0)],2),o(l)>0?(h(),g("button",{key:0,class:"absolute -top-1 -right-1 size-5 rounded-full bg-theme-surface/90 backdrop-blur-sm border border-theme-border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-theme-accent/20 hover:border-theme-accent z-10",title:"Clear all filters",onClick:Be(K,["stop"])},[...T[4]||(T[4]=[i("div",{class:"i-mdi-close text-xs text-theme-textmuted hover:text-theme-accent"},null,-1)])])):L("",!0)]),T[5]||(T[5]=i("a",{href:"https://github.com/select/movies-deluxe",target:"_blank",rel:"noopener noreferrer",class:"p-2 hover:bg-theme-selection rounded-full transition-colors",title:"View on GitHub"},[i("div",{class:"i-mdi-github text-xl"})],-1))])]),i("aside",Pt,[o(x)?(h(),g("button",{key:0,class:"absolute left-1 z-10 p-1 rounded-full bg-theme-surface/80 backdrop-blur-sm text-theme-textmuted animate-pulse hover:bg-theme-selection transition-colors","aria-label":"Scroll left",onClick:T[0]||(T[0]=re=>U("left"))},[...T[6]||(T[6]=[i("div",{class:"i-mdi-chevron-left text-lg"},null,-1)])])):L("",!0),i("div",{ref_key:"scrollContainer",ref:w,class:"flex items-center gap-1 px-2 h-full overflow-x-auto scrollbar-hidden scroll-smooth",onScroll:O},[i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors relative flex-shrink-0","aria-label":"Search",onClick:D},[...T[7]||(T[7]=[i("div",{class:"i-mdi-magnify text-2xl"},null,-1)])]),R(V,{to:"/",class:k(["p-2 hover:bg-theme-selection rounded-full transition-colors relative flex-shrink-0",{"bg-theme-primary/20":o(p).path==="/"}]),"aria-label":"All Movies"},{default:M(()=>[...T[8]||(T[8]=[i("div",{class:"i-mdi-home text-2xl"},null,-1)])]),_:1},8,["class"]),R(V,{to:"/liked",class:k(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-accent/20":o(p).path==="/liked"}]),"aria-label":"Liked Movies"},{default:M(()=>[i("div",{class:k(["i-mdi-heart text-2xl",{"text-theme-accent":o(p).path==="/liked"}])},null,2),o(s)>0?(h(),g("span",Bt,j(o(s)>99?"99+":o(s)),1)):L("",!0)]),_:1},8,["class"]),R(V,{to:"/collections",class:k(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-primary/20":o(p).path.startsWith("/collections")}]),"aria-label":"Collections"},{default:M(()=>[i("div",{class:k(["i-mdi:movie-roll text-2xl",{"text-theme-primary":o(p).path.startsWith("/collections")}])},null,2)]),_:1},8,["class"]),i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors flex-shrink-0","aria-label":"Theme Selection",onClick:G},[o(v)?(h(),g("div",Lt)):(h(),g("div",Mt))]),i("div",Kt,[i("button",{class:k(["p-2 hover:bg-theme-selection rounded-full transition-colors relative",{"bg-theme-primary/20":o(l)>0}]),"aria-label":"Filters",onClick:_},[i("div",{class:k(["i-mdi-filter-variant text-2xl",{"text-theme-primary":o(l)>0}])},null,2),o(l)>0?(h(),g("span",zt,j(o(l)>9?"9+":o(l)),1)):L("",!0)],2),o(l)>0?(h(),g("button",{key:0,class:"absolute -top-1 -right-1 size-6 rounded-full bg-theme-surface/90 backdrop-blur-sm border border-theme-border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-theme-accent/20 hover:border-theme-accent z-10","aria-label":"Clear all filters",onClick:Be(K,["stop"])},[...T[9]||(T[9]=[i("div",{class:"i-mdi-close text-sm text-theme-textmuted hover:text-theme-accent"},null,-1)])])):L("",!0)]),T[10]||(T[10]=i("a",{href:"https://github.com/select/movies-deluxe",target:"_blank",rel:"noopener noreferrer",class:"p-2 hover:bg-theme-selection rounded-full transition-colors flex-shrink-0","aria-label":"View on GitHub"},[i("div",{class:"i-mdi-github text-2xl"})],-1))],544),o(E)?(h(),g("button",{key:1,class:"absolute right-1 z-10 p-1 rounded-full bg-theme-surface/80 backdrop-blur-sm text-theme-textmuted animate-pulse hover:bg-theme-selection transition-colors","aria-label":"Scroll right",onClick:T[1]||(T[1]=re=>U("right"))},[...T[11]||(T[11]=[i("div",{class:"i-mdi-chevron-right text-lg"},null,-1)])])):L("",!0)])],64)}}}),Vt=Object.assign(Gt,{__name:"Sidebar"}),Ht=Y({__name:"AppSortButton",props:{option:{},isActive:{type:Boolean}},emits:["select"],setup(n){const e=n,t=()=>{const{field:a}=e.option;switch(a){case"relevance":return"i-mdi-target";case"votes":return"i-mdi-account-group";default:return"i-mdi-sort"}};return(a,s)=>(h(),g("button",{class:k(["flex items-center justify-center gap-1.5 px-2 py-1.5 rounded-full text-xs font-medium transition-colors w-full border border-theme-border/50",{"bg-theme-primary text-white border-theme-primary":n.isActive,"bg-theme-surface text-theme-textmuted hover:bg-theme-selection hover:border-theme-border":!n.isActive}]),onClick:s[0]||(s[0]=l=>a.$emit("select",n.option))},[i("div",{class:k(["text-sm",{[t()]:!0,"text-white":n.isActive,"text-theme-textmuted":!n.isActive}])},null,2),i("span",null,j(n.option.label),1)],2))}}),Yt=Object.assign(Ht,{__name:"AppSortButton"}),Ut={class:"flex w-full rounded-full border border-theme-border/50 overflow-hidden"},Wt=Y({__name:"AppSortToggleButton",props:{label:{},icon:{},optionA:{},optionB:{},currentSort:{}},emits:["select"],setup(n){const e=n,t=ne(()=>e.currentSort.field===e.optionA.field&&e.currentSort.direction===e.optionA.direction),a=ne(()=>e.currentSort.field===e.optionB.field&&e.currentSort.direction===e.optionB.direction);return(s,l)=>(h(),g("div",Ut,[i("button",{class:k(["flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs font-medium transition-colors border-r border-theme-border/50 flex-1",{"bg-theme-primary text-white":o(t),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!o(t)}]),onClick:l[0]||(l[0]=r=>s.$emit("select",n.optionA))},[i("div",{class:k(["text-sm",[n.icon,{"text-white":o(t),"text-theme-textmuted":!o(t)}]])},null,2),i("span",null,j(n.optionA.label),1)],2),i("button",{class:k(["flex items-center justify-center px-2 py-1.5 text-xs font-medium transition-colors flex-1",{"bg-theme-primary text-white":o(a),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!o(a)}]),onClick:l[1]||(l[1]=r=>s.$emit("select",n.optionB))},j(n.optionB.label),3)]))}}),Qt=Object.assign(Wt,{__name:"AppSortToggleButton"}),Zt={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},qt=Y({__name:"AppSortButtonGroup",props:{currentSort:{},showRelevance:{type:Boolean,default:!1}},emits:["select"],setup(n,{emit:e}){const t=n,a={field:"relevance",direction:"desc",label:"Relevance"},s={field:"year",direction:"desc",label:"Newest"},l={field:"year",direction:"asc",label:"Oldest"},r={field:"rating",direction:"desc",label:"High"},d={field:"rating",direction:"asc",label:"Low"},v={field:"title",direction:"asc",label:"A-Z"},p={field:"title",direction:"desc",label:"Z-A"},w={field:"votes",direction:"desc",label:"Most Popular"},x=E=>t.currentSort.field===E.field&&t.currentSort.direction===E.direction;return(E,O)=>{const _=Yt,G=Qt;return h(),g("div",Zt,[n.showRelevance?(h(),ke(_,{key:0,option:a,"is-active":x(a),onSelect:O[0]||(O[0]=K=>E.$emit("select",a))},null,8,["is-active"])):L("",!0),R(G,{label:"Year",icon:"i-mdi-calendar","option-a":s,"option-b":l,"current-sort":n.currentSort,onSelect:O[1]||(O[1]=K=>E.$emit("select",K))},null,8,["current-sort"]),R(G,{label:"Rating",icon:"i-mdi-star","option-a":r,"option-b":d,"current-sort":n.currentSort,onSelect:O[2]||(O[2]=K=>E.$emit("select",K))},null,8,["current-sort"]),R(G,{label:"Title",icon:"i-mdi-sort-alphabetical-ascending","option-a":v,"option-b":p,"current-sort":n.currentSort,onSelect:O[3]||(O[3]=K=>E.$emit("select",K))},null,8,["current-sort"]),R(_,{option:w,"is-active":x(w),onSelect:O[4]||(O[4]=K=>E.$emit("select",w))},null,8,["is-active"])])}}}),Xt=Object.assign(qt,{__name:"AppSortButtonGroup"}),Jt=["aria-expanded","disabled"],en={class:"flex items-center gap-2"},tn={class:"font-bold text-[10px] uppercase tracking-wider text-theme-textmuted"},nn={class:"space-y-2"},an=Y({__name:"FilterSection",props:{title:{},icon:{default:void 0},defaultExpanded:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1}},setup(n){const e=n,t=Ze("(min-width: 768px)"),a=P(e.defaultExpanded);ut(()=>{t.value&&(a.value=!0)});const s=()=>{t.value||(a.value=!a.value)};return(l,r)=>(h(),g("div",null,[i("button",{class:k(["flex items-center justify-between w-full px-2 py-1 rounded-md bg-gradient-to-r from-theme-selection to-transparent text-left group transition-all duration-500 md:cursor-default",{"ring-2 ring-theme-primary ring-offset-2 ring-offset-theme-background scale-[1.02] shadow-lg":n.highlight}]),"aria-expanded":o(a),disabled:o(t),onClick:s},[i("div",en,[n.icon?(h(),g("div",{key:0,class:k(["text-base text-theme-textmuted",n.icon])},null,2)):L("",!0),i("h3",tn,j(n.title),1)]),i("div",{class:k(["i-mdi-chevron-down text-lg text-gray-400 transition-transform duration-300 md:hidden",{"rotate-180":o(a)}])},null,2)],10,Jt),i("div",{class:k(["transition-all duration-300 ease-in-out overflow-hidden md:max-h-none md:opacity-100 md:visible md:mt-3",{"max-h-[2000px] opacity-100 visible mt-3":o(a),"max-h-0 opacity-0 invisible mt-0":!o(a)}])},[i("div",nn,[Ee(l.$slots,"default")])],2)]))}}),rn=Object.assign(an,{__name:"FilterSection"}),on={class:"relative"},sn=Y({__name:"CollapsibleFilterItems",props:{maxLines:{default:2}},setup(n,{expose:e}){const t=n,a=Ze("(min-width: 768px)"),s=P(!1),l=P(),r=P(!1),d=()=>{if(!l.value||!a.value){r.value=!1;return}const p=s.value;s.value=!0,te(()=>{if(!l.value)return;const w=l.value.scrollHeight,E=t.maxLines*36;r.value=w>E,s.value=p})},v=()=>{s.value=!s.value};return De(()=>{te(d)}),q(a,p=>{p?te(d):(s.value=!1,r.value=!1)}),e({checkOverflow:d}),(p,w)=>(h(),g("div",on,[i("div",{ref_key:"itemsContainer",ref:l,class:k(["flex flex-wrap gap-2 transition-all duration-300 ease-in-out md:overflow-hidden",{"md:max-h-[5.5rem]":!o(s)&&o(a),"md:max-h-none":o(s)||!o(a)}])},[Ee(p.$slots,"default")],2),o(r)&&o(a)?(h(),g("button",{key:0,class:k(["cursor-pointer w-full flex items-end justify-center gap-1.5 text-xs font-medium transition-colors text-gray-500 dark:text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 h-11 flex",{"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-white via-white/90 to-transparent dark:from-gray-900 dark:via-gray-900/90 dark:to-transparent":!o(s),"mt-2 bg-transparent":o(s)}]),onClick:v},[i("span",null,j(o(s)?"Show Less":"Show More"),1),i("div",{class:k(["i-mdi-chevron-down text-sm transition-transform duration-200",{"rotate-180":o(s)}])},null,2)],2)):L("",!0)]))}}),ln=Object.assign(sn,{__name:"CollapsibleFilterItems"}),cn=["aria-checked","aria-disabled"],un={key:0,class:"i-mdi-checkbox-marked text-xl"},dn={key:1,class:"i-mdi-checkbox-blank-outline text-xl"},fn=["checked","value","disabled"],mn=Y({__name:"AppInputCheckbox",props:{checked:{type:Boolean},value:{type:[String,Number,Boolean]},label:{},disabled:{type:Boolean}},emits:["change"],setup(n,{emit:e}){const t=e,a=s=>{const l=s.target;t("change",l.checked)};return(s,l)=>(h(),g("label",{class:k(["flex items-center gap-2 cursor-pointer group",{"opacity-50 cursor-not-allowed":n.disabled}])},[i("div",{class:k(["flex items-center justify-center w-5 h-5 transition-colors",{"text-theme-primary":n.checked,"text-theme-textmuted group-hover:text-theme-text":!n.checked}]),role:"checkbox","aria-checked":n.checked,"aria-disabled":n.disabled},[n.checked?(h(),g("div",un)):(h(),g("div",dn))],10,cn),i("input",{checked:n.checked,type:"checkbox",value:n.value,disabled:n.disabled,class:"sr-only",onChange:a},null,40,fn),n.label?(h(),g("span",{key:0,class:k(["text-sm select-none",{"text-theme-textmuted":n.disabled}])},j(n.label),3)):L("",!0),Ee(s.$slots,"default")],2))}}),vn=Object.assign(mn,{__name:"AppInputCheckbox"});function Ne(n){if(n>=1e6){const e=n/1e6;return`${e>=10?Math.round(e):e.toFixed(1).replace(/\.0$/,"")}M`}if(n>=1e3){const e=n/1e3;return`${e>=10?Math.round(e):e.toFixed(1).replace(/\.0$/,"")}K`}return n.toString()}function Ae(n){return n.toLocaleString()}var Xe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],_e=Xe.join(","),Je=typeof Element>"u",ae=Je?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Te=!Je&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},be=function(e,t){var a;t===void 0&&(t=!0);var s=e==null||(a=e.getAttribute)===null||a===void 0?void 0:a.call(e,"inert"),l=s===""||s==="true",r=l||t&&e&&be(e.parentNode);return r},bn=function(e){var t,a=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return a===""||a==="true"},et=function(e,t,a){if(be(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(_e));return t&&ae.call(e,_e)&&s.unshift(e),s=s.filter(a),s},Ce=function(e,t,a){for(var s=[],l=Array.from(e);l.length;){var r=l.shift();if(!be(r,!1))if(r.tagName==="SLOT"){var d=r.assignedElements(),v=d.length?d:r.children,p=Ce(v,!0,a);a.flatten?s.push.apply(s,p):s.push({scopeParent:r,candidates:p})}else{var w=ae.call(r,_e);w&&a.filter(r)&&(t||!e.includes(r))&&s.push(r);var x=r.shadowRoot||typeof a.getShadowRoot=="function"&&a.getShadowRoot(r),E=!be(x,!1)&&(!a.shadowRootFilter||a.shadowRootFilter(r));if(x&&E){var O=Ce(x===!0?r.children:x.children,!0,a);a.flatten?s.push.apply(s,O):s.push({scopeParent:r,candidates:O})}else l.unshift.apply(l,r.children)}}return s},tt=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ee=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||bn(e))&&!tt(e)?0:e.tabIndex},hn=function(e,t){var a=ee(e);return a<0&&t&&!tt(e)?0:a},pn=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},nt=function(e){return e.tagName==="INPUT"},gn=function(e){return nt(e)&&e.type==="hidden"},xn=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(a){return a.tagName==="SUMMARY"});return t},yn=function(e,t){for(var a=0;a<e.length;a++)if(e[a].checked&&e[a].form===t)return e[a]},wn=function(e){if(!e.name)return!0;var t=e.form||Te(e),a=function(d){return t.querySelectorAll('input[type="radio"][name="'+d+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=a(window.CSS.escape(e.name));else try{s=a(e.name)}catch(r){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",r.message),!1}var l=yn(s,e.form);return!l||l===e},kn=function(e){return nt(e)&&e.type==="radio"},Sn=function(e){return kn(e)&&!wn(e)},_n=function(e){var t,a=e&&Te(e),s=(t=a)===null||t===void 0?void 0:t.host,l=!1;if(a&&a!==e){var r,d,v;for(l=!!((r=s)!==null&&r!==void 0&&(d=r.ownerDocument)!==null&&d!==void 0&&d.contains(s)||e!=null&&(v=e.ownerDocument)!==null&&v!==void 0&&v.contains(e));!l&&s;){var p,w,x;a=Te(s),s=(p=a)===null||p===void 0?void 0:p.host,l=!!((w=s)!==null&&w!==void 0&&(x=w.ownerDocument)!==null&&x!==void 0&&x.contains(s))}}return l},Ge=function(e){var t=e.getBoundingClientRect(),a=t.width,s=t.height;return a===0&&s===0},Tn=function(e,t){var a=t.displayCheck,s=t.getShadowRoot;if(a==="full-native"&&"checkVisibility"in e){var l=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!l}if(getComputedStyle(e).visibility==="hidden")return!0;var r=ae.call(e,"details>summary:first-of-type"),d=r?e.parentElement:e;if(ae.call(d,"details:not([open]) *"))return!0;if(!a||a==="full"||a==="full-native"||a==="legacy-full"){if(typeof s=="function"){for(var v=e;e;){var p=e.parentElement,w=Te(e);if(p&&!p.shadowRoot&&s(p)===!0)return Ge(e);e.assignedSlot?e=e.assignedSlot:!p&&w!==e.ownerDocument?e=w.host:e=p}e=v}if(_n(e))return!e.getClientRects().length;if(a!=="legacy-full")return!0}else if(a==="non-zero-area")return Ge(e);return!1},Cn=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var a=0;a<t.children.length;a++){var s=t.children.item(a);if(s.tagName==="LEGEND")return ae.call(t,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}t=t.parentElement}return!1},Fe=function(e,t){return!(t.disabled||be(t)||gn(t)||Tn(t,e)||xn(t)||Cn(t))},Oe=function(e,t){return!(Sn(t)||ee(t)<0||!Fe(e,t))},Fn=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},at=function(e){var t=[],a=[];return e.forEach(function(s,l){var r=!!s.scopeParent,d=r?s.scopeParent:s,v=hn(d,r),p=r?at(s.candidates):d;v===0?r?t.push.apply(t,p):t.push(d):a.push({documentOrder:l,tabIndex:v,item:s,isScope:r,content:p})}),a.sort(pn).reduce(function(s,l){return l.isScope?s.push.apply(s,l.content):s.push(l.content),s},[]).concat(t)},En=function(e,t){t=t||{};var a;return t.getShadowRoot?a=Ce([e],t.includeContainer,{filter:Oe.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Fn}):a=et(e,t.includeContainer,Oe.bind(null,t)),at(a)},Nn=function(e,t){t=t||{};var a;return t.getShadowRoot?a=Ce([e],t.includeContainer,{filter:Fe.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):a=et(e,t.includeContainer,Fe.bind(null,t)),a},ce=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return ae.call(e,_e)===!1?!1:Oe(t,e)},An=Xe.concat("iframe").join(","),$e=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return ae.call(e,An)===!1?!1:Fe(t,e)};function Ie(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,a=Array(e);t<e;t++)a[t]=n[t];return a}function $n(n){if(Array.isArray(n))return Ie(n)}function Ve(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=rt(n))||e){t&&(n=t);var a=0,s=function(){};return{s,n:function(){return a>=n.length?{done:!0}:{done:!1,value:n[a++]}},e:function(v){throw v},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,r=!0,d=!1;return{s:function(){t=t.call(n)},n:function(){var v=t.next();return r=v.done,v},e:function(v){d=!0,l=v},f:function(){try{r||t.return==null||t.return()}finally{if(d)throw l}}}}function On(n,e,t){return(e=Pn(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function In(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Rn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function He(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,a)}return t}function Ye(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?He(Object(t),!0).forEach(function(a){On(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):He(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function Dn(n){return $n(n)||In(n)||rt(n)||Rn()}function jn(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var a=t.call(n,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pn(n){var e=jn(n,"string");return typeof e=="symbol"?e:e+""}function rt(n,e){if(n){if(typeof n=="string")return Ie(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ie(n,e):void 0}}var Z={getActiveTrap:function(e){return e?.length>0?e[e.length-1]:null},activateTrap:function(e,t){var a=Z.getActiveTrap(e);t!==a&&Z.pauseTrap(e);var s=e.indexOf(t);s===-1||e.splice(s,1),e.push(t)},deactivateTrap:function(e,t){var a=e.indexOf(t);a!==-1&&e.splice(a,1),Z.unpauseTrap(e)},pauseTrap:function(e){var t=Z.getActiveTrap(e);t?._setPausedState(!0)},unpauseTrap:function(e){var t=Z.getActiveTrap(e);t&&!t._isManuallyPaused()&&t._setPausedState(!1)}},Bn=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Ln=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},ve=function(e){return e?.key==="Tab"||e?.keyCode===9},Mn=function(e){return ve(e)&&!e.shiftKey},Kn=function(e){return ve(e)&&e.shiftKey},Ue=function(e){return setTimeout(e,0)},me=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,a):e},we=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},zn=[],Gn=function(e,t){var a=t?.document||document,s=t?.trapStack||zn,l=Ye({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isolateSubtrees:!1,isKeyForward:Mn,isKeyBackward:Kn},t),r={containers:[],containerGroups:[],tabbableGroups:[],adjacentElements:new Set,alreadyInert:new Set,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},d,v=function(c,u,b){return c&&c[u]!==void 0?c[u]:l[b||u]},p=function(c,u){var b=typeof u?.composedPath=="function"?u.composedPath():void 0;return r.containerGroups.findIndex(function(C){var F=C.container,A=C.tabbableNodes;return F.contains(c)||b?.includes(F)||A.find(function(y){return y===c})})},w=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=u.hasFallback,C=b===void 0?!1:b,F=u.params,A=F===void 0?[]:F,y=l[c];if(typeof y=="function"&&(y=y.apply(void 0,Dn(A))),y===!0&&(y=void 0),!y){if(y===void 0||y===!1)return y;throw new Error("`".concat(c,"` was specified but was not a node, or did not return a node"))}var $=y;if(typeof y=="string"){try{$=a.querySelector(y)}catch(I){throw new Error("`".concat(c,'` appears to be an invalid selector; error="').concat(I.message,'"'))}if(!$&&!C)throw new Error("`".concat(c,"` as selector refers to no known node"))}return $},x=function(){var c=w("initialFocus",{hasFallback:!0});if(c===!1)return!1;if(c===void 0||c&&!$e(c,l.tabbableOptions))if(p(a.activeElement)>=0)c=a.activeElement;else{var u=r.tabbableGroups[0],b=u&&u.firstTabbableNode;c=b||w("fallbackFocus")}else c===null&&(c=w("fallbackFocus"));if(!c)throw new Error("Your focus-trap needs to have at least one focusable element");return c},E=function(){if(r.containerGroups=r.containers.map(function(c){var u=En(c,l.tabbableOptions),b=Nn(c,l.tabbableOptions),C=u.length>0?u[0]:void 0,F=u.length>0?u[u.length-1]:void 0,A=b.find(function(I){return ce(I)}),y=b.slice().reverse().find(function(I){return ce(I)}),$=!!u.find(function(I){return ee(I)>0});return{container:c,tabbableNodes:u,focusableNodes:b,posTabIndexesFound:$,firstTabbableNode:C,lastTabbableNode:F,firstDomTabbableNode:A,lastDomTabbableNode:y,nextTabbableNode:function(H){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,f=u.indexOf(H);return f<0?S?b.slice(b.indexOf(H)+1).find(function(Q){return ce(Q)}):b.slice(0,b.indexOf(H)).reverse().find(function(Q){return ce(Q)}):u[f+(S?1:-1)]}}}),r.tabbableGroups=r.containerGroups.filter(function(c){return c.tabbableNodes.length>0}),r.tabbableGroups.length<=0&&!w("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(r.containerGroups.find(function(c){return c.posTabIndexesFound})&&r.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},O=function(c){var u=c.activeElement;if(u)return u.shadowRoot&&u.shadowRoot.activeElement!==null?O(u.shadowRoot):u},_=function(c){if(c!==!1&&c!==O(document)){if(!c||!c.focus){_(x());return}c.focus({preventScroll:!!l.preventScroll}),r.mostRecentlyFocusedNode=c,Bn(c)&&c.select()}},G=function(c){var u=w("setReturnFocus",{params:[c]});return u||(u===!1?!1:c)},K=function(c){var u=c.target,b=c.event,C=c.isBackward,F=C===void 0?!1:C;u=u||we(b),E();var A=null;if(r.tabbableGroups.length>0){var y=p(u,b),$=y>=0?r.containerGroups[y]:void 0;if(y<0)F?A=r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:A=r.tabbableGroups[0].firstTabbableNode;else if(F){var I=r.tabbableGroups.findIndex(function(oe){var se=oe.firstTabbableNode;return u===se});if(I<0&&($.container===u||$e(u,l.tabbableOptions)&&!ce(u,l.tabbableOptions)&&!$.nextTabbableNode(u,!1))&&(I=y),I>=0){var H=I===0?r.tabbableGroups.length-1:I-1,S=r.tabbableGroups[H];A=ee(u)>=0?S.lastTabbableNode:S.lastDomTabbableNode}else ve(b)||(A=$.nextTabbableNode(u,!1))}else{var f=r.tabbableGroups.findIndex(function(oe){var se=oe.lastTabbableNode;return u===se});if(f<0&&($.container===u||$e(u,l.tabbableOptions)&&!ce(u,l.tabbableOptions)&&!$.nextTabbableNode(u))&&(f=y),f>=0){var Q=f===r.tabbableGroups.length-1?0:f+1,z=r.tabbableGroups[Q];A=ee(u)>=0?z.firstTabbableNode:z.firstDomTabbableNode}else ve(b)||(A=$.nextTabbableNode(u))}}else A=w("fallbackFocus");return A},U=function(c){var u=we(c);if(!(p(u,c)>=0)){if(me(l.clickOutsideDeactivates,c)){d.deactivate({returnFocus:l.returnFocusOnDeactivate});return}me(l.allowOutsideClick,c)||c.preventDefault()}},D=function(c){var u=we(c),b=p(u,c)>=0;if(b||u instanceof Document)b&&(r.mostRecentlyFocusedNode=u);else{c.stopImmediatePropagation();var C,F=!0;if(r.mostRecentlyFocusedNode)if(ee(r.mostRecentlyFocusedNode)>0){var A=p(r.mostRecentlyFocusedNode),y=r.containerGroups[A].tabbableNodes;if(y.length>0){var $=y.findIndex(function(I){return I===r.mostRecentlyFocusedNode});$>=0&&(l.isKeyForward(r.recentNavEvent)?$+1<y.length&&(C=y[$+1],F=!1):$-1>=0&&(C=y[$-1],F=!1))}}else r.containerGroups.some(function(I){return I.tabbableNodes.some(function(H){return ee(H)>0})})||(F=!1);else F=!1;F&&(C=K({target:r.mostRecentlyFocusedNode,isBackward:l.isKeyBackward(r.recentNavEvent)})),_(C||r.mostRecentlyFocusedNode||x())}r.recentNavEvent=void 0},B=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.recentNavEvent=c;var b=K({event:c,isBackward:u});b&&(ve(c)&&c.preventDefault(),_(b))},T=function(c){(l.isKeyForward(c)||l.isKeyBackward(c))&&B(c,l.isKeyBackward(c))},V=function(c){Ln(c)&&me(l.escapeDeactivates,c)!==!1&&(c.preventDefault(),d.deactivate())},re=function(c){var u=we(c);p(u,c)>=0||me(l.clickOutsideDeactivates,c)||me(l.allowOutsideClick,c)||(c.preventDefault(),c.stopImmediatePropagation())},pe=function(){if(r.active)return Z.activateTrap(s,d),r.delayInitialFocusTimer=l.delayInitialFocus?Ue(function(){_(x())}):_(x()),a.addEventListener("focusin",D,!0),a.addEventListener("mousedown",U,{capture:!0,passive:!1}),a.addEventListener("touchstart",U,{capture:!0,passive:!1}),a.addEventListener("click",re,{capture:!0,passive:!1}),a.addEventListener("keydown",T,{capture:!0,passive:!1}),a.addEventListener("keydown",V),d},ge=function(c){r.active&&!r.paused&&d._setSubtreeIsolation(!1),r.adjacentElements.clear(),r.alreadyInert.clear();var u=new Set,b=new Set,C=Ve(c),F;try{for(C.s();!(F=C.n()).done;){var A=F.value;u.add(A);for(var y=typeof ShadowRoot<"u"&&A.getRootNode()instanceof ShadowRoot,$=A;$;){u.add($);var I=$.parentElement,H=[];I?H=I.children:!I&&y&&(H=$.getRootNode().children,I=$.getRootNode().host,y=typeof ShadowRoot<"u"&&I.getRootNode()instanceof ShadowRoot);var S=Ve(H),f;try{for(S.s();!(f=S.n()).done;){var Q=f.value;b.add(Q)}}catch(z){S.e(z)}finally{S.f()}$=I}}}catch(z){C.e(z)}finally{C.f()}u.forEach(function(z){b.delete(z)}),r.adjacentElements=b},fe=function(){if(r.active)return a.removeEventListener("focusin",D,!0),a.removeEventListener("mousedown",U,!0),a.removeEventListener("touchstart",U,!0),a.removeEventListener("click",re,!0),a.removeEventListener("keydown",T,!0),a.removeEventListener("keydown",V),d},xe=function(c){var u=c.some(function(b){var C=Array.from(b.removedNodes);return C.some(function(F){return F===r.mostRecentlyFocusedNode})});u&&_(x())},ie=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(xe):void 0,W=function(){ie&&(ie.disconnect(),r.active&&!r.paused&&r.containers.map(function(c){ie.observe(c,{subtree:!0,childList:!0})}))};return d={get active(){return r.active},get paused(){return r.paused},activate:function(c){if(r.active)return this;var u=v(c,"onActivate"),b=v(c,"onPostActivate"),C=v(c,"checkCanFocusTrap"),F=Z.getActiveTrap(s),A=!1;F&&!F.paused&&(F._setSubtreeIsolation(!1),A=!0);try{C||E(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=O(a),u?.();var y=function(){C&&E(),pe(),W(),l.isolateSubtrees&&d._setSubtreeIsolation(!0),b?.()};if(C)return C(r.containers.concat()).then(y,y),this;y()}catch($){throw F===Z.getActiveTrap(s)&&A&&F._setSubtreeIsolation(!0),$}return this},deactivate:function(c){if(!r.active)return this;var u=Ye({onDeactivate:l.onDeactivate,onPostDeactivate:l.onPostDeactivate,checkCanReturnFocus:l.checkCanReturnFocus},c);clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,r.paused||d._setSubtreeIsolation(!1),r.alreadyInert.clear(),fe(),r.active=!1,r.paused=!1,W(),Z.deactivateTrap(s,d);var b=v(u,"onDeactivate"),C=v(u,"onPostDeactivate"),F=v(u,"checkCanReturnFocus"),A=v(u,"returnFocus","returnFocusOnDeactivate");b?.();var y=function(){Ue(function(){A&&_(G(r.nodeFocusedBeforeActivation)),C?.()})};return A&&F?(F(G(r.nodeFocusedBeforeActivation)).then(y,y),this):(y(),this)},pause:function(c){return r.active?(r.manuallyPaused=!0,this._setPausedState(!0,c)):this},unpause:function(c){return r.active?(r.manuallyPaused=!1,s[s.length-1]!==this?this:this._setPausedState(!1,c)):this},updateContainerElements:function(c){var u=[].concat(c).filter(Boolean);return r.containers=u.map(function(b){return typeof b=="string"?a.querySelector(b):b}),l.isolateSubtrees&&ge(r.containers),r.active&&(E(),l.isolateSubtrees&&!r.paused&&d._setSubtreeIsolation(!0)),W(),this}},Object.defineProperties(d,{_isManuallyPaused:{value:function(){return r.manuallyPaused}},_setPausedState:{value:function(c,u){if(r.paused===c)return this;if(r.paused=c,c){var b=v(u,"onPause"),C=v(u,"onPostPause");b?.(),fe(),W(),d._setSubtreeIsolation(!1),C?.()}else{var F=v(u,"onUnpause"),A=v(u,"onPostUnpause");F?.(),d._setSubtreeIsolation(!0),E(),pe(),W(),A?.()}return this}},_setSubtreeIsolation:{value:function(c){l.isolateSubtrees&&r.adjacentElements.forEach(function(u){if(c){var b=u.inert||u.hasAttribute("inert");b&&r.alreadyInert.add(u),u.inert=!0}else r.alreadyInert.has(u)||(u.inert=!1)})}}}),d.updateContainerElements(e),d};function Vn(n,e={}){let t;const{immediate:a,...s}=e,l=Le(!1),r=Le(!1),d=x=>t&&t.activate(x),v=x=>t&&t.deactivate(x),p=()=>{t&&(t.pause(),r.value=!0)},w=()=>{t&&(t.unpause(),r.value=!1)};return q(ne(()=>dt(Me(n)).map(x=>{const E=Me(x);return typeof E=="string"?E:ft(E)}).filter(mt)),x=>{if(x.length)if(!t)t=Gn(x,{...s,onActivate(){l.value=!0,e.onActivate&&e.onActivate()},onDeactivate(){l.value=!1,e.onDeactivate&&e.onDeactivate()}}),a&&d();else{const E=t?.active;t?.updateContainerElements(x),!E&&a&&d()}},{flush:"post"}),vt(()=>v()),{hasFocus:l,isPaused:r,activate:d,deactivate:v,pause:p,unpause:w}}const Hn={class:"flex items-center justify-between p-4"},Yn={class:"flex items-center gap-2"},Un={class:"overflow-y-auto scrollbar-thin flex-1 md:h-[calc(100vh-4rem)] p-4"},Wn={class:"max-w-7xl mx-auto space-y-4 flex flex-col gap-4"},Qn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Zn={class:"space-y-2"},qn={class:"flex items-center justify-between text-sm"},Xn={class:"font-medium text-theme-text"},Jn=["value"],ea={class:"space-y-2"},ta={class:"flex items-center justify-between text-sm"},na={class:"font-medium text-theme-text"},aa=["value"],ra={class:"space-y-2"},ia={class:"flex items-center justify-between text-sm"},oa={class:"font-medium text-theme-text"},sa=["value"],la={key:0,class:"text-sm text-theme-textmuted"},ca=["title","onClick"],ua={key:0,class:"text-sm text-theme-textmuted"},da=["title","onClick"],fa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ma={class:"space-y-3"},va={class:"pl-4 space-y-2 border-l-2 border-theme-border/50"},ba={key:0,class:"text-sm text-theme-textmuted"},ha={class:"flex items-center justify-between gap-2 flex-1"},pa={class:"text-theme-text"},ga=["title"],xa={class:"space-y-6"},ya={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},wa=["onClick","onMouseenter"],ka={class:"flex items-center justify-between"},Sa={class:"text-xs font-semibold truncate"},_a={key:0,class:"i-mdi-check-circle text-theme-primary text-xs"},Ta={class:"flex gap-1"},Ca={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},Fa=["onClick","onMouseenter"],Ea={class:"flex items-center justify-between"},Na={class:"text-xs font-semibold truncate"},Aa={key:0,class:"i-mdi-check-circle text-theme-primary text-xs"},$a={class:"flex gap-1"},Oa={key:0,class:"text-sm text-red-500 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg"},Ia=Y({__name:"FilterMenu",props:{isOpen:{type:Boolean}},emits:["close"],setup(n,{expose:e,emit:t}){const a=n,s=t,l=he(),{currentThemeId:r}=de(l),{setTheme:d,previewTheme:v}=l,p=bt(),w=ne(()=>p.filter(S=>S.metadata.variant==="dark")),x=ne(()=>p.filter(S=>S.metadata.variant==="light")),E=P(!1);e({scrollToThemeSection:()=>{const S=document.getElementById("theme-selection-section");S&&(S.scrollIntoView({behavior:"smooth",block:"center"}),E.value=!0,setTimeout(()=>{E.value=!1},2e3))}});const{filters:_,currentSortOption:G,hasActiveFilters:K}=de(Se()),{setMinRating:U,setMinYear:D,setMinVotes:B,toggleSource:T,toggleGenre:V,toggleCountry:re,setSort:pe,resetFilters:ge}=Se(),fe=P([]),xe=P([]),ie=P([]),W=P(!0),N=P(null),c=P(),u=P(),b=async()=>{W.value=!0,N.value=null;try{const S=ze();if(S.isReady.value){const f=await S.getFilterOptions();fe.value=f.genres,xe.value=f.countries,ie.value=f.channels,te(()=>{c.value?.checkOverflow(),u.value?.checkOverflow()})}}catch{N.value="Failed to load filter options"}finally{W.value=!1}},C=ze();q(()=>C.isReady.value,S=>{S&&b()});const F=P(!1);De(()=>{F.value=wt(),b()});const A=S=>{pe(S)},y=P(null),$=ht(typeof window<"u"?document.body:null);We(y,()=>{a.isOpen&&s("close")});const{activate:I,deactivate:H}=Vn(y,{immediate:!1,allowOutsideClick:!1,escapeDeactivates:!1,returnFocusOnDeactivate:!0,initialFocus:'button[aria-label="Close filters"]',fallbackFocus:()=>y.value});return q(()=>a.isOpen,S=>{$.value=S,S?typeof window<"u"&&window.setTimeout(()=>{I()},50):H()}),(S,f)=>{const Q=Xt,z=rn,oe=ln,se=vn;return h(),g("div",null,[n.isOpen?(h(),g("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 transition-opacity",onClick:f[0]||(f[0]=m=>s("close"))})):L("",!0),i("div",{ref_key:"filterMenuRef",ref:y,class:k(["fixed z-50 transition-all duration-300 ease-in-out glass shadow-2xl overflow-hidden flex flex-col bottom-0 left-0 right-0 rounded-t-2xl border-t border-theme-border/50 max-h-[90vh] md:top-0 md:left-0 md:bottom-0 md:right-auto md:h-full md:w-full md:max-w-xl md:rounded-none md:border-0 md:max-h-full",{"translate-y-0 md:translate-x-0":n.isOpen,"translate-y-full md:translate-y-0 md:-translate-x-full":!n.isOpen}])},[i("button",{class:"md:hidden fixed bottom-6 right-6 w-14 h-14 rounded-full bg-theme-primary text-white shadow-lg hover:opacity-90 transition-all flex items-center justify-center z-[60]","aria-label":"Close filters",onClick:f[1]||(f[1]=m=>s("close"))},[...f[10]||(f[10]=[i("div",{class:"i-mdi-close text-2xl"},null,-1)])]),i("div",Hn,[f[12]||(f[12]=i("h2",{class:"text-lg font-semibold flex items-center gap-2 text-theme-text"},[i("div",{class:"i-mdi-filter-variant text-xl"}),ye(" Filters ")],-1)),i("div",Yn,[o(K)||o(_).searchQuery?(h(),g("button",{key:0,class:"text-sm font-medium text-theme-primary hover:opacity-80 px-3 py-1 rounded-full hover:bg-theme-primary/10 transition-colors",onClick:f[2]||(f[2]=(...m)=>o(ge)&&o(ge)(...m))}," Clear All ")):L("",!0),i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors text-theme-text","aria-label":"Close filters",onClick:f[3]||(f[3]=m=>s("close"))},[...f[11]||(f[11]=[i("div",{class:"i-mdi-close text-xl"},null,-1)])])])]),f[21]||(f[21]=i("hr",{class:"mx-4 my-0 border-theme-border/50"},null,-1)),i("div",Un,[i("div",Wn,[R(z,{title:"Sort By",icon:"i-mdi-sort","default-expanded":!0},{default:M(()=>[R(Q,{"current-sort":o(G),"show-relevance":!!o(_).searchQuery,onSelect:A},null,8,["current-sort","show-relevance"])]),_:1}),i("div",Qn,[R(z,{title:"Rating",icon:"i-mdi-star"},{default:M(()=>[i("div",Zn,[i("div",qn,[f[13]||(f[13]=i("span",{class:"text-theme-textmuted"},"Min:",-1)),i("span",Xn,j(o(_).minRating.toFixed(1))+"+",1)]),i("input",{value:o(_).minRating,type:"range",min:"0",max:"10",step:"0.5",class:"w-full h-2 bg-theme-selection rounded-lg appearance-none cursor-pointer accent-theme-primary",onInput:f[4]||(f[4]=m=>o(U)(Number(m.target.value)))},null,40,Jn),f[14]||(f[14]=i("div",{class:"flex justify-between text-xs text-theme-textmuted"},[i("span",null,"0"),i("span",null,"5"),i("span",null,"10")],-1))])]),_:1}),R(z,{title:"Year",icon:"i-mdi-calendar"},{default:M(()=>[i("div",ea,[i("div",ta,[f[15]||(f[15]=i("span",{class:"text-theme-textmuted"},"From:",-1)),i("span",na,j(o(_).minYear||"1910")+"+",1)]),i("input",{value:o(_).minYear,type:"range",min:"1910",max:"2025",step:"1",class:"w-full h-2 bg-theme-selection rounded-lg appearance-none cursor-pointer accent-theme-primary",onInput:f[5]||(f[5]=m=>o(D)(Number(m.target.value)))},null,40,aa),f[16]||(f[16]=i("div",{class:"flex justify-between text-xs text-theme-textmuted"},[i("span",null,"1910"),i("span",null,"1970"),i("span",null,"2025")],-1))])]),_:1}),R(z,{title:"Votes",icon:"i-mdi-account-group"},{default:M(()=>[i("div",ra,[i("div",ia,[f[17]||(f[17]=i("span",{class:"text-theme-textmuted"},"Min:",-1)),i("span",oa,j(o(_).minVotes.toLocaleString())+"+",1)]),i("input",{value:o(_).minVotes,type:"number",min:"0",step:"100",placeholder:"0",class:"w-full px-3 py-2 bg-theme-surface border border-theme-border/50 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-theme-primary [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none text-theme-text placeholder-theme-text-muted",onInput:f[6]||(f[6]=m=>o(B)(Number(m.target.value)))},null,40,sa)])]),_:1})]),R(z,{title:"Genres",icon:"i-mdi-movie-filter"},{default:M(()=>[o(W)?(h(),g("div",la," Loading genres... ")):(h(),ke(oe,{key:1,ref_key:"genresCollapsible",ref:c,"max-lines":2},{default:M(()=>[(h(!0),g(J,null,ue(o(fe),m=>(h(),g("button",{key:m.name,class:k(["px-3 py-1.5 text-sm rounded-full transition-colors inline-flex items-center gap-1.5",{"bg-theme-primary text-white":o(_).genres.includes(m.name),"bg-theme-selection text-theme-text hover:bg-theme-border/50":!o(_).genres.includes(m.name)}]),title:`${("formatCountExact"in S?S.formatCountExact:o(Ae))(m.count)} movies`,onClick:X=>o(V)(m.name)},[i("span",null,j(m.name),1),i("span",{class:k(["text-xs font-normal",{"text-white/80":o(_).genres.includes(m.name),"text-theme-textmuted":!o(_).genres.includes(m.name)}])},j(("formatCount"in S?S.formatCount:o(Ne))(m.count)),3)],10,ca))),128))]),_:1},512))]),_:1}),R(z,{title:"Countries",icon:"i-mdi-earth"},{default:M(()=>[o(W)?(h(),g("div",ua," Loading countries... ")):(h(),ke(oe,{key:1,ref_key:"countriesCollapsible",ref:u,"max-lines":2},{default:M(()=>[(h(!0),g(J,null,ue(o(xe),m=>(h(),g("button",{key:m.name,class:k(["px-3 py-1.5 text-sm rounded-full transition-colors inline-flex items-center gap-1.5",{"bg-theme-primary text-white":o(_).countries.includes(m.name),"bg-theme-selection text-theme-text hover:bg-theme-border/50":!o(_).countries.includes(m.name)}]),title:`${("formatCountExact"in S?S.formatCountExact:o(Ae))(m.count)} movies`,onClick:X=>o(re)(m.name)},[i("span",null,j(m.name),1),i("span",{class:k(["text-xs font-normal",{"text-white/80":o(_).countries.includes(m.name),"text-theme-textmuted":!o(_).countries.includes(m.name)}])},j(("formatCount"in S?S.formatCount:o(Ne))(m.count)),3)],10,da))),128))]),_:1},512))]),_:1}),i("div",fa,[R(z,{title:"Source",icon:"i-mdi-source-branch"},{default:M(()=>[i("div",ma,[R(se,{checked:o(_).sources.includes("archive.org"),label:"Archive.org",onChange:f[7]||(f[7]=m=>o(T)("archive.org"))},null,8,["checked"]),i("div",va,[f[18]||(f[18]=i("p",{class:"text-xs text-theme-textmuted font-medium uppercase tracking-wide mb-2"}," YouTube Channels ",-1)),o(W)?(h(),g("div",ba," Loading channels... ")):(h(!0),g(J,{key:1},ue(o(ie),m=>(h(),ke(se,{key:m.id,checked:o(_).sources.includes(m.name),onChange:X=>o(T)(m.name)},{default:M(()=>[i("span",ha,[i("span",pa,j(m.name),1),i("span",{class:"text-xs text-theme-textmuted",title:`${("formatCountExact"in S?S.formatCountExact:o(Ae))(m.count)} movies`},j(("formatCount"in S?S.formatCount:o(Ne))(m.count)),9,ga)])]),_:2},1032,["checked","onChange"]))),128))])])]),_:1})]),R(z,{id:"theme-selection-section",title:"Theme",icon:"i-mdi-palette","default-expanded":!0,highlight:o(E)},{default:M(()=>[i("div",xa,[i("div",null,[f[19]||(f[19]=i("h4",{class:"text-[10px] font-bold uppercase tracking-widest text-theme-textmuted mb-3 flex items-center gap-2"},[i("div",{class:"i-mdi-weather-night text-xs"}),ye(" Dark Themes ")],-1)),i("div",ya,[(h(!0),g(J,null,ue(o(w),m=>(h(),g("button",{key:m.metadata.id,class:k(["flex flex-col gap-2 p-2 rounded-xl border-2 transition-all text-left",{"border-theme-primary bg-theme-primary/10":o(r)===m.metadata.id,"border-theme-border/50 hover:border-theme-border bg-theme-surface/50":o(r)!==m.metadata.id}]),onClick:X=>o(d)(m.metadata.id),onMouseenter:X=>o(v)(m.metadata.id),onMouseleave:f[8]||(f[8]=X=>o(v)(null))},[i("div",ka,[i("span",Sa,j(m.metadata.name),1),o(r)===m.metadata.id?(h(),g("div",_a)):L("",!0)]),i("div",Ta,[i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.background})},null,4),i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.primary})},null,4),i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.accent})},null,4)])],42,wa))),128))])]),i("div",null,[f[20]||(f[20]=i("h4",{class:"text-[10px] font-bold uppercase tracking-widest text-theme-textmuted mb-3 flex items-center gap-2"},[i("div",{class:"i-mdi-weather-sunny text-xs"}),ye(" Light Themes ")],-1)),i("div",Ca,[(h(!0),g(J,null,ue(o(x),m=>(h(),g("button",{key:m.metadata.id,class:k(["flex flex-col gap-2 p-2 rounded-xl border-2 transition-all text-left",{"border-theme-primary bg-theme-primary/10":o(r)===m.metadata.id,"border-theme-border/50 hover:border-theme-border bg-theme-surface/50":o(r)!==m.metadata.id}]),onClick:X=>o(d)(m.metadata.id),onMouseenter:X=>o(v)(m.metadata.id),onMouseleave:f[9]||(f[9]=X=>o(v)(null))},[i("div",Ea,[i("span",Na,j(m.metadata.name),1),o(r)===m.metadata.id?(h(),g("div",Aa)):L("",!0)]),i("div",$a,[i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.background})},null,4),i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.primary})},null,4),i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.accent})},null,4)])],42,Fa))),128))])])])]),_:1},8,["highlight"]),o(N)?(h(),g("div",Oa,[ye(j(o(N))+" ",1),i("button",{class:"underline ml-2 font-medium",onClick:b},"Retry")])):L("",!0)])])],2)])}}}),Ra=Object.assign(Ia,{__name:"FilterMenu"}),Da={class:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none"},ja={class:"flex-1"},Pa=["onClick"],Ba=Y({__name:"AppToastContainer",setup(n){const{toasts:e,removeToast:t}=he(),a=l=>{const r={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600",warning:"bg-yellow-600"};return r[l]||r.info},s=l=>{const r={success:"i-mdi-check-circle text-lg",error:"i-mdi-alert-circle text-lg",info:"i-mdi-information text-lg",warning:"i-mdi-alert text-lg"};return r[l]||r.info};return(l,r)=>(h(),g("div",Da,[R(pt,{name:"toast",tag:"div",class:"flex flex-col gap-2"},{default:M(()=>[(h(!0),g(J,null,ue(o(e),d=>(h(),g("div",{key:d.id,class:k(["pointer-events-auto p-3 rounded-lg shadow-lg text-white text-sm flex items-center gap-2 min-w-[300px] max-w-md",a(d.type)])},[i("div",{class:k(s(d.type))},null,2),i("span",ja,j(d.message),1),i("button",{class:"p-1 hover:bg-white/20 rounded transition-colors",onClick:v=>o(t)(d.id)},[...r[0]||(r[0]=[i("div",{class:"i-mdi-close text-lg"},null,-1)])],8,Pa)],2))),128))]),_:1})]))}}),La=Object.assign(gt(Ba,[["__scopeId","data-v-c1ef2144"]]),{__name:"AppToastContainer"}),Ma={class:"min-h-screen bg-theme-background text-theme-text transition-colors duration-300"},Ya=Y({__name:"default",setup(n){const e=P(!1),t=P(),a=()=>{e.value=!0,te(()=>{setTimeout(()=>{t.value?.scrollToThemeSection()},300)})},s=xt(),{Escape:l}=s;l&&yt(l,()=>{e.value&&(e.value=!1)}),Ke("k",d=>{if(d.ctrlKey||d.metaKey){const v=window.document.activeElement;v?.tagName==="INPUT"||v?.tagName==="TEXTAREA"||(d.preventDefault(),e.value=!e.value)}});const{setSearchOpen:r}=he();return Ke(["s","S","/"],d=>{const v=window.document.activeElement;v?.tagName==="INPUT"||v?.tagName==="TEXTAREA"||((d.key==="s"||d.key==="S")&&!d.ctrlKey&&!d.metaKey&&!d.altKey||d.key==="/")&&(d.preventDefault(),r(!0))}),(d,v)=>{const p=Tt,w=Nt,x=Vt,E=Ra,O=La;return h(),g("div",Ma,[R(p),R(w),R(x,{onOpenFilters:v[0]||(v[0]=_=>e.value=!0),onOpenThemeSelection:a}),R(E,{ref_key:"filterMenuRef",ref:t,"is-open":o(e),onClose:v[1]||(v[1]=_=>e.value=!1)},null,8,["is-open"]),Ee(d.$slots,"default"),R(O)])}}});export{Ya as default};
