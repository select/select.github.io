import{_ as De}from"./DLv0zqK_.js";import{a as Pe,_ as ze}from"./C_3uOQ0x.js";import{E as he,r as b,n as ue,c as l,J as n,o as a,a as e,O as B,t as u,K as S,L as C,z as t,Z as J,ab as Ve,a0 as X,B as Be,N as Se,e as Z,H as Ce,b as ce,d as H,$ as de,a6 as ne,ac as Ee,x as Ie,a2 as Fe,a3 as je,a9 as Le,G as Ne,ad as Oe,ae as oe,I as qe,af as ke,w as we,F as _e,P as Ue,u as We,a8 as $e,V as Ge,_ as Ke}from"./C1DehbHX.js";import{u as Ye}from"./BmM4d4Y4.js";import{g as He}from"./BDUZSP7Z.js";import{f as Qe}from"./DMOTkeJ5.js";import{u as Je}from"./BPf94GNk.js";var Me=(v=>(v.LOW_QUALITY="low-quality",v.CAM_RIP="cam-rip",v.HARDCODED_SUBS="hardcoded-subs",v.AUDIO_ISSUES="audio-issues",v.VIDEO_ISSUES="video-issues",v.INCOMPLETE="incomplete",v.WRONG_ASPECT_RATIO="wrong-aspect-ratio",v))(Me||{});const Xe={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},Ze={class:"bg-theme-surface rounded-2xl w-full max-w-lg shadow-2xl border border-theme-border overflow-hidden"},et={class:"p-6 space-y-6"},tt={class:"p-3 bg-theme-background/50 rounded-lg border border-theme-border"},ot={class:"flex items-center gap-2 mb-1"},st={class:"font-medium text-theme-text"},at={class:"text-xs text-theme-textmuted line-clamp-2"},lt={class:"grid grid-cols-2 gap-3"},it=["value"],rt={class:"text-sm capitalize"},dt={class:"flex gap-3 pt-2"},nt=["disabled"],ct={key:0,class:"i-mdi-loading animate-spin"},ut=he({__name:"AdminSourceQualityDialog",props:{modelValue:{type:Boolean},movie:{},source:{}},emits:["update:modelValue","saved"],setup(v,{emit:E}){const p=v,_=E,$=b(!1),f=b([]);ue(()=>p.modelValue,A=>{A&&p.source&&(f.value=[...p.source.qualityMarks||[]])});const D=Object.values(Me),I=()=>{_("update:modelValue",!1)},x=async()=>{if(p.source){$.value=!0;try{(await $fetch("/api/admin/movie/update-source-quality",{method:"POST",body:{movieId:p.movie.imdbId,sourceId:p.source.id,qualityMarks:f.value}})).success&&(_("saved"),I())}catch(A){console.error("Failed to update source quality:",A)}finally{$.value=!1}}},M=async()=>{confirm("Clear all quality marks for this source?")&&(f.value=[],await x())};return(A,r)=>v.modelValue&&v.source?(a(),l("div",Xe,[e("div",Ze,[e("div",{class:"p-6 border-b border-theme-border flex items-center justify-between"},[r[2]||(r[2]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"i-mdi-alert-decagram text-yellow-600 text-2xl"}),e("h3",{class:"text-xl font-bold"},"Mark Source Quality")],-1)),e("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors",onClick:I},[...r[1]||(r[1]=[e("div",{class:"i-mdi-close text-xl"},null,-1)])])]),e("div",et,[e("div",tt,[e("div",ot,[e("div",{class:B([v.source.type==="youtube"?"i-mdi-youtube text-red-600":"i-mdi-bank text-blue-600","text-lg"])},null,2),e("span",st,u(v.source.type),1)]),e("p",at,u(v.source.title),1)]),e("div",null,[r[3]||(r[3]=e("h4",{class:"text-sm font-bold text-theme-text mb-3 uppercase tracking-wider"}," Quality Marks ",-1)),e("div",lt,[(a(!0),l(S,null,C(t(D),k=>(a(),l("label",{key:k,class:B(["flex items-center gap-2 p-2 rounded-lg border border-theme-border hover:bg-theme-selection cursor-pointer transition-colors",{"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-900/50":t(f).includes(k)}])},[J(e("input",{"onUpdate:modelValue":r[0]||(r[0]=g=>X(f)?f.value=g:null),type:"checkbox",value:k,class:"rounded text-yellow-600 focus:ring-yellow-500"},null,8,it),[[Ve,t(f)]]),e("span",rt,u(k.replace(/-/g," ")),1)],2))),128))])]),e("div",dt,[e("button",{class:"flex-1 px-4 py-2 border border-theme-border rounded-lg font-bold hover:bg-theme-selection transition-colors",onClick:I}," Cancel "),e("button",{class:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg font-bold hover:bg-yellow-500 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",disabled:t($),onClick:x},[t($)?(a(),l("div",ct)):n("",!0),e("span",null,u(t($)?"Saving...":"Save Quality"),1)],8,nt)]),v.source.qualityMarks?.length?(a(),l("button",{key:0,class:"w-full mt-2 text-xs text-red-500 hover:text-red-600 underline font-medium",onClick:M}," Clear All Quality Marks ")):n("",!0)])])])):n("",!0)}}),mt=Object.assign(ut,{__name:"AdminSourceQualityDialog"});function Ae(v,E=2){if(v==null)return"N/A";if(v===0)return"0 Bytes";const p=1024,_=E<0?0:E,$=["Bytes","KB","MB","GB","TB","PB"],f=Math.floor(Math.log(v)/Math.log(p));return`${parseFloat((v/Math.pow(p,f)).toFixed(_))} ${$[f]}`}function vt(v){return v.replace(/\(.*?\)/g,"").replace(/\[.*?\]/g,"").replace(/["'“”‘’]/g,"").replace(/[*]/g,"").replace(/\s+/g," ").trim()}const pt={key:0,class:"mt-8 p-6 bg-theme-surface border-2 border-theme-border rounded-xl text-theme-text"},bt={class:"flex items-center gap-2 mb-4 text-theme-text"},xt={key:0,class:"flex items-center gap-1 text-xs font-bold text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded"},ht={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ft={class:"space-y-6"},yt={class:"flex items-center gap-2 mb-1"},gt={class:"font-medium text-theme-text"},kt=["onClick"],wt=["onClick"],_t={key:0,class:"mb-2 flex flex-wrap gap-1"},$t={key:1,class:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs"},St={key:0,class:"flex items-start gap-1.5"},Ct={class:"text-theme-textmuted ml-1"},It={class:"text-theme-textmuted ml-1"},Mt={key:1,class:"flex items-start gap-1.5"},At={class:"text-theme-textmuted ml-1"},Rt={class:"text-theme-textmuted ml-1"},Tt={key:2,class:"mb-2 p-2 bg-theme-background/50 rounded text-xs"},Dt={class:"text-theme-textmuted ml-1"},Pt={key:3,class:"mb-2 p-2 bg-theme-background/50 rounded text-xs"},zt={class:"text-theme-textmuted ml-1"},Vt={key:4,class:"text-xs text-theme-textmuted line-clamp-4 whitespace-pre-wrap"},Bt={key:5,class:"text-xs italic text-theme-textmuted"},Et={class:"mt-3 pt-2 border-t border-theme-border"},Ft={class:"flex gap-1 mb-2"},jt=["onUpdate:modelValue","onKeyup"],Lt=["onClick"],Nt={class:"flex flex-wrap gap-2"},Ot=["onClick"],qt=["onClick"],Ut={class:"space-y-4"},Wt={class:"flex gap-2"},Gt=["disabled"],Kt={key:0,class:"i-mdi-loading animate-spin"},Yt={key:1},Ht={class:"pt-2"},Qt={class:"flex gap-2"},Jt=["disabled"],Xt={key:0,class:"text-red-500 text-sm"},Zt={class:"pt-4 border-t border-theme-border flex flex-wrap gap-4"},eo=["disabled"],to=["disabled"],oo={class:"pt-6 border-t border-theme-border"},so={class:"flex flex-wrap gap-2 mb-4"},ao={class:"font-medium"},lo=["onClick"],io={key:0,class:"text-sm text-theme-textmuted italic py-1.5"},ro={class:"flex gap-2"},no=["value"],co=["disabled"],uo={key:0,class:"i-mdi-loading animate-spin"},mo={key:1},vo={key:0,class:"space-y-2 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin"},po=["src"],bo={class:"flex-1 min-w-0"},xo={class:"font-bold text-sm truncate text-theme-text"},ho={class:"text-xs text-theme-textmuted dark:text-theme-textmuted"},fo={class:"text-[10px] font-mono text-theme-textmuted"},yo=["disabled","onClick"],go={key:1,class:"h-[200px] flex flex-col items-center justify-center text-theme-textmuted border-2 border-dashed border-theme-border rounded-lg"},ko={key:2,id:"google-results",class:"mt-8 pt-6 border-t border-theme-border"},wo={class:"space-y-2 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin"},_o={class:"flex-1 min-w-0"},$o={class:"font-bold text-sm truncate text-theme-text"},So={class:"text-xs text-theme-textmuted dark:text-theme-textmuted"},Co={class:"text-[10px] font-mono text-theme-textmuted"},Io=["disabled","onClick"],Mo=he({__name:"AdminCurationPanel",props:{movie:{}},emits:["updated"],setup(v,{emit:E}){const p=v,_=E,$=b(!1),f=b(""),D=b(""),I=b(""),x=b(!1),M=b(!1),A=b(null),r=b([]),k=b([]),g=b(""),R=Be({}),N=()=>{!p.movie.sources||p.movie.sources.length===0||p.movie.sources.forEach(c=>{const s=c.title||p.movie.title;R[c.id]=vt(s)})},P=Ye(),{collections:F}=Se(P),{getCollectionsForMovie:U,loadCollections:O,addMovieToCollection:Q,removeMovieFromCollection:se}=P,z=b(""),V=b(!1),j=b([]),ae=Z(()=>Array.from(F.value.values()).filter(c=>!c.movieIds.includes(p.movie.imdbId)));Ce(async()=>{$.value=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",f.value=p.movie.title,D.value=p.movie.year?.toString()||"",N(),F.value.size===0&&O(),j.value=await U(p.movie.imdbId)}),ue(()=>p.movie.imdbId,async c=>{c&&(j.value=await U(c))});const W=async()=>{if(z.value){V.value=!0;try{await Q(z.value,p.movie.imdbId)&&(z.value="",j.value=await U(p.movie.imdbId))}finally{V.value=!1}}},G=async c=>{if(confirm("Remove movie from this collection?")){V.value=!0;try{await se(c,p.movie.imdbId),j.value=await U(p.movie.imdbId)}finally{V.value=!1}}};ue(()=>p.movie.imdbId,()=>{f.value=p.movie.title,D.value=p.movie.year?.toString()||"",I.value="",r.value=[],g.value="",N()});const ee=async()=>{const c=f.value.trim(),s=D.value.trim();if(c){x.value=!0,g.value="",r.value=[];try{const y=await $fetch("/api/admin/omdb/search",{query:{s:c,y:s}});y.Response==="True"?r.value=y.Search||[]:g.value=y.Error||"No results found"}catch{g.value="Failed to search OMDB"}finally{x.value=!1}}},K=async c=>{if(c){x.value=!0,g.value="",k.value=[];try{const s=await $fetch("/api/admin/google/search",{query:{q:`${c} site:imdb.com`}});s.Response==="True"?(k.value=s.Search||[],Ie(()=>{document.getElementById("google-results")?.scrollIntoView({behavior:"smooth"})})):g.value=s.Error||"No Google results found"}catch{g.value="Failed to search Google"}finally{x.value=!1}}},me=c=>{if(!c.description)return;const s=c.description.substring(0,100).replace(/\n/g," ");K(s)},le=c=>{const s=R[c.id]||"",y=c.description?c.description.substring(0,50).replace(/\n/g," "):"";K(`${s} ${y}`)},q=async c=>{if(confirm("Are you sure you want to remove this source? If this is the last source, the movie entry will be deleted."))try{x.value=!0;const s=await $fetch("/api/admin/movie/remove-source",{method:"POST",body:{movieId:p.movie.imdbId,sourceId:c}});s.success&&(s.deleted?_("updated",""):s.movieId&&_("updated",s.movieId))}catch(s){console.error("Failed to remove source:",s)}finally{x.value=!1}},ie=async()=>{const c=I.value.trim();if(!c)return;const s=c.match(/tt\d{7,}/);if(!s){g.value="Invalid IMDB ID or URL (should contain tt followed by at least 7 digits)";return}const y=s[0];await te(y)},te=async c=>{try{x.value=!0;const s=await $fetch("/api/admin/omdb/details",{query:{i:c}});if(s.Response==="True"){const y=await $fetch("/api/admin/movie/update",{method:"POST",body:{movieId:p.movie.imdbId,metadata:s}});y.success&&_("updated",y.movieId)}else console.error("Failed to get movie details:",s.Error)}catch(s){console.error("Failed to update movie:",s)}finally{x.value=!1}},ve=async()=>{if(confirm("Are you sure you want to remove metadata? This will reset the movie to an unmatched state."))try{x.value=!0;const c=await $fetch("/api/admin/movie/update",{method:"POST",body:{movieId:p.movie.imdbId,removeMetadata:!0}});c.success&&_("updated",c.movieId)}catch(c){console.error("Failed to remove metadata:",c)}finally{x.value=!1}},pe=async()=>{try{x.value=!0;const c=await $fetch("/api/admin/movie/update",{method:"POST",body:{movieId:p.movie.imdbId,verified:!0}});c.success&&_("updated",c.movieId)}catch(c){console.error("Failed to verify movie:",c)}finally{x.value=!1}},be=c=>{A.value=c,M.value=!0};return(c,s)=>{const y=mt;return t($)&&v.movie.sources&&v.movie.sources.length>0?(a(),l("div",pt,[e("div",bt,[s[7]||(s[7]=e("div",{class:"i-mdi-shield-edit text-2xl"},null,-1)),s[8]||(s[8]=e("h2",{class:"text-xl font-bold"},"Admin Curation",-1)),v.movie.verified?(a(),l("div",xt,[...s[6]||(s[6]=[e("div",{class:"i-mdi-check-decagram"},null,-1),H(" Verified ",-1)])])):n("",!0),s[9]||(s[9]=e("span",{class:"ml-auto text-xs font-mono bg-theme-selection px-2 py-1 rounded"}," localhost only ",-1))]),e("div",ht,[e("div",ft,[e("div",null,[s[19]||(s[19]=e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted mb-2"}," Source Info ",-1)),(a(!0),l(S,null,C(v.movie.sources,d=>(a(),l("div",{key:d.id,class:"bg-theme-surface/50 p-3 rounded border border-theme-border mb-2"},[e("div",yt,[e("div",{class:B([d.type==="youtube"?"i-mdi-youtube text-red-600":"i-mdi-bank text-blue-600","text-lg"])},null,2),e("span",gt,u(d.type),1),e("button",{class:"ml-auto p-1 text-theme-textmuted hover:text-yellow-500 transition-colors",title:"Mark source quality",onClick:w=>be(d)},[...s[10]||(s[10]=[e("div",{class:"i-mdi-alert-decagram"},null,-1)])],8,kt),e("button",{class:"p-1 text-theme-textmuted hover:text-red-500 transition-colors",title:"Remove source",onClick:w=>q(d.id)},[...s[11]||(s[11]=[e("div",{class:"i-mdi-close"},null,-1)])],8,wt)]),d.qualityMarks?.length?(a(),l("div",_t,[(a(!0),l(S,null,C(d.qualityMarks,w=>(a(),l("span",{key:w,class:"text-[10px] font-bold text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30 px-1.5 py-0.5 rounded border border-yellow-200 dark:border-yellow-800 uppercase tracking-tighter"},u(w),1))),128))])):n("",!0),d.type==="youtube"&&d.regionRestriction?(a(),l("div",$t,[s[16]||(s[16]=e("div",{class:"flex items-center gap-1.5 mb-1"},[e("div",{class:"i-mdi-earth-off text-yellow-600 dark:text-yellow-400"}),e("span",{class:"font-semibold text-yellow-700 dark:text-yellow-300"},"Region Restrictions")],-1)),d.regionRestriction.blocked?(a(),l("div",St,[s[13]||(s[13]=e("div",{class:"i-mdi-close-circle text-red-600 dark:text-red-400 mt-0.5"},null,-1)),e("div",null,[s[12]||(s[12]=e("span",{class:"font-medium text-red-700 dark:text-red-300"},"Blocked in:",-1)),e("span",Ct,u(d.regionRestriction.blocked.join(", ")),1),e("span",It,"("+u(d.regionRestriction.blocked.length)+" regions)",1)])])):n("",!0),d.regionRestriction.allowed?(a(),l("div",Mt,[s[15]||(s[15]=e("div",{class:"i-mdi-check-circle text-green-600 dark:text-green-400 mt-0.5"},null,-1)),e("div",null,[s[14]||(s[14]=e("span",{class:"font-medium text-green-700 dark:text-green-300"},"Only allowed in:",-1)),e("span",At,u(d.regionRestriction.allowed.join(", ")),1),e("span",Rt,"("+u(d.regionRestriction.allowed.length)+" regions)",1)])])):n("",!0)])):n("",!0),d.title?(a(),l("div",Tt,[s[17]||(s[17]=e("span",{class:"font-medium text-theme-text"},"Original title:",-1)),e("span",Dt,u(d.title),1)])):n("",!0),d.fileSize?(a(),l("div",Pt,[s[18]||(s[18]=e("span",{class:"font-medium text-theme-text"},"File size:",-1)),e("span",zt,u(("formatFileSize"in c?c.formatFileSize:t(Ae))(d.fileSize)),1)])):n("",!0),d.description?(a(),l("p",Vt,u(d.description.length>1e3?d.description.substring(0,1e3)+"...":d.description),1)):(a(),l("p",Bt," No description available in database ")),e("div",Et,[e("div",Ft,[J(e("input",{"onUpdate:modelValue":w=>t(R)[d.id]=w,type:"text",class:"flex-1 px-2 py-1 text-[10px] rounded border border-theme-border bg-theme-surface text-theme-text",placeholder:"Search query...",onKeyup:ne(w=>K(t(R)[d.id]||""),["enter"])},null,40,jt),[[de,t(R)[d.id]]]),e("button",{class:"px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white text-[10px] font-bold rounded transition-colors",onClick:w=>K(t(R)[d.id]||"")}," Search ",8,Lt)]),e("div",Nt,[d.description?(a(),l("button",{key:0,class:"px-2 py-1 bg-theme-selection hover:bg-theme-selection/80 text-theme-text text-[10px] font-bold rounded transition-colors",onClick:w=>me(d)}," Search Desc ",8,Ot)):n("",!0),d.title&&d.description?(a(),l("button",{key:1,class:"px-2 py-1 bg-theme-selection hover:bg-theme-selection/80 text-theme-text text-[10px] font-bold rounded transition-colors",onClick:w=>le(d)}," Search Both ",8,qt)):n("",!0)])])]))),128))]),e("div",Ut,[s[21]||(s[21]=e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted"}," Search OMDB ",-1)),e("div",Wt,[J(e("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>X(f)?f.value=d:null),type:"text",placeholder:"Movie Title",class:"flex-1 px-3 py-2 rounded border border-theme-border bg-theme-surface/50 text-theme-text text-sm",onKeyup:ne(ee,["enter"])},null,544),[[de,t(f),void 0,{trim:!0}]]),J(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>X(D)?D.value=d:null),type:"text",placeholder:"Year",class:"w-20 px-3 py-2 rounded border border-theme-border bg-theme-surface/50 text-theme-text text-sm",onKeyup:ne(ee,["enter"])},null,544),[[de,t(D),void 0,{trim:!0}]]),e("button",{class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded font-bold transition-colors disabled:opacity-50",disabled:t(x),onClick:ee},[t(x)?(a(),l("div",Kt)):(a(),l("span",Yt,"Search"))],8,Gt)]),e("div",Ht,[s[20]||(s[20]=e("div",{class:"flex items-center gap-2 mb-2"},[e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted"}," Direct IMDB ID ")],-1)),e("div",Qt,[J(e("input",{"onUpdate:modelValue":s[2]||(s[2]=d=>X(I)?I.value=d:null),type:"text",placeholder:"tt1234567",class:"flex-1 px-3 py-2 rounded border border-theme-border bg-theme-surface/50 text-theme-text text-sm font-mono",onKeyup:ne(ie,["enter"])},null,544),[[de,t(I),void 0,{trim:!0}]]),e("button",{class:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded font-bold transition-colors disabled:opacity-50",disabled:t(x)||!t(I),onClick:ie}," Fetch ",8,Jt)])]),t(g)?(a(),l("div",Xt,u(t(g)),1)):n("",!0)]),e("div",Zt,[v.movie.verified?n("",!0):(a(),l("button",{key:0,class:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded transition-colors text-sm font-bold disabled:opacity-50",disabled:t(x),onClick:pe},[...s[22]||(s[22]=[e("div",{class:"i-mdi-check-decagram text-lg"},null,-1),H(" Mark as Verified ",-1)])],8,eo)),e("button",{class:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors text-sm font-bold disabled:opacity-50",disabled:t(x),onClick:ve},[...s[23]||(s[23]=[e("div",{class:"i-mdi-delete-sweep text-lg"},null,-1),H(" Remove All Metadata ",-1)])],8,to)]),e("div",oo,[s[27]||(s[27]=e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted mb-3"}," Collections ",-1)),e("div",so,[(a(!0),l(S,null,C(t(j),d=>(a(),l("div",{key:d.id,class:"flex items-center gap-2 px-3 py-1.5 bg-theme-primary/10 border border-theme-primary/30 rounded-lg text-sm"},[s[25]||(s[25]=e("div",{class:"i-mdi:movie-roll text-theme-primary"},null,-1)),e("span",ao,u(d.name),1),e("button",{class:"p-0.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded text-red-500 transition-colors",title:"Remove from collection",onClick:w=>G(d.id)},[...s[24]||(s[24]=[e("div",{class:"i-mdi-close text-xs"},null,-1)])],8,lo)]))),128)),t(j).length===0?(a(),l("div",io," Not in any collections ")):n("",!0)]),e("div",ro,[J(e("select",{"onUpdate:modelValue":s[3]||(s[3]=d=>X(z)?z.value=d:null),class:"flex-1 px-3 py-2 rounded border border-theme-border bg-theme-surface/50 text-theme-text text-sm"},[s[26]||(s[26]=e("option",{value:"",disabled:""},"Add to collection...",-1)),(a(!0),l(S,null,C(t(ae),d=>(a(),l("option",{key:d.id,value:d.id},u(d.name),9,no))),128))],512),[[Ee,t(z)]]),e("button",{class:"px-4 py-2 bg-theme-primary hover:bg-theme-primary/80 text-white rounded font-bold transition-colors disabled:opacity-50",disabled:!t(z)||t(V),onClick:W},[t(V)?(a(),l("div",uo)):(a(),l("span",mo,"Add"))],8,co)])])]),e("div",null,[s[31]||(s[31]=e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted mb-2"}," Search Results ",-1)),t(r).length>0?(a(),l("div",vo,[(a(!0),l(S,null,C(t(r),d=>(a(),l("div",{key:d.imdbID,class:"flex gap-3 p-2 bg-theme-surface/50 rounded border border-theme-border hover:border-yellow-400 dark:hover:border-gray-500 transition-colors group"},[e("img",{src:d.Poster!=="N/A"?d.Poster:"/favicon.ico",class:"w-12 h-18 object-cover rounded",alt:"Poster"},null,8,po),e("div",bo,[e("h4",xo,u(d.Title),1),e("p",ho,u(d.Year)+" • "+u(d.Type),1),e("p",fo,u(d.imdbID),1)]),e("button",{class:"self-center px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs rounded font-bold opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",disabled:t(x),onClick:w=>te(d.imdbID)}," Select ",8,yo)]))),128))])):t(x)?n("",!0):(a(),l("div",go,[...s[28]||(s[28]=[e("div",{class:"i-mdi-magnify text-4xl mb-2"},null,-1),e("p",{class:"text-sm"},"Search results will appear here",-1)])])),t(k).length>0?(a(),l("div",ko,[s[30]||(s[30]=e("div",{class:"flex items-center gap-2 mb-3"},[e("div",{class:"i-mdi-google text-blue-600"}),e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted"}," Google Results (IMDb) ")],-1)),e("div",wo,[(a(!0),l(S,null,C(t(k),d=>(a(),l("div",{key:d.imdbID,class:"flex gap-3 p-2 bg-theme-surface/50 rounded border border-theme-border hover:border-blue-400 dark:hover:border-gray-500 transition-colors group"},[s[29]||(s[29]=e("div",{class:"w-12 h-18 bg-theme-selection flex items-center justify-center rounded"},[e("div",{class:"i-mdi-movie-open text-2xl text-theme-textmuted"})],-1)),e("div",_o,[e("h4",$o,u(d.Title),1),e("p",So,u(d.Year)+" • "+u(d.Type),1),e("p",Co,u(d.imdbID),1)]),e("button",{class:"self-center px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs rounded font-bold opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",disabled:t(x),onClick:w=>te(d.imdbID)}," Select ",8,Io)]))),128))])])):n("",!0)])]),ce(y,{modelValue:t(M),"onUpdate:modelValue":s[4]||(s[4]=d=>X(M)?M.value=d:null),movie:v.movie,source:t(A),onSaved:s[5]||(s[5]=d=>_("updated",v.movie.imdbId))},null,8,["modelValue","movie","source"])])):n("",!0)}}}),Ao=Object.assign(Mo,{__name:"AdminCurationPanel"}),Ro={class:"max-w-7xl mx-auto px-4 py-8 md:ml-16"},To={key:0,class:"space-y-8"},Do={key:1,class:"text-center py-12"},Po={class:"text-gray-600 dark:text-gray-400 mb-6"},zo={key:2,class:"space-y-8 text-theme-text"},Vo={class:"flex flex-col md:flex-row gap-8"},Bo={class:"flex-shrink-0"},Eo={class:"w-full md:w-80 aspect-[2/3] bg-theme-selection rounded-lg overflow-hidden border border-theme-border/50"},Fo=["src","alt"],jo={key:1,class:"w-full h-full flex items-center justify-center text-theme-textmuted"},Lo={class:"flex-1"},No={class:"text-4xl font-bold mb-4"},Oo={class:"flex flex-wrap gap-4 text-sm mb-6"},qo={key:0,class:"px-3 py-1 rounded-full bg-theme-surface border border-theme-border/50"},Uo={key:1,class:"px-3 py-1 rounded-full bg-theme-surface border border-theme-border/50"},Wo={key:2,class:"px-3 py-1 rounded-full bg-theme-surface border border-theme-border/50"},Go={key:0,class:"flex items-center gap-2 mb-6"},Ko={class:"text-2xl font-bold"},Yo={key:0,class:"text-sm text-theme-textmuted"},Ho={class:"flex flex-wrap gap-3 mb-6"},Qo={key:1,class:"mb-6"},Jo={class:"flex flex-wrap gap-2"},Xo={key:2,class:"mb-6"},Zo={class:"flex flex-wrap gap-2"},es={key:3,class:"mb-6"},ts={class:"relative"},os={class:"space-y-3"},ss={key:0},as={class:"text-theme-text"},ls={key:1},is={class:"text-theme-text"},rs={key:2},ds={class:"text-theme-text"},ns={key:0,class:"mb-4"},cs={class:"flex flex-wrap gap-2"},us={class:"flex flex-col gap-1"},ms=["onClick"],vs={class:"flex items-center gap-2"},ps={key:0,class:"text-xs opacity-75"},bs={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded text-[10px] font-bold whitespace-nowrap opacity-0 group-hover/size:opacity-100 transition-opacity pointer-events-none glass z-10"},xs={key:0,class:"flex flex-wrap gap-1"},hs=["href","title"],fs={key:1,class:"bg-black rounded-lg overflow-hidden"},ys={key:0,class:"aspect-video"},gs=["src"],ks={key:1,class:"aspect-video"},ws=["src"],_s={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-theme-border/50"},$s={key:0},Ss={class:"text-theme-text"},Cs={key:1},Is={class:"text-theme-text"},Ms={key:2},As={class:"text-theme-text"},Rs={key:3},Ts=["href"],Ds={key:0},Ps={class:"relative"},zs={class:"border-t border-theme-border/50 mt-12"},Vs={class:"max-w-7xl mx-auto px-4 py-6 text-center text-sm text-theme-textmuted"},Bs={class:"flex items-center justify-between mb-4"},Es=he({__name:"[id]",setup(v){const E=Je(),{currentMovieList:p,likedMovieIds:_}=Se(E),{getMovieById:$,fetchMoviesByIds:f,loadFromFile:D,toggleLike:I}=E,{showToast:x}=Fe(),M=je(),{y:A}=Le(),r=b(null),k=b([]),g=b(!0),R=b(!1),N=b(null),P=b(0),F=b(!1),U=b(null),O=b(null),Q=b(!1),se=b(!1),z=b(!1),V=()=>{if(!O.value)return;const{scrollLeft:i,scrollWidth:o,clientWidth:h}=O.value;se.value=i>20,z.value=i+h<o-20},j=i=>{if(!O.value)return;const o=O.value.clientWidth*.8;O.value.scrollBy({left:i==="left"?-o:o,behavior:"smooth"})};Ne(U,i=>{i[0]?.isIntersecting&&!Q.value&&r.value&&me()});const ae=Z(()=>r.value?.collections||[]),W=Z(()=>!r.value||!r.value.sources?[]:[...r.value.sources].sort((i,o)=>{if(i.type==="youtube"&&o.type!=="youtube")return-1;if(i.type!=="youtube"&&o.type==="youtube")return 1;if(i.type==="archive.org"&&o.type==="archive.org"){const h=i.fileSize||i.size||0;return(o.fileSize||o.size||0)-h}return 0})),G=Z(()=>W.value.length===0?null:W.value[P.value]||W.value[0]||null),ee=i=>{if(!i)return"0%";const o=4*1024*1024*1024;return`${Math.min(i/o*100,100)}%`},K=Z(()=>r.value?_.value.includes(r.value.imdbId):!1),me=async()=>{if(!(Q.value||!r.value?.relatedMovies?.length)){R.value=!0;try{k.value=await f(r.value.relatedMovies),Q.value=!0,Ie(()=>{V()})}catch{k.value=[]}finally{R.value=!1}}},le=async i=>{g.value=!0,N.value=null,P.value=0,k.value=[],Q.value=!1,F.value=!1;try{const o=await $(i);if(!o){N.value=`Movie with ID "${i}" not found.`,g.value=!1;return}r.value=o,fe(o),g.value=!1}catch(o){console.error("Failed to load movie:",o),N.value=`Failed to load movie data. ${o instanceof Error?o.message:"Please try again."}`,g.value=!1}};Ce(async()=>{A.value=0;const i=M.params.id;await le(i)}),ue(()=>M.params.id,async i=>{i&&(A.value=0,await le(i))});const q=b(!1),ie=Oe(),{Escape:te,Space:ve,Enter:pe,ArrowLeft:be,ArrowRight:c,Shift_Slash:s}=ie,y=Z(()=>{const i=document.activeElement;return i?.tagName==="INPUT"||i?.tagName==="TEXTAREA"});oe(()=>te?.value&&!y.value,()=>{$e("/")}),oe(()=>(ve?.value||pe?.value)&&!y.value,()=>{ye()}),oe(()=>be?.value&&!y.value,()=>{d("prev")}),oe(()=>c?.value&&!y.value,()=>{d("next")}),oe(()=>s?.value&&!y.value,()=>{q.value=!q.value});const d=i=>{const o=M.params.id;if(!o)return;const h=p.value,T=h.findIndex(Y=>Y.imdbId===o);if(T===-1)return;const L=T+(i==="prev"?-1:1);if(L<0||L>=h.length)return;const m=h[L];m&&$e(`/movie/${m.imdbId}`)},w=async i=>{if(await D(),i!==r.value?.imdbId){const h=`/movie/${i}`;window.history.replaceState({},"",h),M.params.id=i}const o=await $(i);o&&(r.value=o,fe(o))},fe=i=>{const o=i.title+(i.year?` (${i.year})`:""),h=i.metadata?.Plot||`Watch ${i.title} for free on Movies Deluxe`,T=i.metadata?.Poster||"/favicon.ico",re=`https://movies-deluxe.app/movie/${i.imdbId}`;We({title:o,meta:[{name:"description",content:h},{property:"og:type",content:"video.movie"},{property:"og:title",content:o},{property:"og:description",content:h},{property:"og:image",content:T},{property:"og:url",content:re},{property:"og:site_name",content:"Movies Deluxe"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:o},{name:"twitter:description",content:h},{name:"twitter:image",content:T},...i.metadata?.Director?[{property:"video:director",content:i.metadata.Director}]:[],...i.metadata?.Actors?[{property:"video:actor",content:i.metadata.Actors}]:[],...i.year?[{property:"video:release_date",content:i.year.toString()}]:[]],script:[{type:"application/ld+json",textContent:JSON.stringify({"@context":"https://schema.org","@type":"Movie",name:i.title,...i.year&&{datePublished:i.year.toString()},...i.metadata?.Plot&&{description:i.metadata.Plot},...i.metadata?.Poster&&{image:T},...i.metadata?.Director&&{director:{"@type":"Person",name:i.metadata.Director}},...i.metadata?.Actors&&{actor:i.metadata.Actors.split(",").map(L=>({"@type":"Person",name:L.trim()}))},...i.metadata?.Genre&&{genre:i.metadata.Genre.split(",").map(L=>L.trim())},...i.metadata?.imdbRating&&{aggregateRating:{"@type":"AggregateRating",ratingValue:i.metadata.imdbRating,...i.metadata.imdbVotes&&{ratingCount:String(i.metadata.imdbVotes)}}},...i.imdbId?.startsWith("tt")&&{sameAs:`https://www.imdb.com/title/${i.imdbId}/`}})}]})},ye=()=>{r.value&&I(r.value.imdbId)},Re=async()=>{if(!r.value)return;const i=r.value.title+(r.value.year?` (${r.value.year})`:""),o=r.value.metadata?.Plot||`Watch ${r.value.title} for free on Movies Deluxe`,h=`${window.location.origin}/movie/${r.value.imdbId}`;if(!navigator.share){await ge(h);return}try{await navigator.share({title:i,text:o,url:h}),x("Shared successfully!")}catch(T){T.name!=="AbortError"&&await ge(h)}},ge=async i=>{try{await navigator.clipboard.writeText(i),x("Link copied to clipboard!")}catch{x("Failed to copy link","error")}},Te=i=>{const o=i.target;o.style.display="none"};return typeof window<"u"&&qe("resize",V),(i,o)=>{const h=De,T=Pe,re=ze,L=Ao;return a(),l("div",null,[e("main",Ro,[t(g)?(a(),l("div",To,[...o[7]||(o[7]=[ke('<div class="flex flex-col md:flex-row gap-8" data-v-6f86299a><div class="flex-shrink-0" data-v-6f86299a><div class="w-full md:w-80 aspect-[2/3] skeleton rounded-lg" data-v-6f86299a></div></div><div class="flex-1 space-y-6" data-v-6f86299a><div class="h-10 skeleton rounded-lg w-3/4" data-v-6f86299a></div><div class="flex gap-4" data-v-6f86299a><div class="h-8 w-20 skeleton rounded-full" data-v-6f86299a></div><div class="h-8 w-16 skeleton rounded-full" data-v-6f86299a></div><div class="h-8 w-24 skeleton rounded-full" data-v-6f86299a></div></div><div class="flex items-center gap-2" data-v-6f86299a><div class="h-8 w-8 skeleton rounded-full" data-v-6f86299a></div><div class="h-8 w-16 skeleton rounded-md" data-v-6f86299a></div></div><div class="flex gap-3" data-v-6f86299a><div class="h-10 w-40 skeleton rounded-full" data-v-6f86299a></div><div class="h-10 w-28 skeleton rounded-full" data-v-6f86299a></div></div><div class="space-y-2" data-v-6f86299a><div class="h-4 w-16 skeleton rounded-md" data-v-6f86299a></div><div class="flex gap-2" data-v-6f86299a><div class="h-8 w-20 skeleton rounded-full" data-v-6f86299a></div><div class="h-8 w-24 skeleton rounded-full" data-v-6f86299a></div></div></div><div class="space-y-2" data-v-6f86299a><div class="h-4 w-12 skeleton rounded-md" data-v-6f86299a></div><div class="space-y-2" data-v-6f86299a><div class="h-4 skeleton rounded-md" data-v-6f86299a></div><div class="h-4 skeleton rounded-md" data-v-6f86299a></div><div class="h-4 skeleton rounded-md w-3/4" data-v-6f86299a></div></div></div></div></div><div class="aspect-video skeleton rounded-lg" data-v-6f86299a></div>',2)])])):t(N)?(a(),l("div",Do,[o[9]||(o[9]=e("div",{class:"i-mdi-alert-circle text-6xl text-red-500 mb-4"},null,-1)),o[10]||(o[10]=e("h2",{class:"text-2xl font-bold mb-2"},"Movie Not Found",-1)),e("p",Po,u(t(N)),1),ce(h,{to:"/",class:"inline-block px-6 py-3 rounded-full bg-gray-700 dark:bg-yellow-600 text-white hover:bg-gray-600 dark:hover:bg-yellow-500 transition-colors"},{default:we(()=>[...o[8]||(o[8]=[H(" Back to Movies ",-1)])]),_:1})])):t(r)?(a(),l("div",zo,[e("div",Vo,[e("div",Bo,[e("div",Eo,[t(r).imdbId?.startsWith("tt")?(a(),l("img",{key:0,src:("getPosterPath"in i?i.getPosterPath:t(He))(t(r).imdbId),alt:t(r).title,class:"w-full h-full object-cover object-center",onError:Te},null,40,Fo)):(a(),l("div",jo,[...o[11]||(o[11]=[e("div",{class:"i-mdi-movie text-8xl"},null,-1)])]))])]),e("div",Lo,[e("h1",No,u(t(r).title),1),e("div",Oo,[t(r).year?(a(),l("span",qo,u(t(r).year),1)):n("",!0),t(r).metadata?.Rated?(a(),l("span",Uo,u(t(r).metadata.Rated),1)):n("",!0),t(r).metadata?.Runtime?(a(),l("span",Wo,u(t(r).metadata.Runtime),1)):n("",!0)]),t(r).metadata?.imdbRating?(a(),l("div",Go,[o[12]||(o[12]=e("div",{class:"i-mdi-star text-theme-accent text-2xl"},null,-1)),e("span",Ko,u(t(r).metadata.imdbRating),1),o[13]||(o[13]=e("span",{class:"text-theme-textmuted"},"/ 10",-1)),t(r).metadata?.imdbVotes?(a(),l("span",Yo," ("+u(("formatVotes"in i?i.formatVotes:t(Qe))(t(r).metadata.imdbVotes))+") ",1)):n("",!0)])):n("",!0),e("div",Ho,[e("button",{class:"btn flex items-center gap-2",onClick:ye},[e("div",{class:B(["i-mdi-heart text-lg",{"text-theme-accent":t(K)}])},null,2),H(" "+u(t(K)?"Liked":"Like"),1)]),e("button",{class:"btn flex items-center gap-2",onClick:Re},[...o[14]||(o[14]=[e("div",{class:"i-mdi-share-variant text-lg"},null,-1),H(" Share ",-1)])])]),t(r).metadata?.Genre?(a(),l("div",Qo,[o[15]||(o[15]=e("h3",{class:"movie-label"},"Genre",-1)),e("div",Jo,[(a(!0),l(S,null,C(t(r).metadata.Genre.split(", "),m=>(a(),l("span",{key:m,class:"px-3 py-1 rounded-full bg-theme-surface border border-theme-border/50 text-sm"},u(m),1))),128))])])):n("",!0),t(ae).length>0?(a(),l("div",Xo,[o[17]||(o[17]=e("h3",{class:"movie-label"},"Part of Collection",-1)),e("div",Zo,[(a(!0),l(S,null,C(t(ae),m=>(a(),_e(h,{key:m.id,to:`/collections/${m.id}`,class:"px-3 py-1 rounded-full bg-theme-primary/10 border border-theme-primary/20 text-theme-primary text-sm hover:bg-theme-primary/20 transition-colors flex items-center gap-1.5"},{default:we(()=>[o[16]||(o[16]=e("div",{class:"i-mdi:movie-roll text-base"},null,-1)),H(" "+u(m.name),1)]),_:2},1032,["to"]))),128))])])):n("",!0),t(r).metadata?.Plot?(a(),l("div",es,[o[18]||(o[18]=e("h3",{class:"movie-label"},"Plot",-1)),e("div",ts,[e("p",{class:B(["text-theme-text leading-relaxed transition-all duration-300",{"line-clamp-3":!t(F)}])},u(t(r).metadata.Plot),3),t(r).metadata.Plot.length>150?(a(),l("button",{key:0,class:"mt-1 text-sm font-medium text-theme-primary hover:text-theme-accent transition-colors flex items-center gap-1",onClick:o[0]||(o[0]=m=>F.value=!t(F))},[e("span",null,u(t(F)?"Show less":"Show more"),1),e("div",{class:B(["transition-transform duration-300",t(F)?"i-mdi-chevron-up":"i-mdi-chevron-down"])},null,2)])):n("",!0)])])):n("",!0),e("div",os,[t(r).metadata?.Director?(a(),l("div",ss,[o[19]||(o[19]=e("span",{class:"movie-label block !mb-1"},"Director",-1)),e("span",as,u(t(r).metadata.Director),1)])):n("",!0),t(r).metadata?.Writer?(a(),l("div",ls,[o[20]||(o[20]=e("span",{class:"movie-label block !mb-1"},"Writer",-1)),e("span",is,u(t(r).metadata.Writer),1)])):n("",!0),t(r).metadata?.Actors?(a(),l("div",rs,[o[21]||(o[21]=e("span",{class:"movie-label block !mb-1"},"Actors",-1)),e("span",ds,u(t(r).metadata.Actors),1)])):n("",!0)])])]),t(W).length>0?(a(),l("div",ns,[o[23]||(o[23]=e("h3",{class:"movie-label"},"Select Source",-1)),e("div",cs,[(a(!0),l(S,null,C(t(W),(m,Y)=>(a(),l("div",{key:m.id,class:"flex items-center gap-1"},[e("div",us,[e("button",{class:B(["px-4 py-2 rounded-lg text-sm font-medium transition-colors border relative",{"bg-theme-primary border-theme-primary text-white":t(P)===Y,"bg-theme-surface border-theme-border/50 text-theme-text hover:bg-theme-selection":t(P)!==Y}]),onClick:xe=>P.value=Y},[e("div",vs,[e("div",{class:B(m.type==="youtube"?"i-mdi-youtube text-theme-accent":"i-mdi-bank")},null,2),e("span",null,u(m.label||(m.type==="youtube"?m.channelName||"YouTube":"Archive.org")),1),m.quality?(a(),l("span",ps,"("+u(m.quality)+")",1)):n("",!0)]),m.type==="archive.org"&&(m.fileSize||m.size)?(a(),l("div",{key:0,class:B(["group/size absolute bottom-0 left-0 h-[2px] transition-all duration-500 rounded-b-lg",t(P)===Y?"bg-white/40":"bg-theme-primary/40"]),style:Ge({width:ee(m.fileSize||m.size)})},[e("div",bs,u(("formatFileSize"in i?i.formatFileSize:t(Ae))(m.fileSize||m.size)),1)],6)):n("",!0)],10,ms),m.qualityMarks?.length?(a(),l("div",xs,[(a(!0),l(S,null,C(m.qualityMarks,xe=>(a(),l("span",{key:xe,class:"text-[10px] font-bold text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30 px-1.5 py-0.5 rounded border border-yellow-200 dark:border-yellow-800 uppercase tracking-tighter"},u(xe),1))),128))])):n("",!0)]),e("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",title:m.type==="youtube"?`Watch on YouTube${m.channelName?" - "+m.channelName:""}`:"Watch on Archive.org",class:B(["p-2 rounded-lg transition-colors hover:bg-theme-selection text-theme-primary",{"text-theme-accent":t(P)===Y}])},[...o[22]||(o[22]=[e("div",{class:"i-mdi-open-in-new text-lg"},null,-1)])],10,hs)]))),128))])])):n("",!0),t(G)?(a(),l("div",fs,[t(G).type==="youtube"?(a(),l("div",ys,[e("iframe",{src:`https://www.youtube.com/embed/${t(G).id}`,class:"w-full h-full",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:"",title:"YouTube video player"},null,8,gs)])):t(G).type==="archive.org"?(a(),l("div",ks,[e("iframe",{src:`https://archive.org/embed/${t(G).id}`,class:"w-full h-full",frameborder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"",title:"Archive.org video player"},null,8,ws)])):n("",!0)])):n("",!0),t(r).metadata?(a(),l("div",_s,[t(r).metadata.Language?(a(),l("div",$s,[o[24]||(o[24]=e("h3",{class:"movie-label"},"Language",-1)),e("p",Ss,u(t(r).metadata.Language),1)])):n("",!0),t(r).metadata.Country?(a(),l("div",Cs,[o[25]||(o[25]=e("h3",{class:"movie-label"},"Country",-1)),e("p",Is,u(t(r).metadata.Country),1)])):n("",!0),t(r).metadata.Awards?(a(),l("div",Ms,[o[26]||(o[26]=e("h3",{class:"movie-label"},"Awards",-1)),e("p",As,u(t(r).metadata.Awards),1)])):n("",!0),t(r).imdbId?.startsWith("tt")?(a(),l("div",Rs,[o[27]||(o[27]=e("h3",{class:"movie-label"},"IMDB",-1)),e("a",{href:`https://www.imdb.com/title/${t(r).imdbId}/`,target:"_blank",rel:"noopener noreferrer",class:"text-theme-primary hover:underline"}," View on IMDB ",8,Ts)])):n("",!0)])):n("",!0),e("div",{ref_key:"relatedMoviesContainer",ref:U,class:"pt-8 border-t border-theme-border/50 min-h-[300px] group/related"},[t(k).length>0||t(R)?(a(),l("div",Ds,[o[30]||(o[30]=e("h2",{class:"text-2xl font-bold mb-6"},"Related Movies",-1)),e("div",Ps,[t(se)?(a(),l("button",{key:0,class:"absolute left-2 top-[calc(50%-2rem)] -translate-y-1/2 z-10 p-2 rounded-full bg-theme-surface/60 border border-theme-border/20 text-theme-text/50 shadow-sm hover:bg-theme-accent hover:text-black hover:border-theme-accent transition-all duration-200 hidden md:flex items-center justify-center opacity-0 group-hover/related:opacity-100 group-hover/related:animate-pulse",onClick:o[1]||(o[1]=m=>j("left"))},[...o[28]||(o[28]=[e("div",{class:"i-mdi-chevron-left text-2xl"},null,-1)])])):n("",!0),t(z)?(a(),l("button",{key:1,class:"absolute right-2 top-[calc(50%-2rem)] -translate-y-1/2 z-10 p-2 rounded-full bg-theme-surface/60 border border-theme-border/20 text-theme-text/50 shadow-sm hover:bg-theme-accent hover:text-black hover:border-theme-accent transition-all duration-200 hidden md:flex items-center justify-center opacity-0 group-hover/related:opacity-100 group-hover/related:animate-pulse",onClick:o[2]||(o[2]=m=>j("right"))},[...o[29]||(o[29]=[e("div",{class:"i-mdi-chevron-right text-2xl"},null,-1)])])):n("",!0),e("div",{ref_key:"relatedScrollContainer",ref:O,class:"flex gap-4 overflow-x-auto pb-4 pt-2 snap-x snap-mandatory hide-scrollbar scroll-smooth",onScroll:V},[t(k).length>0?(a(!0),l(S,{key:0},C(t(k),m=>(a(),l("div",{key:m.imdbId,class:"flex-shrink-0 w-48 snap-start"},[ce(T,{movie:m},null,8,["movie"])]))),128)):t(R)?(a(),l(S,{key:1},C(6,m=>e("div",{key:m,class:"flex-shrink-0 w-48 snap-start"},[ce(re)])),64)):n("",!0)],544)])])):n("",!0)],512),t(r)?(a(),_e(L,{key:3,movie:t(r),onUpdated:w},null,8,["movie"])):n("",!0)])):n("",!0)]),e("footer",zs,[e("div",Vs,[o[31]||(o[31]=e("p",null,"All movies are legally available from Archive.org and YouTube",-1)),e("button",{class:"mt-2 text-xs hover:underline",onClick:o[3]||(o[3]=m=>q.value=!0)}," Press ? for keyboard shortcuts ")])]),t(q)?(a(),l("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",onClick:o[6]||(o[6]=m=>q.value=!1)},[e("div",{class:"bg-theme-surface rounded-lg p-6 max-w-md w-full mx-4 border border-theme-border shadow-2xl",onClick:o[5]||(o[5]=Ue(()=>{},["stop"]))},[e("div",Bs,[o[33]||(o[33]=e("h3",{class:"text-xl font-bold text-theme-text"},"Keyboard Shortcuts",-1)),e("button",{class:"p-2 hover:bg-theme-selection rounded-full text-theme-text",onClick:o[4]||(o[4]=m=>q.value=!1)},[...o[32]||(o[32]=[e("div",{class:"i-mdi-close text-xl"},null,-1)])])]),o[34]||(o[34]=ke('<div class="space-y-3" data-v-6f86299a><div class="flex items-center justify-between" data-v-6f86299a><span class="text-theme-text" data-v-6f86299a>Go back to home</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-6f86299a>ESC</kbd></div><div class="flex items-center justify-between" data-v-6f86299a><span class="text-theme-text" data-v-6f86299a>Toggle liked</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-6f86299a>Space / Enter</kbd></div><div class="flex items-center justify-between" data-v-6f86299a><span class="text-theme-text" data-v-6f86299a>Previous movie</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-6f86299a>←</kbd></div><div class="flex items-center justify-between" data-v-6f86299a><span class="text-theme-text" data-v-6f86299a>Next movie</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-6f86299a>→</kbd></div><div class="flex items-center justify-between" data-v-6f86299a><span class="text-theme-text" data-v-6f86299a>Show this help</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-6f86299a>?</kbd></div></div>',1))])])):n("",!0)])}}}),Ws=Ke(Es,[["__scopeId","data-v-6f86299a"]]);export{Ws as default};
