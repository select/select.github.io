import{_ as Se}from"./D7YhVje4.js";import{g as Ce,v as Ae,W as N,E as C,c as a,a as e,L as u,t as n,P as R,d as b,a8 as w,o,M as P,N as D,a9 as Re,r as k,B as Y,e as F,aa as M,ab as W,H as q,z as t,T as Pe,a1 as De,ac as Oe,b as y,ad as ee,ae as Ve,u as Ee,J as Me,w as ue,F as ce}from"./CTFmONrv.js";import{_ as pe}from"./DzjZ10Kq.js";import{i as Te}from"./BH85bPq3.js";const je="$s";function te(...l){const r=typeof l[l.length-1]=="string"?l.pop():void 0;typeof l[0]!="string"&&l.unshift(r);const[s,d]=l;if(!s||typeof s!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+s);if(d!==void 0&&typeof d!="function")throw new Error("[nuxt] [useState] init must be a function: "+d);const i=je+s,g=Ce(),c=Ae(g.payload.state,i);if(c.value===void 0&&d){const m=d();if(N(m))return g.payload.state[i]=m,m;c.value=m}return c}const Fe={class:"p-4 rounded-xl shadow-sm border border-theme-border bg-theme-surface"},qe={class:"flex items-center justify-between mb-2"},Ie={class:"text-xs font-medium text-theme-textmuted uppercase tracking-wider"},Be={class:"text-2xl font-bold flex items-baseline gap-2"},Ue=["title"],Le={key:0,class:"mt-1 flex items-center gap-2"},Ne={class:"flex-1 h-1 bg-theme-border rounded-full overflow-hidden flex"},Ge={class:"text-[10px] font-medium"},Ye={key:1,class:"flex items-center justify-between text-[10px] mt-1"},He={key:0,class:"text-theme-textmuted"},ze=C({__name:"AdminStatsCard",props:{title:{},value:{},icon:{},iconColor:{default:"text-blue-500"},subtitle:{default:void 0},showProgress:{type:Boolean,default:!1},percent:{default:0},progressColor:{default:"bg-blue-500"},percentPrecision:{default:0},failed:{default:void 0},failedPercent:{default:void 0},failureRate:{default:void 0}},setup(l){return(r,s)=>(o(),a("div",Fe,[e("div",qe,[e("span",Ie,n(l.title),1),e("div",{class:R(["text-xl",[l.icon,l.iconColor]])},null,2)]),e("div",Be,[b(n(l.value.toLocaleString())+" ",1),l.failed&&l.failed>0?(o(),a("span",{key:0,class:"text-xs font-medium text-orange-500",title:`${l.failed} failed`}," +"+n(l.failed)+" failed ",9,Ue)):u("",!0)]),l.showProgress?(o(),a("div",Le,[e("div",Ne,[e("div",{class:R(["h-full transition-all duration-1000",l.progressColor]),style:w({width:`${l.percent}%`})},null,6),l.failed&&l.failed>0&&l.failedPercent!==void 0?(o(),a("div",{key:0,class:"h-full bg-orange-400 transition-all duration-1000",style:w({width:`${l.failedPercent}%`})},null,4)):u("",!0)]),e("span",Ge,n(l.percent?.toFixed(l.percentPrecision))+"%",1)])):u("",!0),l.subtitle||l.failureRate!==void 0&&l.failureRate>0?(o(),a("div",Ye,[l.subtitle?(o(),a("span",He,n(l.subtitle),1)):u("",!0),l.failureRate!==void 0&&l.failureRate>0?(o(),a("span",{key:1,class:R(l.failureRate>20?"text-red-500 font-bold":"text-orange-500")},n(l.failureRate.toFixed(1))+"% fail ",3)):u("",!0)])):u("",!0)]))}}),Qe=Object.assign(ze,{__name:"AdminStatsCard"}),Je={class:"space-y-4"},We={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ke={class:"flex items-center justify-between mb-2"},Xe={class:"text-sm font-bold truncate pr-2"},Ze=["title"],et={class:"text-xl font-bold flex items-baseline gap-2"},tt=["title"],st={class:"mt-1 flex items-center gap-2"},lt={class:"flex-1 h-1 bg-theme-border rounded-full overflow-hidden flex"},ot={class:"text-[10px] font-medium"},at={class:"flex items-center justify-between text-[10px] text-theme-textmuted mt-1"},nt=C({__name:"AdminYouTubeChannelStats",props:{channels:{}},setup(l){return(r,s)=>(o(),a("section",Je,[s[0]||(s[0]=e("h2",{class:"text-xl font-bold flex items-center gap-2"},[e("div",{class:"i-mdi-youtube text-red-500"}),b(" YouTube Channel Statistics ")],-1)),e("div",We,[(o(!0),a(P,null,D(l.channels,d=>(o(),a("div",{key:d.id,class:"p-4 rounded-xl shadow-sm border border-theme-border bg-theme-surface"},[e("div",Ke,[e("span",Xe,n(d.name),1),e("div",{class:R(["w-2 h-2 rounded-full",d.enabled?"bg-green-500":"bg-gray-300"]),title:d.enabled?"Enabled":"Disabled"},null,10,Ze)]),e("div",et,[b(n(d.scraped)+" ",1),d.failed?(o(),a("span",{key:0,class:"text-xs font-medium text-orange-500",title:`${d.failed} failed videos`}," +"+n(d.failed)+" failed ",9,tt)):u("",!0)]),e("div",st,[e("div",lt,[e("div",{class:"h-full bg-red-500 transition-all duration-1000",style:w({width:`${d.total>0?d.scraped/d.total*100:0}%`})},null,4),d.failed?(o(),a("div",{key:0,class:"h-full bg-orange-400 transition-all duration-1000",style:w({width:`${d.total>0?d.failed/d.total*100:0}%`})},null,4)):u("",!0)]),e("span",ot,n(d.total>0?(d.scraped/d.total*100).toFixed(0):0)+"%",1)]),e("div",at,[e("span",null,n(d.scraped)+" / "+n(d.total||"?")+" videos",1),d.failureRate?(o(),a("span",{key:0,class:R(d.failureRate>20?"text-red-500 font-bold":"text-orange-500")},n(d.failureRate.toFixed(1))+"% fail ",3)):u("",!0)])]))),128))])]))}}),dt=Object.assign(nt,{__name:"AdminYouTubeChannelStats"}),T=Re("admin",()=>{const l=k(!1),r=k(!1),s=k(!1),d=k(!1),i=k(!1),g=k(!1),c=k(null),m=k(null),x=k(null),S=k(null),O=k(null),I=k([]),U=k({}),h=Y({collections:["feature_films"]}),v=Y({limit:10,allPages:!1,channels:[]}),V=Y({limit:50,force:!1}),G=Y({limit:50,onlyUnmatched:!0,forceRetryFailed:!1}),$=Y({limit:100,onlyUnmatched:!0,forceReExtract:!1}),L=f=>{U.value[f.type]=f},le=f=>{delete U.value[f]},K=async()=>{try{const f=await $fetch("/api/admin/scrape/youtube-channels");I.value=f.channels}catch(f){window.console.error("Failed to load YouTube channels",f)}},E=async()=>{l.value=!0;try{c.value=await $fetch("/api/admin/scrape/stats")}catch(f){window.console.error("Failed to fetch stats",f)}finally{l.value=!1}},_=async()=>{r.value=!0,m.value=null;try{m.value=await $fetch("/api/admin/scrape/archive",{method:"POST",body:h}),await E()}catch(f){window.console.error("Archive scrape failed",f),m.value={processed:0,added:0,updated:0,errors:[f instanceof Error?f.message:String(f)]}}finally{r.value=!1}},oe=async()=>{r.value=!0,m.value=null;try{m.value=await $fetch("/api/admin/scrape/youtube",{method:"POST",body:v}),await E()}catch(f){window.console.error("YouTube scrape failed",f),m.value={processed:0,added:0,updated:0,errors:[f instanceof Error?f.message:String(f)]}}finally{r.value=!1}},ae=async()=>{r.value=!0,x.value=null;try{x.value=await $fetch("/api/admin/posters/download",{method:"POST",body:V}),await E()}catch(f){window.console.error("Poster download failed",f),x.value={processed:0,successful:0,failed:0,errors:[f instanceof Error?f.message:String(f)]}}finally{r.value=!1}},X=async()=>{r.value=!0,m.value=null;try{m.value=await $fetch("/api/admin/omdb/enrich",{method:"POST",body:G}),await E()}catch(f){window.console.error("OMDB enrichment failed",f),m.value={processed:0,added:0,updated:0,errors:[f instanceof Error?f.message:String(f)]}}finally{r.value=!1}},ne=async()=>{r.value=!0;try{(await $fetch("/api/admin/ai/extract-batch",{method:"POST",body:$})).success&&await E()}catch(f){window.console.error("AI extraction failed:",f)}finally{r.value=!1}},de=async(f={})=>{s.value=!0;try{await $fetch("/api/admin/sqlite/generate",{method:"POST",body:f})}catch(J){window.console.error("SQLite generation failed",J)}finally{s.value=!1}},re=async()=>{d.value=!0;try{await $fetch("/api/admin/home/generate",{method:"POST"})}catch(f){window.console.error("Home page generation failed",f)}finally{d.value=!1}},H=F(()=>{if(!c.value)return 0;const f=c.value.external.archiveOrg.total||0,J=c.value.external.youtube.totalAvailable||0;return f+J}),Z=F(()=>c.value&&c.value.external.youtube.totalScraped||0),B=F(()=>c.value&&c.value.external.youtube.totalAvailable||0),ie=F(()=>B.value===0?0:Z.value/B.value*100),z=F(()=>!c.value||H.value===0?0:c.value.database.total/H.value*100),p=F(()=>!c.value||B.value===0?0:(c.value.external.youtube.totalFailed||0)/B.value*100),Q=F(()=>!c.value||c.value.omdb.total===0?0:(c.value.omdb.failed||0)/c.value.omdb.total*100),j=F(()=>!c.value||c.value.posters.withPosterUrl===0?0:(c.value.posters.failed||0)/c.value.posters.withPosterUrl*100);return{loading:l,scraping:r,generatingSqlite:s,generatingHomePages:d,deduplicating:i,cleaningCollections:g,stats:c,results:m,posterResults:x,deduplicationResults:S,collectionCleanupResults:O,youtubeChannels:I,progress:U,archiveOptions:h,youtubeOptions:v,posterOptions:V,omdbOptions:G,aiOptions:$,updateProgress:L,clearProgress:le,loadYouTubeChannels:K,refreshStats:E,startArchiveScrape:_,startYouTubeScrape:oe,startPosterDownload:ae,startOMDBEnrichment:X,startAIExtraction:ne,generateSqlite:de,generateHomePages:re,deduplicateDescriptions:async()=>{i.value=!0,S.value=null;try{S.value=await $fetch("/api/admin/data/deduplicate-descriptions",{method:"POST"}),await E()}catch(f){window.console.error("Description deduplication failed",f),S.value={totalSources:0,sourcesWithDescriptions:0,boilerplateRemoved:0,sourcesProcessed:0,descriptionsRemoved:0,patterns:[]}}finally{i.value=!1}},cleanupCollections:async()=>{g.value=!0,O.value=null;try{O.value=await $fetch("/api/admin/collections/cleanup",{method:"POST"}),await E()}catch(f){window.console.error("Collection cleanup failed",f),O.value={success:!1,stats:{collectionsProcessed:0,moviesRemoved:0,moviesUpdated:0,collectionsModified:0},details:[]}}finally{g.value=!1}},totalExternalVideos:H,youtubeTotalScraped:Z,youtubeTotalAvailable:B,youtubePercent:ie,databasePercentOfTotal:z,youtubeFailedPercent:p,omdbFailedPercent:Q,postersFailedPercent:j}}),rt={class:"p-8 rounded-3xl shadow-lg border border-theme-border bg-theme-surface"},it={class:"space-y-6"},ut=["disabled"],ct={key:0,class:"i-mdi-loading animate-spin"},mt={key:1,class:"i-mdi-play"},bt={key:0,class:"mt-4 space-y-2"},gt={class:"flex items-center justify-between text-xs"},xt={class:"text-theme-textmuted truncate mr-2"},pt={class:"font-mono text-nowrap"},ft={class:"h-2 bg-theme-border rounded-full overflow-hidden"},vt=C({__name:"AdminArchiveScraper",props:M({loading:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:M(["start"],["update:modelValue"]),setup(l){W(l,"modelValue");const{progress:r}=q(T());return(s,d)=>(o(),a("div",rt,[d[2]||(d[2]=e("h2",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[e("div",{class:"i-mdi-archive text-amber-500"}),b(" Archive.org Scraper ")],-1)),e("div",it,[d[1]||(d[1]=e("p",{class:"text-theme-textmuted text-sm"},` Scrapes all available movies from Archive.org's "Feature Films" collection. Always fetches 500 rows per page to minimize API calls and scrapes all pages until completion. `,-1)),e("button",{class:"w-full py-3 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-2xl shadow-lg shadow-amber-500/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l.loading,onClick:d[0]||(d[0]=i=>s.$emit("start"))},[l.loading?(o(),a("div",ct)):(o(),a("div",mt)),b(" "+n(l.loading?"Scraping in progress...":"Start"),1)],8,ut),t(r).archive&&t(r).archive.status==="in_progress"?(o(),a("div",bt,[e("div",gt,[e("span",xt,n(t(r).archive.message),1),e("span",pt,n(t(r).archive.current)+" / "+n(t(r).archive.total),1)]),e("div",ft,[e("div",{class:"h-full bg-amber-500 transition-all duration-300",style:w({width:`${t(r).archive.current/t(r).archive.total*100}%`})},null,4)])])):u("",!0)])]))}}),ht=Object.assign(vt,{__name:"AdminArchiveScraper"}),yt={class:"p-8 rounded-3xl shadow-lg border border-theme-border bg-theme-surface"},_t={class:"space-y-6"},$t={class:"space-y-2"},kt=["value"],wt={class:"text-xs text-theme-textmuted"},St=["disabled"],Ct={key:0,class:"i-mdi-loading animate-spin"},At={key:1,class:"i-mdi-play"},Rt={key:0,class:"mt-4 space-y-3"},Pt={class:"flex items-center justify-between text-xs"},Dt={class:"text-theme-textmuted truncate mr-2"},Ot={class:"font-mono text-nowrap"},Vt={class:"h-3 bg-theme-border rounded-full overflow-hidden flex"},Et={class:"grid grid-cols-2 gap-2 text-[10px] font-medium"},Mt={class:"flex items-center gap-1 text-green-600 dark:text-green-400"},Tt={class:"flex items-center gap-1 text-orange-600 dark:text-orange-400"},jt=C({__name:"AdminYouTubeScraper",props:M({channels:{},loading:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:M(["start"],["update:modelValue"]),setup(l){const r=W(l,"modelValue"),{progress:s}=q(T());return(d,i)=>(o(),a("div",yt,[i[6]||(i[6]=e("h2",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[e("div",{class:"i-mdi-youtube text-red-500"}),b(" YouTube Scraper ")],-1)),e("div",_t,[e("div",$t,[i[2]||(i[2]=e("label",{class:"text-sm font-medium text-theme-textmuted"},"Select Channels",-1)),(o(!0),a(P,null,D(l.channels,g=>(o(),a("label",{key:g.id,class:"flex items-center gap-2 px-2 py-1 hover:bg-theme-selection rounded cursor-pointer text-sm"},[Pe(e("input",{"onUpdate:modelValue":i[0]||(i[0]=c=>r.value.channels=c),type:"checkbox",value:g.id,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,kt),[[De,r.value.channels]]),e("span",null,n(g.name),1),e("span",wt,"("+n(g.language)+")",1)]))),128)),i[3]||(i[3]=e("p",{class:"text-[10px] text-theme-textmuted"}," If none selected, all enabled channels will be processed. ",-1))]),e("button",{class:"w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-2xl shadow-lg shadow-red-600/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l.loading,onClick:i[1]||(i[1]=g=>d.$emit("start"))},[l.loading?(o(),a("div",Ct)):(o(),a("div",At)),b(" "+n(l.loading?"Scraping in progress...":"Start YouTube Scrape"),1)],8,St),t(s).youtube&&t(s).youtube.status==="in_progress"?(o(),a("div",Rt,[e("div",Pt,[e("span",Dt,n(t(s).youtube.message),1),e("span",Ot,n(t(s).youtube.current)+" / "+n(t(s).youtube.total||"?"),1)]),e("div",Vt,[t(s).youtube.total?(o(),a("div",{key:0,class:"h-full bg-green-500 transition-all duration-300",style:w({width:`${(t(s).youtube.successCurrent||0)/t(s).youtube.total*100}%`}),title:"Success"},null,4)):u("",!0),t(s).youtube.total?(o(),a("div",{key:1,class:"h-full bg-orange-500 transition-all duration-300",style:w({width:`${(t(s).youtube.failedCurrent||0)/t(s).youtube.total*100}%`}),title:"Failed"},null,4)):u("",!0),t(s).youtube.total?(o(),a("div",{key:2,class:"h-full bg-red-600/20 transition-all duration-300",style:w({width:`${Math.max(0,t(s).youtube.current-(t(s).youtube.successCurrent||0)-(t(s).youtube.failedCurrent||0))/t(s).youtube.total*100}%`})},null,4)):u("",!0)]),e("div",Et,[e("div",Mt,[i[4]||(i[4]=e("div",{class:"i-mdi-check-circle"},null,-1)),b(" Success: "+n((t(s).youtube.successCurrent||0)+(t(s).youtube.successPrevious||0)),1)]),e("div",Tt,[i[5]||(i[5]=e("div",{class:"i-mdi-alert-circle"},null,-1)),b(" Failed: "+n((t(s).youtube.failedCurrent||0)+(t(s).youtube.failedPrevious||0)),1)])])])):u("",!0)])]))}}),Ft=Object.assign(jt,{__name:"AdminYouTubeScraper"}),qt={class:"space-y-2"},It={key:0,class:"text-sm font-medium text-theme-textmuted"},Bt=["value","min","max","step","disabled","placeholder"],Ut=C({__name:"AppInputNumber",props:{modelValue:{},label:{default:void 0},min:{default:void 0},max:{default:void 0},step:{default:1},disabled:{type:Boolean,default:!1},placeholder:{default:void 0}},emits:["update:modelValue"],setup(l,{emit:r}){const s=r,d=i=>{const g=i.target;s("update:modelValue",Number(g.value))};return(i,g)=>(o(),a("div",qt,[l.label?(o(),a("label",It,n(l.label),1)):u("",!0),e("input",{value:l.modelValue,type:"number",min:l.min,max:l.max,step:l.step,disabled:l.disabled,placeholder:l.placeholder,class:R(["w-full px-4 py-2 bg-theme-surface border border-theme-border rounded-xl focus:ring-2 focus:ring-theme-primary outline-none transition-colors [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",{"opacity-50 cursor-not-allowed":l.disabled}]),onInput:d},null,42,Bt)]))}}),se=Object.assign(Ut,{__name:"AppInputNumber"}),Lt={class:"relative"},Nt=["checked","disabled"],Gt=C({__name:"AppInputSwitch",props:{checked:{type:Boolean},label:{default:void 0},disabled:{type:Boolean,default:!1}},emits:["change"],setup(l,{emit:r}){const s=r,d=i=>{const g=i.target;s("change",g.checked)};return(i,g)=>(o(),a("label",{class:R(["flex items-center gap-3 cursor-pointer group",{"opacity-50 cursor-not-allowed":l.disabled}])},[e("div",Lt,[e("input",{checked:l.checked,type:"checkbox",disabled:l.disabled,class:"sr-only peer",onChange:d},null,40,Nt),g[0]||(g[0]=e("div",{class:"w-10 h-6 bg-theme-border rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-1 after:left-1 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-theme-primary"},null,-1))]),l.label?(o(),a("span",{key:0,class:R(["text-sm font-medium text-theme-text group-hover:text-theme-primary transition-colors",{"text-gray-500":l.disabled}])},n(l.label),3)):u("",!0),Oe(i.$slots,"default")],2))}}),me=Object.assign(Gt,{__name:"AppInputSwitch"}),Yt={class:"p-8 rounded-3xl shadow-lg border border-theme-border bg-theme-surface"},Ht={class:"space-y-6"},zt={class:"flex flex-col gap-3"},Qt=["disabled"],Jt={key:0,class:"i-mdi-loading animate-spin"},Wt={key:1,class:"i-mdi-database-sync"},Kt={key:0,class:"mt-4 space-y-3"},Xt={class:"flex items-center justify-between text-xs"},Zt={class:"text-theme-textmuted truncate mr-2"},es={class:"font-mono text-nowrap"},ts={class:"h-3 bg-theme-border rounded-full overflow-hidden flex"},ss={class:"grid grid-cols-2 gap-2 text-[10px] font-medium"},ls={class:"flex items-center gap-1 text-green-600 dark:text-green-400"},os={class:"flex items-center gap-1 text-orange-600 dark:text-orange-400"},as=C({__name:"AdminOMDBEnrichment",props:M({loading:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:M(["start"],["update:modelValue"]),setup(l){const r=W(l,"modelValue"),{progress:s}=q(T());return(d,i)=>{const g=se,c=me;return o(),a("div",Yt,[i[6]||(i[6]=e("h2",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[e("div",{class:"i-mdi-database-sync text-green-600"}),b(" OMDB Enrichment ")],-1)),e("div",Ht,[y(g,{modelValue:r.value.limit,"onUpdate:modelValue":i[0]||(i[0]=m=>r.value.limit=m),label:"Enrichment limit"},null,8,["modelValue"]),e("div",zt,[y(c,{checked:r.value.onlyUnmatched,label:"Only unmatched movies",onChange:i[1]||(i[1]=m=>r.value.onlyUnmatched=m)},null,8,["checked"]),y(c,{checked:r.value.forceRetryFailed,label:"Force retry failed matches",onChange:i[2]||(i[2]=m=>r.value.forceRetryFailed=m)},null,8,["checked"])]),e("button",{class:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-2xl shadow-lg shadow-green-600/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l.loading,onClick:i[3]||(i[3]=m=>d.$emit("start"))},[l.loading?(o(),a("div",Jt)):(o(),a("div",Wt)),b(" "+n(l.loading?"Enriching...":"Enrich with OMDB"),1)],8,Qt),t(s).omdb&&(t(s).omdb.status==="in_progress"||t(s).omdb.status==="starting")?(o(),a("div",Kt,[e("div",Xt,[e("span",Zt,n(t(s).omdb.message),1),e("span",es,n(t(s).omdb.current)+" / "+n(t(s).omdb.total||"?"),1)]),e("div",ts,[t(s).omdb.total?(o(),a("div",{key:0,class:"h-full bg-green-500 transition-all duration-300",style:w({width:`${(t(s).omdb.successCurrent||0)/t(s).omdb.total*100}%`}),title:"Success"},null,4)):u("",!0),t(s).omdb.total?(o(),a("div",{key:1,class:"h-full bg-orange-500 transition-all duration-300",style:w({width:`${(t(s).omdb.failedCurrent||0)/t(s).omdb.total*100}%`}),title:"Failed"},null,4)):u("",!0),t(s).omdb.total?(o(),a("div",{key:2,class:"h-full bg-red-600/20 transition-all duration-300",style:w({width:`${Math.max(0,t(s).omdb.current-(t(s).omdb.successCurrent||0)-(t(s).omdb.failedCurrent||0))/t(s).omdb.total*100}%`})},null,4)):u("",!0)]),e("div",ss,[e("div",ls,[i[4]||(i[4]=e("div",{class:"i-mdi-check-circle"},null,-1)),b(" Success: "+n(t(s).omdb.successCurrent||0),1)]),e("div",os,[i[5]||(i[5]=e("div",{class:"i-mdi-alert-circle"},null,-1)),b(" Failed: "+n(t(s).omdb.failedCurrent||0),1)])])])):u("",!0)])])}}}),ns=Object.assign(as,{__name:"AdminOMDBEnrichment"}),ds={class:"p-8 rounded-3xl shadow-lg border border-theme-border bg-theme-surface"},rs={class:"space-y-6"},is={class:"flex flex-col gap-3"},us=["disabled"],cs={key:0,class:"i-mdi-loading animate-spin"},ms={key:1,class:"i-mdi-robot"},bs={key:0,class:"mt-4 space-y-3"},gs={class:"flex items-center justify-between text-xs"},xs={class:"text-theme-textmuted truncate mr-2"},ps={class:"font-mono text-nowrap"},fs={class:"h-3 bg-theme-border rounded-full overflow-hidden flex"},vs={class:"grid grid-cols-2 gap-2 text-[10px] font-medium"},hs={class:"flex items-center gap-1 text-purple-600 dark:text-purple-400"},ys={class:"flex items-center gap-1 text-orange-600 dark:text-orange-400"},_s=C({__name:"AdminAIExtractor",props:M({loading:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:M(["start"],["update:modelValue"]),setup(l){const r=W(l,"modelValue"),s=T(),{progress:d}=q(s);return(i,g)=>{const c=se,m=me;return o(),a("div",ds,[g[6]||(g[6]=e("h2",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[e("div",{class:"i-mdi-robot text-purple-600"}),b(" AI Metadata Extraction ")],-1)),e("div",rs,[y(c,{modelValue:r.value.limit,"onUpdate:modelValue":g[0]||(g[0]=x=>r.value.limit=x),label:"Extraction limit"},null,8,["modelValue"]),e("div",is,[y(m,{checked:r.value.onlyUnmatched,label:"Only unmatched movies",onChange:g[1]||(g[1]=x=>r.value.onlyUnmatched=x)},null,8,["checked"]),y(m,{checked:r.value.forceReExtract,label:"Force re-extract existing AI data",onChange:g[2]||(g[2]=x=>r.value.forceReExtract=x)},null,8,["checked"])]),e("button",{class:"w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-2xl shadow-lg shadow-purple-600/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l.loading,onClick:g[3]||(g[3]=x=>i.$emit("start"))},[l.loading?(o(),a("div",cs)):(o(),a("div",ms)),b(" "+n(l.loading?"Extracting...":"Extract with AI"),1)],8,us),t(d).ai&&(t(d).ai.status==="in_progress"||t(d).ai.status==="starting")?(o(),a("div",bs,[e("div",gs,[e("span",xs,n(t(d).ai.message),1),e("span",ps,n(t(d).ai.current)+" / "+n(t(d).ai.total||"?"),1)]),e("div",fs,[t(d).ai.total?(o(),a("div",{key:0,class:"h-full bg-purple-500 transition-all duration-300",style:w({width:`${(t(d).ai.successCurrent||0)/t(d).ai.total*100}%`}),title:"Success"},null,4)):u("",!0),t(d).ai.total?(o(),a("div",{key:1,class:"h-full bg-orange-500 transition-all duration-300",style:w({width:`${(t(d).ai.failedCurrent||0)/t(d).ai.total*100}%`}),title:"Failed"},null,4)):u("",!0)]),e("div",vs,[e("div",hs,[g[4]||(g[4]=e("div",{class:"i-mdi-check-circle"},null,-1)),b(" Success: "+n(t(d).ai.successCurrent||0),1)]),e("div",ys,[g[5]||(g[5]=e("div",{class:"i-mdi-alert-circle"},null,-1)),b(" Failed: "+n(t(d).ai.failedCurrent||0),1)])])])):u("",!0)])])}}}),$s=Object.assign(_s,{__name:"AdminAIExtractor"}),ks={class:"p-8 rounded-3xl shadow-lg border border-theme-border bg-theme-surface"},ws={class:"space-y-6"},Ss={class:"flex flex-col gap-3"},Cs=["disabled"],As={key:0,class:"i-mdi-loading animate-spin"},Rs={key:1,class:"i-mdi-download"},Ps={key:0,class:"mt-4 space-y-2"},Ds={class:"flex items-center justify-between text-xs"},Os={class:"text-theme-textmuted truncate mr-2"},Vs={class:"font-mono text-nowrap"},Es={class:"h-2 bg-theme-border rounded-full overflow-hidden"},Ms=C({__name:"AdminPosterDownloader",props:M({loading:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:M(["start"],["update:modelValue"]),setup(l){const r=W(l,"modelValue"),{progress:s}=q(T());return(d,i)=>{const g=se,c=me;return o(),a("div",ks,[i[3]||(i[3]=e("h2",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[e("div",{class:"i-mdi-image-multiple text-purple-500"}),b(" Poster Downloader ")],-1)),e("div",ws,[y(g,{modelValue:r.value.limit,"onUpdate:modelValue":i[0]||(i[0]=m=>r.value.limit=m),label:"Download limit"},null,8,["modelValue"]),e("div",Ss,[y(c,{checked:r.value.force,label:"Force re-download",onChange:i[1]||(i[1]=m=>r.value.force=m)},null,8,["checked"])]),e("button",{class:"w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-2xl shadow-lg shadow-purple-600/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l.loading,onClick:i[2]||(i[2]=m=>d.$emit("start"))},[l.loading?(o(),a("div",As)):(o(),a("div",Rs)),b(" "+n(l.loading?"Downloading...":"Download Posters"),1)],8,Cs),t(s).posters&&t(s).posters.status==="in_progress"?(o(),a("div",Ps,[e("div",Ds,[e("span",Os,n(t(s).posters.message),1),e("span",Vs,n(t(s).posters.current)+" / "+n(t(s).posters.total),1)]),e("div",Es,[e("div",{class:"h-full bg-purple-500 transition-all duration-300",style:w({width:`${t(s).posters.current/t(s).posters.total*100}%`})},null,4)])])):u("",!0)])])}}}),Ts=Object.assign(Ms,{__name:"AdminPosterDownloader"}),js={class:"bg-theme-surface p-6 rounded-xl border border-theme-border shadow-sm"},Fs={class:"space-y-4"},qs={key:0,class:"space-y-2"},Is={class:"flex items-center justify-between text-xs"},Bs={class:"text-theme-textmuted truncate mr-2"},Us={class:"font-mono text-nowrap"},Ls={class:"h-2 bg-theme-border rounded-full overflow-hidden"},Ns={key:0,class:"space-y-3"},Gs={class:"flex items-start gap-2"},Ys={class:"flex-1"},Hs={class:"text-sm text-green-700 dark:text-green-300 mt-1"},zs={key:0,class:"mt-3 space-y-2"},Qs={class:"space-y-1"},Js={class:"font-mono text-green-700 dark:text-green-300"},Ws={class:"text-green-600 dark:text-green-400"},Ks={key:1,class:"flex items-start gap-2"},Xs={class:"text-sm text-red-700 dark:text-red-300 mt-1"},Zs=["disabled"],el=C({__name:"AdminPosterArchiver",setup(l){const r=k(!1),s=k(null),{progress:d}=q(T());async function i(){r.value=!0,s.value=null;try{const g=await $fetch("/api/admin/posters/archive",{method:"POST"});s.value=g}catch(g){s.value={success:!1,archivesCreated:0,totalPosters:0,totalSize:"0 B",archives:[],error:g instanceof Error?g.message:"Unknown error occurred"}}finally{r.value=!1}}return(g,c)=>(o(),a("div",js,[c[6]||(c[6]=e("h3",{class:"text-xl font-semibold mb-4 flex items-center gap-2"},[e("div",{class:"i-mdi-archive text-purple-600"}),b(" Poster Archiver ")],-1)),e("div",Fs,[c[5]||(c[5]=e("p",{class:"text-sm text-theme-textmuted"},[b(" Create tar.gz archives of all posters. Archives are split into <50MB chunks and saved to the "),e("code",{class:"px-1 py-0.5 bg-theme-background rounded text-xs"},"/data"),b(" directory. ")],-1)),t(d).posterArchive&&t(d).posterArchive.status==="in_progress"?(o(),a("div",qs,[e("div",Is,[e("span",Bs,n(t(d).posterArchive.message),1),e("span",Us,n(t(d).posterArchive.current)+" / "+n(t(d).posterArchive.total),1)]),e("div",Ls,[e("div",{class:"h-full bg-purple-500 transition-all duration-300",style:w({width:`${t(d).posterArchive.current/t(d).posterArchive.total*100}%`})},null,4)])])):u("",!0),t(s)?(o(),a("div",{key:1,class:R(["p-4 rounded-lg border",t(s).success?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"])},[t(s).success?(o(),a("div",Ns,[e("div",Gs,[c[1]||(c[1]=e("div",{class:"i-mdi-check-circle text-green-600 dark:text-green-400 text-xl flex-shrink-0 mt-0.5"},null,-1)),e("div",Ys,[c[0]||(c[0]=e("p",{class:"font-semibold text-green-800 dark:text-green-200"}," Archives Created Successfully ",-1)),e("p",Hs," Created "+n(t(s).archivesCreated)+" archive"+n(t(s).archivesCreated!==1?"s":"")+" containing "+n(t(s).totalPosters)+" posters ("+n(t(s).totalSize)+") ",1)])]),t(s).archives.length>0?(o(),a("div",zs,[c[2]||(c[2]=e("p",{class:"text-xs font-semibold text-green-800 dark:text-green-200 uppercase"}," Archives: ",-1)),e("div",Qs,[(o(!0),a(P,null,D(t(s).archives,m=>(o(),a("div",{key:m.filename,class:"flex items-center justify-between text-xs bg-white dark:bg-gray-800 p-2 rounded border border-green-200 dark:border-green-700"},[e("span",Js,n(m.filename),1),e("span",Ws,n(m.posterCount)+" posters â€¢ "+n(m.size),1)]))),128))])])):u("",!0)])):(o(),a("div",Ks,[c[4]||(c[4]=e("div",{class:"i-mdi-alert-circle text-red-600 dark:text-red-400 text-xl flex-shrink-0 mt-0.5"},null,-1)),e("div",null,[c[3]||(c[3]=e("p",{class:"font-semibold text-red-800 dark:text-red-200"},"Archive Creation Failed",-1)),e("p",Xs,n(t(s).error),1)])]))],2)):u("",!0),e("button",{class:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2 font-medium",disabled:t(r),onClick:i},[e("div",{class:R(["i-mdi-archive",{"animate-spin":t(r)}])},null,2),b(" "+n(t(r)?"Creating Archives...":"Create Archives"),1)],8,Zs)])]))}}),tl=Object.assign(el,{__name:"AdminPosterArchiver"}),sl={class:"p-8 rounded-3xl shadow-lg border border-theme-border bg-theme-surface"},ll={class:"space-y-6"},ol={class:"space-y-3"},al=["disabled"],nl={key:0,class:"i-mdi-loading animate-spin"},dl={key:1,class:"i-mdi-play"},rl={key:0,class:"p-3 rounded-xl bg-green-500/10 border border-green-500/20 flex items-center gap-2 text-sm text-green-500"},il={key:1,class:"p-3 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center gap-2 text-sm text-red-500"},ul=C({__name:"AdminDatabaseGenerator",setup(l){const r=T(),{progress:s,generatingSqlite:d}=q(r),i=k(!1);async function g(){r.updateProgress({type:"sqlite",status:"starting",current:0,total:0,message:"Starting SQLite generation..."}),await r.generateSqlite({skipJsonGeneration:i.value})}return(c,m)=>{const x=pe;return o(),a("div",sl,[m[5]||(m[5]=e("h2",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[e("div",{class:"i-mdi-database-export text-blue-500"}),b(" SQLite Database Generation ")],-1)),e("div",ll,[m[4]||(m[4]=e("p",{class:"text-theme-textmuted text-sm"}," Generates the main SQLite database (movies.db) used for the frontend. This contains movie data, collections, and full-text search indexes. Embeddings are stored separately and generated via the Embeddings Generator above. ",-1)),e("div",ol,[y(x,{modelValue:t(i),"onUpdate:modelValue":m[0]||(m[0]=S=>N(i)?i.value=S:null),label:"Skip individual movie JSON generation",disabled:t(d)},null,8,["modelValue","disabled"]),m[1]||(m[1]=e("p",{class:"text-xs text-theme-textmuted px-7 -mt-2"}," Faster if you only need to update the SQLite database and JSON files are already up-to-date. ",-1))]),e("button",{class:"w-full py-3 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-2xl shadow-lg shadow-blue-500/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:t(d),onClick:g},[t(d)?(o(),a("div",nl)):(o(),a("div",dl)),b(" "+n(t(d)?"Generating Database...":"Start SQLite Generation"),1)],8,al),t(s).sqlite?.status==="completed"?(o(),a("div",rl,[m[2]||(m[2]=e("div",{class:"i-mdi-check-circle"},null,-1)),b(" "+n(t(s).sqlite.message),1)])):u("",!0),t(s).sqlite?.status==="error"?(o(),a("div",il,[m[3]||(m[3]=e("div",{class:"i-mdi-alert-circle"},null,-1)),b(" "+n(t(s).sqlite.message),1)])):u("",!0)])])}}}),cl=Object.assign(ul,{__name:"AdminDatabaseGenerator"}),ml={class:"p-8 rounded-3xl shadow-lg border border-theme-border bg-theme-surface"},bl={class:"space-y-6"},gl={class:"space-y-3"},xl={class:"space-y-2"},pl={key:0,class:"text-[10px] text-amber-600 dark:text-amber-400 ml-6 -mt-1"},fl={class:"flex items-center gap-2 mt-2"},vl=["disabled"],hl=["disabled"],yl={class:"space-y-3"},_l=["disabled"],$l={key:0,class:"i-mdi-loading animate-spin"},kl={key:1,class:"i-mdi-vector-square"},wl={key:0,class:"mt-4 space-y-3"},Sl={class:"flex items-center justify-between text-xs"},Cl={class:"text-theme-textmuted truncate mr-2"},Al={class:"font-mono text-nowrap"},Rl={class:"h-3 bg-theme-border rounded-full overflow-hidden flex"},Pl={class:"grid grid-cols-2 md:grid-cols-4 gap-2 text-[10px] font-medium"},Dl={class:"flex items-center gap-1 text-green-600 dark:text-green-400"},Ol={class:"flex items-center gap-1 text-red-600 dark:text-red-400"},Vl={key:0,class:"flex items-center gap-1 text-indigo-600 dark:text-indigo-400"},El={key:1,class:"flex items-center gap-1 text-amber-600 dark:text-amber-400"},Ml={key:0,class:"p-2 rounded-lg bg-red-500/10 border border-red-500/20 text-xs text-red-600 dark:text-red-400"},Tl={class:"font-mono"},jl={key:1,class:"p-4 rounded-xl bg-green-500/10 border border-green-500/20"},Fl={class:"space-y-1 text-xs text-theme-textmuted"},ql={key:0,class:"text-red-500"},Il={key:2,class:"p-3 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center gap-2 text-sm text-red-500"},Bl={key:3,class:"space-y-2"},Ul=C({__name:"AdminEmbeddingsGenerator",setup(l){const{progress:r}=q(T()),s=k(ee.reduce((h,v)=>(h[v.id]=v.id==="bge-micro"||v.id==="potion",h),{})),d=k(!1),i=k(null),g=k([]),c=Y({limit:0,forceRebuild:!1});function m(h){return`${h.name} (${h.dimensions}D)`}function x(){ee.forEach(h=>{s.value[h.id]=!0})}function S(){ee.forEach(h=>{s.value[h.id]=!1})}function O(h){return Ve(h)?.name||h}function I(h){if(h<60)return`${h}s`;if(h<3600)return`${Math.floor(h/60)}m ${h%60}s`;const v=Math.floor(h/3600),V=Math.floor(h%3600/60);return`${v}h ${V}m`}async function U(){d.value=!0,i.value=null,g.value=[];try{const h=await $fetch("/api/admin/embeddings/generate",{method:"POST",body:{models:Object.keys(s.value).filter(v=>s.value[v]),limit:c.limit||void 0,forceRebuild:c.forceRebuild}});i.value=h.results,h.errors.length>0&&(g.value=h.errors)}catch(h){g.value=[h instanceof Error?h.message:"Failed to generate embeddings"]}finally{d.value=!1}}return(h,v)=>{const V=pe,G=se;return o(),a("div",ml,[v[12]||(v[12]=e("h2",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[e("div",{class:"i-mdi-vector-square text-indigo-500"}),b(" Embeddings Generator ")],-1)),e("div",bl,[v[11]||(v[11]=e("p",{class:"text-theme-textmuted text-sm"}," Generate vector embeddings for semantic search. Select one or more models to generate embeddings. Existing embeddings are automatically skipped. ",-1)),e("div",gl,[v[3]||(v[3]=e("label",{class:"text-sm font-medium text-theme-textmuted"},"Select Models",-1)),e("div",xl,[(o(!0),a(P,null,D(t(ee),$=>(o(),a("div",{key:$.id},[y(V,{modelValue:t(s)[$.id],"onUpdate:modelValue":L=>t(s)[$.id]=L,label:m($),disabled:t(d)},null,8,["modelValue","onUpdate:modelValue","label","disabled"]),$.id==="nomic"?(o(),a("p",pl," Requires Ollama server running locally (slow) ")):u("",!0)]))),128))]),e("div",fl,[e("button",{class:"text-xs text-indigo-500 hover:text-indigo-600 underline",disabled:t(d),onClick:x}," Select All ",8,vl),v[2]||(v[2]=e("span",{class:"text-theme-textmuted"},"|",-1)),e("button",{class:"text-xs text-theme-textmuted hover:text-theme-text underline",disabled:t(d),onClick:S}," Clear ",8,hl)])]),e("div",yl,[y(G,{modelValue:t(c).limit,"onUpdate:modelValue":v[0]||(v[0]=$=>t(c).limit=$),label:"Limit (0 = no limit)",disabled:t(d)},null,8,["modelValue","disabled"]),y(V,{modelValue:t(c).forceRebuild,"onUpdate:modelValue":v[1]||(v[1]=$=>t(c).forceRebuild=$),label:"Force rebuild (delete existing databases)",disabled:t(d)},null,8,["modelValue","disabled"])]),e("button",{class:"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white font-bold rounded-2xl shadow-lg shadow-indigo-500/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:t(d)||!Object.values(t(s)).some($=>$),onClick:U},[t(d)?(o(),a("div",$l)):(o(),a("div",kl)),b(" "+n(t(d)?"Generating Embeddings...":"Generate Embeddings"),1)],8,_l),t(r).embeddings&&(t(r).embeddings.status==="in_progress"||t(r).embeddings.status==="starting")?(o(),a("div",wl,[e("div",Sl,[e("span",Cl,n(t(r).embeddings.message),1),e("span",Al,n(t(r).embeddings.current)+" / "+n(t(r).embeddings.total||"?"),1)]),e("div",Rl,[t(r).embeddings.total?(o(),a("div",{key:0,class:"h-full bg-indigo-500 transition-all duration-300",style:w({width:`${(t(r).embeddings.successCurrent||0)/t(r).embeddings.total*100}%`}),title:"Success"},null,4)):u("",!0),t(r).embeddings.total&&t(r).embeddings.failedCurrent?(o(),a("div",{key:1,class:"h-full bg-red-500 transition-all duration-300",style:w({width:`${t(r).embeddings.failedCurrent/t(r).embeddings.total*100}%`}),title:"Failed"},null,4)):u("",!0)]),e("div",Pl,[e("div",Dl,[v[4]||(v[4]=e("div",{class:"i-mdi-check-circle"},null,-1)),b(" Success: "+n(t(r).embeddings.successCurrent||0),1)]),e("div",Ol,[v[5]||(v[5]=e("div",{class:"i-mdi-alert-circle"},null,-1)),b(" Failed: "+n(t(r).embeddings.failedCurrent||0),1)]),t(r).embeddings.embeddingsPerSecond?(o(),a("div",Vl,[v[6]||(v[6]=e("div",{class:"i-mdi-speedometer"},null,-1)),b(" "+n(t(r).embeddings.embeddingsPerSecond)+" emb/s ",1)])):u("",!0),t(r).embeddings.estimatedTimeRemaining?(o(),a("div",El,[v[7]||(v[7]=e("div",{class:"i-mdi-timer-outline"},null,-1)),b(" ETA: "+n(I(t(r).embeddings.estimatedTimeRemaining)),1)])):u("",!0)]),t(r).embeddings.lastError?(o(),a("div",Ml,[e("span",Tl,n(t(r).embeddings.lastError),1)])):u("",!0)])):u("",!0),t(r).embeddings?.status==="completed"&&t(i)?(o(),a("div",jl,[v[8]||(v[8]=e("div",{class:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400 mb-2"},[e("div",{class:"i-mdi-check-circle"}),e("span",{class:"font-bold"},"Generation Complete")],-1)),e("div",Fl,[(o(!0),a(P,null,D(t(i),$=>(o(),a("div",{key:$.model,class:"flex justify-between"},[e("span",null,n(O($.model))+":",1),e("span",null,[b(n($.processed)+" new, "+n($.skipped)+" skipped, ",1),$.failed>0?(o(),a("span",ql,n($.failed)+" failed,",1)):u("",!0),b(" "+n($.totalInDb)+" total ",1)])]))),128))])])):u("",!0),t(r).embeddings?.status==="error"?(o(),a("div",Il,[v[9]||(v[9]=e("div",{class:"i-mdi-alert-circle"},null,-1)),b(" "+n(t(r).embeddings.message),1)])):u("",!0),t(g).length>0?(o(),a("div",Bl,[(o(!0),a(P,null,D(t(g),($,L)=>(o(),a("div",{key:L,class:"p-3 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center gap-2 text-sm text-amber-600 dark:text-amber-400"},[v[10]||(v[10]=e("div",{class:"i-mdi-alert"},null,-1)),b(" "+n($),1)]))),128))])):u("",!0)])])}}}),Ll=Object.assign(Ul,{__name:"AdminEmbeddingsGenerator"}),Nl={class:"bg-theme-surface rounded-3xl border border-theme-border p-6"},Gl={class:"mb-4"},Yl=["disabled"],Hl={key:0,class:"space-y-4"},zl={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Ql={class:"bg-theme-background rounded-lg p-3"},Jl={class:"text-xl font-semibold"},Wl={class:"bg-theme-background rounded-lg p-3"},Kl={class:"text-xl font-semibold"},Xl={class:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3"},Zl={class:"text-xl font-semibold text-orange-700 dark:text-orange-300"},eo={class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3"},to={class:"text-xl font-semibold text-green-700 dark:text-green-300"},so={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3"},lo={class:"text-xl font-semibold text-blue-700 dark:text-blue-300"},oo={class:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3"},ao={class:"text-xl font-semibold text-purple-700 dark:text-purple-300"},no={key:0,class:"space-y-2"},ro={class:"space-y-2 max-h-64 overflow-y-auto"},io={class:"flex items-center justify-between mb-2"},uo={class:"text-sm font-medium text-theme-text"},co={class:"text-xs text-theme-textmuted font-mono bg-theme-surface px-2 py-1 rounded"},mo={class:"text-sm text-theme-textmuted"},bo={key:1,class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"},go={class:"flex items-center gap-2"},xo={class:"text-green-800 dark:text-green-200"},po={key:2,class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},fo=C({__name:"AdminDataDeduplication",props:{loading:{type:Boolean},results:{}},emits:["start"],setup(l){return(r,s)=>(o(),a("div",Nl,[e("div",Gl,[s[1]||(s[1]=e("div",null,[e("h3",{class:"text-lg font-semibold flex items-center gap-2"},[e("div",{class:"i-mdi-broom text-orange-500"}),b(" Smart Description Cleanup ")]),e("p",{class:"text-sm text-theme-textmuted mt-1"}," Remove boilerplate and promotional descriptions using pattern detection ")],-1)),e("button",{class:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.loading,onClick:s[0]||(s[0]=d=>r.$emit("start"))},[e("div",{class:R(["i-mdi-broom",{"animate-pulse":l.loading}])},null,2),b(" "+n(l.loading?"Processing...":"Clean Descriptions"),1)],8,Yl)]),l.results?(o(),a("div",Hl,[e("div",zl,[e("div",Ql,[s[2]||(s[2]=e("div",{class:"text-sm text-theme-textmuted"},"Total Sources",-1)),e("div",Jl,n(l.results.totalSources.toLocaleString()),1)]),e("div",Wl,[s[3]||(s[3]=e("div",{class:"text-sm text-theme-textmuted"},"With Descriptions",-1)),e("div",Kl,n(l.results.sourcesWithDescriptions.toLocaleString()),1)]),e("div",Xl,[s[4]||(s[4]=e("div",{class:"text-sm text-orange-600 dark:text-orange-400"},"Patterns Found",-1)),e("div",Zl,n(l.results.patterns.length),1)]),e("div",eo,[s[5]||(s[5]=e("div",{class:"text-sm text-green-600 dark:text-green-400"},"Sources Processed",-1)),e("div",to,n(l.results.sourcesProcessed.toLocaleString()),1)]),e("div",so,[s[6]||(s[6]=e("div",{class:"text-sm text-blue-600 dark:text-blue-400"},"Boilerplate Removed",-1)),e("div",lo,n(l.results.boilerplateRemoved.toLocaleString()),1)]),e("div",oo,[s[7]||(s[7]=e("div",{class:"text-sm text-purple-600 dark:text-purple-400"},"Cleanup Rate",-1)),e("div",ao,n((l.results.boilerplateRemoved/l.results.sourcesWithDescriptions*100).toFixed(1))+"% ",1)])]),l.results.patterns.length>0?(o(),a("div",no,[s[8]||(s[8]=e("h4",{class:"font-medium text-theme-text"},"Boilerplate Patterns Detected & Removed",-1)),e("div",ro,[(o(!0),a(P,null,D(l.results.patterns,(d,i)=>(o(),a("div",{key:i,class:"bg-theme-background rounded-lg p-3"},[e("div",io,[e("span",uo,n(d.count.toLocaleString())+" instances removed ",1),e("span",co,n(d.pattern),1)]),e("div",mo,n(d.description),1)]))),128))])])):u("",!0),l.results.boilerplateRemoved>0?(o(),a("div",bo,[e("div",go,[s[9]||(s[9]=e("div",{class:"i-mdi-check-circle text-green-500"},null,-1)),e("div",xo," Successfully removed "+n(l.results.boilerplateRemoved.toLocaleString())+" boilerplate descriptions using "+n(l.results.patterns.length)+" detection patterns. ",1)])])):l.results.boilerplateRemoved===0?(o(),a("div",po,[...s[10]||(s[10]=[e("div",{class:"flex items-center gap-2"},[e("div",{class:"i-mdi-information text-blue-500"}),e("div",{class:"text-blue-800 dark:text-blue-200"}," No boilerplate descriptions detected for removal. ")],-1)])])):u("",!0)])):u("",!0)]))}}),vo=Object.assign(fo,{__name:"AdminDataDeduplication"}),ho={class:"bg-theme-surface rounded-3xl border border-theme-border p-6"},yo={class:"mb-4"},_o=["disabled"],$o={key:0,class:"space-y-4"},ko={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},wo={class:"bg-theme-background rounded-lg p-3"},So={class:"text-xl font-semibold"},Co={class:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3"},Ao={class:"text-xl font-semibold text-purple-700 dark:text-purple-300"},Ro={class:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3"},Po={class:"text-xl font-semibold text-red-700 dark:text-red-300"},Do={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3"},Oo={class:"text-xl font-semibold text-blue-700 dark:text-blue-300"},Vo={key:0,class:"space-y-2"},Eo={class:"space-y-2 max-h-96 overflow-y-auto"},Mo={class:"font-medium text-theme-text mb-2"},To={key:0,class:"text-sm text-red-600 dark:text-red-400 mb-1"},jo={key:1,class:"text-sm text-blue-600 dark:text-blue-400"},Fo={key:1,class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"},qo={class:"flex items-center gap-2"},Io={class:"text-green-800 dark:text-green-200"},Bo={key:2,class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},Uo={key:3,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},Lo=C({__name:"AdminCollectionCleanup",props:{loading:{type:Boolean},results:{}},emits:["start"],setup(l){return(r,s)=>(o(),a("div",ho,[e("div",yo,[s[1]||(s[1]=e("div",null,[e("h3",{class:"text-lg font-semibold flex items-center gap-2"},[e("div",{class:"i-mdi-folder-sync text-purple-500"}),b(" Collection Cleanup ")]),e("p",{class:"text-sm text-theme-textmuted mt-1"}," Remove non-existent movies and update outdated IDs in collections ")],-1)),e("button",{class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mt-3",disabled:l.loading,onClick:s[0]||(s[0]=d=>r.$emit("start"))},[e("div",{class:R(["i-mdi-folder-sync",{"animate-pulse":l.loading}])},null,2),b(" "+n(l.loading?"Cleaning...":"Clean Collections"),1)],8,_o)]),l.results?(o(),a("div",$o,[e("div",ko,[e("div",wo,[s[2]||(s[2]=e("div",{class:"text-sm text-theme-textmuted"},"Collections Processed",-1)),e("div",So,n(l.results.stats.collectionsProcessed),1)]),e("div",Co,[s[3]||(s[3]=e("div",{class:"text-sm text-purple-600 dark:text-purple-400"},"Collections Modified",-1)),e("div",Ao,n(l.results.stats.collectionsModified),1)]),e("div",Ro,[s[4]||(s[4]=e("div",{class:"text-sm text-red-600 dark:text-red-400"},"Movies Removed",-1)),e("div",Po,n(l.results.stats.moviesRemoved),1)]),e("div",Do,[s[5]||(s[5]=e("div",{class:"text-sm text-blue-600 dark:text-blue-400"},"IDs Updated",-1)),e("div",Oo,n(l.results.stats.moviesUpdated),1)])]),l.results.details.length>0?(o(),a("div",Vo,[s[6]||(s[6]=e("h4",{class:"font-medium text-theme-text"},"Modified Collections",-1)),e("div",Eo,[(o(!0),a(P,null,D(l.results.details,(d,i)=>(o(),a("div",{key:i,class:"bg-theme-background rounded-lg p-3"},[e("div",Mo,n(d.collectionName),1),d.removedMovies.length>0?(o(),a("div",To," Removed "+n(d.removedMovies.length)+" movie(s): "+n(d.removedMovies.slice(0,3).join(", "))+n(d.removedMovies.length>3?"...":""),1)):u("",!0),d.updatedMovies.length>0?(o(),a("div",jo," Updated "+n(d.updatedMovies.length)+" ID(s) ",1)):u("",!0)]))),128))])])):u("",!0),l.results.success&&l.results.stats.collectionsModified>0?(o(),a("div",Fo,[e("div",qo,[s[7]||(s[7]=e("div",{class:"i-mdi-check-circle text-green-500"},null,-1)),e("div",Io," Successfully cleaned "+n(l.results.stats.collectionsModified)+" collection(s). Removed "+n(l.results.stats.moviesRemoved)+" non-existent movie(s) and updated "+n(l.results.stats.moviesUpdated)+" ID(s). ",1)])])):l.results.success&&l.results.stats.collectionsModified===0?(o(),a("div",Bo,[...s[8]||(s[8]=[e("div",{class:"flex items-center gap-2"},[e("div",{class:"i-mdi-information text-blue-500"}),e("div",{class:"text-blue-800 dark:text-blue-200"}," All collections are clean. No changes needed. ")],-1)])])):l.results.success?u("",!0):(o(),a("div",Uo,[...s[9]||(s[9]=[e("div",{class:"flex items-center gap-2"},[e("div",{class:"i-mdi-alert-circle text-red-500"}),e("div",{class:"text-red-800 dark:text-red-200"}," Collection cleanup failed. Please check the console for details. ")],-1)])]))])):u("",!0)]))}}),No=Object.assign(Lo,{__name:"AdminCollectionCleanup"}),Go={class:"p-8 rounded-3xl shadow-lg border border-theme-border bg-theme-surface"},Yo={class:"flex items-center justify-between mb-6"},Ho={class:"text-xl font-bold"},zo={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Qo={class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-100 dark:border-blue-800"},Jo={class:"text-2xl font-bold text-blue-700 dark:text-blue-300"},Wo={class:"p-4 bg-green-50 dark:bg-green-900/20 rounded-2xl border border-green-100 dark:border-green-800"},Ko={class:"text-2xl font-bold text-green-700 dark:text-green-300"},Xo={class:"text-[10px] text-green-600/70 dark:text-green-400/70 mt-1"},Zo={class:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-2xl border border-orange-100 dark:border-orange-800"},ea={class:"text-2xl font-bold text-orange-700 dark:text-orange-300"},ta={class:"p-4 bg-gray-50 dark:bg-gray-900/20 rounded-2xl border border-gray-100 dark:border-gray-800"},sa={class:"text-2xl font-bold text-theme-text"},la={key:1,class:"mb-6 p-4 bg-orange-50/50 dark:bg-orange-900/10 rounded-2xl border border-orange-100 dark:border-orange-900/30"},oa={class:"flex flex-wrap gap-4"},aa={class:"text-xs font-medium text-theme-text capitalize"},na={class:"text-sm font-bold text-orange-600 dark:text-orange-400"},da={key:2,class:"grid grid-cols-2 gap-4 mb-6"},ra={class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-100 dark:border-blue-800"},ia={class:"text-2xl font-bold text-blue-700 dark:text-blue-300"},ua={class:"p-4 bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-100 dark:border-red-800"},ca={class:"text-2xl font-bold text-red-700 dark:text-red-300"},ma={key:3,class:"mb-6 space-y-3"},ba={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},ga={class:"font-bold text-sm mb-1 truncate"},xa={class:"flex flex-wrap gap-x-3 gap-y-1 text-xs text-theme-textmuted"},pa={class:"text-blue-600 dark:text-blue-400 font-medium"},fa={class:"text-green-600 dark:text-green-400 font-medium"},va={key:0},ha={class:"text-orange-600 dark:text-orange-400 font-medium"},ya={key:1},_a={class:"text-theme-textmuted font-medium"},$a={key:4,class:"space-y-2"},ka={class:"text-sm font-bold text-red-500 uppercase tracking-wider"},wa={class:"max-h-40 overflow-y-auto bg-red-50 dark:bg-red-900/10 p-4 rounded-xl text-xs font-mono text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900/30"},Sa={key:5,class:"space-y-2 mt-6"},Ca={class:"text-sm font-bold text-blue-500 uppercase tracking-wider"},Aa={class:"max-h-60 overflow-y-auto bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl text-xs font-mono text-blue-600 dark:text-blue-400 border border-blue-100 dark:border-blue-900/30"},Ra=C({__name:"AdminResultsLog",props:{results:{},posterResults:{}},emits:["clear"],setup(l){return(r,s)=>(o(),a("section",Go,[e("div",Yo,[e("h2",Ho,n(l.posterResults?"Poster Download Results":"Scrape Results"),1),e("button",{class:"text-sm text-theme-textmuted hover:text-gray-700 dark:hover:text-gray-300",onClick:s[0]||(s[0]=d=>r.$emit("clear"))}," Clear ")]),l.results?(o(),a("div",zo,[e("div",Qo,[s[1]||(s[1]=e("div",{class:"text-xs text-blue-600 dark:text-blue-400 uppercase font-bold tracking-wider mb-1"}," Processed ",-1)),e("div",Jo,n(l.results.processed),1)]),e("div",Wo,[s[2]||(s[2]=e("div",{class:"text-xs text-green-600 dark:text-green-400 uppercase font-bold tracking-wider mb-1"}," Success ",-1)),e("div",Ko,n(l.results.added+l.results.updated),1),e("div",Xo,n(l.results.added)+" added, "+n(l.results.updated)+" updated ",1)]),e("div",Zo,[s[3]||(s[3]=e("div",{class:"text-xs text-orange-600 dark:text-orange-400 uppercase font-bold tracking-wider mb-1"}," Failed ",-1)),e("div",ea,n(l.results.failed||0),1)]),e("div",ta,[s[4]||(s[4]=e("div",{class:"text-xs text-theme-textmuted uppercase font-bold tracking-wider mb-1"}," Skipped ",-1)),e("div",sa,n(l.results.skipped||0),1)])])):u("",!0),l.results?.failureReasons&&Object.keys(l.results.failureReasons).length>0?(o(),a("div",la,[s[5]||(s[5]=e("h3",{class:"text-xs font-bold uppercase tracking-wider text-orange-600 dark:text-orange-400 mb-3"}," Failure Reasons ",-1)),e("div",oa,[(o(!0),a(P,null,D(l.results.failureReasons,(d,i)=>(o(),a("div",{key:i,class:"flex items-center gap-2"},[e("span",aa,n(i.replace("_"," "))+":",1),e("span",na,n(d),1)]))),128))])])):u("",!0),l.posterResults?(o(),a("div",da,[e("div",ra,[s[6]||(s[6]=e("div",{class:"text-xs text-blue-600 dark:text-blue-400 uppercase font-bold tracking-wider mb-1"}," Successful ",-1)),e("div",ia,n(l.posterResults.successful),1)]),e("div",ua,[s[7]||(s[7]=e("div",{class:"text-xs text-red-600 dark:text-red-400 uppercase font-bold tracking-wider mb-1"}," Failed ",-1)),e("div",ca,n(l.posterResults.failed),1)])])):u("",!0),l.results?.channels&&l.results.channels.length>0?(o(),a("div",ma,[s[12]||(s[12]=e("h3",{class:"text-sm font-bold uppercase tracking-wider text-theme-textmuted"}," Per-Channel Progress ",-1)),e("div",ba,[(o(!0),a(P,null,D(l.results.channels,d=>(o(),a("div",{key:d.id,class:"p-3 bg-gray-50 dark:bg-gray-900/40 rounded-xl border border-gray-100 dark:border-gray-800"},[e("div",ga,n(d.id),1),e("div",xa,[e("span",null,[s[8]||(s[8]=b("Processed: ",-1)),e("span",pa,n(d.processed),1)]),e("span",null,[s[9]||(s[9]=b("Success: ",-1)),e("span",fa,n(d.added+d.updated),1)]),d.failed?(o(),a("span",va,[s[10]||(s[10]=b("Failed: ",-1)),e("span",ha,n(d.failed),1)])):u("",!0),d.skipped?(o(),a("span",ya,[s[11]||(s[11]=b("Skipped: ",-1)),e("span",_a,n(d.skipped),1)])):u("",!0)])]))),128))])])):u("",!0),(l.results?.errors.length||0)>0||(l.posterResults?.errors.length||0)>0?(o(),a("div",$a,[e("h3",ka," Errors ("+n((l.results?.errors.length||0)+(l.posterResults?.errors.length||0))+") ",1),e("div",wa,[(o(!0),a(P,null,D(l.results?.errors||l.posterResults?.errors||[],(d,i)=>(o(),a("div",{key:i,class:"mb-1"}," â€¢ "+n(d),1))),128))])])):u("",!0),l.results?.debug&&l.results.debug.length>0?(o(),a("div",Sa,[e("h3",Ca," Debug Log ("+n(l.results.debug.length)+") ",1),e("div",Aa,[(o(!0),a(P,null,D(l.results.debug,(d,i)=>(o(),a("div",{key:i,class:"mb-1"},n(d),1))),128))])])):u("",!0)]))}}),Pa=Object.assign(Ra,{__name:"AdminResultsLog"}),Da=()=>{const l=T(),r=te("eventSource",()=>null),s=te("eventSourceConnected",()=>!1),d=te("eventSourceReconnecting",()=>!1),i=te("reconnectTimer",()=>null),g=()=>{if(r.value)return;const m=new EventSource("/api/admin/progress");m.onopen=()=>{s.value=!0,d.value=!1},m.onmessage=x=>{try{const S=JSON.parse(x.data);l.updateProgress(S)}catch(S){console.error("[SSE] Failed to parse message",S)}},m.onerror=x=>{console.error("[SSE] Connection error",x),s.value=!1,m.close(),r.value=null,i.value&&(clearTimeout(i.value),i.value=null),d.value=!0,i.value=setTimeout(()=>{i.value=null,g()},5e3)},r.value=m};return{connect:g,disconnect:()=>{i.value&&(clearTimeout(i.value),i.value=null),r.value&&(r.value.close(),r.value=null,s.value=!1,d.value=!1)},isConnected:s,isReconnecting:d}},Oa={class:"min-h-screen bg-theme-background text-theme-text p-4 md:ml-16 transition-colors duration-300"},Va={key:0,class:"flex flex-col items-center justify-center h-[60vh] text-center"},Ea={key:1,class:"max-w-7xl mx-auto space-y-8"},Ma={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},Ta={class:"text-theme-textmuted mt-1 flex items-center gap-2"},ja={key:0,class:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",title:"EventSource connected"},Fa={key:1,class:"flex items-center gap-1 text-xs text-amber-600 dark:text-amber-400",title:"Reconnecting..."},qa={key:2,class:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400",title:"EventSource disconnected"},Ia={class:"flex flex-col items-end gap-3"},Ba={class:"flex items-center flex-wrap gap-3"},Ua=["disabled"],La=["disabled"],Na={key:0,class:"w-full max-w-md space-y-2"},Ga={class:"flex items-center justify-between text-xs"},Ya={class:"text-theme-textmuted truncate mr-2"},Ha={class:"font-mono text-nowrap"},za={class:"h-2 bg-theme-border rounded-full overflow-hidden"},Qa={key:1,class:"w-full max-w-md space-y-2"},Ja={class:"flex items-center justify-between text-xs"},Wa={class:"text-theme-textmuted truncate mr-2"},Ka={class:"font-mono text-nowrap"},Xa={class:"h-2 bg-theme-border rounded-full overflow-hidden"},Za={key:2,class:"w-full max-w-md space-y-2"},en={class:"flex items-center justify-between text-xs"},tn={class:"text-theme-textmuted truncate mr-2"},sn={key:0,class:"font-mono text-nowrap"},ln={class:"h-2 bg-theme-border rounded-full overflow-hidden"},on={key:0,class:"h-full bg-purple-500 animate-pulse w-full"},an={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3"},nn={key:1,class:"bg-theme-surface p-6 rounded-xl border border-theme-border shadow-sm"},dn={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},rn={class:"text-[10px] text-theme-textmuted uppercase font-bold truncate"},un={class:"text-2xl font-black text-theme-text"},cn={class:"space-y-6 grid grid-cols-1 lg:grid-cols-2 gap-8"},mn={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},bn={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},gn={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},xn={class:"space-y-8"},yn=C({__name:"index",setup(l){Ee({title:"Admin Dashboard - Movies Deluxe",meta:[{name:"robots",content:"noindex, nofollow"}]});const r=k(!1),s=T(),{connect:d,isConnected:i,isReconnecting:g}=Da(),{loading:c,generatingHomePages:m,stats:x,archiveOptions:S,scraping:O,youtubeOptions:I,youtubeChannels:U,omdbOptions:h,aiOptions:v,posterOptions:V,deduplicating:G,deduplicationResults:$,cleaningCollections:L,collectionCleanupResults:le,results:K,posterResults:E,progress:_,databasePercentOfTotal:oe,totalExternalVideos:ae,youtubeTotalScraped:X,youtubeFailedPercent:ne,youtubePercent:de,youtubeTotalAvailable:re,omdbFailedPercent:H,postersFailedPercent:Z}=q(s),B=F(()=>_.value.stats?.status==="in_progress"||c.value),ie=()=>{s.results=null,s.posterResults=null,s.deduplicationResults=null,s.collectionCleanupResults=null};return Me(async()=>{if(r.value=Te(),r.value){d();try{const z=await $fetch("/data/stats.json");z&&(s.stats=z)}catch{await s.refreshStats()}await s.loadYouTubeChannels()}}),(z,p)=>{const Q=Se,j=Qe,be=dt,ge=ht,f=Ft,J=ns,fe=$s,ve=Ts,he=tl,ye=cl,_e=Ll,$e=vo,ke=No,we=Pa;return o(),a("div",Oa,[t(r)?(o(),a("div",Ea,[e("header",Ma,[e("div",null,[p[15]||(p[15]=e("h1",{class:"text-3xl font-bold flex items-center gap-3"},[e("div",{class:"i-mdi-shield-crown text-blue-600"}),b(" Admin Dashboard ")],-1)),e("p",Ta,[p[14]||(p[14]=b(" Manage movie scraping and curation ",-1)),t(i)?(o(),a("span",ja,[...p[11]||(p[11]=[e("div",{class:"i-mdi-circle text-8px animate-pulse"},null,-1),b(" Live ",-1)])])):t(g)?(o(),a("span",Fa,[...p[12]||(p[12]=[e("div",{class:"i-mdi-circle text-8px animate-pulse"},null,-1),b(" Reconnecting ",-1)])])):(o(),a("span",qa,[...p[13]||(p[13]=[e("div",{class:"i-mdi-circle text-8px"},null,-1),b(" Offline ",-1)])]))])]),e("div",Ia,[e("div",Ba,[y(Q,{to:"/",class:"px-4 py-2 text-sm bg-theme-surface border border-theme-border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2"},{default:ue(()=>[...p[16]||(p[16]=[e("div",{class:"i-mdi-home"},null,-1),b(" View Site ",-1)])]),_:1}),y(Q,{to:"/admin/collections",class:"px-4 py-2 text-sm bg-theme-surface border border-theme-border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2"},{default:ue(()=>[...p[17]||(p[17]=[e("div",{class:"i-mdi-movie-edit"},null,-1),b(" Collection Editor ",-1)])]),_:1}),e("button",{class:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",disabled:t(c)||t(m),onClick:p[0]||(p[0]=(...A)=>t(s).generateHomePages&&t(s).generateHomePages(...A))},[e("div",{class:R(["i-mdi-home-plus",{"animate-spin":t(m)}])},null,2),p[18]||(p[18]=b(" Generate Home Pages ",-1))],8,Ua),e("button",{class:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",disabled:t(c)||t(B),onClick:p[1]||(p[1]=(...A)=>t(s).refreshStats&&t(s).refreshStats(...A))},[e("div",{class:R(["i-mdi-refresh",{"animate-spin":t(B)}])},null,2),p[19]||(p[19]=b(" Refresh Stats ",-1))],8,La)]),t(_).home&&t(_).home.status==="in_progress"?(o(),a("div",Na,[e("div",Ga,[e("span",Ya,n(t(_).home.message),1),e("span",Ha,n(t(_).home.current)+" / "+n(t(_).home.total),1)]),e("div",za,[e("div",{class:"h-full bg-blue-500 transition-all duration-300",style:w({width:`${t(_).home.current/t(_).home.total*100}%`})},null,4)])])):u("",!0),t(_).stats&&t(_).stats.status==="in_progress"?(o(),a("div",Qa,[e("div",Ja,[e("span",Wa,n(t(_).stats.message),1),e("span",Ka,n(t(_).stats.current)+" / "+n(t(_).stats.total),1)]),e("div",Xa,[e("div",{class:"h-full bg-green-500 transition-all duration-300",style:w({width:`${t(_).stats.current/t(_).stats.total*100}%`})},null,4)])])):u("",!0),t(_).sqlite&&(t(_).sqlite.status==="in_progress"||t(_).sqlite.status==="starting")?(o(),a("div",Za,[e("div",en,[e("span",tn,n(t(_).sqlite.message),1),t(_).sqlite.total>0?(o(),a("span",sn,n(t(_).sqlite.current)+" / "+n(t(_).sqlite.total),1)):u("",!0)]),e("div",ln,[t(_).sqlite.status==="starting"?(o(),a("div",on)):(o(),a("div",{key:1,class:"h-full bg-purple-500 transition-all duration-300",style:w({width:t(_).sqlite.total>0?`${t(_).sqlite.current/t(_).sqlite.total*100}%`:"0%"})},null,4))])])):u("",!0)])]),t(x)?(o(),a("section",an,[y(j,{title:"Total Movies",value:t(x).database.total,icon:"i-mdi-movie-open","icon-color":"text-blue-500","show-progress":"",percent:t(oe),"progress-color":"bg-blue-500","percent-precision":1,subtitle:`of ${t(ae).toLocaleString()} available`},null,8,["value","percent","subtitle"]),y(j,{title:"Archive.org",value:t(x).external.archiveOrg.scraped,failed:t(x).external.archiveOrg.failed,"failure-rate":t(x).external.archiveOrg.failureRate,icon:"i-mdi-archive","icon-color":"text-amber-500","show-progress":"",percent:t(x).external.archiveOrg.percent,"progress-color":"bg-amber-500",subtitle:`${t(x).external.archiveOrg.scraped} / ${t(x).external.archiveOrg.total||"?"} videos`},null,8,["value","failed","failure-rate","percent","subtitle"]),y(j,{title:"YouTube",value:t(X),failed:t(x).external.youtube.totalFailed,"failure-rate":t(x).external.youtube.failureRate,"failed-percent":t(ne),icon:"i-mdi-youtube","icon-color":"text-red-500","show-progress":"",percent:t(de),"progress-color":"bg-red-500",subtitle:`${t(X)} / ${t(re)||"?"} videos`},null,8,["value","failed","failure-rate","failed-percent","percent","subtitle"]),y(j,{title:"OMDB",value:t(x).omdb.matched,failed:t(x).omdb.failed,"failure-rate":t(x).omdb.failureRate,"failed-percent":t(H),icon:"i-mdi-database-sync","icon-color":"text-green-500","show-progress":"",percent:t(x).omdb.percent,"progress-color":"bg-green-500",subtitle:`${t(x).omdb.matched} / ${t(x).omdb.total} movies`},null,8,["value","failed","failure-rate","failed-percent","percent","subtitle"]),y(j,{title:"Posters",value:t(x).posters.downloaded,failed:t(x).posters.failed,"failure-rate":t(x).posters.failureRate,"failed-percent":t(Z),icon:"i-mdi-image-multiple","icon-color":"text-purple-500","show-progress":"",percent:t(x).posters.percentOfMoviesWithImdbId,"progress-color":"bg-purple-500",subtitle:`${t(x).posters.downloaded} / ${t(x).posters.withImdbId} movies with IMDB ID`},null,8,["value","failed","failure-rate","failed-percent","percent","subtitle"]),y(j,{title:"AI Extracted",value:t(x).ai.withAiData,icon:"i-mdi-robot","icon-color":"text-purple-500","show-progress":"",percent:t(x).ai.percent,"progress-color":"bg-purple-500",subtitle:`${t(x).ai.withAiData} / ${t(x).ai.totalUnmatched} unmatched`},null,8,["value","percent","subtitle"]),t(x)&&t(x).quality?(o(),ce(j,{key:0,title:"Low Quality",value:t(x).quality.totalMarked,icon:"i-mdi-quality-low","icon-color":"text-orange-600","show-progress":"",percent:t(x).quality.percent,"progress-color":"bg-orange-600",subtitle:`${t(x).quality.totalMarked} marked as low quality`},null,8,["value","percent","subtitle"])):u("",!0)])):u("",!0),e("section",null,[t(x)?.external.youtube.channels.length?(o(),ce(be,{key:0,channels:t(x).external.youtube.channels},null,8,["channels"])):u("",!0)]),t(x)&&t(x).quality&&t(x).quality.totalMarked>0?(o(),a("section",nn,[p[20]||(p[20]=e("h2",{class:"text-xl font-bold mb-4 flex items-center gap-2 text-theme-text"},[e("div",{class:"i-mdi-quality-low text-orange-600"}),b(" Quality Label Breakdown ")],-1)),e("div",dn,[(o(!0),a(P,null,D(t(x).quality.breakdown,(A,xe)=>(o(),a("div",{key:xe,class:"flex flex-col p-3 rounded-lg bg-theme-background border border-gray-100 dark:border-gray-700"},[e("span",rn,n(xe),1),e("span",un,n(A),1)]))),128))])])):u("",!0),e("div",cn,[e("section",null,[p[21]||(p[21]=e("h2",{class:"text-2xl font-bold mb-4 flex items-center gap-2"},[e("div",{class:"i-mdi-database-import text-amber-600"}),b(" Data Collection ")],-1)),e("div",mn,[e("div",null,[y(ge,{modelValue:t(S),"onUpdate:modelValue":p[2]||(p[2]=A=>N(S)?S.value=A:null),loading:t(O),onStart:t(s).startArchiveScrape},null,8,["modelValue","loading","onStart"])]),y(f,{modelValue:t(I),"onUpdate:modelValue":p[3]||(p[3]=A=>N(I)?I.value=A:null),channels:t(U),loading:t(O),onStart:t(s).startYouTubeScrape},null,8,["modelValue","channels","loading","onStart"])])]),e("section",null,[p[22]||(p[22]=e("h2",{class:"text-2xl font-bold mb-4 flex items-center gap-2"},[e("div",{class:"i-mdi-database-sync text-green-600"}),b(" Data Enrichment ")],-1)),e("div",bn,[y(J,{modelValue:t(h),"onUpdate:modelValue":p[4]||(p[4]=A=>N(h)?h.value=A:null),loading:t(O),onStart:t(s).startOMDBEnrichment},null,8,["modelValue","loading","onStart"]),y(fe,{modelValue:t(v),"onUpdate:modelValue":p[5]||(p[5]=A=>N(v)?v.value=A:null),loading:t(O),onStart:t(s).startAIExtraction},null,8,["modelValue","loading","onStart"]),y(ve,{modelValue:t(V),"onUpdate:modelValue":p[6]||(p[6]=A=>N(V)?V.value=A:null),loading:t(O),onStart:t(s).startPosterDownload},null,8,["modelValue","loading","onStart"]),y(he)])]),e("section",null,[p[23]||(p[23]=e("h2",{class:"text-2xl font-bold mb-4 flex items-center gap-2"},[e("div",{class:"i-mdi-database-cog text-blue-600"}),b(" Database Management ")],-1)),e("div",gn,[y(ye),y(_e),e("div",null,[e("div",xn,[y($e,{loading:t(G),results:t($),onStart:t(s).deduplicateDescriptions},null,8,["loading","results","onStart"]),y(ke,{loading:t(L),results:t(le),onStart:t(s).cleanupCollections},null,8,["loading","results","onStart"])])])])])]),t(K)||t(E)?(o(),ce(we,{key:2,results:t(K),"poster-results":t(E),onClear:ie},null,8,["results","poster-results"])):u("",!0)])):(o(),a("div",Va,[p[8]||(p[8]=e("div",{class:"i-mdi-lock text-64px text-gray-300 dark:text-gray-700 mb-4"},null,-1)),p[9]||(p[9]=e("h1",{class:"text-2xl font-bold mb-2"},"Access Denied",-1)),p[10]||(p[10]=e("p",{class:"text-theme-textmuted"},"The admin interface is only available on localhost.",-1)),y(Q,{to:"/",class:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors"},{default:ue(()=>[...p[7]||(p[7]=[b(" Back to Home ",-1)])]),_:1})]))])}}});export{yn as default};
