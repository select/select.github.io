import{f as $,_ as ie,a as le,b as ce,c as ue,d as me,e as de,g as pe,h as ve,i as he,j as xe}from"./B0SWZS3F.js";import{E as Q,G as P,H as D,Q as _e,r as S,R as fe,e as _,J as z,n as w,S as ge,T as B,U as ye,z as t,c as v,o as m,a as n,b as r,L as M,V as H,W as be,X as Ce,w as x,P as Se,Y as ke,x as $e,Z as we,$ as Me,d as Re,t as Ve,u as Fe,F as L,M as Ye,N as Te,_ as De}from"./BjH_is5i.js";import{_ as Qe}from"./t08L-492.js";import{_ as Ne}from"./CLFQ64Tr.js";import"./hvWMjr-Y.js";import"./BUWSRdAD.js";import"./D0CfZfOz.js";import"./DMOTkeJ5.js";const Oe={class:"max-w-4xl mx-auto px-4 py-4 space-y-4"},Ue={class:"flex items-center gap-4"},Be={class:"relative flex-1"},He={class:"absolute inset-y-0 left-2 flex items-center z-10"},Le={key:0,class:"pl-2 pr-1"},Pe=["placeholder"],ze={class:"absolute inset-y-0 right-0 flex items-center pr-2 z-10"},Ae={class:"flex flex-wrap items-center gap-2 pb-1"},Ee=Q({__name:"SearchHeader",setup(R){const y=P(),{filters:o,hasActiveFilters:V,isFiltering:F}=D(y),k=_e(),{isSearchOpen:b}=D(k),{setSearchOpen:f}=k,Y=S(null),C=S(null),c=fe(),l=S(o.value.searchQuery),i=S(null),u=S(null),d=(s,e)=>{i.value===s?(i.value=null,u.value=null):(i.value=s,u.value=e.currentTarget)},p=()=>{i.value=null,u.value=null},N=_(()=>o.value.sort.field==="year"&&o.value.sort.direction==="desc"),A=_(()=>{if(N.value)return"";const s=o.value.sort.field,e=o.value.sort.direction;return s==="relevance"?"Relevance":s==="year"?e==="desc"?"Newest":"Oldest":s==="rating"?e==="desc"?"High":"Low":s==="title"?e==="asc"?"A-Z":"Z-A":s==="votes"?"Popular":""}),E=_(()=>{const s=o.value.minYear,e=o.value.maxYear;return s&&e&&s!==1910&&e!==2025?`${s}-${e}`:s&&s!==1910?`${s}+`:e&&e!==2025?`Up to ${e}`:""}),G=_(()=>{const s=o.value.minVotes,e=o.value.maxVotes;return s&&e&&e<1e6?`${$(s)}-${$(e)}`:s?`${$(s)}+`:e&&e<1e6?`< ${$(e)}`:""}),j=_(()=>o.value.searchMode==="semantic"?"Describe what you want to watch...":"Search movies... (try: actor:Roy Rogers, director:Dave Fleischer)"),I=()=>{o.value.sort={field:"year",direction:"desc"}},K=()=>{o.value.minYear=0,o.value.maxYear=0},W=()=>{o.value.minVotes=0,o.value.maxVotes=0};z(()=>{const s=c.query.q;s&&s!==l.value&&(l.value=s,f(!0))});const Z=ke(s=>{if(o.value.searchQuery=s,!c.path.startsWith("/admin")){const e=we();s?e.replace({query:{q:s}}):e.replace({query:{}})}s&&c.path!=="/search"&&!c.path.startsWith("/admin")&&Me("/search"),s&&o.value.sort.field!=="relevance"&&(o.value.sort={field:"relevance",direction:"desc"})},500);w(l,s=>{Z(s)}),w(()=>o.value.searchQuery,s=>{s!==l.value&&(l.value=s)});const O=_(()=>c.path==="/search"?!0:b.value||l.value!=="");w([b,()=>c.path],([s,e])=>{(s||e==="/search")&&$e(()=>{Y.value?.focus()})},{immediate:!0}),w(()=>c.path,s=>{(s==="/search"||s==="/"&&l.value)&&f(!0)}),ge(C,()=>{c.path!=="/search"&&!l.value&&!i.value&&T()});const U=()=>{l.value=""},T=()=>{c.path!=="/search"&&f(!1)},q=()=>{i.value?p():l.value?U():c.path!=="/search"&&T()},J=()=>{!i.value&&c.path!=="/search"&&T()};return(s,e)=>{const X=ie,g=le,ee=ce,h=ue,te=me,oe=de,se=pe,ne=ve,re=he,ae=xe;return B((m(),v("div",{ref_key:"searchContainer",ref:C,class:Se(["fixed top-0 left-0 right-0 z-50 bg-theme-surface border-b border-theme-border shadow-xl transition-all duration-300",t(O)?"translate-y-0":"-translate-y-full"])},[n("div",Oe,[n("div",Ue,[n("div",Be,[n("div",He,[t(F)?(m(),v("div",Le,[...e[14]||(e[14]=[n("div",{class:"i-mdi-loading animate-spin text-lg text-theme-primary"},null,-1)])])):M("",!0),r(X)]),B(n("input",{ref_key:"searchInput",ref:Y,"onUpdate:modelValue":e[0]||(e[0]=a=>be(l)?l.value=a:null),type:"text",class:"block w-full pl-32 md:pl-36 pr-12 py-3 md:py-4 bg-theme-background border-2 border-transparent focus:border-theme-primary rounded-2xl text-xl md:text-2xl text-theme-text placeholder-theme-text-muted focus:outline-none transition-all shadow-inner",placeholder:t(j),onKeydown:[H(q,["esc"]),H(J,["enter"])]},null,40,Pe),[[Ce,t(l)]]),n("div",ze,[t(l)?(m(),v("button",{key:0,class:"p-2 hover:bg-theme-background rounded-full transition-colors",title:"Clear search",onClick:U},[...e[15]||(e[15]=[n("div",{class:"i-mdi-close text-xl text-theme-textmuted hover:text-theme-text"},null,-1)])])):M("",!0),n("button",{class:"p-2 hover:bg-theme-background rounded-full transition-colors group",title:"Search tips",onClick:e[1]||(e[1]=a=>d("help",a))},[...e[16]||(e[16]=[n("div",{class:"i-mdi-help-circle-outline text-xl text-theme-textmuted group-hover:text-theme-primary transition-colors"},null,-1)])])])])]),n("div",Ae,[r(g,{category:"Sort",icon:"i-mdi-sort","active-value":t(A),"is-active":!t(N),onClick:e[2]||(e[2]=a=>d("sort",a)),onClear:I},null,8,["active-value","is-active"]),r(g,{category:"Rating",icon:"i-mdi-star","active-value":t(o).minRating>0?`${t(o).minRating.toFixed(1)}+`:"","is-active":t(o).minRating>0,onClick:e[3]||(e[3]=a=>d("rating",a)),onClear:e[4]||(e[4]=a=>t(o).minRating=0)},null,8,["active-value","is-active"]),r(g,{category:"Year",icon:"i-mdi-calendar","active-value":t(E),"is-active":t(o).minYear>0||(t(o).maxYear??0)>0,onClick:e[5]||(e[5]=a=>d("year",a)),onClear:K},null,8,["active-value","is-active"]),r(g,{category:"Votes",icon:"i-mdi-account-group","active-value":t(G),"is-active":t(o).minVotes>0||(t(o).maxVotes??0)>0&&(t(o).maxVotes??0)<1e6,onClick:e[6]||(e[6]=a=>d("votes",a)),onClear:W},null,8,["active-value","is-active"]),r(g,{category:"Genres",icon:"i-mdi-movie-filter","active-value":t(o).genres.length>0?t(o).genres.length:"","is-active":t(o).genres.length>0,onClick:e[7]||(e[7]=a=>d("genres",a)),onClear:e[8]||(e[8]=a=>t(o).genres=[])},null,8,["active-value","is-active"]),r(g,{category:"Countries",icon:"i-mdi-earth","active-value":t(o).countries.length>0?t(o).countries.length:"","is-active":t(o).countries.length>0,onClick:e[9]||(e[9]=a=>d("countries",a)),onClear:e[10]||(e[10]=a=>t(o).countries=[])},null,8,["active-value","is-active"]),r(g,{category:"Source",icon:"i-mdi-source-branch","active-value":t(o).sources.length>0?t(o).sources.length:"","is-active":t(o).sources.length>0,onClick:e[11]||(e[11]=a=>d("source",a)),onClear:e[12]||(e[12]=a=>t(o).sources=[])},null,8,["active-value","is-active"]),t(V)?(m(),v("button",{key:0,class:"text-xs font-bold text-theme-primary hover:bg-theme-primary/10 px-3 py-1.5 rounded-full transition-colors whitespace-nowrap md:ml-auto",onClick:e[13]||(e[13]=a=>Object.assign(t(o),{sort:{field:"year",direction:"desc"},sources:[],minRating:0,minYear:0,maxYear:0,minVotes:0,maxVotes:0,genres:[],countries:[],searchQuery:"",searchMode:"exact"}))}," Clear All ")):M("",!0)])]),r(h,{"is-open":t(i)==="sort",title:"Sort By","anchor-el":t(u),onClose:p},{default:x(()=>[r(ee)]),_:1},8,["is-open","anchor-el"]),r(h,{"is-open":t(i)==="rating",title:"Minimum Rating","anchor-el":t(u),onClose:p},{default:x(()=>[r(te)]),_:1},8,["is-open","anchor-el"]),r(h,{"is-open":t(i)==="year",title:"Year Range","anchor-el":t(u),onClose:p},{default:x(()=>[r(oe)]),_:1},8,["is-open","anchor-el"]),r(h,{"is-open":t(i)==="votes",title:"Votes Range","anchor-el":t(u),onClose:p},{default:x(()=>[r(se)]),_:1},8,["is-open","anchor-el"]),r(h,{"is-open":t(i)==="genres",title:"Genres","anchor-el":t(u),onClose:p},{default:x(()=>[r(ne)]),_:1},8,["is-open","anchor-el"]),r(h,{"is-open":t(i)==="countries",title:"Countries","anchor-el":t(u),onClose:p},{default:x(()=>[r(re)]),_:1},8,["is-open","anchor-el"]),r(h,{"is-open":t(i)==="source",title:"Sources","anchor-el":t(u),onClose:p},{default:x(()=>[r(ae)]),_:1},8,["is-open","anchor-el"]),r(h,{"is-open":t(i)==="help",title:"Search Tips","anchor-el":t(u),onClose:p},{default:x(()=>[...e[17]||(e[17]=[n("div",{class:"p-4 max-w-xs space-y-3 text-sm"},[n("p",{class:"text-theme-textmuted"},"Use keywords for field-specific search:"),n("ul",{class:"space-y-2"},[n("li",{class:"flex items-center gap-2"},[n("code",{class:"bg-theme-background px-1.5 py-0.5 rounded text-theme-primary font-mono"},"actor:"),n("span",{class:"text-theme-text"},"Search by actor")]),n("li",{class:"flex items-center gap-2"},[n("code",{class:"bg-theme-background px-1.5 py-0.5 rounded text-theme-primary font-mono"},"director:"),n("span",{class:"text-theme-text"},"Search by director")]),n("li",{class:"flex items-center gap-2"},[n("code",{class:"bg-theme-background px-1.5 py-0.5 rounded text-theme-primary font-mono"},"writer:"),n("span",{class:"text-theme-text"},"Search by writer")]),n("li",{class:"flex items-center gap-2"},[n("code",{class:"bg-theme-background px-1.5 py-0.5 rounded text-theme-primary font-mono"},"title:"),n("span",{class:"text-theme-text"},"Search by title")])]),n("div",{class:"pt-2 border-t border-theme-border"},[n("p",{class:"text-theme-textmuted mb-1"},"Use quotes for spaces:"),n("code",{class:"block bg-theme-background p-2 rounded text-theme-primary font-mono"},'actor:"Roy Rogers"')]),n("div",{class:"pt-2 border-t border-theme-border"},[n("p",{class:"text-theme-textmuted mb-1"},"Combine multiple keywords:"),n("code",{class:"block bg-theme-background p-2 rounded text-theme-primary font-mono"},"actor:Keanu title:Matrix")])],-1)])]),_:1},8,["is-open","anchor-el"])],2)),[[ye,t(O)]])}}}),Ge=Object.assign(Ee,{__name:"SearchHeader"}),je={class:"mb-8"},Ie={class:"flex flex-wrap gap-6 text-sm"},Ke={class:"text-theme-text"},We=Q({__name:"MovieStats",props:{totalMovies:{}},setup(R){return(y,o)=>(m(),v("div",je,[n("div",Ie,[n("div",Ke,[o[0]||(o[0]=n("span",{class:"text-theme-textmuted"},"Total Movies:",-1)),Re(" "+Ve(R.totalMovies),1)])])]))}}),Ze=Object.assign(We,{__name:"MovieStats"}),qe={class:"min-h-screen bg-theme-background"},Je={class:"md:ml-16 md:pt-16"},Xe={class:"px-4 lg:px-[6%] py-8"},et={class:"relative lg:px-[6%] px-4"},tt={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},ot={key:2,class:"text-center py-12"},st=Q({__name:"search",setup(R){Fe({title:"Search Movies - Movies Deluxe",meta:[{name:"description",content:"Search and filter thousands of free public domain movies from Archive.org and YouTube. Classic films, documentaries, and more."},{property:"og:title",content:"Search Movies - Movies Deluxe"},{property:"og:type",content:"website"}]});const y=P(),{isFiltering:o,totalFiltered:V,searchResultMovies:F}=D(y),{triggerSearchUpdate:k}=y,b=_(()=>V.value||0),f=_(()=>F.value);return z(async()=>{await k()}),(Y,C)=>{const c=Ge,l=Ze,i=Qe,u=Ne;return m(),v("div",qe,[r(c),n("main",Je,[n("div",Xe,[!t(o)&&t(b)>0?(m(),L(l,{key:0,"total-movies":t(b)},null,8,["total-movies"])):M("",!0)]),n("div",et,[t(o)?(m(),v("div",tt,[(m(),v(Ye,null,Te(12,d=>r(i,{key:d})),64))])):t(f).length>0?(m(),L(u,{key:1,"movie-ids":t(f)},null,8,["movie-ids"])):(m(),v("div",ot,[...C[0]||(C[0]=[n("p",{class:"text-theme-textmuted"},"No movies found.",-1)])]))])])])}}}),dt=De(st,[["__scopeId","data-v-ef042cd7"]]);export{dt as default};
