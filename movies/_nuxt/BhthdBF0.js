import{E as S,G as O,H as T,r as $,n as j,c,o as r,a as e,a8 as q,z as t,M as I,N as U,P as k,l as R,t as b,af as J,L as F,a7 as X,e as M,F as K,b as B,ag as ee,ao as te,ak as se,ap as Z,w as z,ac as Q,aq as oe,ah as ne,x as ie,_ as G,T as E,X as H,W as D,Y as N,J as P}from"./DGvbdLlG.js";import{u as re}from"./DhzU-HZj.js";const V=Symbol("FILTER_STATE_KEY"),le={class:"flex items-center gap-0.5 p-1 bg-theme-surface/30 rounded-xl relative group/modes"},ae=["aria-label","onClick","onMouseenter"],ce={class:"absolute top-full mt-3 px-3 py-2 bg-theme-surface border border-theme-border shadow-2xl rounded-xl text-xs w-56 pointer-events-none opacity-0 group-hover:opacity-100 transition-all duration-200 z-50 translate-y-2 group-hover:translate-y-0 left-0 md:left-1/2 md:-translate-x-1/2 text-left"},de={class:"flex items-center gap-2 mb-1"},ue={class:"font-bold text-theme-text"},me={class:"text-theme-textmuted leading-relaxed"},pe=S({__name:"SearchModeSelector",setup(o){const l=O(),{filters:m}=T(l),s=R(V,null)||m,n=[{id:"exact",label:"Exact",icon:"i-mdi-alphabetical",description:"Traditional search. Matches exact words in titles, actors, or descriptions."},{id:"semantic",label:"Semantic",icon:"i-mdi-sparkles",description:'AI-powered search. Understands meaning and concepts (e.g., "space travel").'}],u=$([]),v=$(null),p=$({left:"0px",width:"0px",height:"0px",top:"0px"}),f=g=>{s.value.searchMode=g},a=g=>{v.value=g;const w=n.findIndex(h=>h.id===g),d=u.value[w];d&&(p.value={left:`${d.offsetLeft}px`,width:`${d.offsetWidth}px`,height:`${d.offsetHeight}px`,top:`${d.offsetTop}px`})},x=()=>{v.value=null},{width:i}=J();return j(i,()=>{v.value&&a(v.value)}),(g,w)=>(r(),c("div",le,[e("div",{class:"absolute bg-theme-primary/10 rounded-lg transition-all duration-300 ease-out pointer-events-none opacity-0 group-hover/modes:opacity-100",style:q(t(p))},null,4),(r(),c(I,null,U(n,d=>e("button",{key:d.id,ref_for:!0,ref_key:"modeButtons",ref:u,class:k(["group relative z-10 p-2 rounded-lg transition-all duration-200 flex items-center justify-center",[t(s).searchMode===d.id?"text-theme-primary":"text-theme-textmuted hover:text-theme-text"]]),"aria-label":`Search mode: ${d.label}`,onClick:h=>f(d.id),onMouseenter:h=>a(d.id),onMouseleave:x},[e("div",{class:k([d.icon,"text-xl md:text-2xl"])},null,2),e("div",ce,[e("div",de,[e("div",{class:k([d.icon,"text-theme-primary text-base"])},null,2),e("div",ue,b(d.label),1)]),e("div",me,b(d.description),1),w[0]||(w[0]=e("div",{class:"absolute -top-1 w-2 h-2 bg-theme-surface border-t border-l border-theme-border rotate-45 left-4 md:left-1/2 md:-translate-x-1/2"},null,-1))])],42,ae)),64))]))}}),Gt=Object.assign(pe,{__name:"SearchModeSelector"}),xe={class:"text-theme-primary font-bold"},ve={key:3,class:"i-mdi-chevron-down text-xs opacity-50 group-hover:opacity-100 transition-opacity"},fe=S({__name:"FilterButton",props:{category:{},icon:{},activeValue:{},isActive:{type:Boolean}},emits:["click","clear"],setup(o){return(l,m)=>(r(),c("button",{class:k(["group flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all whitespace-nowrap border",[o.isActive?"bg-theme-primary/10 text-theme-primary border-theme-primary/30 shadow-sm":"bg-transparent text-theme-textmuted border-theme-border/50 hover:bg-theme-surface hover:border-theme-border"]]),onClick:m[1]||(m[1]=y=>l.$emit("click",y))},[o.icon?(r(),c("div",{key:0,class:k([o.icon,"text-sm transition-colors",o.isActive?"text-theme-primary":"text-theme-textmuted group-hover:text-theme-text"])},null,2)):F("",!0),e("span",{class:k({"text-theme-text":!o.isActive})},b(o.category),3),o.isActive&&o.activeValue?(r(),c(I,{key:1},[m[2]||(m[2]=e("span",{class:"w-px h-3 bg-theme-primary/30 mx-0.5"},null,-1)),e("span",xe,b(o.activeValue),1)],64)):F("",!0),o.isActive?(r(),c("div",{key:2,class:"ml-1 -mr-1 p-0.5 rounded-full hover:bg-theme-primary hover:text-white transition-colors",onClick:m[0]||(m[0]=X(y=>l.$emit("clear"),["stop"]))},[...m[3]||(m[3]=[e("div",{class:"i-mdi-close text-[10px]"},null,-1)])])):(r(),c("div",ve))],2))}}),Kt=Object.assign(fe,{__name:"FilterButton"}),he=S({__name:"AppSortButton",props:{option:{},isActive:{type:Boolean}},emits:["select"],setup(o){const l=o,m=()=>{const{field:y}=l.option;switch(y){case"relevance":return"i-mdi-target";case"votes":return"i-mdi-account-group";default:return"i-mdi-sort"}};return(y,s)=>(r(),c("button",{class:k(["flex items-center justify-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-colors flex-1 min-w-[100px] border border-theme-border/50 whitespace-nowrap",{"bg-theme-primary text-white border-theme-primary":o.isActive,"bg-theme-surface text-theme-textmuted hover:bg-theme-selection hover:border-theme-border":!o.isActive}]),onClick:s[0]||(s[0]=n=>y.$emit("select",o.option))},[e("div",{class:k(["text-sm",{[m()]:!0,"text-white":o.isActive,"text-theme-textmuted":!o.isActive}])},null,2),e("span",null,b(o.option.label),1)],2))}}),be=Object.assign(he,{__name:"AppSortButton"}),ye={class:"flex flex-1 min-w-[140px] rounded-full border border-theme-border/50 overflow-hidden"},ge=S({__name:"AppSortToggleButton",props:{label:{},icon:{},optionA:{},optionB:{},currentSort:{}},emits:["select"],setup(o){const l=o,m=M(()=>l.currentSort.field===l.optionA.field&&l.currentSort.direction===l.optionA.direction),y=M(()=>l.currentSort.field===l.optionB.field&&l.currentSort.direction===l.optionB.direction);return(s,n)=>(r(),c("div",ye,[e("button",{class:k(["flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs font-medium transition-colors border-r border-theme-border/50 flex-1 whitespace-nowrap",{"bg-theme-primary text-white":t(m),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!t(m)}]),onClick:n[0]||(n[0]=u=>s.$emit("select",o.optionA))},[e("div",{class:k(["text-sm",[o.icon,{"text-white":t(m),"text-theme-textmuted":!t(m)}]])},null,2),e("span",null,b(o.optionA.label),1)],2),e("button",{class:k(["flex items-center justify-center px-2 py-1.5 text-xs font-medium transition-colors flex-1 whitespace-nowrap",{"bg-theme-primary text-white":t(y),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!t(y)}]),onClick:n[1]||(n[1]=u=>s.$emit("select",o.optionB))},b(o.optionB.label),3)]))}}),_e=Object.assign(ge,{__name:"AppSortToggleButton"}),$e={class:"flex flex-wrap gap-2"},ke=S({__name:"AppSortButtonGroup",props:{currentSort:{},showRelevance:{type:Boolean,default:!1}},emits:["select"],setup(o,{emit:l}){const m=o,y={field:"relevance",direction:"desc",label:"Relevance"},s={field:"year",direction:"desc",label:"Newest"},n={field:"year",direction:"asc",label:"Oldest"},u={field:"rating",direction:"desc",label:"High"},v={field:"rating",direction:"asc",label:"Low"},p={field:"title",direction:"asc",label:"A-Z"},f={field:"title",direction:"desc",label:"Z-A"},a={field:"votes",direction:"desc",label:"Most Popular"},x=i=>m.currentSort.field===i.field&&m.currentSort.direction===i.direction;return(i,g)=>{const w=be,d=_e;return r(),c("div",$e,[o.showRelevance?(r(),K(w,{key:0,option:y,"is-active":x(y),onSelect:g[0]||(g[0]=h=>i.$emit("select",y))},null,8,["is-active"])):F("",!0),B(d,{label:"Year",icon:"i-mdi-calendar","option-a":s,"option-b":n,"current-sort":o.currentSort,onSelect:g[1]||(g[1]=h=>i.$emit("select",h))},null,8,["current-sort"]),B(d,{label:"Rating",icon:"i-mdi-star","option-a":u,"option-b":v,"current-sort":o.currentSort,onSelect:g[2]||(g[2]=h=>i.$emit("select",h))},null,8,["current-sort"]),B(d,{label:"Title",icon:"i-mdi-sort-alphabetical-ascending","option-a":p,"option-b":f,"current-sort":o.currentSort,onSelect:g[3]||(g[3]=h=>i.$emit("select",h))},null,8,["current-sort"]),B(w,{option:a,"is-active":x(a),onSelect:g[4]||(g[4]=h=>i.$emit("select",a))},null,8,["is-active"])])}}}),we=Object.assign(ke,{__name:"AppSortButtonGroup"}),Ce={class:"space-y-4"},Se={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Fe=S({__name:"FilterSortControl",setup(o){const l=O(),{filters:m}=T(l),s=R(V,null)||m,n=M(()=>s.value.sort.field==="year"&&s.value.sort.direction==="desc"),u=()=>{s.value.sort={field:"year",direction:"desc"}};return(v,p)=>{const f=we;return r(),c("div",Ce,[B(f,{"current-sort":t(s).sort,"show-relevance":!!t(s).searchQuery,onSelect:p[0]||(p[0]=a=>t(s).sort=a)},null,8,["current-sort","show-relevance"]),t(n)?F("",!0):(r(),c("div",Se,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:u}," Reset to Default ")]))])}}}),Nt=Object.assign(Fe,{__name:"FilterSortControl"}),je={key:0,class:"fixed inset-0 z-[100] overflow-hidden flex flex-col"},Ae={class:"flex items-center justify-between p-4 border-b border-theme-border/30"},Be={class:"text-xs font-bold text-theme-textmuted uppercase tracking-widest"},Me=S({__name:"FilterPopup",props:{isOpen:{type:Boolean},title:{},anchorEl:{}},emits:["close"],setup(o,{emit:l}){const m=o,y=l,s=$(null),n=$(null),u=$(!1),{width:v,height:p}=J(),a=ee(ne).smaller("md"),x=te(typeof window<"u"?document.body:null),i=()=>{if(!n.value)return;const{scrollTop:_,scrollHeight:C,clientHeight:A}=n.value;u.value=_+A<C-20},g=()=>{n.value&&n.value.scrollBy({top:200,behavior:"smooth"})},{activate:w,deactivate:d}=re(s,{immediate:!1,allowOutsideClick:!0,escapeDeactivates:!0,returnFocusOnDeactivate:!0});j(()=>m.isOpen,_=>{x.value=_,_?ie(()=>{setTimeout(()=>w(),50),setTimeout(()=>i(),100),setTimeout(()=>i(),300),setTimeout(()=>i(),500)}):d()}),se("Escape",_=>{m.isOpen&&(_.preventDefault(),y("close"))});const h=M(()=>{if(a.value||!m.anchorEl)return{};const _=m.anchorEl.getBoundingClientRect(),C=320;let A=_.left,Y=_.bottom+8;A+C>v.value-16&&(A=v.value-C-16),A<16&&(A=16);const W=s.value?.offsetHeight||300;return Y+W>p.value-16&&(Y=_.top-W-8),Y<16&&(Y=16),{top:`${Y}px`,left:`${A}px`,width:`${C}px`}});return(_,C)=>(r(),K(oe,{to:"body"},[B(Z,{name:"fade"},{default:z(()=>[o.isOpen?(r(),c("div",je,[e("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-[2px] transition-opacity duration-300",onClick:C[0]||(C[0]=A=>_.$emit("close"))}),B(Z,{name:"pop",appear:""},{default:z(()=>[e("div",{ref_key:"popupRef",ref:s,class:k(["absolute glass shadow-2xl overflow-hidden flex flex-col border border-theme-border/50",[t(a)?"bottom-0 left-0 right-0 rounded-t-3xl max-h-[85vh] w-full":"rounded-2xl max-w-xs"]]),style:q(t(h))},[e("div",Ae,[e("h3",Be,b(o.title),1),e("button",{class:"p-1 hover:bg-theme-selection rounded-full transition-colors text-theme-textmuted hover:text-theme-text",onClick:C[1]||(C[1]=A=>_.$emit("close"))},[...C[2]||(C[2]=[e("div",{class:"i-mdi-close text-lg"},null,-1)])])]),e("div",{ref_key:"contentRef",ref:n,class:"p-4 overflow-y-auto scrollbar-thin max-h-[40vh] md:max-h-[280px] relative",onScroll:i},[Q(_.$slots,"default",{},void 0,!0),t(u)?(r(),c("button",{key:0,class:"absolute bottom-2 left-1/2 -translate-x-1/2 z-10 p-2 rounded-full bg-theme-surface/60 border border-theme-border/20 text-theme-text/50 shadow-sm hover:bg-theme-accent hover:text-black hover:border-theme-accent transition-all duration-200 flex items-center justify-center animate-pulse",onClick:g},[...C[3]||(C[3]=[e("div",{class:"i-mdi-chevron-down text-2xl"},null,-1)])])):F("",!0)],544)],6)]),_:3})])):F("",!0)]),_:3})]))}}),Pt=Object.assign(G(Me,[["__scopeId","data-v-4424bce6"]]),{__name:"FilterPopup"}),Oe={class:"space-y-6 py-2"},Te={class:"flex items-center justify-between"},Re={class:"text-lg font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},Ve={class:"relative px-2"},Le={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Ie=S({__name:"FilterRatingControl",setup(o){const l=O(),{filters:m}=T(l),s=R(V,null)||m,n=$(s.value.minRating),u=N(v=>{s.value.minRating=v},300);return j(n,v=>{u(v)}),j(()=>s.value.minRating,v=>{v!==n.value&&(n.value=v)}),(v,p)=>(r(),c("div",Oe,[e("div",Te,[p[2]||(p[2]=e("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Minimum Rating ",-1)),e("div",Re,b(t(n)===0?"All Ratings":`${t(n).toFixed(1)}+`),1)]),e("div",Ve,[E(e("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>D(n)?n.value=f:null),type:"range",min:"0",max:"10",step:"0.5",class:"filter-range-input"},null,512),[[H,t(n),void 0,{number:!0}]]),p[3]||(p[3]=e("div",{class:"flex justify-between mt-2 text-[10px] text-theme-textmuted font-medium px-1"},[e("span",null,"0"),e("span",null,"5"),e("span",null,"10")],-1))]),t(n)>0?(r(),c("div",Le,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:p[1]||(p[1]=f=>n.value=0)}," Clear Filter ")])):F("",!0)]))}}),Wt=Object.assign(G(Ie,[["__scopeId","data-v-fe437ce5"]]),{__name:"FilterRatingControl"}),Ye={class:"space-y-6 py-2"},Ee={class:"flex items-center justify-between"},He={class:"text-sm font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},De={class:"space-y-4 px-2"},Ue={class:"space-y-1"},ze={class:"flex justify-between text-[10px] text-theme-textmuted"},Ge={class:"font-bold text-theme-text"},Ke={class:"space-y-1"},Ne={class:"flex justify-between text-[10px] text-theme-textmuted"},Pe={class:"font-bold text-theme-text"},We={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Ze=S({__name:"FilterYearControl",setup(o){const l=O(),{filters:m}=T(l),s=R(V,null)||m,n=$(s.value.minYear||1910),u=$(s.value.maxYear||2025),v=M(()=>n.value!==1910||u.value!==2025),p=()=>{n.value=1910,u.value=2025};j(n,a=>{a>u.value&&(u.value=a),f()}),j(u,a=>{a<n.value&&(n.value=a),f()});const f=N(()=>{s.value.minYear=n.value===1910?0:n.value,s.value.maxYear=u.value===2025?0:u.value},300);return j(()=>s.value.minYear,a=>{const x=a||1910;x!==n.value&&(n.value=x)}),j(()=>s.value.maxYear,a=>{const x=a||2025;x!==u.value&&(u.value=x)}),(a,x)=>(r(),c("div",Ye,[e("div",Ee,[x[2]||(x[2]=e("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Year Range ",-1)),e("div",He,b(t(n))+" — "+b(t(u)),1)]),e("div",De,[e("div",Ue,[e("div",ze,[x[3]||(x[3]=e("span",null,"From",-1)),e("span",Ge,b(t(n)),1)]),E(e("input",{"onUpdate:modelValue":x[0]||(x[0]=i=>D(n)?n.value=i:null),type:"range",min:"1910",max:"2025",step:"1",class:"filter-range-input"},null,512),[[H,t(n),void 0,{number:!0}]])]),e("div",Ke,[e("div",Ne,[x[4]||(x[4]=e("span",null,"To",-1)),e("span",Pe,b(t(u)),1)]),E(e("input",{"onUpdate:modelValue":x[1]||(x[1]=i=>D(u)?u.value=i:null),type:"range",min:"1910",max:"2025",step:"1",class:"filter-range-input"},null,512),[[H,t(u),void 0,{number:!0}]])]),x[5]||(x[5]=e("div",{class:"flex justify-between text-[10px] text-theme-textmuted font-medium px-1"},[e("span",null,"1910"),e("span",null,"1970"),e("span",null,"2025")],-1))]),t(v)?(r(),c("div",We,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:p}," Clear Filter ")])):F("",!0)]))}}),Zt=Object.assign(G(Ze,[["__scopeId","data-v-3033b658"]]),{__name:"FilterYearControl"});function L(o){if(o>=1e6){const l=o/1e6;return`${l>=10?Math.round(l):l.toFixed(1).replace(/\.0$/,"")}M`}if(o>=1e3){const l=o/1e3;return`${l>=10?Math.round(l):l.toFixed(1).replace(/\.0$/,"")}K`}return o.toString()}const qe={class:"space-y-6 py-2"},Je={class:"flex items-center justify-between"},Qe={class:"text-sm font-bold text-theme-primary bg-theme-primary/10 px-2 py-0.5 rounded-lg"},Xe={class:"space-y-4 px-2"},et={class:"space-y-1"},tt={class:"flex justify-between text-[10px] text-theme-textmuted"},st={class:"font-bold text-theme-text"},ot={class:"space-y-1"},nt={class:"flex justify-between text-[10px] text-theme-textmuted"},it={class:"font-bold text-theme-text"},rt={class:"flex justify-between text-[8px] text-theme-textmuted font-medium px-0 opacity-70"},lt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},at=S({__name:"FilterVotesControl",setup(o){const l=O(),{filters:m}=T(l),s=R(V,null)||m,n=[0,100,500,1e3,5e3,1e4,5e4,1e5,5e5,1e6],u=["0","1K","5K","50K","500K","1M+"],v=d=>{const h=n.findIndex(_=>_>=d);return h===-1?9:h},p=$(v(s.value.minVotes)),f=$(s.value.maxVotes?v(s.value.maxVotes):9),a=M(()=>n[p.value]),x=M(()=>n[f.value]),i=M(()=>p.value!==0||f.value!==9),g=()=>{p.value=0,f.value=9};j(p,d=>{d>f.value&&(f.value=d),w()}),j(f,d=>{d<p.value&&(p.value=d),w()});const w=N(()=>{s.value.minVotes=a.value,s.value.maxVotes=f.value===9?0:x.value},300);return j(()=>s.value.minVotes,d=>{const h=v(d);h!==p.value&&(p.value=h)}),j(()=>s.value.maxVotes,d=>{const h=d?v(d):9;h!==f.value&&(f.value=h)}),(d,h)=>(r(),c("div",qe,[e("div",Je,[h[2]||(h[2]=e("div",{class:"text-xs font-semibold text-theme-textmuted uppercase tracking-wider"}," Votes Range ",-1)),e("div",Qe,b(("formatCount"in d?d.formatCount:t(L))(t(a)))+" — "+b(t(f)===9?"Any":("formatCount"in d?d.formatCount:t(L))(t(x))),1)]),e("div",Xe,[e("div",et,[e("div",tt,[h[3]||(h[3]=e("span",null,"Min",-1)),e("span",st,b(("formatCount"in d?d.formatCount:t(L))(t(a))),1)]),E(e("input",{"onUpdate:modelValue":h[0]||(h[0]=_=>D(p)?p.value=_:null),type:"range",min:"0",max:"9",step:"1",class:"filter-range-input"},null,512),[[H,t(p),void 0,{number:!0}]])]),e("div",ot,[e("div",nt,[h[4]||(h[4]=e("span",null,"Max",-1)),e("span",it,b(t(f)===9?"Any":("formatCount"in d?d.formatCount:t(L))(t(x))),1)]),E(e("input",{"onUpdate:modelValue":h[1]||(h[1]=_=>D(f)?f.value=_:null),type:"range",min:"0",max:"9",step:"1",class:"filter-range-input"},null,512),[[H,t(f),void 0,{number:!0}]])]),e("div",rt,[(r(),c(I,null,U(u,_=>e("span",{key:_,class:"w-8 text-center"},b(_),1)),64))])]),t(i)?(r(),c("div",lt,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:g}," Clear Filter ")])):F("",!0)]))}}),qt=Object.assign(G(at,[["__scopeId","data-v-a1b54b58"]]),{__name:"FilterVotesControl"}),ct={class:"space-y-4"},dt={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},ut={key:1,class:"text-xs text-red-500 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"},mt={key:2,class:"space-y-4"},pt={class:"flex flex-wrap gap-2"},xt=["onClick"],vt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},ft=S({__name:"FilterGenresControl",setup(o){const l=O(),{filters:m}=T(l),s=R(V,null)||m,n=$([]),u=$(!0),v=$(null),p=async()=>{u.value=!0,v.value=null;try{const a=await l.getFilterOptions();n.value=a.genres}catch{v.value="Failed to load genres"}finally{u.value=!1}},f=()=>{s.value.genres=[]};return P(()=>{p()}),(a,x)=>(r(),c("div",ct,[t(u)?(r(),c("div",dt,[...x[0]||(x[0]=[e("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),e("span",{class:"text-xs text-theme-textmuted"},"Loading genres...",-1)])])):t(v)?(r(),c("div",ut,b(t(v)),1)):(r(),c("div",mt,[e("div",pt,[(r(!0),c(I,null,U(t(n),i=>(r(),c("button",{key:i.name,class:k(["px-3 py-1.5 text-xs rounded-full transition-all inline-flex items-center gap-1.5 border",[t(s).genres.includes(i.name)?"bg-theme-primary text-white border-theme-primary shadow-sm":"bg-theme-selection text-theme-text border-theme-border/50 hover:border-theme-border hover:bg-theme-border/30"]]),onClick:g=>t(s).genres.includes(i.name)?t(s).genres=t(s).genres.filter(w=>w!==i.name):t(s).genres=[...t(s).genres,i.name]},[e("span",null,b(i.name),1),e("span",{class:k(["text-[10px] opacity-70",{"text-white/80":t(s).genres.includes(i.name)}])},b(("formatCount"in a?a.formatCount:t(L))(i.count)),3)],10,xt))),128))]),t(s).genres.length>0?(r(),c("div",vt,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:f}," Clear ("+b(t(s).genres.length)+") ",1)])):F("",!0)]))]))}}),Jt=Object.assign(ft,{__name:"FilterGenresControl"}),ht={class:"space-y-4"},bt={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},yt={key:1,class:"text-xs text-red-500 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"},gt={key:2,class:"space-y-4"},_t={class:"flex flex-wrap gap-2"},$t=["onClick"],kt={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},wt=S({__name:"FilterCountriesControl",setup(o){const l=O(),{filters:m}=T(l),s=R(V,null)||m,n=$([]),u=$(!0),v=$(null),p=async()=>{u.value=!0,v.value=null;try{const a=await l.getFilterOptions();n.value=a.countries}catch{v.value="Failed to load countries"}finally{u.value=!1}},f=()=>{s.value.countries=[]};return P(()=>{p()}),(a,x)=>(r(),c("div",ht,[t(u)?(r(),c("div",bt,[...x[0]||(x[0]=[e("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),e("span",{class:"text-xs text-theme-textmuted"},"Loading countries...",-1)])])):t(v)?(r(),c("div",yt,b(t(v)),1)):(r(),c("div",gt,[e("div",_t,[(r(!0),c(I,null,U(t(n),i=>(r(),c("button",{key:i.name,class:k(["px-3 py-1.5 text-xs rounded-full transition-all inline-flex items-center gap-1.5 border",[t(s).countries.includes(i.name)?"bg-theme-primary text-white border-theme-primary shadow-sm":"bg-theme-selection text-theme-text border-theme-border/50 hover:border-theme-border hover:bg-theme-border/30"]]),onClick:g=>t(s).countries.includes(i.name)?t(s).countries=t(s).countries.filter(w=>w!==i.name):t(s).countries=[...t(s).countries,i.name]},[e("span",null,b(i.name),1),e("span",{class:k(["text-[10px] opacity-70",{"text-white/80":t(s).countries.includes(i.name)}])},b(("formatCount"in a?a.formatCount:t(L))(i.count)),3)],10,$t))),128))]),t(s).countries.length>0?(r(),c("div",kt,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:f}," Clear ("+b(t(s).countries.length)+") ",1)])):F("",!0)]))]))}}),Qt=Object.assign(wt,{__name:"FilterCountriesControl"}),Ct=["aria-checked","aria-disabled"],St={key:0,class:"i-mdi-checkbox-marked text-xl"},Ft={key:1,class:"i-mdi-checkbox-blank-outline text-xl"},jt=["checked","value","disabled"],At=S({__name:"AppInputCheckbox",props:{checked:{type:Boolean},value:{type:[String,Number,Boolean]},label:{},disabled:{type:Boolean}},emits:["change"],setup(o,{emit:l}){const m=l,y=s=>{const n=s.target;m("change",n.checked)};return(s,n)=>(r(),c("label",{class:k(["flex items-center gap-2 cursor-pointer group",{"opacity-50 cursor-not-allowed":o.disabled}])},[e("div",{class:k(["flex items-center justify-center w-5 h-5 transition-colors",{"text-theme-primary":o.checked,"text-theme-textmuted group-hover:text-theme-text":!o.checked}]),role:"checkbox","aria-checked":o.checked,"aria-disabled":o.disabled},[o.checked?(r(),c("div",St)):(r(),c("div",Ft))],10,Ct),e("input",{checked:o.checked,type:"checkbox",value:o.value,disabled:o.disabled,class:"sr-only",onChange:y},null,40,jt),o.label?(r(),c("span",{key:0,class:k(["text-sm select-none",{"text-theme-textmuted":o.disabled}])},b(o.label),3)):F("",!0),Q(s.$slots,"default")],2))}}),Bt=Object.assign(At,{__name:"AppInputCheckbox"}),Mt={class:"space-y-4"},Ot={key:0,class:"flex flex-col items-center justify-center py-8 space-y-2"},Tt={key:1,class:"space-y-4"},Rt={class:"space-y-2"},Vt={class:"space-y-3"},Lt={class:"pl-2 space-y-2 border-l-2 border-theme-border/30 max-h-[250px] overflow-y-auto scrollbar-thin pr-2"},It={class:"flex items-center justify-between gap-2 flex-1"},Yt={class:"text-sm text-theme-text"},Et={class:"text-[10px] text-theme-textmuted font-medium"},Ht={key:0,class:"flex justify-end pt-2 border-t border-theme-border/30"},Dt=S({__name:"FilterSourceControl",setup(o){const l=O(),{filters:m}=T(l),s=R(V,null)||m,n=$([]),u=$(!0),v=async()=>{u.value=!0;try{const f=await l.getFilterOptions();n.value=f.channels}catch{}finally{u.value=!1}},p=()=>{s.value.sources=[]};return P(()=>{v()}),(f,a)=>{const x=Bt;return r(),c("div",Mt,[t(u)?(r(),c("div",Ot,[...a[1]||(a[1]=[e("div",{class:"i-mdi-loading animate-spin text-2xl text-theme-primary"},null,-1),e("span",{class:"text-xs text-theme-textmuted"},"Loading sources...",-1)])])):(r(),c("div",Tt,[e("div",Rt,[B(x,{checked:t(s).sources.includes("archive.org"),onChange:a[0]||(a[0]=i=>t(s).sources.includes("archive.org")?t(s).sources=t(s).sources.filter(g=>g!=="archive.org"):t(s).sources=[...t(s).sources,"archive.org"])},{default:z(()=>[...a[2]||(a[2]=[e("span",{class:"flex items-center justify-between gap-2 flex-1"},[e("span",{class:"text-sm font-medium text-theme-text"},"Archive.org")],-1)])]),_:1},8,["checked"])]),e("div",Vt,[a[3]||(a[3]=e("div",{class:"text-[10px] font-bold text-theme-textmuted uppercase tracking-widest pl-1"}," YouTube Channels ",-1)),e("div",Lt,[(r(!0),c(I,null,U(t(n),i=>(r(),K(x,{key:i.id,checked:t(s).sources.includes(i.name),onChange:g=>t(s).sources.includes(i.name)?t(s).sources=t(s).sources.filter(w=>w!==i.name):t(s).sources=[...t(s).sources,i.name]},{default:z(()=>[e("span",It,[e("span",Yt,b(i.name),1),e("span",Et,b(("formatCount"in f?f.formatCount:t(L))(i.count)),1)])]),_:2},1032,["checked","onChange"]))),128))])]),t(s).sources.length>0?(r(),c("div",Ht,[e("button",{class:"text-xs text-theme-primary hover:underline font-medium",onClick:p}," Clear ("+b(t(s).sources.length)+") ",1)])):F("",!0)]))])}}}),Xt=Object.assign(Dt,{__name:"FilterSourceControl"});export{V as F,Gt as _,Kt as a,Nt as b,Pt as c,Wt as d,Zt as e,L as f,qt as g,Jt as h,Qt as i,Xt as j};
