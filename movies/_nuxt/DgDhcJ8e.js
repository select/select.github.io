import{f as $,_ as ie,a as le,b as ce,c as ue,d as de,e as me,g as pe,h as ve,i as he,j as _e}from"./B5coZIsR.js";import{E as N,G as U,H as D,Q as xe,r as k,R as fe,e as x,J as ge,n as w,S as be,T as H,U as ye,z as e,c as p,o as d,a as n,b as a,L as R,V as L,W as Ce,X as Se,P as O,w as _,Y as ke,x as Me,Z as $e,$ as we,a0 as Re,d as Fe,t as Ve,u as Ye,F as P,M as Te,N as De,_ as Ne}from"./BIsaz7oS.js";import{_ as Qe}from"./CjdpYspR.js";import{_ as Ae}from"./BWcRk8xV.js";import"./DvgieTos.js";import"./GRSIsFud.js";import"./6eiySPQC.js";import"./BZoB5iRl.js";import"./DMOTkeJ5.js";const Be={class:"max-w-4xl mx-auto px-4 py-4 space-y-4"},He={class:"flex items-center gap-4"},Le={class:"relative flex-1"},Oe={class:"absolute inset-y-0 left-2 flex items-center z-10"},Pe={key:0,class:"pl-2 pr-1"},Ue=["placeholder"],ze={class:"absolute inset-y-0 right-0 flex items-center pr-2 z-10"},Ee={class:"flex flex-wrap items-center gap-2 pb-1"},Ge=["disabled"],Ie=N({__name:"SearchHeader",setup(F){const g=U(),{filters:o,hasActiveFilters:V,isFiltering:Y}=D(g),b=xe(),{isSearchOpen:y}=D(b),{setSearchOpen:C}=b,S=k(null),M=k(null),c=fe(),l=k(o.value.searchQuery),i=k(null),u=k(null),v=(s,t)=>{i.value===s?(i.value=null,u.value=null):(i.value=s,u.value=t.currentTarget)},m=()=>{i.value=null,u.value=null},Q=x(()=>o.value.sort.field==="year"&&o.value.sort.direction==="desc"),z=x(()=>{if(Q.value)return"";const s=o.value.sort.field,t=o.value.sort.direction;return s==="relevance"?"Relevance":s==="year"?t==="desc"?"Newest":"Oldest":s==="rating"?t==="desc"?"High":"Low":s==="title"?t==="asc"?"A-Z":"Z-A":s==="votes"?"Popular":""}),E=x(()=>{const s=o.value.minYear,t=o.value.maxYear;return s&&t&&s!==1910&&t!==2025?`${s}-${t}`:s&&s!==1910?`${s}+`:t&&t!==2025?`Up to ${t}`:""}),G=x(()=>{const s=o.value.minVotes,t=o.value.maxVotes;return s&&t&&t<1e6?`${$(s)}-${$(t)}`:s?`${$(s)}+`:t&&t<1e6?`< ${$(t)}`:""}),I=x(()=>o.value.searchMode==="semantic"?"Describe what you want to watch...":"Search movies... (try: actor:Roy Rogers, director:Dave Fleischer)"),K=()=>{o.value.sort={field:"year",direction:"desc"}},j=()=>{o.value.minYear=0,o.value.maxYear=0},W=()=>{o.value.minVotes=0,o.value.maxVotes=0};ge(()=>{const s=c.query.q;s&&s!==l.value&&(l.value=s,C(!0))});const Z=ke(s=>{if($e(s)&&(o.value.searchMode="exact"),o.value.searchQuery=s,!c.path.startsWith("/admin")){const t=we();s?t.replace({query:{q:s}}):t.replace({query:{}})}s&&c.path!=="/search"&&!c.path.startsWith("/admin")&&Re("/search"),s&&o.value.sort.field!=="relevance"&&(o.value.sort={field:"relevance",direction:"desc"})},500);w(l,s=>{Z(s)}),w(()=>o.value.searchQuery,s=>{s!==l.value&&(l.value=s)});const A=x(()=>c.path==="/search"?!0:y.value||l.value!=="");w([y,()=>c.path],([s,t])=>{(s||t==="/search")&&Me(()=>{S.value?.focus()})},{immediate:!0}),w(()=>c.path,s=>{(s==="/search"||s==="/"&&l.value)&&C(!0)}),be(M,()=>{c.path!=="/search"&&!l.value&&!i.value&&T()});const B=()=>{l.value=""},T=()=>{c.path!=="/search"&&C(!1)},q=()=>{i.value?m():l.value?B():c.path!=="/search"&&T()},J=()=>{!i.value&&c.path!=="/search"&&T()};return(s,t)=>{const X=ie,f=le,ee=ce,h=ue,te=de,oe=me,se=pe,ne=ve,ae=he,re=_e;return H((d(),p("div",{ref_key:"searchContainer",ref:M,class:O(["fixed top-0 left-0 right-0 z-50 bg-theme-surface border-b border-theme-border shadow-xl transition-all duration-300",e(A)?"translate-y-0":"-translate-y-full"])},[n("div",Be,[n("div",He,[n("div",Le,[n("div",Oe,[e(Y)?(d(),p("div",Pe,[...t[14]||(t[14]=[n("div",{class:"i-mdi-loading animate-spin text-lg text-theme-primary"},null,-1)])])):R("",!0),a(X)]),H(n("input",{ref_key:"searchInput",ref:S,"onUpdate:modelValue":t[0]||(t[0]=r=>Ce(l)?l.value=r:null),type:"text",class:"block w-full pl-32 md:pl-36 pr-12 py-3 md:py-4 bg-theme-background border-2 border-transparent focus:border-theme-primary rounded-2xl text-xl md:text-2xl text-theme-text placeholder-theme-text-muted focus:outline-none transition-all shadow-inner",placeholder:e(I),onKeydown:[L(q,["esc"]),L(J,["enter"])]},null,40,Ue),[[Se,e(l)]]),n("div",ze,[e(l)?(d(),p("button",{key:0,class:"p-2 hover:bg-theme-background rounded-full transition-colors",title:"Clear search",onClick:B},[...t[15]||(t[15]=[n("div",{class:"i-mdi-close text-xl text-theme-textmuted hover:text-theme-text"},null,-1)])])):R("",!0),n("button",{class:"p-2 hover:bg-theme-background rounded-full transition-colors group",title:"Search tips",onClick:t[1]||(t[1]=r=>v("help",r))},[...t[16]||(t[16]=[n("div",{class:"i-mdi-help-circle-outline text-xl text-theme-textmuted group-hover:text-theme-primary transition-colors"},null,-1)])])])])]),n("div",Ee,[a(f,{category:"Sort",icon:"i-mdi-sort","active-value":e(z),"is-active":!e(Q),disabled:e(o).searchMode==="semantic",onClick:t[2]||(t[2]=r=>v("sort",r)),onClear:K},null,8,["active-value","is-active","disabled"]),a(f,{category:"Rating",icon:"i-mdi-star","active-value":e(o).minRating>0?`${e(o).minRating.toFixed(1)}+`:"","is-active":e(o).minRating>0,disabled:e(o).searchMode==="semantic",onClick:t[3]||(t[3]=r=>v("rating",r)),onClear:t[4]||(t[4]=r=>e(o).minRating=0)},null,8,["active-value","is-active","disabled"]),a(f,{category:"Year",icon:"i-mdi-calendar","active-value":e(E),"is-active":e(o).minYear>0||(e(o).maxYear??0)>0,disabled:e(o).searchMode==="semantic",onClick:t[5]||(t[5]=r=>v("year",r)),onClear:j},null,8,["active-value","is-active","disabled"]),a(f,{category:"Votes",icon:"i-mdi-account-group","active-value":e(G),"is-active":e(o).minVotes>0||(e(o).maxVotes??0)>0&&(e(o).maxVotes??0)<1e6,disabled:e(o).searchMode==="semantic",onClick:t[6]||(t[6]=r=>v("votes",r)),onClear:W},null,8,["active-value","is-active","disabled"]),a(f,{category:"Genres",icon:"i-mdi-movie-filter","active-value":e(o).genres.length>0?e(o).genres.length:"","is-active":e(o).genres.length>0,disabled:e(o).searchMode==="semantic",onClick:t[7]||(t[7]=r=>v("genres",r)),onClear:t[8]||(t[8]=r=>e(o).genres=[])},null,8,["active-value","is-active","disabled"]),a(f,{category:"Countries",icon:"i-mdi-earth","active-value":e(o).countries.length>0?e(o).countries.length:"","is-active":e(o).countries.length>0,disabled:e(o).searchMode==="semantic",onClick:t[9]||(t[9]=r=>v("countries",r)),onClear:t[10]||(t[10]=r=>e(o).countries=[])},null,8,["active-value","is-active","disabled"]),a(f,{category:"Source",icon:"i-mdi-source-branch","active-value":e(o).sources.length>0?e(o).sources.length:"","is-active":e(o).sources.length>0,disabled:e(o).searchMode==="semantic",onClick:t[11]||(t[11]=r=>v("source",r)),onClear:t[12]||(t[12]=r=>e(o).sources=[])},null,8,["active-value","is-active","disabled"]),e(V)?(d(),p("button",{key:0,class:O(["text-xs font-bold text-theme-primary hover:bg-theme-primary/10 px-3 py-1.5 rounded-full transition-colors whitespace-nowrap md:ml-auto",{"opacity-50 cursor-not-allowed":e(o).searchMode==="semantic"}]),disabled:e(o).searchMode==="semantic",onClick:t[13]||(t[13]=r=>e(g).clearAllFilters())}," Clear All ",10,Ge)):R("",!0)])]),a(h,{"is-open":e(i)==="sort",title:"Sort By","anchor-el":e(u),onClose:m},{default:_(()=>[a(ee)]),_:1},8,["is-open","anchor-el"]),a(h,{"is-open":e(i)==="rating",title:"Minimum Rating","anchor-el":e(u),onClose:m},{default:_(()=>[a(te)]),_:1},8,["is-open","anchor-el"]),a(h,{"is-open":e(i)==="year",title:"Year Range","anchor-el":e(u),onClose:m},{default:_(()=>[a(oe)]),_:1},8,["is-open","anchor-el"]),a(h,{"is-open":e(i)==="votes",title:"Votes Range","anchor-el":e(u),onClose:m},{default:_(()=>[a(se)]),_:1},8,["is-open","anchor-el"]),a(h,{"is-open":e(i)==="genres",title:"Genres","anchor-el":e(u),onClose:m},{default:_(()=>[a(ne)]),_:1},8,["is-open","anchor-el"]),a(h,{"is-open":e(i)==="countries",title:"Countries","anchor-el":e(u),onClose:m},{default:_(()=>[a(ae)]),_:1},8,["is-open","anchor-el"]),a(h,{"is-open":e(i)==="source",title:"Sources","anchor-el":e(u),onClose:m},{default:_(()=>[a(re)]),_:1},8,["is-open","anchor-el"]),a(h,{"is-open":e(i)==="help",title:"Search Tips","anchor-el":e(u),onClose:m},{default:_(()=>[...t[17]||(t[17]=[n("div",{class:"p-4 max-w-xs space-y-3 text-sm"},[n("p",{class:"text-theme-textmuted"},"Use keywords for field-specific search:"),n("ul",{class:"space-y-2"},[n("li",{class:"flex items-center gap-2"},[n("code",{class:"bg-theme-background px-1.5 py-0.5 rounded text-theme-primary font-mono"},"actor:"),n("span",{class:"text-theme-text"},"Search by actor")]),n("li",{class:"flex items-center gap-2"},[n("code",{class:"bg-theme-background px-1.5 py-0.5 rounded text-theme-primary font-mono"},"director:"),n("span",{class:"text-theme-text"},"Search by director")]),n("li",{class:"flex items-center gap-2"},[n("code",{class:"bg-theme-background px-1.5 py-0.5 rounded text-theme-primary font-mono"},"writer:"),n("span",{class:"text-theme-text"},"Search by writer")]),n("li",{class:"flex items-center gap-2"},[n("code",{class:"bg-theme-background px-1.5 py-0.5 rounded text-theme-primary font-mono"},"title:"),n("span",{class:"text-theme-text"},"Search by title")])]),n("div",{class:"pt-2 border-t border-theme-border"},[n("p",{class:"text-theme-textmuted mb-1"},"Use quotes for spaces:"),n("code",{class:"block bg-theme-background p-2 rounded text-theme-primary font-mono"},'actor:"Roy Rogers"')]),n("div",{class:"pt-2 border-t border-theme-border"},[n("p",{class:"text-theme-textmuted mb-1"},"Combine multiple keywords:"),n("code",{class:"block bg-theme-background p-2 rounded text-theme-primary font-mono"},"actor:Keanu title:Matrix")])],-1)])]),_:1},8,["is-open","anchor-el"])],2)),[[ye,e(A)]])}}}),Ke=Object.assign(Ie,{__name:"SearchHeader"}),je={class:"mb-8"},We={class:"flex flex-wrap gap-6 text-sm"},Ze={class:"text-theme-text"},qe=N({__name:"MovieStats",props:{totalMovies:{}},setup(F){return(g,o)=>(d(),p("div",je,[n("div",We,[n("div",Ze,[o[0]||(o[0]=n("span",{class:"text-theme-textmuted"},"Total Movies:",-1)),Fe(" "+Ve(F.totalMovies),1)])])]))}}),Je=Object.assign(qe,{__name:"MovieStats"}),Xe={class:"min-h-screen bg-theme-background"},et={class:"md:ml-16 md:pt-16"},tt={class:"px-4 lg:px-[6%] py-8"},ot={class:"relative lg:px-[6%] px-4"},st={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},nt={key:2,class:"text-center py-12"},at=N({__name:"search",setup(F){Ye({title:"Search Movies - Movies Deluxe",meta:[{name:"description",content:"Search and filter thousands of free public domain movies from Archive.org and YouTube. Classic films, documentaries, and more."},{property:"og:title",content:"Search Movies - Movies Deluxe"},{property:"og:type",content:"website"}]});const g=U(),{isFiltering:o,totalFiltered:V,searchResultMovies:Y}=D(g),b=x(()=>V.value||0),y=x(()=>Y.value);return(C,S)=>{const M=Ke,c=Je,l=Qe,i=Ae;return d(),p("div",Xe,[a(M),n("main",et,[n("div",tt,[!e(o)&&e(b)>0?(d(),P(c,{key:0,"total-movies":e(b)},null,8,["total-movies"])):R("",!0)]),n("div",ot,[e(o)?(d(),p("div",st,[(d(),p(Te,null,De(12,u=>a(l,{key:u})),64))])):e(y).length>0?(d(),P(i,{key:1,"movie-ids":e(y)},null,8,["movie-ids"])):(d(),p("div",nt,[...S[0]||(S[0]=[n("p",{class:"text-theme-textmuted"},"No movies found.",-1)])]))])])])}}}),ht=Ne(at,[["__scopeId","data-v-beee22f3"]]);export{ht as default};
