import{_ as Qe}from"./6eiySPQC.js";import{a as Je,_ as Xe}from"./CjdpYspR.js";import{E as ke,r as p,n as be,c as l,L as c,o as a,a as e,P as j,t as m,M as g,N as w,z as o,T as ne,a1 as Ze,W as de,B as et,H as ye,e as se,J as Te,b as W,d as P,X as he,V as fe,x as ge,G as tt,a2 as ot,R as st,a3 as at,I as Me,a4 as lt,a5 as re,K as rt,a6 as Re,w as ie,F as Ae,a7 as it,u as nt,a0 as De,a8 as dt,_ as ct}from"./BIsaz7oS.js";import{u as ut,g as mt}from"./BZoB5iRl.js";import{f as vt}from"./DMOTkeJ5.js";var Pe=(v=>(v.LOW_QUALITY="low-quality",v.CAM_RIP="cam-rip",v.HARDCODED_SUBS="hardcoded-subs",v.AUDIO_ISSUES="audio-issues",v.VIDEO_ISSUES="video-issues",v.INCOMPLETE="incomplete",v.WRONG_ASPECT_RATIO="wrong-aspect-ratio",v))(Pe||{});const pt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},ht={class:"bg-theme-surface rounded-2xl w-full max-w-lg shadow-2xl border border-theme-border overflow-hidden"},ft={class:"p-6 space-y-6"},bt={class:"p-3 bg-theme-background/50 rounded-lg border border-theme-border"},xt={class:"flex items-center gap-2 mb-1"},yt={class:"font-medium text-theme-text"},gt={class:"text-xs text-theme-textmuted line-clamp-2"},kt={class:"grid grid-cols-2 gap-3"},wt=["value"],_t={class:"text-sm capitalize"},$t={class:"flex gap-3 pt-2"},St=["disabled"],Ct={key:0,class:"i-mdi-loading animate-spin"},It=ke({__name:"AdminSourceQualityDialog",props:{modelValue:{type:Boolean},movie:{},source:{}},emits:["update:modelValue","saved"],setup(v,{emit:E}){const h=v,C=E,R=p(!1),y=p([]);be(()=>h.modelValue,D=>{D&&h.source&&(y.value=[...h.source.qualityMarks||[]])});const F=Object.values(Pe),A=()=>{C("update:modelValue",!1)},b=async()=>{if(h.source){R.value=!0;try{(await $fetch("/api/admin/movie/update-source-quality",{method:"POST",body:{movieId:h.movie.movieId,sourceId:h.source.id,qualityMarks:y.value}})).success&&(C("saved"),A())}catch(D){console.error("Failed to update source quality:",D)}finally{R.value=!1}}},q=async()=>{confirm("Clear all quality marks for this source?")&&(y.value=[],await b())};return(D,k)=>v.modelValue&&v.source?(a(),l("div",pt,[e("div",ht,[e("div",{class:"p-6 border-b border-theme-border flex items-center justify-between"},[k[2]||(k[2]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"i-mdi-alert-decagram text-yellow-600 text-2xl"}),e("h3",{class:"text-xl font-bold"},"Mark Source Quality")],-1)),e("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors",onClick:A},[...k[1]||(k[1]=[e("div",{class:"i-mdi-close text-xl"},null,-1)])])]),e("div",ft,[e("div",bt,[e("div",xt,[e("div",{class:j([v.source.type==="youtube"?"i-mdi-youtube text-red-600":"i-mdi-bank text-blue-600","text-lg"])},null,2),e("span",yt,m(v.source.type),1)]),e("p",gt,m(v.source.title),1)]),e("div",null,[k[3]||(k[3]=e("h4",{class:"text-sm font-bold text-theme-text mb-3 uppercase tracking-wider"}," Quality Marks ",-1)),e("div",kt,[(a(!0),l(g,null,w(o(F),T=>(a(),l("label",{key:T,class:j(["flex items-center gap-2 p-2 rounded-lg border border-theme-border hover:bg-theme-selection cursor-pointer transition-colors",{"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-900/50":o(y).includes(T)}])},[ne(e("input",{"onUpdate:modelValue":k[0]||(k[0]=i=>de(y)?y.value=i:null),type:"checkbox",value:T,class:"rounded text-yellow-600 focus:ring-yellow-500"},null,8,wt),[[Ze,o(y)]]),e("span",_t,m(T.replace(/-/g," ")),1)],2))),128))])]),e("div",$t,[e("button",{class:"flex-1 px-4 py-2 border border-theme-border rounded-lg font-bold hover:bg-theme-selection transition-colors",onClick:A}," Cancel "),e("button",{class:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg font-bold hover:bg-yellow-500 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",disabled:o(R),onClick:b},[o(R)?(a(),l("div",Ct)):c("",!0),e("span",null,m(o(R)?"Saving...":"Save Quality"),1)],8,St)]),v.source.qualityMarks?.length?(a(),l("button",{key:0,class:"w-full mt-2 text-xs text-red-500 hover:text-red-600 underline font-medium",onClick:q}," Clear All Quality Marks ")):c("",!0)])])])):c("",!0)}}),Mt=Object.assign(It,{__name:"AdminSourceQualityDialog"});function ze(v,E=2){if(v==null)return"N/A";if(v===0)return"0 Bytes";const h=1024,C=E<0?0:E,R=["Bytes","KB","MB","GB","TB","PB"],y=Math.floor(Math.log(v)/Math.log(h));return`${parseFloat((v/Math.pow(h,y)).toFixed(C))} ${R[y]}`}function Rt(v){return v.replace(/\(.*?\)/g,"").replace(/\[.*?\]/g,"").replace(/["'“”‘’]/g,"").replace(/[*]/g,"").replace(/\s+/g," ").trim()}const At={key:0,class:"mt-8 p-6 bg-theme-surface border-2 border-theme-border rounded-xl text-theme-text"},Dt={class:"flex items-center gap-2 mb-4 text-theme-text"},Tt={key:0,class:"flex items-center gap-1 text-xs font-bold text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded"},Pt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},zt={class:"space-y-6"},Bt={class:"flex items-center gap-2 mb-1"},Vt={class:"flex flex-col flex-1 min-w-0"},jt={class:"font-medium text-theme-text"},Et=["title"],Ft=["onClick"],Lt=["onClick"],Nt={key:0,class:"mb-2 flex flex-wrap gap-1"},Wt={key:1,class:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded text-xs"},qt={key:0,class:"flex items-start gap-1.5"},Ot={class:"text-theme-textmuted ml-1"},Ut={class:"text-theme-textmuted ml-1"},Gt={key:1,class:"flex items-start gap-1.5"},Kt={class:"text-theme-textmuted ml-1"},Yt={class:"text-theme-textmuted ml-1"},Ht={key:2,class:"mb-2 p-2 bg-theme-background/50 rounded text-xs"},Qt={class:"text-theme-textmuted ml-1"},Jt={key:3,class:"mb-2 p-2 bg-theme-background/50 rounded text-xs"},Xt={class:"text-theme-textmuted ml-1"},Zt={key:4,class:"text-xs text-theme-textmuted line-clamp-4 whitespace-pre-wrap"},eo={key:5,class:"text-xs italic text-theme-textmuted"},to={class:"mt-3 pt-2 border-t border-theme-border"},oo={class:"flex gap-1 mb-2"},so=["onUpdate:modelValue","onKeyup"],ao=["onClick"],lo={class:"flex flex-wrap gap-2"},ro=["onClick"],io=["onClick"],no={class:"space-y-4"},co={class:"flex gap-2"},uo=["disabled"],mo={key:0,class:"i-mdi-loading animate-spin"},vo={key:1},po={class:"pt-2"},ho={class:"flex gap-2"},fo=["disabled"],bo={key:0,class:"text-red-500 text-sm"},xo={class:"pt-4 border-t border-theme-border flex flex-wrap gap-4"},yo=["disabled"],go=["disabled"],ko={class:"pt-6 border-t border-theme-border"},wo={class:"flex flex-wrap gap-2"},_o=["disabled","onClick"],$o={key:0,class:"i-mdi-loading animate-spin"},So={key:1,class:"i-mdi-check"},Co={key:0,class:"text-sm text-theme-textmuted italic py-2"},Io={key:0,class:"space-y-2 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin"},Mo=["src"],Ro={class:"flex-1 min-w-0"},Ao={class:"font-bold text-sm truncate text-theme-text"},Do={class:"text-xs text-theme-textmuted dark:text-theme-textmuted"},To={class:"text-[10px] font-mono text-theme-textmuted"},Po=["disabled","onClick"],zo={key:1,class:"h-[200px] flex flex-col items-center justify-center text-theme-textmuted border-2 border-dashed border-theme-border rounded-lg"},Bo={key:2,id:"google-results",class:"mt-8 pt-6 border-t border-theme-border"},Vo={class:"space-y-2 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin"},jo={class:"flex-1 min-w-0"},Eo={class:"font-bold text-sm truncate text-theme-text"},Fo={class:"text-xs text-theme-textmuted dark:text-theme-textmuted"},Lo={class:"text-[10px] font-mono text-theme-textmuted"},No=["disabled","onClick"],Wo=ke({__name:"AdminCurationPanel",props:{movie:{}},emits:["updated"],setup(v,{emit:E}){const h=v,C=E,R=p(!1),y=p(""),F=p(""),A=p(""),b=p(!1),q=p(!1),D=p(null),k=p([]),T=p([]),i=p(""),I=et({}),L=()=>{!h.movie.sources||h.movie.sources.length===0||h.movie.sources.forEach(u=>{const r=u.title||h.movie.title;I[u.id]=Rt(r)})},O=ut(),{collections:Y}=ye(O),{getCollectionsForMovie:U,loadCollections:H,addMovieToCollection:N,removeMovieFromCollection:G}=O,K=p(null),z=p([]),Q=se(()=>Array.from(Y.value.values())),J=u=>z.value.some(r=>r.id===u);Te(async()=>{R.value=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",y.value=h.movie.title,F.value=h.movie.year?.toString()||"",L(),Y.value.size===0&&H(),z.value=await U(h.movie.movieId)}),be(()=>h.movie.movieId,async u=>{u&&(z.value=await U(u))});const ce=async u=>{K.value=u;try{J(u)?await G(u,h.movie.movieId):await N(u,h.movie.movieId),z.value=await U(h.movie.movieId)}finally{K.value=null}};be(()=>h.movie.movieId,()=>{y.value=h.movie.title,F.value=h.movie.year?.toString()||"",A.value="",k.value=[],i.value="",L()});const X=async()=>{const u=y.value.trim(),r=F.value.trim();if(u){b.value=!0,i.value="",k.value=[];try{const $=await $fetch("/api/admin/omdb/search",{query:{s:u,y:r}});$.Response==="True"?k.value=$.Search||[]:i.value=$.Error||"No results found"}catch{i.value="Failed to search OMDB"}finally{b.value=!1}}},B=async u=>{if(u){b.value=!0,i.value="",T.value=[];try{const r=await $fetch("/api/admin/google/search",{query:{q:`${u} site:imdb.com`}});r.Response==="True"?(T.value=r.Search||[],ge(()=>{document.getElementById("google-results")?.scrollIntoView({behavior:"smooth"})})):i.value=r.Error||"No Google results found"}catch{i.value="Failed to search Google"}finally{b.value=!1}}},Z=u=>{if(!u.description)return;const r=u.description.substring(0,100).replace(/\n/g," ");B(r)},ue=u=>{const r=I[u.id]||"",$=u.description?u.description.substring(0,50).replace(/\n/g," "):"";B(`${r} ${$}`)},me=async u=>{if(confirm("Are you sure you want to remove this source? If this is the last source, the movie entry will be deleted."))try{b.value=!0;const r=await $fetch("/api/admin/movie/remove-source",{method:"POST",body:{movieId:h.movie.movieId,sourceId:u}});r.success&&(r.deleted?C("updated",""):r.movieId&&C("updated",r.movieId))}catch(r){console.error("Failed to remove source:",r)}finally{b.value=!1}},ee=async()=>{const u=A.value.trim();if(!u)return;const r=u.match(/tt\d{7,}/);if(!r){i.value="Invalid IMDB ID or URL (should contain tt followed by at least 7 digits)";return}const $=r[0];await te($)},te=async u=>{try{b.value=!0;const r=await $fetch("/api/admin/omdb/details",{query:{i:u}});if(r.Response==="True"){const $=await $fetch("/api/admin/movie/update",{method:"POST",body:{movieId:h.movie.movieId,metadata:r}});$.success&&C("updated",$.movieId)}else console.error("Failed to get movie details:",r.Error)}catch(r){console.error("Failed to update movie:",r)}finally{b.value=!1}},ae=async()=>{if(confirm("Are you sure you want to remove metadata? This will reset the movie to an unmatched state."))try{b.value=!0;const u=await $fetch("/api/admin/movie/update",{method:"POST",body:{movieId:h.movie.movieId,removeMetadata:!0}});u.success&&C("updated",u.movieId)}catch(u){console.error("Failed to remove metadata:",u)}finally{b.value=!1}},ve=async()=>{try{b.value=!0;const u=await $fetch("/api/admin/movie/update",{method:"POST",body:{movieId:h.movie.movieId,verified:!0}});u.success&&C("updated",u.movieId)}catch(u){console.error("Failed to verify movie:",u)}finally{b.value=!1}},pe=u=>{D.value=u,q.value=!0};return(u,r)=>{const $=Mt;return o(R)&&v.movie.sources&&v.movie.sources.length>0?(a(),l("div",At,[e("div",Dt,[r[6]||(r[6]=e("div",{class:"i-mdi-shield-edit text-2xl"},null,-1)),r[7]||(r[7]=e("h2",{class:"text-xl font-bold"},"Admin Curation",-1)),v.movie.verified?(a(),l("div",Tt,[...r[5]||(r[5]=[e("div",{class:"i-mdi-check-decagram"},null,-1),P(" Verified ",-1)])])):c("",!0),r[8]||(r[8]=e("span",{class:"ml-auto text-xs font-mono bg-theme-selection px-2 py-1 rounded"}," localhost only ",-1))]),e("div",Pt,[e("div",zt,[e("div",null,[r[18]||(r[18]=e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted mb-2"}," Source Info ",-1)),(a(!0),l(g,null,w(v.movie.sources,n=>(a(),l("div",{key:n.id,class:"bg-theme-surface/50 p-3 rounded border border-theme-border mb-2"},[e("div",Bt,[e("div",{class:j([n.type==="youtube"?"i-mdi-youtube text-red-600":"i-mdi-bank text-blue-600","text-lg"])},null,2),e("div",Vt,[e("span",jt,m(n.type),1),n.type==="youtube"&&n.channelName?(a(),l("span",{key:0,class:"text-xs text-theme-textmuted truncate",title:n.channelName},m(n.channelName),9,Et)):c("",!0)]),e("button",{class:"p-1 text-theme-textmuted hover:text-yellow-500 transition-colors",title:"Mark source quality",onClick:S=>pe(n)},[...r[9]||(r[9]=[e("div",{class:"i-mdi-alert-decagram"},null,-1)])],8,Ft),e("button",{class:"p-1 text-theme-textmuted hover:text-red-500 transition-colors",title:"Remove source",onClick:S=>me(n.id)},[...r[10]||(r[10]=[e("div",{class:"i-mdi-close"},null,-1)])],8,Lt)]),n.qualityMarks?.length?(a(),l("div",Nt,[(a(!0),l(g,null,w(n.qualityMarks,S=>(a(),l("span",{key:S,class:"text-[10px] font-bold text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30 px-1.5 py-0.5 rounded border border-yellow-200 dark:border-yellow-800 uppercase tracking-tighter"},m(S),1))),128))])):c("",!0),n.type==="youtube"&&n.regionRestriction?(a(),l("div",Wt,[r[15]||(r[15]=e("div",{class:"flex items-center gap-1.5 mb-1"},[e("div",{class:"i-mdi-earth-off text-yellow-600 dark:text-yellow-400"}),e("span",{class:"font-semibold text-yellow-700 dark:text-yellow-300"},"Region Restrictions")],-1)),n.regionRestriction.blocked?(a(),l("div",qt,[r[12]||(r[12]=e("div",{class:"i-mdi-close-circle text-red-600 dark:text-red-400 mt-0.5"},null,-1)),e("div",null,[r[11]||(r[11]=e("span",{class:"font-medium text-red-700 dark:text-red-300"},"Blocked in:",-1)),e("span",Ot,m(n.regionRestriction.blocked.join(", ")),1),e("span",Ut,"("+m(n.regionRestriction.blocked.length)+" regions)",1)])])):c("",!0),n.regionRestriction.allowed?(a(),l("div",Gt,[r[14]||(r[14]=e("div",{class:"i-mdi-check-circle text-green-600 dark:text-green-400 mt-0.5"},null,-1)),e("div",null,[r[13]||(r[13]=e("span",{class:"font-medium text-green-700 dark:text-green-300"},"Only allowed in:",-1)),e("span",Kt,m(n.regionRestriction.allowed.join(", ")),1),e("span",Yt,"("+m(n.regionRestriction.allowed.length)+" regions)",1)])])):c("",!0)])):c("",!0),n.title?(a(),l("div",Ht,[r[16]||(r[16]=e("span",{class:"font-medium text-theme-text"},"Original title:",-1)),e("span",Qt,m(n.title),1)])):c("",!0),n.fileSize?(a(),l("div",Jt,[r[17]||(r[17]=e("span",{class:"font-medium text-theme-text"},"File size:",-1)),e("span",Xt,m(("formatFileSize"in u?u.formatFileSize:o(ze))(n.fileSize)),1)])):c("",!0),n.description?(a(),l("p",Zt,m(n.description.length>1e3?n.description.substring(0,1e3)+"...":n.description),1)):(a(),l("p",eo," No description available in database ")),e("div",to,[e("div",oo,[ne(e("input",{"onUpdate:modelValue":S=>o(I)[n.id]=S,type:"text",class:"flex-1 px-2 py-1 text-[10px] rounded border border-theme-border bg-theme-surface text-theme-text",placeholder:"Search query...",onKeyup:fe(S=>B(o(I)[n.id]||""),["enter"])},null,40,so),[[he,o(I)[n.id]]]),e("button",{class:"px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white text-[10px] font-bold rounded transition-colors",onClick:S=>B(o(I)[n.id]||"")}," Search ",8,ao)]),e("div",lo,[n.description?(a(),l("button",{key:0,class:"px-2 py-1 bg-theme-selection hover:bg-theme-selection/80 text-theme-text text-[10px] font-bold rounded transition-colors",onClick:S=>Z(n)}," Search Desc ",8,ro)):c("",!0),n.title&&n.description?(a(),l("button",{key:1,class:"px-2 py-1 bg-theme-selection hover:bg-theme-selection/80 text-theme-text text-[10px] font-bold rounded transition-colors",onClick:S=>ue(n)}," Search Both ",8,io)):c("",!0)])])]))),128))]),e("div",no,[r[20]||(r[20]=e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted"}," Search OMDB ",-1)),e("div",co,[ne(e("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>de(y)?y.value=n:null),type:"text",placeholder:"Movie Title",class:"flex-1 px-3 py-2 rounded border border-theme-border bg-theme-surface/50 text-theme-text text-sm",onKeyup:fe(X,["enter"])},null,544),[[he,o(y),void 0,{trim:!0}]]),ne(e("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>de(F)?F.value=n:null),type:"text",placeholder:"Year",class:"w-20 px-3 py-2 rounded border border-theme-border bg-theme-surface/50 text-theme-text text-sm",onKeyup:fe(X,["enter"])},null,544),[[he,o(F),void 0,{trim:!0}]]),e("button",{class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded font-bold transition-colors disabled:opacity-50",disabled:o(b),onClick:X},[o(b)?(a(),l("div",mo)):(a(),l("span",vo,"Search"))],8,uo)]),e("div",po,[r[19]||(r[19]=e("div",{class:"flex items-center gap-2 mb-2"},[e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted"}," Direct IMDB ID ")],-1)),e("div",ho,[ne(e("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>de(A)?A.value=n:null),type:"text",placeholder:"tt1234567",class:"flex-1 px-3 py-2 rounded border border-theme-border bg-theme-surface/50 text-theme-text text-sm font-mono",onKeyup:fe(ee,["enter"])},null,544),[[he,o(A),void 0,{trim:!0}]]),e("button",{class:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded font-bold transition-colors disabled:opacity-50",disabled:o(b)||!o(A),onClick:ee}," Fetch ",8,fo)])]),o(i)?(a(),l("div",bo,m(o(i)),1)):c("",!0)]),e("div",xo,[v.movie.verified?c("",!0):(a(),l("button",{key:0,class:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded transition-colors text-sm font-bold disabled:opacity-50",disabled:o(b),onClick:ve},[...r[21]||(r[21]=[e("div",{class:"i-mdi-check-decagram text-lg"},null,-1),P(" Mark as Verified ",-1)])],8,yo)),e("button",{class:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors text-sm font-bold disabled:opacity-50",disabled:o(b),onClick:ae},[...r[22]||(r[22]=[e("div",{class:"i-mdi-delete-sweep text-lg"},null,-1),P(" Remove All Metadata ",-1)])],8,go)]),e("div",ko,[r[23]||(r[23]=e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted mb-3"}," Collections ",-1)),e("div",wo,[(a(!0),l(g,null,w(o(Q),n=>(a(),l("button",{key:n.id,class:j(["px-4 py-2 rounded-xl border transition-all text-sm font-bold flex items-center gap-2",[J(n.id)?"bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-600/20":"bg-theme-surface border-theme-border hover:border-theme-textmuted text-theme-text",o(K)===n.id?"opacity-50":""]]),disabled:o(K)===n.id,onClick:S=>ce(n.id)},[o(K)===n.id?(a(),l("div",$o)):J(n.id)?(a(),l("div",So)):c("",!0),P(" "+m(n.name),1)],10,_o))),128)),o(Q).length===0?(a(),l("div",Co," No collections available ")):c("",!0)])])]),e("div",null,[r[27]||(r[27]=e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted mb-2"}," Search Results ",-1)),o(k).length>0?(a(),l("div",Io,[(a(!0),l(g,null,w(o(k),n=>(a(),l("div",{key:n.imdbID,class:"flex gap-3 p-2 bg-theme-surface/50 rounded border border-theme-border hover:border-yellow-400 dark:hover:border-gray-500 transition-colors group"},[e("img",{src:n.Poster!=="N/A"?n.Poster:"/favicon.ico",class:"w-12 h-18 object-cover rounded",alt:"Poster"},null,8,Mo),e("div",Ro,[e("h4",Ao,m(n.Title),1),e("p",Do,m(n.Year)+" • "+m(n.Type),1),e("p",To,m(n.imdbID),1)]),e("button",{class:"self-center px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs rounded font-bold opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",disabled:o(b),onClick:S=>te(n.imdbID)}," Select ",8,Po)]))),128))])):o(b)?c("",!0):(a(),l("div",zo,[...r[24]||(r[24]=[e("div",{class:"i-mdi-magnify text-4xl mb-2"},null,-1),e("p",{class:"text-sm"},"Search results will appear here",-1)])])),o(T).length>0?(a(),l("div",Bo,[r[26]||(r[26]=e("div",{class:"flex items-center gap-2 mb-3"},[e("div",{class:"i-mdi-google text-blue-600"}),e("h3",{class:"text-sm font-semibold uppercase tracking-wider text-theme-textmuted"}," Google Results (IMDb) ")],-1)),e("div",Vo,[(a(!0),l(g,null,w(o(T),n=>(a(),l("div",{key:n.imdbID,class:"flex gap-3 p-2 bg-theme-surface/50 rounded border border-theme-border hover:border-blue-400 dark:hover:border-gray-500 transition-colors group"},[r[25]||(r[25]=e("div",{class:"w-12 h-18 bg-theme-selection flex items-center justify-center rounded"},[e("div",{class:"i-mdi-movie-open text-2xl text-theme-textmuted"})],-1)),e("div",jo,[e("h4",Eo,m(n.Title),1),e("p",Fo,m(n.Year)+" • "+m(n.Type),1),e("p",Lo,m(n.imdbID),1)]),e("button",{class:"self-center px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-xs rounded font-bold opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",disabled:o(b),onClick:S=>te(n.imdbID)}," Select ",8,No)]))),128))])])):c("",!0)])]),W($,{modelValue:o(q),"onUpdate:modelValue":r[3]||(r[3]=n=>de(q)?q.value=n:null),movie:v.movie,source:o(D),onSaved:r[4]||(r[4]=n=>C("updated",v.movie.movieId))},null,8,["modelValue","movie","source"])])):c("",!0)}}}),qo=Object.assign(Wo,{__name:"AdminCurationPanel"}),Oo={class:"max-w-7xl mx-auto px-4 py-8 md:ml-16"},Uo={key:0,class:"space-y-8"},Go={key:1,class:"text-center py-12"},Ko={class:"text-gray-600 dark:text-gray-400 mb-6"},Yo={key:2,class:"space-y-8 text-theme-text"},Ho={class:"flex flex-col md:flex-row gap-8"},Qo={class:"flex-shrink-0"},Jo={class:"w-full md:w-80 aspect-[2/3] bg-theme-selection rounded-lg overflow-hidden border border-theme-border/50"},Xo=["src","alt"],Zo={key:1,class:"w-full h-full flex items-center justify-center text-theme-textmuted"},es={class:"flex-1"},ts={class:"text-4xl font-bold mb-4"},os={class:"flex flex-wrap gap-4 text-sm mb-6"},ss={key:0,class:"px-3 py-1 rounded-full bg-theme-surface border border-theme-border/50"},as={key:1,class:"px-3 py-1 rounded-full bg-theme-surface border border-theme-border/50"},ls={key:2,class:"px-3 py-1 rounded-full bg-theme-surface border border-theme-border/50"},rs={key:0,class:"flex items-center gap-2 mb-6"},is={class:"text-2xl font-bold"},ns={key:0,class:"text-sm text-theme-textmuted"},ds={class:"flex flex-wrap gap-3 mb-6"},cs={key:1,class:"mb-6"},us={class:"flex flex-wrap gap-2"},ms={key:2,class:"mb-6"},vs={class:"flex flex-wrap gap-2"},ps={key:3,class:"mb-6"},hs={class:"relative"},fs={class:"space-y-3"},bs={key:0},xs={class:"flex flex-wrap gap-x-1 gap-y-2"},ys={key:0,class:"text-theme-textmuted"},gs={key:1},ks={class:"flex flex-wrap gap-x-1 gap-y-2"},ws={key:0,class:"text-theme-textmuted"},_s={key:2},$s={class:"flex flex-wrap gap-x-1 gap-y-2"},Ss={key:0,class:"text-theme-textmuted"},Cs={key:0,class:"mb-4"},Is={class:"flex flex-wrap gap-2"},Ms={class:"flex flex-col gap-1"},Rs=["onClick"],As={class:"flex items-center gap-2"},Ds={key:0,class:"text-xs opacity-75"},Ts={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded text-[10px] font-bold whitespace-nowrap opacity-0 group-hover/size:opacity-100 transition-opacity pointer-events-none glass z-10"},Ps={key:0,class:"flex flex-wrap gap-1"},zs=["href","title"],Bs={key:1,class:"bg-black rounded-lg overflow-hidden"},Vs={key:0,class:"aspect-video"},js=["src"],Es={key:1,class:"aspect-video"},Fs=["src"],Ls={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-theme-border/50"},Ns={key:0},Ws={class:"text-theme-text"},qs={key:1},Os={class:"text-theme-text"},Us={key:2},Gs={class:"text-theme-text"},Ks={key:3},Ys=["href"],Hs={key:0},Qs={class:"relative"},Js={key:0},Xs={class:"relative"},Zs={class:"px-2 flex flex-col gap-1"},ea={class:"flex items-center justify-between"},ta={class:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-theme-accent/20 text-theme-accent border border-theme-accent/30 uppercase tracking-wider"},oa=["title"],sa={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 p-2 bg-theme-surface border border-theme-border rounded shadow-xl text-[10px] leading-tight w-32 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20"},aa={class:"border-t border-theme-border/50 mt-12"},la={class:"max-w-7xl mx-auto px-4 py-6 text-center text-sm text-theme-textmuted"},ra={class:"flex items-center justify-between mb-4"},ia=ke({__name:"[id]",setup(v){const E=tt(),{likedMovieIds:h,searchResultMovies:C}=ye(E),{lightweightMovieCache:R}=ye(E),{getMovieById:y,fetchMoviesByIds:F,getSimilarMovies:A,loadFromFile:b,toggleLike:q}=E,{showToast:D}=ot(),k=st(),{y:T}=at(),i=p(null),I=p([]),L=p([]),O=p(!0),Y=p(!1),U=p(!1),H=p(null),N=p(0),G=p(!1),K=p(null),z=p(null),Q=p(!1),J=p(!1),ce=p(!1),X=p(null),B=p(null),Z=p(!1),ue=p(!1),me=p(!1),ee=()=>{if(!z.value)return;const{scrollLeft:s,scrollWidth:t,clientWidth:f}=z.value;J.value=s>20,ce.value=s+f<t-20},te=s=>{if(!z.value)return;const t=z.value.clientWidth*.8;z.value.scrollBy({left:s==="left"?-t:t,behavior:"smooth"})},ae=()=>{if(!B.value)return;const{scrollLeft:s,scrollWidth:t,clientWidth:f}=B.value;ue.value=s>20,me.value=s+f<t-20},ve=s=>{if(!B.value)return;const t=B.value.clientWidth*.8;B.value.scrollBy({left:s==="left"?-t:t,behavior:"smooth"})};Me(K,s=>{s[0]?.isIntersecting&&!Q.value&&i.value&&S()}),Me(X,s=>{s[0]?.isIntersecting&&!Z.value&&i.value&&Be()});const pe=se(()=>i.value?.collections||[]),u=se(()=>!i.value||!i.value.sources?[]:[...i.value.sources].sort((s,t)=>{if(s.type==="youtube"&&t.type!=="youtube")return-1;if(s.type!=="youtube"&&t.type==="youtube")return 1;if(s.type==="archive.org"&&t.type==="archive.org"){const f=s.fileSize||s.size||0;return(t.fileSize||t.size||0)-f}return 0})),r=se(()=>u.value.length===0?null:u.value[N.value]||u.value[0]||null),$=s=>{if(!s)return"0%";const t=4*1024*1024*1024;return`${Math.min(s/t*100,100)}%`},n=se(()=>i.value?h.value.includes(i.value.movieId):!1),S=async()=>{if(!(Q.value||!i.value?.relatedMovies?.length)){Y.value=!0;try{await F(i.value.relatedMovies),I.value=i.value.relatedMovies.map(s=>R.value.get(s)).filter(s=>!!s),Q.value=!0,ge(()=>{ee()})}catch{I.value=[]}finally{Y.value=!1}}},Be=async()=>{if(!(Z.value||!i.value?.movieId)){U.value=!0;try{const s=await A(i.value.movieId);L.value=s,Z.value=!0,ge(()=>{ae()})}catch{L.value=[]}finally{U.value=!1}}},Ve=s=>{if(s===void 0)return"90%";const t=Math.max(0,1-s);return Math.round(t*100)+"%"},we=s=>{if(!i.value)return"";const t=[];if(i.value.metadata?.Genre&&s.genre){const f=i.value.metadata.Genre.split(",").map(x=>x.trim()),_=s.genre.split(",").map(x=>x.trim()),V=f.filter(x=>_.includes(x));V.length>0&&t.push(`Matching genres: ${V.slice(0,2).join(", ")}`)}if(i.value.year&&s.year&&(i.value.year===s.year?t.push(`Same release year (${i.value.year})`):Math.abs(i.value.year-s.year)<=2&&t.push("Similar release period")),i.value.metadata?.Country&&s.country){const f=i.value.metadata.Country.split(",").map(x=>x.trim()),_=s.country.split(",").map(x=>x.trim()),V=f.filter(x=>_.includes(x));V.length>0&&t.push(`Both from ${V[0]}`)}return t.length===0?"Found via semantic content analysis":t.join(". ")},_e=async s=>{O.value=!0,H.value=null,N.value=0,I.value=[],L.value=[],Q.value=!1,Z.value=!1,G.value=!1;try{const t=await y(s);if(!t){H.value=`Movie with ID "${s}" not found.`,O.value=!1;return}i.value=t,Se(t),O.value=!1}catch(t){H.value=`Failed to load movie data. ${t instanceof Error?t.message:"Please try again."}`,O.value=!1}};Te(async()=>{T.value=0;const s=k.params.id;await _e(s)}),be(()=>k.params.id,async s=>{s&&(T.value=0,await _e(s))});const oe=p(!1),je=lt(),{Escape:Ee,Space:Fe,Enter:Le,ArrowLeft:Ne,ArrowRight:We,Shift_Slash:qe}=je,le=se(()=>{const s=document.activeElement;return s?.tagName==="INPUT"||s?.tagName==="TEXTAREA"});re(()=>Ee?.value&&!le.value,()=>{De("/")}),re(()=>(Fe?.value||Le?.value)&&!le.value,()=>{Ce()}),re(()=>Ne?.value&&!le.value,()=>{$e("prev")}),re(()=>We?.value&&!le.value,()=>{$e("next")}),re(()=>qe?.value&&!le.value,()=>{oe.value=!oe.value});const $e=s=>{const t=k.params.id;if(!t)return;const f=C.value,_=f.findIndex(M=>M===t);if(_===-1)return;const x=_+(s==="prev"?-1:1);if(x<0||x>=f.length)return;const d=f[x];d&&De(`/movie/${d}`)},Oe=async s=>{if(await b(),s!==i.value?.movieId){const f=`/movie/${s}`;window.history.replaceState({},"",f),k.params.id=s}const t=await y(s);t&&(i.value=t,Se(t))},Se=s=>{const t=s.title+(s.year?` (${s.year})`:""),f=s.metadata?.Plot||`Watch ${s.title} for free on Movies Deluxe`,_=s.metadata?.Poster||"/favicon.ico",V=`https://movies-deluxe.app/movie/${s.movieId}`;nt({title:t,meta:[{name:"description",content:f},{property:"og:type",content:"video.movie"},{property:"og:title",content:t},{property:"og:description",content:f},{property:"og:image",content:_},{property:"og:url",content:V},{property:"og:site_name",content:"Movies Deluxe"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:t},{name:"twitter:description",content:f},{name:"twitter:image",content:_},...s.metadata?.Director?[{property:"video:director",content:s.metadata.Director}]:[],...s.metadata?.Actors?[{property:"video:actor",content:s.metadata.Actors}]:[],...s.year?[{property:"video:release_date",content:s.year.toString()}]:[]],script:[{type:"application/ld+json",textContent:JSON.stringify({"@context":"https://schema.org","@type":"Movie",name:s.title,...s.year&&{datePublished:s.year.toString()},...s.metadata?.Plot&&{description:s.metadata.Plot},...s.metadata?.Poster&&{image:_},...s.metadata?.Director&&{director:{"@type":"Person",name:s.metadata.Director}},...s.metadata?.Actors&&{actor:s.metadata.Actors.split(",").map(x=>({"@type":"Person",name:x.trim()}))},...s.metadata?.Genre&&{genre:s.metadata.Genre.split(",").map(x=>x.trim())},...s.metadata?.imdbRating&&{aggregateRating:{"@type":"AggregateRating",ratingValue:s.metadata.imdbRating,...s.metadata.imdbVotes&&{ratingCount:String(s.metadata.imdbVotes)}}},...s.movieId?.startsWith("tt")&&{sameAs:`https://www.imdb.com/title/${s.movieId}/`}})}]})},Ue=s=>`/search?q=${encodeURIComponent(`director:"${s}"`)}`,Ge=s=>`/search?q=${encodeURIComponent(`writer:"${s}"`)}`,Ke=s=>`/search?q=${encodeURIComponent(`actor:"${s}"`)}`,Ce=()=>{i.value&&q(i.value.movieId)},Ye=async()=>{if(!i.value)return;const s=i.value.title+(i.value.year?` (${i.value.year})`:""),t=i.value.metadata?.Plot||`Watch ${i.value.title} for free on Movies Deluxe`,f=`${window.location.origin}/movie/${i.value.movieId}`;if(!navigator.share){await Ie(f);return}try{await navigator.share({title:s,text:t,url:f}),D("Shared successfully!")}catch(_){_.name!=="AbortError"&&await Ie(f)}},Ie=async s=>{try{await navigator.clipboard.writeText(s),D("Link copied to clipboard!")}catch{D("Failed to copy link","error")}},He=s=>{const t=s.target;t.style.display="none"};return typeof window<"u"&&rt("resize",()=>{ee(),ae()}),(s,t)=>{const f=Qe,_=Je,V=Xe,x=qo;return a(),l("div",null,[e("main",Oo,[o(O)?(a(),l("div",Uo,[...t[9]||(t[9]=[Re('<div class="flex flex-col md:flex-row gap-8" data-v-fb33263f><div class="flex-shrink-0" data-v-fb33263f><div class="w-full md:w-80 aspect-[2/3] skeleton rounded-lg" data-v-fb33263f></div></div><div class="flex-1 space-y-6" data-v-fb33263f><div class="h-10 skeleton rounded-lg w-3/4" data-v-fb33263f></div><div class="flex gap-4" data-v-fb33263f><div class="h-8 w-20 skeleton rounded-full" data-v-fb33263f></div><div class="h-8 w-16 skeleton rounded-full" data-v-fb33263f></div><div class="h-8 w-24 skeleton rounded-full" data-v-fb33263f></div></div><div class="flex items-center gap-2" data-v-fb33263f><div class="h-8 w-8 skeleton rounded-full" data-v-fb33263f></div><div class="h-8 w-16 skeleton rounded-md" data-v-fb33263f></div></div><div class="flex gap-3" data-v-fb33263f><div class="h-10 w-40 skeleton rounded-full" data-v-fb33263f></div><div class="h-10 w-28 skeleton rounded-full" data-v-fb33263f></div></div><div class="space-y-2" data-v-fb33263f><div class="h-4 w-16 skeleton rounded-md" data-v-fb33263f></div><div class="flex gap-2" data-v-fb33263f><div class="h-8 w-20 skeleton rounded-full" data-v-fb33263f></div><div class="h-8 w-24 skeleton rounded-full" data-v-fb33263f></div></div></div><div class="space-y-2" data-v-fb33263f><div class="h-4 w-12 skeleton rounded-md" data-v-fb33263f></div><div class="space-y-2" data-v-fb33263f><div class="h-4 skeleton rounded-md" data-v-fb33263f></div><div class="h-4 skeleton rounded-md" data-v-fb33263f></div><div class="h-4 skeleton rounded-md w-3/4" data-v-fb33263f></div></div></div></div></div><div class="aspect-video skeleton rounded-lg" data-v-fb33263f></div>',2)])])):o(H)?(a(),l("div",Go,[t[11]||(t[11]=e("div",{class:"i-mdi-alert-circle text-6xl text-red-500 mb-4"},null,-1)),t[12]||(t[12]=e("h2",{class:"text-2xl font-bold mb-2"},"Movie Not Found",-1)),e("p",Ko,m(o(H)),1),W(f,{to:"/",class:"inline-block px-6 py-3 rounded-full bg-gray-700 dark:bg-yellow-600 text-white hover:bg-gray-600 dark:hover:bg-yellow-500 transition-colors"},{default:ie(()=>[...t[10]||(t[10]=[P(" Back to Movies ",-1)])]),_:1})])):o(i)?(a(),l("div",Yo,[e("div",Ho,[e("div",Qo,[e("div",Jo,[o(i).movieId?.startsWith("tt")?(a(),l("img",{key:0,src:("getPosterPath"in s?s.getPosterPath:o(mt))(o(i).movieId),alt:o(i).title,class:"w-full h-full object-cover object-center",onError:He},null,40,Xo)):(a(),l("div",Zo,[...t[13]||(t[13]=[e("div",{class:"i-mdi-movie text-8xl"},null,-1)])]))])]),e("div",es,[e("h1",ts,m(o(i).title),1),e("div",os,[o(i).year?(a(),l("span",ss,m(o(i).year),1)):c("",!0),o(i).metadata?.Rated?(a(),l("span",as,m(o(i).metadata.Rated),1)):c("",!0),o(i).metadata?.Runtime?(a(),l("span",ls,m(o(i).metadata.Runtime),1)):c("",!0)]),o(i).metadata?.imdbRating?(a(),l("div",rs,[t[14]||(t[14]=e("div",{class:"i-mdi-star text-theme-accent text-2xl"},null,-1)),e("span",is,m(o(i).metadata.imdbRating),1),t[15]||(t[15]=e("span",{class:"text-theme-textmuted"},"/ 10",-1)),o(i).metadata?.imdbVotes?(a(),l("span",ns," ("+m(("formatVotes"in s?s.formatVotes:o(vt))(o(i).metadata.imdbVotes))+") ",1)):c("",!0)])):c("",!0),e("div",ds,[e("button",{class:"btn flex items-center gap-2",onClick:Ce},[e("div",{class:j(["i-mdi-heart text-lg",{"text-theme-accent":o(n)}])},null,2),P(" "+m(o(n)?"Liked":"Like"),1)]),e("button",{class:"btn flex items-center gap-2",onClick:Ye},[...t[16]||(t[16]=[e("div",{class:"i-mdi-share-variant text-lg"},null,-1),P(" Share ",-1)])])]),o(i).metadata?.Genre?(a(),l("div",cs,[t[17]||(t[17]=e("h3",{class:"movie-label"},"Genre",-1)),e("div",us,[(a(!0),l(g,null,w(o(i).metadata.Genre.split(", "),d=>(a(),l("span",{key:d,class:"px-3 py-1 rounded-full bg-theme-surface border border-theme-border/50 text-sm"},m(d),1))),128))])])):c("",!0),o(pe).length>0?(a(),l("div",ms,[t[19]||(t[19]=e("h3",{class:"movie-label"},"Part of Collection",-1)),e("div",vs,[(a(!0),l(g,null,w(o(pe),d=>(a(),Ae(f,{key:d.id,to:`/collections/${d.id}`,class:"px-3 py-1 rounded-full bg-theme-primary/10 border border-theme-primary/20 text-theme-primary text-sm hover:bg-theme-primary/20 transition-colors flex items-center gap-1.5"},{default:ie(()=>[t[18]||(t[18]=e("div",{class:"i-mdi-movie-roll text-base"},null,-1)),P(" "+m(d.name),1)]),_:2},1032,["to"]))),128))])])):c("",!0),o(i).metadata?.Plot?(a(),l("div",ps,[t[20]||(t[20]=e("h3",{class:"movie-label"},"Plot",-1)),e("div",hs,[e("p",{class:j(["text-theme-text leading-relaxed transition-all duration-300",{"line-clamp-3":!o(G)}])},m(o(i).metadata.Plot),3),o(i).metadata.Plot.length>150?(a(),l("button",{key:0,class:"mt-1 text-sm font-medium text-theme-primary hover:text-theme-accent transition-colors flex items-center gap-1",onClick:t[0]||(t[0]=d=>G.value=!o(G))},[e("span",null,m(o(G)?"Show less":"Show more"),1),e("div",{class:j(["transition-transform duration-300",o(G)?"i-mdi-chevron-up":"i-mdi-chevron-down"])},null,2)])):c("",!0)])])):c("",!0),e("div",fs,[o(i).metadata?.Director?(a(),l("div",bs,[t[21]||(t[21]=e("span",{class:"movie-label block !mb-1"},"Director",-1)),e("div",xs,[(a(!0),l(g,null,w(o(i).metadata.Director.split(", "),(d,M)=>(a(),l(g,{key:d},[W(f,{to:Ue(d.trim()),class:"text-theme-text hover:text-theme-primary hover:underline transition-colors"},{default:ie(()=>[P(m(d.trim()),1)]),_:2},1032,["to"]),M<o(i).metadata.Director.split(", ").length-1?(a(),l("span",ys,",")):c("",!0)],64))),128))])])):c("",!0),o(i).metadata?.Writer?(a(),l("div",gs,[t[22]||(t[22]=e("span",{class:"movie-label block !mb-1"},"Writer",-1)),e("div",ks,[(a(!0),l(g,null,w(o(i).metadata.Writer.split(", "),(d,M)=>(a(),l(g,{key:d},[W(f,{to:Ge(d.trim()),class:"text-theme-text hover:text-theme-primary hover:underline transition-colors"},{default:ie(()=>[P(m(d.trim()),1)]),_:2},1032,["to"]),M<o(i).metadata.Writer.split(", ").length-1?(a(),l("span",ws,",")):c("",!0)],64))),128))])])):c("",!0),o(i).metadata?.Actors?(a(),l("div",_s,[t[23]||(t[23]=e("span",{class:"movie-label block !mb-1"},"Actors",-1)),e("div",$s,[(a(!0),l(g,null,w(o(i).metadata.Actors.split(", "),(d,M)=>(a(),l(g,{key:d},[W(f,{to:Ke(d.trim()),class:"text-theme-text hover:text-theme-primary hover:underline transition-colors"},{default:ie(()=>[P(m(d.trim()),1)]),_:2},1032,["to"]),M<o(i).metadata.Actors.split(", ").length-1?(a(),l("span",Ss,",")):c("",!0)],64))),128))])])):c("",!0)])])]),o(u).length>0?(a(),l("div",Cs,[t[25]||(t[25]=e("h3",{class:"movie-label"},"Select Source",-1)),e("div",Is,[(a(!0),l(g,null,w(o(u),(d,M)=>(a(),l("div",{key:d.id,class:"flex items-center gap-1"},[e("div",Ms,[e("button",{class:j(["px-4 py-2 rounded-lg text-sm font-medium transition-colors border relative",{"bg-theme-primary border-theme-primary text-white":o(N)===M,"bg-theme-surface border-theme-border/50 text-theme-text hover:bg-theme-selection":o(N)!==M}]),onClick:xe=>N.value=M},[e("div",As,[e("div",{class:j(d.type==="youtube"?"i-mdi-youtube text-theme-accent":"i-mdi-bank")},null,2),e("span",null,m(d.label||(d.type==="youtube"?d.channelName||"YouTube":"Archive.org")),1),d.quality?(a(),l("span",Ds,"("+m(d.quality)+")",1)):c("",!0)]),d.type==="archive.org"&&(d.fileSize||d.size)?(a(),l("div",{key:0,class:j(["group/size absolute bottom-0 left-0 h-[2px] transition-all duration-500 rounded-b-lg",o(N)===M?"bg-white/40":"bg-theme-primary/40"]),style:dt({width:$(d.fileSize||d.size)})},[e("div",Ts,m(("formatFileSize"in s?s.formatFileSize:o(ze))(d.fileSize||d.size)),1)],6)):c("",!0)],10,Rs),d.qualityMarks?.length?(a(),l("div",Ps,[(a(!0),l(g,null,w(d.qualityMarks,xe=>(a(),l("span",{key:xe,class:"text-[10px] font-bold text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30 px-1.5 py-0.5 rounded border border-yellow-200 dark:border-yellow-800 uppercase tracking-tighter"},m(xe),1))),128))])):c("",!0)]),e("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",title:d.type==="youtube"?`Watch on YouTube${d.channelName?" - "+d.channelName:""}`:"Watch on Archive.org",class:j(["p-2 rounded-lg transition-colors hover:bg-theme-selection text-theme-primary",{"text-theme-accent":o(N)===M}])},[...t[24]||(t[24]=[e("div",{class:"i-mdi-open-in-new text-lg"},null,-1)])],10,zs)]))),128))])])):c("",!0),o(r)?(a(),l("div",Bs,[o(r).type==="youtube"?(a(),l("div",Vs,[e("iframe",{src:`https://www.youtube.com/embed/${o(r).id}`,class:"w-full h-full",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:"",title:"YouTube video player"},null,8,js)])):o(r).type==="archive.org"?(a(),l("div",Es,[e("iframe",{src:`https://archive.org/embed/${o(r).id}`,class:"w-full h-full",frameborder:"0",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"",title:"Archive.org video player"},null,8,Fs)])):c("",!0)])):c("",!0),o(i).metadata?(a(),l("div",Ls,[o(i).metadata.Language?(a(),l("div",Ns,[t[26]||(t[26]=e("h3",{class:"movie-label"},"Language",-1)),e("p",Ws,m(o(i).metadata.Language),1)])):c("",!0),o(i).metadata.Country?(a(),l("div",qs,[t[27]||(t[27]=e("h3",{class:"movie-label"},"Country",-1)),e("p",Os,m(o(i).metadata.Country),1)])):c("",!0),o(i).metadata.Awards?(a(),l("div",Us,[t[28]||(t[28]=e("h3",{class:"movie-label"},"Awards",-1)),e("p",Gs,m(o(i).metadata.Awards),1)])):c("",!0),o(i).movieId?.startsWith("tt")?(a(),l("div",Ks,[t[29]||(t[29]=e("h3",{class:"movie-label"},"IMDB",-1)),e("a",{href:`https://www.imdb.com/title/${o(i).movieId}/`,target:"_blank",rel:"noopener noreferrer",class:"text-theme-primary hover:underline"}," View on IMDB ",8,Ys)])):c("",!0)])):c("",!0),e("div",{ref_key:"relatedMoviesContainer",ref:K,class:"pt-8 border-t border-theme-border/50 min-h-[300px] group/related"},[o(I).length>0||o(Y)?(a(),l("div",Hs,[t[32]||(t[32]=e("h2",{class:"text-2xl font-bold mb-6"},"Related Movies",-1)),e("div",Qs,[o(J)?(a(),l("button",{key:0,class:"absolute left-2 top-[calc(50%-2rem)] -translate-y-1/2 z-10 p-2 rounded-full bg-theme-surface/60 border border-theme-border/20 text-theme-text/50 shadow-sm hover:bg-theme-accent hover:text-black hover:border-theme-accent transition-all duration-200 hidden md:flex items-center justify-center opacity-0 group-hover/related:opacity-100 group-hover/related:animate-pulse",onClick:t[1]||(t[1]=d=>te("left"))},[...t[30]||(t[30]=[e("div",{class:"i-mdi-chevron-left text-2xl"},null,-1)])])):c("",!0),o(ce)?(a(),l("button",{key:1,class:"absolute right-2 top-[calc(50%-2rem)] -translate-y-1/2 z-10 p-2 rounded-full bg-theme-surface/60 border border-theme-border/20 text-theme-text/50 shadow-sm hover:bg-theme-accent hover:text-black hover:border-theme-accent transition-all duration-200 hidden md:flex items-center justify-center opacity-0 group-hover/related:opacity-100 group-hover/related:animate-pulse",onClick:t[2]||(t[2]=d=>te("right"))},[...t[31]||(t[31]=[e("div",{class:"i-mdi-chevron-right text-2xl"},null,-1)])])):c("",!0),e("div",{ref_key:"relatedScrollContainer",ref:z,class:"flex gap-4 overflow-x-auto pb-4 pt-2 snap-x snap-mandatory hide-scrollbar scroll-smooth",onScroll:ee},[o(I).length>0?(a(!0),l(g,{key:0},w(o(I),d=>(a(),l("div",{key:d.movieId,class:"flex-shrink-0 w-48 snap-start"},[W(_,{"movie-id":d.movieId},null,8,["movie-id"])]))),128)):o(Y)?(a(),l(g,{key:1},w(6,d=>e("div",{key:d,class:"flex-shrink-0 w-48 snap-start"},[W(V)])),64)):c("",!0)],544)])])):c("",!0)],512),e("div",{ref_key:"similarMoviesContainer",ref:X,class:"pt-8 border-t border-theme-border/50 min-h-[300px] group/similar"},[o(L).length>0||o(U)?(a(),l("div",Js,[t[36]||(t[36]=e("div",{class:"flex items-center justify-between mb-6"},[e("h2",{class:"text-2xl font-bold flex items-center gap-2"},[e("div",{class:"i-mdi-auto-fix text-theme-accent"}),P(" Similar Movies ")])],-1)),e("div",Xs,[o(ue)?(a(),l("button",{key:0,class:"absolute left-2 top-[calc(50%-2rem)] -translate-y-1/2 z-10 p-2 rounded-full bg-theme-surface/60 border border-theme-border/20 text-theme-text/50 shadow-sm hover:bg-theme-accent hover:text-black hover:border-theme-accent transition-all duration-200 hidden md:flex items-center justify-center opacity-0 group-hover/similar:opacity-100 group-hover/similar:animate-pulse",onClick:t[3]||(t[3]=d=>ve("left"))},[...t[33]||(t[33]=[e("div",{class:"i-mdi-chevron-left text-2xl"},null,-1)])])):c("",!0),o(me)?(a(),l("button",{key:1,class:"absolute right-2 top-[calc(50%-2rem)] -translate-y-1/2 z-10 p-2 rounded-full bg-theme-surface/60 border border-theme-border/20 text-theme-text/50 shadow-sm hover:bg-theme-accent hover:text-black hover:border-theme-accent transition-all duration-200 hidden md:flex items-center justify-center opacity-0 group-hover/similar:opacity-100 group-hover/similar:animate-pulse",onClick:t[4]||(t[4]=d=>ve("right"))},[...t[34]||(t[34]=[e("div",{class:"i-mdi-chevron-right text-2xl"},null,-1)])])):c("",!0),e("div",{ref_key:"similarScrollContainer",ref:B,class:"flex gap-4 overflow-x-auto pb-4 pt-2 snap-x snap-mandatory hide-scrollbar scroll-smooth",onScroll:ae},[o(L).length>0?(a(!0),l(g,{key:0},w(o(L),d=>(a(),l("div",{key:d.movieId,class:"flex-shrink-0 w-48 snap-start flex flex-col gap-2"},[W(_,{"movie-id":d.movieId},null,8,["movie-id"]),e("div",Zs,[e("div",ea,[e("div",ta,m(Ve(d.distance))+" Match ",1),e("div",{class:"group relative",title:we(d)},[t[35]||(t[35]=e("div",{class:"i-mdi-information-outline text-theme-textmuted hover:text-theme-accent cursor-help"},null,-1)),e("div",sa,m(we(d)),1)],8,oa)])])]))),128)):o(U)?(a(),l(g,{key:1},w(6,d=>e("div",{key:d,class:"flex-shrink-0 w-48 snap-start"},[W(V)])),64)):c("",!0)],544)])])):c("",!0)],512),o(i)?(a(),Ae(x,{key:3,movie:o(i),onUpdated:Oe},null,8,["movie"])):c("",!0)])):c("",!0)]),e("footer",aa,[e("div",la,[t[37]||(t[37]=e("p",null,"All movies are legally available from Archive.org and YouTube",-1)),e("button",{class:"mt-2 text-xs hover:underline",onClick:t[5]||(t[5]=d=>oe.value=!0)}," Press ? for keyboard shortcuts ")])]),o(oe)?(a(),l("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",onClick:t[8]||(t[8]=d=>oe.value=!1)},[e("div",{class:"bg-theme-surface rounded-lg p-6 max-w-md w-full mx-4 border border-theme-border shadow-2xl",onClick:t[7]||(t[7]=it(()=>{},["stop"]))},[e("div",ra,[t[39]||(t[39]=e("h3",{class:"text-xl font-bold text-theme-text"},"Keyboard Shortcuts",-1)),e("button",{class:"p-2 hover:bg-theme-selection rounded-full text-theme-text",onClick:t[6]||(t[6]=d=>oe.value=!1)},[...t[38]||(t[38]=[e("div",{class:"i-mdi-close text-xl"},null,-1)])])]),t[40]||(t[40]=Re('<div class="space-y-3" data-v-fb33263f><div class="flex items-center justify-between" data-v-fb33263f><span class="text-theme-text" data-v-fb33263f>Go back to home</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-fb33263f>ESC</kbd></div><div class="flex items-center justify-between" data-v-fb33263f><span class="text-theme-text" data-v-fb33263f>Toggle liked</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-fb33263f>Space / Enter</kbd></div><div class="flex items-center justify-between" data-v-fb33263f><span class="text-theme-text" data-v-fb33263f>Previous movie</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-fb33263f>←</kbd></div><div class="flex items-center justify-between" data-v-fb33263f><span class="text-theme-text" data-v-fb33263f>Next movie</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-fb33263f>→</kbd></div><div class="flex items-center justify-between" data-v-fb33263f><span class="text-theme-text" data-v-fb33263f>Show this help</span><kbd class="px-3 py-1 bg-theme-selection border border-theme-border/50 rounded text-sm font-mono text-theme-text" data-v-fb33263f>?</kbd></div></div>',1))])])):c("",!0)])}}}),va=ct(ia,[["__scopeId","data-v-fb33263f"]]);export{va as default};
