import{e as Y,s as de,D as he,m as B,E as De,h as Ee,p as Z,Z as it,f as ne,n as te,$ as Ue,v as je,a0 as ot,l as o,c as x,o as h,q as w,a as i,k as L,B as Be,y as st,z as lt,a1 as ct,K as We,b as D,w as M,U as ut,F as J,t as j,J as Pe,j as ke,a2 as qe,a3 as dt,R as Ne,a4 as Le,a5 as ft,a6 as Me,a7 as mt,a8 as vt,a9 as bt,aa as ht,ab as pt,d as ye,r as ue,N as le,ac as gt,_ as xt,G as yt,H as wt,ad as Ke}from"./NxCISfAN.js";import{u as Se}from"./CnGyscsp.js";import{_ as Ze}from"./BvjOrvX3.js";import{u as ze}from"./DYO4y4ft.js";import{i as kt}from"./BH85bPq3.js";const St={class:"max-w-4xl mx-auto flex items-center gap-4"},_t={class:"relative flex-1"},Tt=Y({__name:"SearchHeader",setup(n){const e=Se(),{filters:t}=de(e),{setSearchQuery:r,setSort:s}=e,l=he(),{isSearchOpen:a}=de(l),{setSearchOpen:d}=l,v=B(null),p=B(null),S=De(),g=B(t.value.searchQuery);Ee(()=>{const I=S.query.q;I&&I!==g.value&&(g.value=I,d(!0))});const E=it(I=>{r(I);const P=ct();I?P.replace({query:{q:I}}):P.replace({query:{}}),I&&S.path!=="/"&&We("/"),I&&t.value.sort.field!=="relevance"&&s({field:"relevance",direction:"desc",label:"Relevance"})},500);Z(g,I=>{E(I)}),Z(()=>t.value.searchQuery,I=>{I!==g.value&&(g.value=I)});const O=ne(()=>S.path!=="/"?!1:a.value||g.value!=="");Z(a,I=>{I&&te(()=>{v.value?.focus()})}),Z(()=>S.path,I=>{I==="/"&&g.value&&d(!0)}),Ue(p,()=>{g.value||V()});const _=()=>{g.value=""},V=()=>{d(!1)},K=()=>{g.value?_():V()},Q=()=>{V()};return(I,P)=>je((h(),x("div",{ref_key:"searchContainer",ref:p,class:w(["fixed top-0 left-0 right-0 z-50 bg-theme-surface border-b border-theme-border shadow-xl px-4 py-4 md:py-6 transition-transform duration-300",o(O)?"translate-y-0":"-translate-y-full"])},[i("div",St,[i("div",_t,[P[2]||(P[2]=i("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[i("div",{class:"i-mdi-magnify text-2xl text-theme-textmuted"})],-1)),je(i("input",{ref_key:"searchInput",ref:v,"onUpdate:modelValue":P[0]||(P[0]=T=>st(g)?g.value=T:null),type:"text",class:"block w-full pl-12 pr-12 py-3 md:py-4 bg-theme-background border-2 border-transparent focus:border-theme-primary rounded-2xl text-xl md:text-2xl text-theme-text placeholder-theme-text-muted focus:outline-none transition-all shadow-inner",placeholder:"Search movies, actors, directors...",onKeydown:[Be(K,["esc"]),Be(Q,["enter"])]},null,544),[[lt,o(g)]]),o(g)?(h(),x("button",{key:0,class:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:_},[...P[1]||(P[1]=[i("div",{class:"i-mdi-close text-xl text-theme-textmuted hover:text-theme-text"},null,-1)])])):L("",!0)]),o(g)?L("",!0):(h(),x("button",{key:0,class:"p-2 md:p-3 rounded-xl hover:bg-theme-background text-theme-textmuted hover:text-theme-text transition-colors",title:"Close search",onClick:V},[...P[3]||(P[3]=[i("div",{class:"i-mdi-close text-2xl md:text-3xl"},null,-1)])]))])],2)),[[ot,o(O)]])}}),Ct=Object.assign(Tt,{__name:"SearchHeader"}),Ft={class:"transition-all duration-300"},Et={key:0,class:"text-base md:text-lg text-theme-textmuted mt-2 max-w-2xl transition-opacity duration-300"},Nt=Y({__name:"MovieHeader",setup(n){const e=De(),t=ne(()=>e.path==="/"||e.path==="/collections"||e.path==="/collections/");return(r,s)=>{const l=Ze;return h(),x("header",Ft,[i("div",{class:w(["md:ml-16 max-w-none mx-auto px-4 flex lg:flex-row flex-col lg:items-end justify-between gap-8",{"py-6 md:py-10 lg:px-[6%]":o(t),"py-3":!o(t)}])},[D(l,{to:"/",class:"grow"},{default:M(()=>[i("div",{class:w(["w-full i-app-logo text-theme-text transition-all duration-300",{" max-w-md h-16":o(t),"max-w-xs h-12":!o(t)}])},null,2)]),_:1}),o(t)?(h(),x("p",Et," Free legal movie streams from Archive.org and YouTube ")):L("",!0)],2)])}}}),At=Object.assign(Nt,{__name:"MovieHeader"}),$t={class:"hidden md:block fixed left-4 top-1/2 -translate-y-1/2 z-40 glass shadow-2xl rounded-full w-12 border-theme-border/30"},Ot={class:"flex flex-col items-center gap-2 py-2"},It={key:0,class:"absolute top-0 -right-1 bg-theme-accent text-white text-xs rounded-full size-4 flex items-center justify-center font-medium"},Rt={key:0,class:"i-material-symbols-light-wb-sunny text-xl"},Dt={key:1,class:"i-material-symbols-light-dark-mode text-xl"},jt={class:"relative group"},Bt={key:0,class:"absolute top-0 -right-1 bg-theme-primary text-white text-xs rounded-full size-4 flex items-center justify-center font-medium"},Pt={class:"md:hidden fixed bottom-6 left-1/2 -translate-x-1/2 z-50 glass shadow-2xl rounded-full h-14 border-theme-border/30 max-w-[calc(100vw-2rem)] flex items-center group/sidebar"},Lt={key:0,class:"absolute -top-1 -right-1 bg-theme-accent text-white text-xs rounded-full size-5 flex items-center justify-center font-medium"},Mt={key:0,class:"i-material-symbols-light-wb-sunny text-2xl text-theme-accent"},Kt={key:1,class:"i-material-symbols-light-dark-mode text-2xl text-theme-primary"},zt={class:"relative group flex-shrink-0"},Vt={key:0,class:"absolute -top-1 -right-1 bg-theme-primary text-white text-xs rounded-full size-5 flex items-center justify-center font-medium"},Ht=Y({__name:"Sidebar",emits:["openFilters","openThemeSelection"],setup(n,{emit:e}){const t=e,r=Se(),{likedCount:s,activeFiltersCount:l}=de(r),a=he(),{setSearchOpen:d}=a,{isDark:v}=de(a),p=De(),S=B(null),g=B(!1),E=B(!1),O=()=>{if(!S.value)return;const{scrollLeft:P,scrollWidth:T,clientWidth:H}=S.value;g.value=P>5,E.value=P+H<T-5};Ee(()=>{O(),window.addEventListener("resize",O)}),ut(()=>{window.removeEventListener("resize",O)}),Z(l,()=>{te(O)});const _=()=>{t("openFilters")},V=()=>{t("openThemeSelection")},K=()=>{r.resetFilters()},Q=P=>{if(!S.value)return;const T=100;S.value.scrollBy({left:P==="left"?-T:T,behavior:"smooth"})},I=async()=>{p.path!=="/"&&await We("/"),d(!0)};return(P,T)=>{const H=Ze;return h(),x(J,null,[i("aside",$t,[i("div",Ot,[D(H,{to:"/",class:w(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":o(p).path==="/"}]),title:"All Movies"},{default:M(()=>[...T[2]||(T[2]=[i("div",{class:"i-mdi-home text-xl"},null,-1)])]),_:1},8,["class"]),i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors relative group",title:"Search (Shift+S)",onClick:I},[...T[3]||(T[3]=[i("div",{class:"i-mdi-magnify text-xl"},null,-1)])]),D(H,{to:"/liked",class:w(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-accent/20":o(p).path==="/liked"}]),title:"Liked Movies"},{default:M(()=>[i("div",{class:w(["i-mdi-heart text-xl",{"text-theme-accent":o(p).path==="/liked"}])},null,2),o(s)>0?(h(),x("span",It,j(o(s)>99?"99+":o(s)),1)):L("",!0)]),_:1},8,["class"]),D(H,{to:"/collections",class:w(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group",{"bg-theme-primary/20":o(p).path.startsWith("/collections")}]),title:"Collections"},{default:M(()=>[i("div",{class:w(["i-mdi:movie-roll text-xl",{"text-theme-primary":o(p).path.startsWith("/collections")}])},null,2)]),_:1},8,["class"]),i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors",title:"Theme Selection",onClick:V},[o(v)?(h(),x("div",Rt)):(h(),x("div",Dt))]),i("div",jt,[i("button",{class:w(["p-2 hover:bg-theme-selection rounded-full transition-colors relative",{"bg-theme-primary/20":o(l)>0}]),title:"Filters",onClick:_},[i("div",{class:w(["i-mdi-filter-variant text-xl",{"text-theme-primary":o(l)>0}])},null,2),o(l)>0?(h(),x("span",Bt,j(o(l)>9?"9+":o(l)),1)):L("",!0)],2),o(l)>0?(h(),x("button",{key:0,class:"absolute -top-1 -right-1 size-5 rounded-full bg-theme-surface/90 backdrop-blur-sm border border-theme-border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-theme-accent/20 hover:border-theme-accent z-10",title:"Clear all filters",onClick:Pe(K,["stop"])},[...T[4]||(T[4]=[i("div",{class:"i-mdi-close text-xs text-theme-textmuted hover:text-theme-accent"},null,-1)])])):L("",!0)]),T[5]||(T[5]=i("a",{href:"https://github.com/select/movies-deluxe",target:"_blank",rel:"noopener noreferrer",class:"p-2 hover:bg-theme-selection rounded-full transition-colors",title:"View on GitHub"},[i("div",{class:"i-mdi-github text-xl"})],-1))])]),i("aside",Pt,[o(g)?(h(),x("button",{key:0,class:"absolute left-1 z-10 p-1 rounded-full bg-theme-surface/80 backdrop-blur-sm text-theme-textmuted animate-pulse hover:bg-theme-selection transition-colors","aria-label":"Scroll left",onClick:T[0]||(T[0]=ae=>Q("left"))},[...T[6]||(T[6]=[i("div",{class:"i-mdi-chevron-left text-lg"},null,-1)])])):L("",!0),i("div",{ref_key:"scrollContainer",ref:S,class:"flex items-center gap-1 px-2 h-full overflow-x-auto scrollbar-hidden scroll-smooth",onScroll:O},[i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors relative flex-shrink-0","aria-label":"Search",onClick:I},[...T[7]||(T[7]=[i("div",{class:"i-mdi-magnify text-2xl"},null,-1)])]),D(H,{to:"/",class:w(["p-2 hover:bg-theme-selection rounded-full transition-colors relative flex-shrink-0",{"bg-theme-primary/20":o(p).path==="/"}]),"aria-label":"All Movies"},{default:M(()=>[...T[8]||(T[8]=[i("div",{class:"i-mdi-home text-2xl"},null,-1)])]),_:1},8,["class"]),D(H,{to:"/liked",class:w(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-accent/20":o(p).path==="/liked"}]),"aria-label":"Liked Movies"},{default:M(()=>[i("div",{class:w(["i-mdi-heart text-2xl",{"text-theme-accent":o(p).path==="/liked"}])},null,2),o(s)>0?(h(),x("span",Lt,j(o(s)>99?"99+":o(s)),1)):L("",!0)]),_:1},8,["class"]),D(H,{to:"/collections",class:w(["p-2 hover:bg-theme-selection rounded-full transition-colors relative group flex-shrink-0",{"bg-theme-primary/20":o(p).path.startsWith("/collections")}]),"aria-label":"Collections"},{default:M(()=>[i("div",{class:w(["i-mdi:movie-roll text-2xl",{"text-theme-primary":o(p).path.startsWith("/collections")}])},null,2)]),_:1},8,["class"]),i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors flex-shrink-0","aria-label":"Theme Selection",onClick:V},[o(v)?(h(),x("div",Mt)):(h(),x("div",Kt))]),i("div",zt,[i("button",{class:w(["p-2 hover:bg-theme-selection rounded-full transition-colors relative",{"bg-theme-primary/20":o(l)>0}]),"aria-label":"Filters",onClick:_},[i("div",{class:w(["i-mdi-filter-variant text-2xl",{"text-theme-primary":o(l)>0}])},null,2),o(l)>0?(h(),x("span",Vt,j(o(l)>9?"9+":o(l)),1)):L("",!0)],2),o(l)>0?(h(),x("button",{key:0,class:"absolute -top-1 -right-1 size-6 rounded-full bg-theme-surface/90 backdrop-blur-sm border border-theme-border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-theme-accent/20 hover:border-theme-accent z-10","aria-label":"Clear all filters",onClick:Pe(K,["stop"])},[...T[9]||(T[9]=[i("div",{class:"i-mdi-close text-sm text-theme-textmuted hover:text-theme-accent"},null,-1)])])):L("",!0)]),T[10]||(T[10]=i("a",{href:"https://github.com/select/movies-deluxe",target:"_blank",rel:"noopener noreferrer",class:"p-2 hover:bg-theme-selection rounded-full transition-colors flex-shrink-0","aria-label":"View on GitHub"},[i("div",{class:"i-mdi-github text-2xl"})],-1))],544),o(E)?(h(),x("button",{key:1,class:"absolute right-1 z-10 p-1 rounded-full bg-theme-surface/80 backdrop-blur-sm text-theme-textmuted animate-pulse hover:bg-theme-selection transition-colors","aria-label":"Scroll right",onClick:T[1]||(T[1]=ae=>Q("right"))},[...T[11]||(T[11]=[i("div",{class:"i-mdi-chevron-right text-lg"},null,-1)])])):L("",!0)])],64)}}}),Gt=Object.assign(Ht,{__name:"Sidebar"}),Yt=Y({__name:"AppSortButton",props:{option:{},isActive:{type:Boolean}},emits:["select"],setup(n){const e=n,t=()=>{const{field:r}=e.option;switch(r){case"relevance":return"i-mdi-target";case"votes":return"i-mdi-account-group";default:return"i-mdi-sort"}};return(r,s)=>(h(),x("button",{class:w(["flex items-center justify-center gap-1.5 px-2 py-1.5 rounded-full text-xs font-medium transition-colors w-full border border-theme-border/50",{"bg-theme-primary text-white border-theme-primary":n.isActive,"bg-theme-surface text-theme-textmuted hover:bg-theme-selection hover:border-theme-border":!n.isActive}]),onClick:s[0]||(s[0]=l=>r.$emit("select",n.option))},[i("div",{class:w(["text-sm",{[t()]:!0,"text-white":n.isActive,"text-theme-textmuted":!n.isActive}])},null,2),i("span",null,j(n.option.label),1)],2))}}),Qt=Object.assign(Yt,{__name:"AppSortButton"}),Ut={class:"flex w-full rounded-full border border-theme-border/50 overflow-hidden"},Wt=Y({__name:"AppSortToggleButton",props:{label:{},icon:{},optionA:{},optionB:{},currentSort:{}},emits:["select"],setup(n){const e=n,t=ne(()=>e.currentSort.field===e.optionA.field&&e.currentSort.direction===e.optionA.direction),r=ne(()=>e.currentSort.field===e.optionB.field&&e.currentSort.direction===e.optionB.direction);return(s,l)=>(h(),x("div",Ut,[i("button",{class:w(["flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs font-medium transition-colors border-r border-theme-border/50 flex-1",{"bg-theme-primary text-white":o(t),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!o(t)}]),onClick:l[0]||(l[0]=a=>s.$emit("select",n.optionA))},[i("div",{class:w(["text-sm",[n.icon,{"text-white":o(t),"text-theme-textmuted":!o(t)}]])},null,2),i("span",null,j(n.optionA.label),1)],2),i("button",{class:w(["flex items-center justify-center px-2 py-1.5 text-xs font-medium transition-colors flex-1",{"bg-theme-primary text-white":o(r),"bg-theme-surface text-theme-textmuted hover:bg-theme-selection":!o(r)}]),onClick:l[1]||(l[1]=a=>s.$emit("select",n.optionB))},j(n.optionB.label),3)]))}}),qt=Object.assign(Wt,{__name:"AppSortToggleButton"}),Zt={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Xt=Y({__name:"AppSortButtonGroup",props:{currentSort:{},showRelevance:{type:Boolean,default:!1}},emits:["select"],setup(n,{emit:e}){const t=n,r={field:"relevance",direction:"desc",label:"Relevance"},s={field:"year",direction:"desc",label:"Newest"},l={field:"year",direction:"asc",label:"Oldest"},a={field:"rating",direction:"desc",label:"High"},d={field:"rating",direction:"asc",label:"Low"},v={field:"title",direction:"asc",label:"A-Z"},p={field:"title",direction:"desc",label:"Z-A"},S={field:"votes",direction:"desc",label:"Most Popular"},g=E=>t.currentSort.field===E.field&&t.currentSort.direction===E.direction;return(E,O)=>{const _=Qt,V=qt;return h(),x("div",Zt,[n.showRelevance?(h(),ke(_,{key:0,option:r,"is-active":g(r),onSelect:O[0]||(O[0]=K=>E.$emit("select",r))},null,8,["is-active"])):L("",!0),D(V,{label:"Year",icon:"i-mdi-calendar","option-a":s,"option-b":l,"current-sort":n.currentSort,onSelect:O[1]||(O[1]=K=>E.$emit("select",K))},null,8,["current-sort"]),D(V,{label:"Rating",icon:"i-mdi-star","option-a":a,"option-b":d,"current-sort":n.currentSort,onSelect:O[2]||(O[2]=K=>E.$emit("select",K))},null,8,["current-sort"]),D(V,{label:"Title",icon:"i-mdi-sort-alphabetical-ascending","option-a":v,"option-b":p,"current-sort":n.currentSort,onSelect:O[3]||(O[3]=K=>E.$emit("select",K))},null,8,["current-sort"]),D(_,{option:S,"is-active":g(S),onSelect:O[4]||(O[4]=K=>E.$emit("select",S))},null,8,["is-active"])])}}}),Jt=Object.assign(Xt,{__name:"AppSortButtonGroup"}),en=["aria-expanded","disabled"],tn={class:"flex items-center gap-2"},nn={class:"font-bold text-[10px] uppercase tracking-wider text-theme-textmuted"},rn={class:"space-y-2"},an=Y({__name:"FilterSection",props:{title:{},icon:{default:void 0},defaultExpanded:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1}},setup(n){const e=n,t=qe("(min-width: 768px)"),r=B(e.defaultExpanded);dt(()=>{t.value&&(r.value=!0)});const s=()=>{t.value||(r.value=!r.value)};return(l,a)=>(h(),x("div",null,[i("button",{class:w(["flex items-center justify-between w-full px-2 py-1 rounded-md bg-gradient-to-r from-theme-selection to-transparent text-left group transition-all duration-500 md:cursor-default",{"ring-2 ring-theme-primary ring-offset-2 ring-offset-theme-background scale-[1.02] shadow-lg":n.highlight}]),"aria-expanded":o(r),disabled:o(t),onClick:s},[i("div",tn,[n.icon?(h(),x("div",{key:0,class:w(["text-base text-theme-textmuted",n.icon])},null,2)):L("",!0),i("h3",nn,j(n.title),1)]),i("div",{class:w(["i-mdi-chevron-down text-lg text-gray-400 transition-transform duration-300 md:hidden",{"rotate-180":o(r)}])},null,2)],10,en),i("div",{class:w(["transition-all duration-300 ease-in-out overflow-hidden md:max-h-none md:opacity-100 md:visible md:mt-3",{"max-h-[2000px] opacity-100 visible mt-3":o(r),"max-h-0 opacity-0 invisible mt-0":!o(r)}])},[i("div",rn,[Ne(l.$slots,"default")])],2)]))}}),on=Object.assign(an,{__name:"FilterSection"}),sn={class:"relative"},ln=Y({__name:"CollapsibleFilterItems",props:{maxLines:{default:2}},setup(n,{expose:e}){const t=n,r=qe("(min-width: 768px)"),s=B(!1),l=B(),a=B(!1),d=()=>{if(!l.value||!r.value){a.value=!1;return}const p=s.value;s.value=!0,te(()=>{if(!l.value)return;const S=l.value.scrollHeight,E=t.maxLines*36;a.value=S>E,s.value=p})},v=()=>{s.value=!s.value};return Ee(()=>{te(d)}),Z(r,p=>{p?te(d):(s.value=!1,a.value=!1)}),e({checkOverflow:d}),(p,S)=>(h(),x("div",sn,[i("div",{ref_key:"itemsContainer",ref:l,class:w(["flex flex-wrap gap-2 transition-all duration-300 ease-in-out md:overflow-hidden",{"md:max-h-[5.5rem]":!o(s)&&o(r),"md:max-h-none":o(s)||!o(r)}])},[Ne(p.$slots,"default")],2),o(a)&&o(r)?(h(),x("button",{key:0,class:w(["cursor-pointer w-full flex items-end justify-center gap-1.5 text-xs font-medium transition-colors text-gray-500 dark:text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 h-11 flex",{"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-white via-white/90 to-transparent dark:from-gray-900 dark:via-gray-900/90 dark:to-transparent":!o(s),"mt-2 bg-transparent":o(s)}]),onClick:v},[i("span",null,j(o(s)?"Show Less":"Show More"),1),i("div",{class:w(["i-mdi-chevron-down text-sm transition-transform duration-200",{"rotate-180":o(s)}])},null,2)],2)):L("",!0)]))}}),cn=Object.assign(ln,{__name:"CollapsibleFilterItems"}),un=["aria-checked","aria-disabled"],dn={key:0,class:"i-mdi-checkbox-marked text-xl"},fn={key:1,class:"i-mdi-checkbox-blank-outline text-xl"},mn=["checked","value","disabled"],vn=Y({__name:"AppInputCheckbox",props:{checked:{type:Boolean},value:{type:[String,Number,Boolean]},label:{},disabled:{type:Boolean}},emits:["change"],setup(n,{emit:e}){const t=e,r=s=>{const l=s.target;t("change",l.checked)};return(s,l)=>(h(),x("label",{class:w(["flex items-center gap-2 cursor-pointer group",{"opacity-50 cursor-not-allowed":n.disabled}])},[i("div",{class:w(["flex items-center justify-center w-5 h-5 transition-colors",{"text-theme-primary":n.checked,"text-theme-textmuted group-hover:text-theme-text":!n.checked}]),role:"checkbox","aria-checked":n.checked,"aria-disabled":n.disabled},[n.checked?(h(),x("div",dn)):(h(),x("div",fn))],10,un),i("input",{checked:n.checked,type:"checkbox",value:n.value,disabled:n.disabled,class:"sr-only",onChange:r},null,40,mn),n.label?(h(),x("span",{key:0,class:w(["text-sm select-none",{"text-theme-textmuted":n.disabled}])},j(n.label),3)):L("",!0),Ne(s.$slots,"default")],2))}}),bn=Object.assign(vn,{__name:"AppInputCheckbox"});function Ae(n){if(n>=1e6){const e=n/1e6;return`${e>=10?Math.round(e):e.toFixed(1).replace(/\.0$/,"")}M`}if(n>=1e3){const e=n/1e3;return`${e>=10?Math.round(e):e.toFixed(1).replace(/\.0$/,"")}K`}return n.toString()}function $e(n){return n.toLocaleString()}var Xe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],_e=Xe.join(","),Je=typeof Element>"u",re=Je?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Te=!Je&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},be=function(e,t){var r;t===void 0&&(t=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),l=s===""||s==="true",a=l||t&&e&&be(e.parentNode);return a},hn=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},et=function(e,t,r){if(be(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(_e));return t&&re.call(e,_e)&&s.unshift(e),s=s.filter(r),s},Ce=function(e,t,r){for(var s=[],l=Array.from(e);l.length;){var a=l.shift();if(!be(a,!1))if(a.tagName==="SLOT"){var d=a.assignedElements(),v=d.length?d:a.children,p=Ce(v,!0,r);r.flatten?s.push.apply(s,p):s.push({scopeParent:a,candidates:p})}else{var S=re.call(a,_e);S&&r.filter(a)&&(t||!e.includes(a))&&s.push(a);var g=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),E=!be(g,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(g&&E){var O=Ce(g===!0?a.children:g.children,!0,r);r.flatten?s.push.apply(s,O):s.push({scopeParent:a,candidates:O})}else l.unshift.apply(l,a.children)}}return s},tt=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ee=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||hn(e))&&!tt(e)?0:e.tabIndex},pn=function(e,t){var r=ee(e);return r<0&&t&&!tt(e)?0:r},gn=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},nt=function(e){return e.tagName==="INPUT"},xn=function(e){return nt(e)&&e.type==="hidden"},yn=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},wn=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},kn=function(e){if(!e.name)return!0;var t=e.form||Te(e),r=function(d){return t.querySelectorAll('input[type="radio"][name="'+d+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var l=wn(s,e.form);return!l||l===e},Sn=function(e){return nt(e)&&e.type==="radio"},_n=function(e){return Sn(e)&&!kn(e)},Tn=function(e){var t,r=e&&Te(e),s=(t=r)===null||t===void 0?void 0:t.host,l=!1;if(r&&r!==e){var a,d,v;for(l=!!((a=s)!==null&&a!==void 0&&(d=a.ownerDocument)!==null&&d!==void 0&&d.contains(s)||e!=null&&(v=e.ownerDocument)!==null&&v!==void 0&&v.contains(e));!l&&s;){var p,S,g;r=Te(s),s=(p=r)===null||p===void 0?void 0:p.host,l=!!((S=s)!==null&&S!==void 0&&(g=S.ownerDocument)!==null&&g!==void 0&&g.contains(s))}}return l},Ve=function(e){var t=e.getBoundingClientRect(),r=t.width,s=t.height;return r===0&&s===0},Cn=function(e,t){var r=t.displayCheck,s=t.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var l=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!l}if(getComputedStyle(e).visibility==="hidden")return!0;var a=re.call(e,"details>summary:first-of-type"),d=a?e.parentElement:e;if(re.call(d,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof s=="function"){for(var v=e;e;){var p=e.parentElement,S=Te(e);if(p&&!p.shadowRoot&&s(p)===!0)return Ve(e);e.assignedSlot?e=e.assignedSlot:!p&&S!==e.ownerDocument?e=S.host:e=p}e=v}if(Tn(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ve(e);return!1},Fn=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var s=t.children.item(r);if(s.tagName==="LEGEND")return re.call(t,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}t=t.parentElement}return!1},Fe=function(e,t){return!(t.disabled||be(t)||xn(t)||Cn(t,e)||yn(t)||Fn(t))},Ie=function(e,t){return!(_n(t)||ee(t)<0||!Fe(e,t))},En=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},rt=function(e){var t=[],r=[];return e.forEach(function(s,l){var a=!!s.scopeParent,d=a?s.scopeParent:s,v=pn(d,a),p=a?rt(s.candidates):d;v===0?a?t.push.apply(t,p):t.push(d):r.push({documentOrder:l,tabIndex:v,item:s,isScope:a,content:p})}),r.sort(gn).reduce(function(s,l){return l.isScope?s.push.apply(s,l.content):s.push(l.content),s},[]).concat(t)},Nn=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Ce([e],t.includeContainer,{filter:Ie.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:En}):r=et(e,t.includeContainer,Ie.bind(null,t)),rt(r)},An=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Ce([e],t.includeContainer,{filter:Fe.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=et(e,t.includeContainer,Fe.bind(null,t)),r},ce=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return re.call(e,_e)===!1?!1:Ie(t,e)},$n=Xe.concat("iframe").join(","),Oe=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return re.call(e,$n)===!1?!1:Fe(t,e)};function Re(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function On(n){if(Array.isArray(n))return Re(n)}function He(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=at(n))||e){t&&(n=t);var r=0,s=function(){};return{s,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(v){throw v},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,a=!0,d=!1;return{s:function(){t=t.call(n)},n:function(){var v=t.next();return a=v.done,v},e:function(v){d=!0,l=v},f:function(){try{a||t.return==null||t.return()}finally{if(d)throw l}}}}function In(n,e,t){return(e=Pn(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rn(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Dn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ge(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Ye(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ge(Object(t),!0).forEach(function(r){In(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ge(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jn(n){return On(n)||Rn(n)||at(n)||Dn()}function Bn(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pn(n){var e=Bn(n,"string");return typeof e=="symbol"?e:e+""}function at(n,e){if(n){if(typeof n=="string")return Re(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Re(n,e):void 0}}var q={getActiveTrap:function(e){return e?.length>0?e[e.length-1]:null},activateTrap:function(e,t){var r=q.getActiveTrap(e);t!==r&&q.pauseTrap(e);var s=e.indexOf(t);s===-1||e.splice(s,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),q.unpauseTrap(e)},pauseTrap:function(e){var t=q.getActiveTrap(e);t?._setPausedState(!0)},unpauseTrap:function(e){var t=q.getActiveTrap(e);t&&!t._isManuallyPaused()&&t._setPausedState(!1)}},Ln=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Mn=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},ve=function(e){return e?.key==="Tab"||e?.keyCode===9},Kn=function(e){return ve(e)&&!e.shiftKey},zn=function(e){return ve(e)&&e.shiftKey},Qe=function(e){return setTimeout(e,0)},me=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},we=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Vn=[],Hn=function(e,t){var r=t?.document||document,s=t?.trapStack||Vn,l=Ye({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isolateSubtrees:!1,isKeyForward:Kn,isKeyBackward:zn},t),a={containers:[],containerGroups:[],tabbableGroups:[],adjacentElements:new Set,alreadyInert:new Set,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},d,v=function(c,u,b){return c&&c[u]!==void 0?c[u]:l[b||u]},p=function(c,u){var b=typeof u?.composedPath=="function"?u.composedPath():void 0;return a.containerGroups.findIndex(function(C){var F=C.container,A=C.tabbableNodes;return F.contains(c)||b?.includes(F)||A.find(function(y){return y===c})})},S=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=u.hasFallback,C=b===void 0?!1:b,F=u.params,A=F===void 0?[]:F,y=l[c];if(typeof y=="function"&&(y=y.apply(void 0,jn(A))),y===!0&&(y=void 0),!y){if(y===void 0||y===!1)return y;throw new Error("`".concat(c,"` was specified but was not a node, or did not return a node"))}var $=y;if(typeof y=="string"){try{$=r.querySelector(y)}catch(R){throw new Error("`".concat(c,'` appears to be an invalid selector; error="').concat(R.message,'"'))}if(!$&&!C)throw new Error("`".concat(c,"` as selector refers to no known node"))}return $},g=function(){var c=S("initialFocus",{hasFallback:!0});if(c===!1)return!1;if(c===void 0||c&&!Oe(c,l.tabbableOptions))if(p(r.activeElement)>=0)c=r.activeElement;else{var u=a.tabbableGroups[0],b=u&&u.firstTabbableNode;c=b||S("fallbackFocus")}else c===null&&(c=S("fallbackFocus"));if(!c)throw new Error("Your focus-trap needs to have at least one focusable element");return c},E=function(){if(a.containerGroups=a.containers.map(function(c){var u=Nn(c,l.tabbableOptions),b=An(c,l.tabbableOptions),C=u.length>0?u[0]:void 0,F=u.length>0?u[u.length-1]:void 0,A=b.find(function(R){return ce(R)}),y=b.slice().reverse().find(function(R){return ce(R)}),$=!!u.find(function(R){return ee(R)>0});return{container:c,tabbableNodes:u,focusableNodes:b,posTabIndexesFound:$,firstTabbableNode:C,lastTabbableNode:F,firstDomTabbableNode:A,lastDomTabbableNode:y,nextTabbableNode:function(G){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,f=u.indexOf(G);return f<0?k?b.slice(b.indexOf(G)+1).find(function(W){return ce(W)}):b.slice(0,b.indexOf(G)).reverse().find(function(W){return ce(W)}):u[f+(k?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(c){return c.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!S("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(c){return c.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},O=function(c){var u=c.activeElement;if(u)return u.shadowRoot&&u.shadowRoot.activeElement!==null?O(u.shadowRoot):u},_=function(c){if(c!==!1&&c!==O(document)){if(!c||!c.focus){_(g());return}c.focus({preventScroll:!!l.preventScroll}),a.mostRecentlyFocusedNode=c,Ln(c)&&c.select()}},V=function(c){var u=S("setReturnFocus",{params:[c]});return u||(u===!1?!1:c)},K=function(c){var u=c.target,b=c.event,C=c.isBackward,F=C===void 0?!1:C;u=u||we(b),E();var A=null;if(a.tabbableGroups.length>0){var y=p(u,b),$=y>=0?a.containerGroups[y]:void 0;if(y<0)F?A=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:A=a.tabbableGroups[0].firstTabbableNode;else if(F){var R=a.tabbableGroups.findIndex(function(oe){var se=oe.firstTabbableNode;return u===se});if(R<0&&($.container===u||Oe(u,l.tabbableOptions)&&!ce(u,l.tabbableOptions)&&!$.nextTabbableNode(u,!1))&&(R=y),R>=0){var G=R===0?a.tabbableGroups.length-1:R-1,k=a.tabbableGroups[G];A=ee(u)>=0?k.lastTabbableNode:k.lastDomTabbableNode}else ve(b)||(A=$.nextTabbableNode(u,!1))}else{var f=a.tabbableGroups.findIndex(function(oe){var se=oe.lastTabbableNode;return u===se});if(f<0&&($.container===u||Oe(u,l.tabbableOptions)&&!ce(u,l.tabbableOptions)&&!$.nextTabbableNode(u))&&(f=y),f>=0){var W=f===a.tabbableGroups.length-1?0:f+1,z=a.tabbableGroups[W];A=ee(u)>=0?z.firstTabbableNode:z.firstDomTabbableNode}else ve(b)||(A=$.nextTabbableNode(u))}}else A=S("fallbackFocus");return A},Q=function(c){var u=we(c);if(!(p(u,c)>=0)){if(me(l.clickOutsideDeactivates,c)){d.deactivate({returnFocus:l.returnFocusOnDeactivate});return}me(l.allowOutsideClick,c)||c.preventDefault()}},I=function(c){var u=we(c),b=p(u,c)>=0;if(b||u instanceof Document)b&&(a.mostRecentlyFocusedNode=u);else{c.stopImmediatePropagation();var C,F=!0;if(a.mostRecentlyFocusedNode)if(ee(a.mostRecentlyFocusedNode)>0){var A=p(a.mostRecentlyFocusedNode),y=a.containerGroups[A].tabbableNodes;if(y.length>0){var $=y.findIndex(function(R){return R===a.mostRecentlyFocusedNode});$>=0&&(l.isKeyForward(a.recentNavEvent)?$+1<y.length&&(C=y[$+1],F=!1):$-1>=0&&(C=y[$-1],F=!1))}}else a.containerGroups.some(function(R){return R.tabbableNodes.some(function(G){return ee(G)>0})})||(F=!1);else F=!1;F&&(C=K({target:a.mostRecentlyFocusedNode,isBackward:l.isKeyBackward(a.recentNavEvent)})),_(C||a.mostRecentlyFocusedNode||g())}a.recentNavEvent=void 0},P=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=c;var b=K({event:c,isBackward:u});b&&(ve(c)&&c.preventDefault(),_(b))},T=function(c){(l.isKeyForward(c)||l.isKeyBackward(c))&&P(c,l.isKeyBackward(c))},H=function(c){Mn(c)&&me(l.escapeDeactivates,c)!==!1&&(c.preventDefault(),d.deactivate())},ae=function(c){var u=we(c);p(u,c)>=0||me(l.clickOutsideDeactivates,c)||me(l.allowOutsideClick,c)||(c.preventDefault(),c.stopImmediatePropagation())},pe=function(){if(a.active)return q.activateTrap(s,d),a.delayInitialFocusTimer=l.delayInitialFocus?Qe(function(){_(g())}):_(g()),r.addEventListener("focusin",I,!0),r.addEventListener("mousedown",Q,{capture:!0,passive:!1}),r.addEventListener("touchstart",Q,{capture:!0,passive:!1}),r.addEventListener("click",ae,{capture:!0,passive:!1}),r.addEventListener("keydown",T,{capture:!0,passive:!1}),r.addEventListener("keydown",H),d},ge=function(c){a.active&&!a.paused&&d._setSubtreeIsolation(!1),a.adjacentElements.clear(),a.alreadyInert.clear();var u=new Set,b=new Set,C=He(c),F;try{for(C.s();!(F=C.n()).done;){var A=F.value;u.add(A);for(var y=typeof ShadowRoot<"u"&&A.getRootNode()instanceof ShadowRoot,$=A;$;){u.add($);var R=$.parentElement,G=[];R?G=R.children:!R&&y&&(G=$.getRootNode().children,R=$.getRootNode().host,y=typeof ShadowRoot<"u"&&R.getRootNode()instanceof ShadowRoot);var k=He(G),f;try{for(k.s();!(f=k.n()).done;){var W=f.value;b.add(W)}}catch(z){k.e(z)}finally{k.f()}$=R}}}catch(z){C.e(z)}finally{C.f()}u.forEach(function(z){b.delete(z)}),a.adjacentElements=b},fe=function(){if(a.active)return r.removeEventListener("focusin",I,!0),r.removeEventListener("mousedown",Q,!0),r.removeEventListener("touchstart",Q,!0),r.removeEventListener("click",ae,!0),r.removeEventListener("keydown",T,!0),r.removeEventListener("keydown",H),d},xe=function(c){var u=c.some(function(b){var C=Array.from(b.removedNodes);return C.some(function(F){return F===a.mostRecentlyFocusedNode})});u&&_(g())},ie=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(xe):void 0,U=function(){ie&&(ie.disconnect(),a.active&&!a.paused&&a.containers.map(function(c){ie.observe(c,{subtree:!0,childList:!0})}))};return d={get active(){return a.active},get paused(){return a.paused},activate:function(c){if(a.active)return this;var u=v(c,"onActivate"),b=v(c,"onPostActivate"),C=v(c,"checkCanFocusTrap"),F=q.getActiveTrap(s),A=!1;F&&!F.paused&&(F._setSubtreeIsolation(!1),A=!0);try{C||E(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=O(r),u?.();var y=function(){C&&E(),pe(),U(),l.isolateSubtrees&&d._setSubtreeIsolation(!0),b?.()};if(C)return C(a.containers.concat()).then(y,y),this;y()}catch($){throw F===q.getActiveTrap(s)&&A&&F._setSubtreeIsolation(!0),$}return this},deactivate:function(c){if(!a.active)return this;var u=Ye({onDeactivate:l.onDeactivate,onPostDeactivate:l.onPostDeactivate,checkCanReturnFocus:l.checkCanReturnFocus},c);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,a.paused||d._setSubtreeIsolation(!1),a.alreadyInert.clear(),fe(),a.active=!1,a.paused=!1,U(),q.deactivateTrap(s,d);var b=v(u,"onDeactivate"),C=v(u,"onPostDeactivate"),F=v(u,"checkCanReturnFocus"),A=v(u,"returnFocus","returnFocusOnDeactivate");b?.();var y=function(){Qe(function(){A&&_(V(a.nodeFocusedBeforeActivation)),C?.()})};return A&&F?(F(V(a.nodeFocusedBeforeActivation)).then(y,y),this):(y(),this)},pause:function(c){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,c)):this},unpause:function(c){return a.active?(a.manuallyPaused=!1,s[s.length-1]!==this?this:this._setPausedState(!1,c)):this},updateContainerElements:function(c){var u=[].concat(c).filter(Boolean);return a.containers=u.map(function(b){return typeof b=="string"?r.querySelector(b):b}),l.isolateSubtrees&&ge(a.containers),a.active&&(E(),l.isolateSubtrees&&!a.paused&&d._setSubtreeIsolation(!0)),U(),this}},Object.defineProperties(d,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(c,u){if(a.paused===c)return this;if(a.paused=c,c){var b=v(u,"onPause"),C=v(u,"onPostPause");b?.(),fe(),U(),d._setSubtreeIsolation(!1),C?.()}else{var F=v(u,"onUnpause"),A=v(u,"onPostUnpause");F?.(),d._setSubtreeIsolation(!0),E(),pe(),U(),A?.()}return this}},_setSubtreeIsolation:{value:function(c){l.isolateSubtrees&&a.adjacentElements.forEach(function(u){if(c){var b=u.inert||u.hasAttribute("inert");b&&a.alreadyInert.add(u),u.inert=!0}else a.alreadyInert.has(u)||(u.inert=!1)})}}}),d.updateContainerElements(e),d};function Gn(n,e={}){let t;const{immediate:r,...s}=e,l=Le(!1),a=Le(!1),d=g=>t&&t.activate(g),v=g=>t&&t.deactivate(g),p=()=>{t&&(t.pause(),a.value=!0)},S=()=>{t&&(t.unpause(),a.value=!1)};return Z(ne(()=>ft(Me(n)).map(g=>{const E=Me(g);return typeof E=="string"?E:mt(E)}).filter(vt)),g=>{if(g.length)if(!t)t=Hn(g,{...s,onActivate(){l.value=!0,e.onActivate&&e.onActivate()},onDeactivate(){l.value=!1,e.onDeactivate&&e.onDeactivate()}}),r&&d();else{const E=t?.active;t?.updateContainerElements(g),!E&&r&&d()}},{flush:"post"}),bt(()=>v()),{hasFocus:l,isPaused:a,activate:d,deactivate:v,pause:p,unpause:S}}const Yn={class:"flex items-center justify-between p-4"},Qn={class:"flex items-center gap-2"},Un={class:"overflow-y-auto scrollbar-thin flex-1 md:h-[calc(100vh-4rem)] p-4"},Wn={class:"max-w-7xl mx-auto space-y-4 flex flex-col gap-4"},qn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Zn={class:"space-y-2"},Xn={class:"flex items-center justify-between text-sm"},Jn={class:"font-medium text-theme-text"},er=["value"],tr={class:"space-y-2"},nr={class:"flex items-center justify-between text-sm"},rr={class:"font-medium text-theme-text"},ar=["value"],ir={class:"space-y-2"},or={class:"flex items-center justify-between text-sm"},sr={class:"font-medium text-theme-text"},lr=["value"],cr={key:0,class:"text-sm text-theme-textmuted"},ur=["title","onClick"],dr={key:0,class:"text-sm text-theme-textmuted"},fr=["title","onClick"],mr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vr={class:"space-y-3"},br={class:"pl-4 space-y-2 border-l-2 border-theme-border/50"},hr={key:0,class:"text-sm text-theme-textmuted"},pr={class:"flex items-center justify-between gap-2 flex-1"},gr={class:"text-theme-text"},xr=["title"],yr={class:"space-y-6"},wr={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},kr=["onClick","onMouseenter"],Sr={class:"flex items-center justify-between"},_r={class:"text-xs font-semibold truncate"},Tr={key:0,class:"i-mdi-check-circle text-theme-primary text-xs"},Cr={class:"flex gap-1"},Fr={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},Er=["onClick","onMouseenter"],Nr={class:"flex items-center justify-between"},Ar={class:"text-xs font-semibold truncate"},$r={key:0,class:"i-mdi-check-circle text-theme-primary text-xs"},Or={class:"flex gap-1"},Ir={key:0,class:"text-sm text-red-500 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg"},Rr=Y({__name:"FilterMenu",props:{isOpen:{type:Boolean}},emits:["close"],setup(n,{expose:e,emit:t}){const r=n,s=t,l=he(),{currentThemeId:a}=de(l),{setTheme:d,previewTheme:v}=l,p=ht(),S=ne(()=>p.filter(k=>k.metadata.variant==="dark")),g=ne(()=>p.filter(k=>k.metadata.variant==="light")),E=B(!1);e({scrollToThemeSection:()=>{const k=document.getElementById("theme-selection-section");k&&(k.scrollIntoView({behavior:"smooth",block:"center"}),E.value=!0,setTimeout(()=>{E.value=!1},2e3))}});const{filters:_,currentSortOption:V,hasActiveFilters:K}=de(Se()),{setMinRating:Q,setMinYear:I,setMinVotes:P,toggleSource:T,toggleGenre:H,toggleCountry:ae,setSort:pe,resetFilters:ge}=Se(),fe=B([]),xe=B([]),ie=B([]),U=B(!0),N=B(null),c=B(),u=B(),b=async()=>{U.value=!0,N.value=null;try{const k=ze();if(k.isReady.value){const f=await k.getFilterOptions();fe.value=f.genres,xe.value=f.countries,ie.value=f.channels,te(()=>{c.value?.checkOverflow(),u.value?.checkOverflow()})}}catch{N.value="Failed to load filter options"}finally{U.value=!1}},C=ze();Z(()=>C.isReady.value,k=>{k&&b()});const F=B(!1);Ee(()=>{F.value=kt(),b()});const A=k=>{pe(k)},y=B(null),$=pt(typeof window<"u"?document.body:null);Ue(y,()=>{r.isOpen&&s("close")});const{activate:R,deactivate:G}=Gn(y,{immediate:!1,allowOutsideClick:!1,escapeDeactivates:!1,returnFocusOnDeactivate:!0,initialFocus:'button[aria-label="Close filters"]',fallbackFocus:()=>y.value});return Z(()=>r.isOpen,k=>{$.value=k,k?typeof window<"u"&&window.setTimeout(()=>{R()},50):G()}),(k,f)=>{const W=Jt,z=on,oe=cn,se=bn;return h(),x("div",null,[n.isOpen?(h(),x("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 transition-opacity",onClick:f[0]||(f[0]=m=>s("close"))})):L("",!0),i("div",{ref_key:"filterMenuRef",ref:y,class:w(["fixed z-50 transition-all duration-300 ease-in-out glass shadow-2xl overflow-hidden flex flex-col bottom-0 left-0 right-0 rounded-t-2xl border-t border-theme-border/50 max-h-[90vh] md:top-0 md:left-0 md:bottom-0 md:right-auto md:h-full md:w-full md:max-w-xl md:rounded-none md:border-0 md:max-h-full",{"translate-y-0 md:translate-x-0":n.isOpen,"translate-y-full md:translate-y-0 md:-translate-x-full":!n.isOpen}])},[i("button",{class:"md:hidden fixed bottom-6 right-6 w-14 h-14 rounded-full bg-theme-primary text-white shadow-lg hover:opacity-90 transition-all flex items-center justify-center z-[60]","aria-label":"Close filters",onClick:f[1]||(f[1]=m=>s("close"))},[...f[10]||(f[10]=[i("div",{class:"i-mdi-close text-2xl"},null,-1)])]),i("div",Yn,[f[12]||(f[12]=i("h2",{class:"text-lg font-semibold flex items-center gap-2 text-theme-text"},[i("div",{class:"i-mdi-filter-variant text-xl"}),ye(" Filters ")],-1)),i("div",Qn,[o(K)||o(_).searchQuery?(h(),x("button",{key:0,class:"text-sm font-medium text-theme-primary hover:opacity-80 px-3 py-1 rounded-full hover:bg-theme-primary/10 transition-colors",onClick:f[2]||(f[2]=(...m)=>o(ge)&&o(ge)(...m))}," Clear All ")):L("",!0),i("button",{class:"p-2 hover:bg-theme-selection rounded-full transition-colors text-theme-text","aria-label":"Close filters",onClick:f[3]||(f[3]=m=>s("close"))},[...f[11]||(f[11]=[i("div",{class:"i-mdi-close text-xl"},null,-1)])])])]),f[21]||(f[21]=i("hr",{class:"mx-4 my-0 border-theme-border/50"},null,-1)),i("div",Un,[i("div",Wn,[D(z,{title:"Sort By",icon:"i-mdi-sort","default-expanded":!0},{default:M(()=>[D(W,{"current-sort":o(V),"show-relevance":!!o(_).searchQuery,onSelect:A},null,8,["current-sort","show-relevance"])]),_:1}),i("div",qn,[D(z,{title:"Rating",icon:"i-mdi-star"},{default:M(()=>[i("div",Zn,[i("div",Xn,[f[13]||(f[13]=i("span",{class:"text-theme-textmuted"},"Min:",-1)),i("span",Jn,j(o(_).minRating.toFixed(1))+"+",1)]),i("input",{value:o(_).minRating,type:"range",min:"0",max:"10",step:"0.5",class:"w-full h-2 bg-theme-selection rounded-lg appearance-none cursor-pointer accent-theme-primary",onInput:f[4]||(f[4]=m=>o(Q)(Number(m.target.value)))},null,40,er),f[14]||(f[14]=i("div",{class:"flex justify-between text-xs text-theme-textmuted"},[i("span",null,"0"),i("span",null,"5"),i("span",null,"10")],-1))])]),_:1}),D(z,{title:"Year",icon:"i-mdi-calendar"},{default:M(()=>[i("div",tr,[i("div",nr,[f[15]||(f[15]=i("span",{class:"text-theme-textmuted"},"From:",-1)),i("span",rr,j(o(_).minYear||"1910")+"+",1)]),i("input",{value:o(_).minYear,type:"range",min:"1910",max:"2025",step:"1",class:"w-full h-2 bg-theme-selection rounded-lg appearance-none cursor-pointer accent-theme-primary",onInput:f[5]||(f[5]=m=>o(I)(Number(m.target.value)))},null,40,ar),f[16]||(f[16]=i("div",{class:"flex justify-between text-xs text-theme-textmuted"},[i("span",null,"1910"),i("span",null,"1970"),i("span",null,"2025")],-1))])]),_:1}),D(z,{title:"Votes",icon:"i-mdi-account-group"},{default:M(()=>[i("div",ir,[i("div",or,[f[17]||(f[17]=i("span",{class:"text-theme-textmuted"},"Min:",-1)),i("span",sr,j(o(_).minVotes.toLocaleString())+"+",1)]),i("input",{value:o(_).minVotes,type:"number",min:"0",step:"100",placeholder:"0",class:"w-full px-3 py-2 bg-theme-surface border border-theme-border/50 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-theme-primary [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none text-theme-text placeholder-theme-text-muted",onInput:f[6]||(f[6]=m=>o(P)(Number(m.target.value)))},null,40,lr)])]),_:1})]),D(z,{title:"Genres",icon:"i-mdi-movie-filter"},{default:M(()=>[o(U)?(h(),x("div",cr," Loading genres... ")):(h(),ke(oe,{key:1,ref_key:"genresCollapsible",ref:c,"max-lines":2},{default:M(()=>[(h(!0),x(J,null,ue(o(fe),m=>(h(),x("button",{key:m.name,class:w(["px-3 py-1.5 text-sm rounded-full transition-colors inline-flex items-center gap-1.5",{"bg-theme-primary text-white":o(_).genres.includes(m.name),"bg-theme-selection text-theme-text hover:bg-theme-border/50":!o(_).genres.includes(m.name)}]),title:`${("formatCountExact"in k?k.formatCountExact:o($e))(m.count)} movies`,onClick:X=>o(H)(m.name)},[i("span",null,j(m.name),1),i("span",{class:w(["text-xs font-normal",{"text-white/80":o(_).genres.includes(m.name),"text-theme-textmuted":!o(_).genres.includes(m.name)}])},j(("formatCount"in k?k.formatCount:o(Ae))(m.count)),3)],10,ur))),128))]),_:1},512))]),_:1}),D(z,{title:"Countries",icon:"i-mdi-earth"},{default:M(()=>[o(U)?(h(),x("div",dr," Loading countries... ")):(h(),ke(oe,{key:1,ref_key:"countriesCollapsible",ref:u,"max-lines":2},{default:M(()=>[(h(!0),x(J,null,ue(o(xe),m=>(h(),x("button",{key:m.name,class:w(["px-3 py-1.5 text-sm rounded-full transition-colors inline-flex items-center gap-1.5",{"bg-theme-primary text-white":o(_).countries.includes(m.name),"bg-theme-selection text-theme-text hover:bg-theme-border/50":!o(_).countries.includes(m.name)}]),title:`${("formatCountExact"in k?k.formatCountExact:o($e))(m.count)} movies`,onClick:X=>o(ae)(m.name)},[i("span",null,j(m.name),1),i("span",{class:w(["text-xs font-normal",{"text-white/80":o(_).countries.includes(m.name),"text-theme-textmuted":!o(_).countries.includes(m.name)}])},j(("formatCount"in k?k.formatCount:o(Ae))(m.count)),3)],10,fr))),128))]),_:1},512))]),_:1}),i("div",mr,[D(z,{title:"Source",icon:"i-mdi-source-branch"},{default:M(()=>[i("div",vr,[D(se,{checked:o(_).sources.includes("archive.org"),label:"Archive.org",onChange:f[7]||(f[7]=m=>o(T)("archive.org"))},null,8,["checked"]),i("div",br,[f[18]||(f[18]=i("p",{class:"text-xs text-theme-textmuted font-medium uppercase tracking-wide mb-2"}," YouTube Channels ",-1)),o(U)?(h(),x("div",hr," Loading channels... ")):(h(!0),x(J,{key:1},ue(o(ie),m=>(h(),ke(se,{key:m.id,checked:o(_).sources.includes(m.name),onChange:X=>o(T)(m.name)},{default:M(()=>[i("span",pr,[i("span",gr,j(m.name),1),i("span",{class:"text-xs text-theme-textmuted",title:`${("formatCountExact"in k?k.formatCountExact:o($e))(m.count)} movies`},j(("formatCount"in k?k.formatCount:o(Ae))(m.count)),9,xr)])]),_:2},1032,["checked","onChange"]))),128))])])]),_:1})]),D(z,{id:"theme-selection-section",title:"Theme",icon:"i-mdi-palette","default-expanded":!0,highlight:o(E)},{default:M(()=>[i("div",yr,[i("div",null,[f[19]||(f[19]=i("h4",{class:"text-[10px] font-bold uppercase tracking-widest text-theme-textmuted mb-3 flex items-center gap-2"},[i("div",{class:"i-mdi-weather-night text-xs"}),ye(" Dark Themes ")],-1)),i("div",wr,[(h(!0),x(J,null,ue(o(S),m=>(h(),x("button",{key:m.metadata.id,class:w(["flex flex-col gap-2 p-2 rounded-xl border-2 transition-all text-left",{"border-theme-primary bg-theme-primary/10":o(a)===m.metadata.id,"border-theme-border/50 hover:border-theme-border bg-theme-surface/50":o(a)!==m.metadata.id}]),onClick:X=>o(d)(m.metadata.id),onMouseenter:X=>o(v)(m.metadata.id),onMouseleave:f[8]||(f[8]=X=>o(v)(null))},[i("div",Sr,[i("span",_r,j(m.metadata.name),1),o(a)===m.metadata.id?(h(),x("div",Tr)):L("",!0)]),i("div",Cr,[i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.background})},null,4),i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.primary})},null,4),i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.accent})},null,4)])],42,kr))),128))])]),i("div",null,[f[20]||(f[20]=i("h4",{class:"text-[10px] font-bold uppercase tracking-widest text-theme-textmuted mb-3 flex items-center gap-2"},[i("div",{class:"i-mdi-weather-sunny text-xs"}),ye(" Light Themes ")],-1)),i("div",Fr,[(h(!0),x(J,null,ue(o(g),m=>(h(),x("button",{key:m.metadata.id,class:w(["flex flex-col gap-2 p-2 rounded-xl border-2 transition-all text-left",{"border-theme-primary bg-theme-primary/10":o(a)===m.metadata.id,"border-theme-border/50 hover:border-theme-border bg-theme-surface/50":o(a)!==m.metadata.id}]),onClick:X=>o(d)(m.metadata.id),onMouseenter:X=>o(v)(m.metadata.id),onMouseleave:f[9]||(f[9]=X=>o(v)(null))},[i("div",Nr,[i("span",Ar,j(m.metadata.name),1),o(a)===m.metadata.id?(h(),x("div",$r)):L("",!0)]),i("div",Or,[i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.background})},null,4),i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.primary})},null,4),i("div",{class:"w-3 h-3 rounded-full border border-black/10",style:le({backgroundColor:m.colors.accent})},null,4)])],42,Er))),128))])])])]),_:1},8,["highlight"]),o(N)?(h(),x("div",Ir,[ye(j(o(N))+" ",1),i("button",{class:"underline ml-2 font-medium",onClick:b},"Retry")])):L("",!0)])])],2)])}}}),Dr=Object.assign(Rr,{__name:"FilterMenu"}),jr={class:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none"},Br={class:"flex-1"},Pr=["onClick"],Lr=Y({__name:"AppToastContainer",setup(n){const{toasts:e,removeToast:t}=he(),r=l=>{const a={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600",warning:"bg-yellow-600"};return a[l]||a.info},s=l=>{const a={success:"i-mdi-check-circle text-lg",error:"i-mdi-alert-circle text-lg",info:"i-mdi-information text-lg",warning:"i-mdi-alert text-lg"};return a[l]||a.info};return(l,a)=>(h(),x("div",jr,[D(gt,{name:"toast",tag:"div",class:"flex flex-col gap-2"},{default:M(()=>[(h(!0),x(J,null,ue(o(e),d=>(h(),x("div",{key:d.id,class:w(["pointer-events-auto p-3 rounded-lg shadow-lg text-white text-sm flex items-center gap-2 min-w-[300px] max-w-md",r(d.type)])},[i("div",{class:w(s(d.type))},null,2),i("span",Br,j(d.message),1),i("button",{class:"p-1 hover:bg-white/20 rounded transition-colors",onClick:v=>o(t)(d.id)},[...a[0]||(a[0]=[i("div",{class:"i-mdi-close text-lg"},null,-1)])],8,Pr)],2))),128))]),_:1})]))}}),Mr=Object.assign(xt(Lr,[["__scopeId","data-v-c1ef2144"]]),{__name:"AppToastContainer"}),Kr={class:"min-h-screen bg-theme-background text-theme-text transition-colors duration-300"},Qr=Y({__name:"default",setup(n){const e=B(!1),t=B(),r=()=>{e.value=!0,te(()=>{setTimeout(()=>{t.value?.scrollToThemeSection()},300)})},s=yt(),{Escape:l}=s;l&&wt(l,()=>{e.value&&(e.value=!1)}),Ke("k",d=>{if(d.ctrlKey||d.metaKey){const v=window.document.activeElement;v?.tagName==="INPUT"||v?.tagName==="TEXTAREA"||(d.preventDefault(),e.value=!e.value)}});const{setSearchOpen:a}=he();return Ke(["s","S","/"],d=>{const v=window.document.activeElement;v?.tagName==="INPUT"||v?.tagName==="TEXTAREA"||((d.key==="s"||d.key==="S")&&!d.ctrlKey&&!d.metaKey&&!d.altKey||d.key==="/")&&(d.preventDefault(),a(!0))}),(d,v)=>{const p=Ct,S=At,g=Gt,E=Dr,O=Mr;return h(),x("div",Kr,[D(p),D(S),D(g,{onOpenFilters:v[0]||(v[0]=_=>e.value=!0),onOpenThemeSelection:r}),D(E,{ref_key:"filterMenuRef",ref:t,"is-open":o(e),onClose:v[1]||(v[1]=_=>e.value=!1)},null,8,["is-open"]),Ne(d.$slots,"default"),D(O)])}}});export{Qr as default};
