import{_ as W}from"./BpRIGYpL.js";import{g as A}from"./CC4Ru-0d.js";import{e as z,u as E,h,q as F,p as y,c as n,a as t,b as I,d as m,w as R,g as l,t as a,F as p,r as x,o as r,f as T,l as u,n as w}from"./BV3N_Ze9.js";import"./xDTDTJc5.js";const V={class:"container mx-auto px-4 py-8 max-w-6xl"},N={class:"flex items-center justify-between mb-8"},O={key:0,class:"flex items-center justify-center py-12"},D={key:1,class:"bg-primary-1 border border-error rounded-lg p-6"},L={class:"flex items-center gap-2 text-error"},$={key:2,class:"space-y-8"},q={class:"bg-bg-gradient rounded-lg p-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},Z={class:"flex items-start justify-between mb-2"},G={class:"text-lg font-semibold text-primary-4"},J=["href"],K={class:"text-sm text-primary-3 mb-4"},Q={class:"flex gap-4 text-sm"},X={key:0,class:"flex items-center gap-1"},tt={class:"text-primary-3"},st={key:1,class:"flex items-center gap-1"},et={class:"text-primary-3"},it={class:"mt-6"},lt={class:"space-y-3"},ot={class:"w-32 text-sm text-primary-3 truncate"},at={class:"flex-1 relative h-8 bg-primary-1 rounded-lg overflow-hidden"},nt={class:"text-xs font-semibold text-primary-1"},rt={class:"bg-bg-gradient rounded-lg p-6"},dt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},ct={class:"bg-primary-1 rounded-lg p-4 text-center"},mt={class:"text-3xl font-bold text-accent mb-1"},pt={class:"bg-primary-1 rounded-lg p-4"},xt={class:"flex items-center justify-between"},ut={class:"text-center flex-1"},gt={class:"text-2xl font-bold text-accent mb-1"},yt={class:"text-center flex-1"},vt={class:"text-2xl font-bold text-accent mb-1"},bt={class:"bg-primary-1 rounded-lg p-4"},ft={class:"flex items-center justify-between"},_t={class:"text-center flex-1"},ht={class:"text-2xl font-bold text-accent mb-1"},wt={class:"text-center flex-1"},Ct={class:"text-2xl font-bold text-accent mb-1"},Tt={class:"space-y-2"},Pt={class:"w-40 text-sm text-primary-3 truncate"},St={class:"flex-1 relative h-7 bg-primary-1 rounded-lg overflow-hidden"},kt={class:"text-xs font-semibold text-primary-1"},jt={class:"w-20 text-right text-sm text-primary-3"},Bt={class:"bg-bg-gradient rounded-lg p-6"},Mt={class:"mb-8"},Yt={class:"space-y-2"},Ut={class:"w-32 text-sm text-primary-3 truncate"},Wt={class:"flex-1 relative h-7 bg-primary-1 rounded-lg overflow-hidden"},At={class:"text-xs font-semibold text-primary-1"},zt={class:"space-y-6"},Et={class:"font-medium text-primary-4 mb-3 flex items-center justify-between"},Ft={class:"flex items-center gap-3"},It={class:"text-sm text-primary-3"},Rt={class:"space-y-2"},Vt={class:"w-24 text-sm text-primary-3 truncate"},Nt={class:"flex-1 relative h-6 rounded-lg overflow-hidden"},Ot={class:"text-xs font-semibold text-primary-1"},Dt={class:"bg-bg-gradient rounded-lg p-6"},Lt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"},$t={class:"bg-primary-1 rounded-lg p-4 text-center"},qt={class:"text-3xl font-bold text-accent mb-1"},Ht={class:"bg-primary-1 rounded-lg p-4 text-center"},Zt={class:"text-3xl font-bold text-accent mb-1"},Gt={class:"space-y-2"},Jt={class:"w-32 text-sm text-primary-3 truncate flex items-center gap-2"},Kt=["title"],Qt={class:"flex-1 relative h-7 bg-primary-1 rounded-lg overflow-hidden"},Xt={class:"text-xs font-semibold text-primary-1"},ts={class:"bg-bg-gradient rounded-lg p-6"},ss={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"},es={class:"bg-primary-1 rounded-lg p-4 text-center"},is={class:"text-3xl font-bold text-accent mb-1"},ls={class:"bg-primary-1 rounded-lg p-4 text-center"},os={class:"text-3xl font-bold text-accent mb-1"},as={class:"space-y-2"},ns={class:"w-20 text-sm text-primary-3"},rs={class:"flex-1 relative h-7 bg-primary-1 rounded-lg overflow-hidden"},ds={class:"text-xs font-semibold text-primary-1"},cs={class:"bg-bg-gradient rounded-lg p-6"},ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"},ps={class:"bg-primary-1 rounded-lg p-4 text-center"},xs={class:"text-3xl font-bold text-accent mb-1"},us={class:"bg-primary-1 rounded-lg p-4 text-center"},gs={class:"text-3xl font-bold text-accent mb-1"},ys={class:"space-y-2"},vs={class:"w-20 text-sm text-primary-3"},bs={class:"flex-1 relative h-7 bg-primary-1 rounded-lg overflow-hidden"},fs={class:"text-xs font-semibold text-primary-1"},Ps=z({__name:"stats",setup(_s){E({title:"Statistics - Music Playlist View",meta:[{name:"description",content:"View statistics about your music data"}]});const v=h(!0),b=h(""),o=h({sources:{},playlist:{items:0,itemsWithTags:0,itemsWithExternalIds:0,externalIdsByPlatform:{},topTags:[],topTagsByUser:{},itemsWithCountry:0,topCountries:[],itemsWithReleaseDate:0,releaseYears:[],postsPerYear:[]}});F(async()=>{try{v.value=!0;const i=await $fetch("/stats/sources.json");o.value=i}catch(i){console.error("Error loading stats:",i),b.value="Failed to load statistics data"}finally{v.value=!1}});const P=y(()=>Object.entries(o.value.sources).filter(([i,s])=>s.items&&s.items>0).map(([i,s])=>({key:i,...s})).sort((i,s)=>(s.items||0)-(i.items||0))),S=y(()=>Math.max(...Object.values(o.value.sources).map(i=>i.items||0).filter(i=>i>0),1)),k=y(()=>{const i=o.value.playlist.items,s=o.value.playlist.itemsWithTags;return i>0?(s/i*100).toFixed(1):"0"}),j=y(()=>{const i=o.value.playlist.items,s=o.value.playlist.itemsWithExternalIds;return i>0?(s/i*100).toFixed(1):"0"}),B=y(()=>Object.entries(o.value.playlist.externalIdsByPlatform).map(([i,s])=>({key:i,count:s})).sort((i,s)=>s.count-i.count)),M=y(()=>Object.entries(o.value.playlist.topTagsByUser).sort(([,i],[,s])=>s.totalSongs-i.totalSongs).map(([i])=>i)),C=y(()=>Math.max(...o.value.playlist.topTags.map(i=>i.count),1)),f=(i,s)=>{const c=s>0?i/s:0;return c>.7?"bg-accent":c>.4?"bg-accent-1":"bg-accent-2"},g=(i,s)=>{const c=s>0?i/s*100:0;return`${Math.max(c,2)}%`},_=(i,s)=>s>0?(i/s*100).toFixed(1):"0",Y=i=>{const s=i.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim();return{Lastfm:"Last.fm",Youtube:"YouTube","Youtube Music":"YouTube Music",Itunes:"iTunes","Amazon Music":"Amazon Music","Amazon Store":"Amazon Store","Apple Music":"Apple Music","Musicbrainz Track":"MusicBrainz Track","Musicbrainz Artist":"MusicBrainz Artist"}[s]||s},U=i=>{if(!i||i.length!==2)return"";const s=i.toUpperCase().split("").map(c=>127397+c.charCodeAt(0));return String.fromCodePoint(...s)};return(i,s)=>{const c=W;return r(),n("div",V,[t("div",N,[s[1]||(s[1]=t("h1",{class:"text-3xl font-bold flex items-center gap-3"},[t("div",{class:"i-mdi-chart-bar"}),m(" Statistics ")],-1)),I(c,{icon:"i-mdi-arrow-left",variant:"primary",to:"/"},{default:R(()=>[...s[0]||(s[0]=[m(" Back to Playlists ",-1)])]),_:1})]),l(v)?(r(),n("div",O,[...s[2]||(s[2]=[t("div",{class:"flex items-center gap-3 text-primary-3"},[t("div",{class:"i-mdi-loading animate-spin text-2xl"}),t("span",null,"Loading statistics...")],-1)])])):l(b)?(r(),n("div",D,[t("div",L,[s[3]||(s[3]=t("div",{class:"i-mdi-alert-circle"},null,-1)),s[4]||(s[4]=t("strong",null,"Error:",-1)),m(" "+a(l(b)),1)])])):(r(),n("div",$,[t("section",q,[s[9]||(s[9]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-database"}),m(" Data Sources ")],-1)),t("div",H,[(r(!0),n(p,null,x(l(o).sources,(e,d)=>(r(),n("div",{key:d,class:"bg-primary-1 rounded-lg p-4 hover:bg-primary-2 transition-colors"},[t("div",Z,[t("h3",G,a(e.name),1),t("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",class:"text-accent hover:text-accent-1 transition-colors"},[...s[5]||(s[5]=[t("div",{class:"i-mdi-open-in-new text-xl"},null,-1)])],8,J)]),t("p",K,a(e.summary),1),t("div",Q,[e.items?(r(),n("div",X,[s[6]||(s[6]=t("div",{class:"i-mdi-file-music text-accent"},null,-1)),t("span",tt,a(e.items)+" items",1)])):T("",!0),e.tags?(r(),n("div",st,[s[7]||(s[7]=t("div",{class:"i-mdi-tag text-accent"},null,-1)),t("span",et,a(e.tags)+" tags",1)])):T("",!0)])]))),128))]),t("div",it,[s[8]||(s[8]=t("h3",{class:"text-lg font-semibold mb-4"},"Items per Source",-1)),t("div",lt,[(r(!0),n(p,null,x(l(P),(e,d)=>(r(),n("div",{key:d,class:"flex items-center gap-3"},[t("div",ot,a(e.name),1),t("div",at,[t("div",{class:"absolute inset-y-0 left-0 bg-accent transition-all duration-500 flex items-center justify-end pr-2",style:u({width:g(e.items||0,l(S))})},[t("span",nt,a(e.items),1)],4)])]))),128))])])]),t("section",rt,[s[19]||(s[19]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-playlist-music"}),m(" Playlist Overview ")],-1)),t("div",dt,[t("div",ct,[t("div",mt,a(l(o).playlist.items),1),s[10]||(s[10]=t("div",{class:"text-sm text-primary-3"},"Total Songs",-1))]),t("div",pt,[s[13]||(s[13]=t("div",{class:"text-sm font-medium text-primary-3 mb-3 text-center"}," Tags Coverage ",-1)),t("div",xt,[t("div",ut,[t("div",gt,a(l(o).playlist.itemsWithTags),1),s[11]||(s[11]=t("div",{class:"text-xs text-primary-3"},"Songs",-1))]),t("div",yt,[t("div",vt,a(l(k))+"% ",1),s[12]||(s[12]=t("div",{class:"text-xs text-primary-3"},"Coverage",-1))])])]),t("div",bt,[s[16]||(s[16]=t("div",{class:"text-sm font-medium text-primary-3 mb-3 text-center"}," External IDs Coverage ",-1)),t("div",ft,[t("div",_t,[t("div",ht,a(l(o).playlist.itemsWithExternalIds),1),s[14]||(s[14]=t("div",{class:"text-xs text-primary-3"},"Songs",-1))]),t("div",wt,[t("div",Ct,a(l(j))+"% ",1),s[15]||(s[15]=t("div",{class:"text-xs text-primary-3"},"Coverage",-1))])])])]),t("div",null,[s[17]||(s[17]=t("h3",{class:"text-lg font-semibold mb-4"},"Platform Coverage",-1)),s[18]||(s[18]=t("p",{class:"text-sm text-primary-3 mb-4"}," Percentage of playlist songs available on each platform ",-1)),t("div",Tt,[(r(!0),n(p,null,x(l(B),e=>(r(),n("div",{key:e.key,class:"flex items-center gap-3"},[t("div",Pt,a(Y(e.key)),1),t("div",St,[t("div",{class:w(["absolute inset-y-0 left-0 transition-all duration-500 flex items-center justify-end pr-2",f(e.count,l(o).playlist.items)]),style:u({width:g(e.count,l(o).playlist.items)})},[t("span",kt,a(e.count),1)],6)]),t("div",jt,a(_(e.count,l(o).playlist.items))+"% ",1)]))),128))])])]),t("section",Bt,[s[23]||(s[23]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-tag-multiple"}),m(" Tag Statistics ")],-1)),t("div",Mt,[s[20]||(s[20]=t("h3",{class:"text-lg font-semibold mb-4"},"Top 50 Tags",-1)),t("div",Yt,[(r(!0),n(p,null,x(l(o).playlist.topTags,e=>(r(),n("div",{key:e.tag,class:"flex items-center gap-3"},[t("div",Ut,a(e.tag),1),t("div",Wt,[t("div",{class:w(["absolute inset-y-0 left-0 transition-all duration-500 flex items-center justify-end pr-2",f(e.count,l(C))]),style:u({width:g(e.count,l(C))})},[t("span",At,a(e.count),1)],6)])]))),128))])]),t("div",null,[s[22]||(s[22]=t("h3",{class:"text-lg font-semibold mb-4"},"Top Tags by User",-1)),t("div",zt,[(r(!0),n(p,null,x(l(M),e=>(r(),n("div",{key:e,class:"bg-primary-1 rounded-lg p-4"},[t("div",Et,[t("div",Ft,[t("div",{class:"w-10 h-10 rounded-full flex items-center justify-center",style:u({backgroundColor:("getUserColor"in i?i.getUserColor:l(A))(e)})},[...s[21]||(s[21]=[t("div",{class:"i-mdi-account text-2xl text-primary-1"},null,-1)])],4),t("span",It,a(l(o).playlist.topTagsByUser[e].totalSongs)+" songs ",1)])]),t("div",Rt,[(r(!0),n(p,null,x(l(o).playlist.topTagsByUser[e].tags,d=>(r(),n("div",{key:d.tag,class:"flex items-center gap-3"},[t("div",Vt,a(d.tag),1),t("div",Nt,[t("div",{class:w(["absolute inset-y-0 left-0 transition-all duration-500 flex items-center justify-end pr-2",f(d.count,l(o).playlist.topTagsByUser[e].tags[0].count)]),style:u({width:g(d.count,l(o).playlist.topTagsByUser[e].tags[0].count)})},[t("span",Ot,a(d.count),1)],6)])]))),128))])]))),128))])])]),t("section",Dt,[s[27]||(s[27]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-earth"}),m(" Country Statistics ")],-1)),t("div",Lt,[t("div",$t,[t("div",qt,a(l(o).playlist.itemsWithCountry),1),s[24]||(s[24]=t("div",{class:"text-sm text-primary-3"},"Songs with Country Data",-1))]),t("div",Ht,[t("div",Zt,a(_(l(o).playlist.itemsWithCountry,l(o).playlist.items))+"% ",1),s[25]||(s[25]=t("div",{class:"text-sm text-primary-3"},"Coverage",-1))])]),t("div",null,[s[26]||(s[26]=t("h3",{class:"text-lg font-semibold mb-4"},"Songs by Country",-1)),t("div",Gt,[(r(!0),n(p,null,x(l(o).playlist.topCountries,e=>(r(),n("div",{key:e.country,class:"flex items-center gap-3"},[t("div",Jt,[t("span",{title:e.country},a(U(e.country)),9,Kt),t("span",null,a(e.country),1)]),t("div",Qt,[t("div",{class:"absolute inset-y-0 left-0 bg-accent transition-all duration-500 flex items-center justify-end pr-2",style:u({width:g(e.count,l(o).playlist.topCountries[0]?.count||1)})},[t("span",Xt,a(e.count),1)],4)])]))),128))])])]),t("section",ts,[s[31]||(s[31]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-calendar"}),m(" Release Date Statistics ")],-1)),t("div",ss,[t("div",es,[t("div",is,a(l(o).playlist.itemsWithReleaseDate),1),s[28]||(s[28]=t("div",{class:"text-sm text-primary-3"},"Songs with Release Date",-1))]),t("div",ls,[t("div",os,a(_(l(o).playlist.itemsWithReleaseDate,l(o).playlist.items))+"% ",1),s[29]||(s[29]=t("div",{class:"text-sm text-primary-3"},"Coverage",-1))])]),t("div",null,[s[30]||(s[30]=t("h3",{class:"text-lg font-semibold mb-4"},"Songs by Release Year",-1)),t("div",as,[(r(!0),n(p,null,x(l(o).playlist.releaseYears,e=>(r(),n("div",{key:e.year,class:"flex items-center gap-3"},[t("div",ns,a(e.year),1),t("div",rs,[t("div",{class:"absolute inset-y-0 left-0 bg-accent transition-all duration-500 flex items-center justify-end pr-2",style:u({width:g(e.count,Math.max(...l(o).playlist.releaseYears.map(d=>d.count)))})},[t("span",ds,a(e.count),1)],4)])]))),128))])])]),t("section",cs,[s[35]||(s[35]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-calendar-clock"}),m(" Posts Per Year ")],-1)),t("div",ms,[t("div",ps,[t("div",xs,a(l(o).playlist.postsPerYear.reduce((e,d)=>e+d.count,0)),1),s[32]||(s[32]=t("div",{class:"text-sm text-primary-3"},"Total Posts",-1))]),t("div",us,[t("div",gs,a(l(o).playlist.postsPerYear.length),1),s[33]||(s[33]=t("div",{class:"text-sm text-primary-3"},"Years Active",-1))])]),t("div",null,[s[34]||(s[34]=t("h3",{class:"text-lg font-semibold mb-4"},"Posts by Year",-1)),t("div",ys,[(r(!0),n(p,null,x(l(o).playlist.postsPerYear,e=>(r(),n("div",{key:e.year,class:"flex items-center gap-3"},[t("div",vs,a(e.year),1),t("div",bs,[t("div",{class:"absolute inset-y-0 left-0 bg-accent transition-all duration-500 flex items-center justify-end pr-2",style:u({width:g(e.count,Math.max(...l(o).playlist.postsPerYear.map(d=>d.count)))})},[t("span",fs,a(e.count),1)],4)])]))),128))])])])]))])}}});export{Ps as default};
