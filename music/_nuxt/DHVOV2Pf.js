import{_ as z}from"./BtxDSuqe.js";import{g as A}from"./CC4Ru-0d.js";import{e as E,u as W,h as _,q as F,p as m,c as n,a as t,b as I,d as p,w as V,g as a,t as o,F as x,r as u,o as r,f as T,l as g,n as h}from"./BwRUk7C8.js";import"./DFvQbETl.js";const N={class:"container mx-auto px-4 py-8 max-w-6xl"},O={class:"flex items-center justify-between mb-8"},D={key:0,class:"flex items-center justify-center py-12"},L={key:1,class:"bg-primary-1 border border-error rounded-lg p-6"},Y={class:"flex items-center gap-2 text-error"},$={key:2,class:"space-y-8"},q={class:"bg-bg-gradient rounded-lg p-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},Z={class:"flex items-start justify-between mb-2"},G={class:"text-lg font-semibold text-primary-4"},J=["href"],K={class:"text-sm text-primary-3 mb-4"},Q={class:"flex gap-4 text-sm"},R={key:0,class:"flex items-center gap-1"},X={class:"text-primary-3"},tt={key:1,class:"flex items-center gap-1"},st={class:"text-primary-3"},et={class:"mt-6"},it={class:"space-y-3"},at={class:"w-32 text-sm text-primary-3 truncate"},lt={class:"flex-1 relative h-8 bg-primary-1 rounded-lg overflow-hidden"},ot={class:"text-xs font-semibold text-primary-1"},nt={class:"bg-bg-gradient rounded-lg p-6"},rt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},dt={class:"bg-primary-1 rounded-lg p-4 text-center"},ct={class:"text-3xl font-bold text-accent mb-1"},mt={class:"bg-primary-1 rounded-lg p-4"},pt={class:"flex items-center justify-between"},xt={class:"text-center flex-1"},ut={class:"text-2xl font-bold text-accent mb-1"},gt={class:"text-center flex-1"},yt={class:"text-2xl font-bold text-accent mb-1"},vt={class:"bg-primary-1 rounded-lg p-4"},ft={class:"flex items-center justify-between"},bt={class:"text-center flex-1"},_t={class:"text-2xl font-bold text-accent mb-1"},ht={class:"text-center flex-1"},wt={class:"text-2xl font-bold text-accent mb-1"},Tt={class:"space-y-2"},kt={class:"w-40 text-sm text-primary-3 truncate"},Ct={class:"flex-1 relative h-7 bg-primary-1 rounded-lg overflow-hidden"},Bt={class:"text-xs font-semibold text-primary-1"},St={class:"w-20 text-right text-sm text-primary-3"},jt={class:"bg-bg-gradient rounded-lg p-6"},Mt={class:"mb-8"},Pt={class:"space-y-2"},Ut={class:"w-32 text-sm text-primary-3 truncate"},zt={class:"flex-1 relative h-7 bg-primary-1 rounded-lg overflow-hidden"},At={class:"text-xs font-semibold text-primary-1"},Et={class:"space-y-6"},Wt={class:"font-medium text-primary-4 mb-3 flex items-center justify-between"},Ft={class:"flex items-center gap-3"},It={class:"text-sm text-primary-3"},Vt={class:"space-y-2"},Nt={class:"w-24 text-sm text-primary-3 truncate"},Ot={class:"flex-1 relative h-6 rounded-lg overflow-hidden"},Dt={class:"text-xs font-semibold text-primary-1"},Zt=E({__name:"stats",setup(Lt){W({title:"Statistics - Music Playlist View",meta:[{name:"description",content:"View statistics about your music data"}]});const v=_(!0),f=_(""),l=_({sources:{},playlist:{items:0,itemsWithTags:0,itemsWithExternalIds:0,externalIdsByPlatform:{},topTags:[],topTagsByUser:{}}});F(async()=>{try{v.value=!0;const e=await $fetch("/stats/sources.json");l.value=e}catch(e){console.error("Error loading stats:",e),f.value="Failed to load statistics data"}finally{v.value=!1}});const k=m(()=>Object.entries(l.value.sources).filter(([e,s])=>s.items&&s.items>0).map(([e,s])=>({key:e,...s})).sort((e,s)=>(s.items||0)-(e.items||0))),C=m(()=>Math.max(...Object.values(l.value.sources).map(e=>e.items||0).filter(e=>e>0),1)),B=m(()=>{const e=l.value.playlist.items,s=l.value.playlist.itemsWithTags;return e>0?(s/e*100).toFixed(1):"0"}),S=m(()=>{const e=l.value.playlist.items,s=l.value.playlist.itemsWithExternalIds;return e>0?(s/e*100).toFixed(1):"0"}),j=m(()=>Object.entries(l.value.playlist.externalIdsByPlatform).map(([e,s])=>({key:e,count:s})).sort((e,s)=>s.count-e.count)),M=m(()=>Object.entries(l.value.playlist.topTagsByUser).sort(([,e],[,s])=>s.totalSongs-e.totalSongs).map(([e])=>e)),w=m(()=>Math.max(...l.value.playlist.topTags.map(e=>e.count),1)),b=(e,s)=>{const c=s>0?e/s:0;return c>.7?"bg-accent":c>.4?"bg-accent-1":"bg-accent-2"},y=(e,s)=>{const c=s>0?e/s*100:0;return`${Math.max(c,2)}%`},P=(e,s)=>s>0?(e/s*100).toFixed(1):"0",U=e=>{const s=e.replace(/([A-Z])/g," $1").replace(/^./,i=>i.toUpperCase()).trim();return{Lastfm:"Last.fm",Youtube:"YouTube","Youtube Music":"YouTube Music",Itunes:"iTunes","Amazon Music":"Amazon Music","Amazon Store":"Amazon Store","Apple Music":"Apple Music","Musicbrainz Track":"MusicBrainz Track","Musicbrainz Artist":"MusicBrainz Artist"}[s]||s};return(e,s)=>{const c=z;return r(),n("div",N,[t("div",O,[s[1]||(s[1]=t("h1",{class:"text-3xl font-bold flex items-center gap-3"},[t("div",{class:"i-mdi-chart-bar"}),p(" Statistics ")],-1)),I(c,{icon:"i-mdi-arrow-left",variant:"primary",to:"/"},{default:V(()=>[...s[0]||(s[0]=[p(" Back to Playlists ",-1)])]),_:1})]),a(v)?(r(),n("div",D,[...s[2]||(s[2]=[t("div",{class:"flex items-center gap-3 text-primary-3"},[t("div",{class:"i-mdi-loading animate-spin text-2xl"}),t("span",null,"Loading statistics...")],-1)])])):a(f)?(r(),n("div",L,[t("div",Y,[s[3]||(s[3]=t("div",{class:"i-mdi-alert-circle"},null,-1)),s[4]||(s[4]=t("strong",null,"Error:",-1)),p(" "+o(a(f)),1)])])):(r(),n("div",$,[t("section",q,[s[9]||(s[9]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-database"}),p(" Data Sources ")],-1)),t("div",H,[(r(!0),n(x,null,u(a(l).sources,(i,d)=>(r(),n("div",{key:d,class:"bg-primary-1 rounded-lg p-4 hover:bg-primary-2 transition-colors"},[t("div",Z,[t("h3",G,o(i.name),1),t("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",class:"text-accent hover:text-accent-1 transition-colors"},[...s[5]||(s[5]=[t("div",{class:"i-mdi-open-in-new text-xl"},null,-1)])],8,J)]),t("p",K,o(i.summary),1),t("div",Q,[i.items?(r(),n("div",R,[s[6]||(s[6]=t("div",{class:"i-mdi-file-music text-accent"},null,-1)),t("span",X,o(i.items)+" items",1)])):T("",!0),i.tags?(r(),n("div",tt,[s[7]||(s[7]=t("div",{class:"i-mdi-tag text-accent"},null,-1)),t("span",st,o(i.tags)+" tags",1)])):T("",!0)])]))),128))]),t("div",et,[s[8]||(s[8]=t("h3",{class:"text-lg font-semibold mb-4"},"Items per Source",-1)),t("div",it,[(r(!0),n(x,null,u(a(k),(i,d)=>(r(),n("div",{key:d,class:"flex items-center gap-3"},[t("div",at,o(i.name),1),t("div",lt,[t("div",{class:"absolute inset-y-0 left-0 bg-accent transition-all duration-500 flex items-center justify-end pr-2",style:g({width:y(i.items||0,a(C))})},[t("span",ot,o(i.items),1)],4)])]))),128))])])]),t("section",nt,[s[19]||(s[19]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-playlist-music"}),p(" Playlist Overview ")],-1)),t("div",rt,[t("div",dt,[t("div",ct,o(a(l).playlist.items),1),s[10]||(s[10]=t("div",{class:"text-sm text-primary-3"},"Total Songs",-1))]),t("div",mt,[s[13]||(s[13]=t("div",{class:"text-sm font-medium text-primary-3 mb-3 text-center"}," Tags Coverage ",-1)),t("div",pt,[t("div",xt,[t("div",ut,o(a(l).playlist.itemsWithTags),1),s[11]||(s[11]=t("div",{class:"text-xs text-primary-3"},"Songs",-1))]),t("div",gt,[t("div",yt,o(a(B))+"% ",1),s[12]||(s[12]=t("div",{class:"text-xs text-primary-3"},"Coverage",-1))])])]),t("div",vt,[s[16]||(s[16]=t("div",{class:"text-sm font-medium text-primary-3 mb-3 text-center"}," External IDs Coverage ",-1)),t("div",ft,[t("div",bt,[t("div",_t,o(a(l).playlist.itemsWithExternalIds),1),s[14]||(s[14]=t("div",{class:"text-xs text-primary-3"},"Songs",-1))]),t("div",ht,[t("div",wt,o(a(S))+"% ",1),s[15]||(s[15]=t("div",{class:"text-xs text-primary-3"},"Coverage",-1))])])])]),t("div",null,[s[17]||(s[17]=t("h3",{class:"text-lg font-semibold mb-4"},"Platform Coverage",-1)),s[18]||(s[18]=t("p",{class:"text-sm text-primary-3 mb-4"}," Percentage of playlist songs available on each platform ",-1)),t("div",Tt,[(r(!0),n(x,null,u(a(j),i=>(r(),n("div",{key:i.key,class:"flex items-center gap-3"},[t("div",kt,o(U(i.key)),1),t("div",Ct,[t("div",{class:h(["absolute inset-y-0 left-0 transition-all duration-500 flex items-center justify-end pr-2",b(i.count,a(l).playlist.items)]),style:g({width:y(i.count,a(l).playlist.items)})},[t("span",Bt,o(i.count),1)],6)]),t("div",St,o(P(i.count,a(l).playlist.items))+"% ",1)]))),128))])])]),t("section",jt,[s[23]||(s[23]=t("h2",{class:"text-2xl font-semibold mb-6 flex items-center gap-2"},[t("div",{class:"i-mdi-tag-multiple"}),p(" Tag Statistics ")],-1)),t("div",Mt,[s[20]||(s[20]=t("h3",{class:"text-lg font-semibold mb-4"},"Top 50 Tags",-1)),t("div",Pt,[(r(!0),n(x,null,u(a(l).playlist.topTags,i=>(r(),n("div",{key:i.tag,class:"flex items-center gap-3"},[t("div",Ut,o(i.tag),1),t("div",zt,[t("div",{class:h(["absolute inset-y-0 left-0 transition-all duration-500 flex items-center justify-end pr-2",b(i.count,a(w))]),style:g({width:y(i.count,a(w))})},[t("span",At,o(i.count),1)],6)])]))),128))])]),t("div",null,[s[22]||(s[22]=t("h3",{class:"text-lg font-semibold mb-4"},"Top Tags by User",-1)),t("div",Et,[(r(!0),n(x,null,u(a(M),i=>(r(),n("div",{key:i,class:"bg-primary-1 rounded-lg p-4"},[t("div",Wt,[t("div",Ft,[t("div",{class:"w-10 h-10 rounded-full flex items-center justify-center",style:g({backgroundColor:("getUserColor"in e?e.getUserColor:a(A))(i)})},[...s[21]||(s[21]=[t("div",{class:"i-mdi-account text-2xl text-primary-1"},null,-1)])],4),t("span",It,o(a(l).playlist.topTagsByUser[i].totalSongs)+" songs ",1)])]),t("div",Vt,[(r(!0),n(x,null,u(a(l).playlist.topTagsByUser[i].tags,d=>(r(),n("div",{key:d.tag,class:"flex items-center gap-3"},[t("div",Nt,o(d.tag),1),t("div",Ot,[t("div",{class:h(["absolute inset-y-0 left-0 transition-all duration-500 flex items-center justify-end pr-2",b(d.count,a(l).playlist.topTagsByUser[i].tags[0].count)]),style:g({width:y(d.count,a(l).playlist.topTagsByUser[i].tags[0].count)})},[t("span",Dt,o(d.count),1)],6)])]))),128))])]))),128))])])])]))])}}});export{Zt as default};
