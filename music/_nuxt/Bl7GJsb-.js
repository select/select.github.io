import{_ as Te}from"./Cswrhvxo.js";import{_ as fe}from"./D0M-Q41l.js";import{e as yt,h as Q,p as X,x as Dt,c as B,o as T,f as J,a as u,t as z,g as $,F as lt,r as ct,d as ot,j as me,v as Fe,k as kt,s as wt,n as dt,y as Xt,z as vt,b as nt,q as pe,A as ge,m as At,w as mt,l as _t,B as Ie,C as ve,D as Be,u as Ye}from"./C47hxgQR.js";import{u as Ct,a as Pt,b as te}from"./B3Jd5NOp.js";import{c as Pe,g as ye,a as xe,b as $e}from"./cTjeiag2.js";import{g as qt}from"./CC4Ru-0d.js";import{u as Oe,a as Le,b as Ve,c as Ue,r as je,d as Ne,e as He,f as ee}from"./DiEPupDg.js";import"./Bdzhaakq.js";function gt(e){return Array.isArray?Array.isArray(e):we(e)==="[object Array]"}function Re(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ze(e){return e==null?"":Re(e)}function ft(e){return typeof e=="string"}function be(e){return typeof e=="number"}function Ke(e){return e===!0||e===!1||We(e)&&we(e)=="[object Boolean]"}function Me(e){return typeof e=="object"}function We(e){return Me(e)&&e!==null}function at(e){return e!=null}function Ht(e){return!e.trim().length}function we(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ze="Incorrect 'index' type",Ge=e=>`Invalid value for key ${e}`,qe=e=>`Pattern length exceeds max of ${e}.`,Je=e=>`Missing ${e} property in key`,Qe=e=>`Property 'weight' in key '${e}' must be a positive integer`,se=Object.prototype.hasOwnProperty;class Xe{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=Ae(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ae(e){let t=null,n=null,r=null,i=1,o=null;if(ft(e)||gt(e))r=e,t=ne(e),n=Rt(e);else{if(!se.call(e,"name"))throw new Error(Je("name"));const s=e.name;if(r=s,se.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(Qe(s));t=ne(s),n=Rt(s),o=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:o}}function ne(e){return gt(e)?e:e.split(".")}function Rt(e){return gt(e)?e.join("."):e}function ts(e,t){let n=[],r=!1;const i=(o,s,h)=>{if(at(o))if(!s[h])n.push(o);else{let c=s[h];const v=o[c];if(!at(v))return;if(h===s.length-1&&(ft(v)||be(v)||Ke(v)))n.push(ze(v));else if(gt(v)){r=!0;for(let g=0,w=v.length;g<w;g+=1)i(v[g],s,h+1)}else s.length&&i(v,s,h+1)}};return i(e,ft(t)?t.split("."):t,0),r?n:n[0]}const es={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ss={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},ns={location:0,threshold:.6,distance:100},is={useExtendedSearch:!1,getFn:ts,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var H={...ss,...es,...ns,...is};const rs=/[^ ]+/g;function os(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const o=i.match(rs).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*e),h=parseFloat(Math.round(s*r)/r);return n.set(o,h),h},clear(){n.clear()}}}class Jt{constructor({getFn:t=H.getFn,fieldNormWeight:n=H.fieldNormWeight}={}){this.norm=os(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ft(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();ft(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!at(t)||Ht(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(t):this.getFn(t,i.path);if(at(s)){if(gt(s)){let h=[];const c=[{nestedArrIndex:-1,value:s}];for(;c.length;){const{nestedArrIndex:v,value:g}=c.pop();if(at(g))if(ft(g)&&!Ht(g)){let w={v:g,i:v,n:this.norm.get(g)};h.push(w)}else gt(g)&&g.forEach((w,C)=>{c.push({nestedArrIndex:C,value:w})})}r.$[o]=h}else if(ft(s)&&!Ht(s)){let h={v:s,n:this.norm.get(s)};r.$[o]=h}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function De(e,t,{getFn:n=H.getFn,fieldNormWeight:r=H.fieldNormWeight}={}){const i=new Jt({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(Ae)),i.setSources(t),i.create(),i}function as(e,{getFn:t=H.getFn,fieldNormWeight:n=H.fieldNormWeight}={}){const{keys:r,records:i}=e,o=new Jt({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function Et(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=H.distance,ignoreLocation:o=H.ignoreLocation}={}){const s=t/e.length;if(o)return s;const h=Math.abs(r-n);return i?s+h/i:h?1:s}function ls(e=[],t=H.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=e.length;o<s;o+=1){let h=e[o];h&&r===-1?r=o:!h&&r!==-1&&(i=o-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}const $t=32;function us(e,t,n,{location:r=H.location,distance:i=H.distance,threshold:o=H.threshold,findAllMatches:s=H.findAllMatches,minMatchCharLength:h=H.minMatchCharLength,includeMatches:c=H.includeMatches,ignoreLocation:v=H.ignoreLocation}={}){if(t.length>$t)throw new Error(qe($t));const g=t.length,w=e.length,C=Math.max(0,Math.min(r,w));let _=o,k=C;const f=h>1||c,l=f?Array(w):[];let a;for(;(a=e.indexOf(t,k))>-1;){let y=Et(t,{currentLocation:a,expectedLocation:C,distance:i,ignoreLocation:v});if(_=Math.min(y,_),k=a+g,f){let p=0;for(;p<g;)l[a+p]=1,p+=1}}k=-1;let m=[],S=1,F=g+w;const P=1<<g-1;for(let y=0;y<g;y+=1){let p=0,Y=F;for(;p<Y;)Et(t,{errors:y,currentLocation:C+Y,expectedLocation:C,distance:i,ignoreLocation:v})<=_?p=Y:F=Y,Y=Math.floor((F-p)/2+p);F=Y;let O=Math.max(1,C-Y+1),E=s?w:Math.min(C+Y,w)+g,R=Array(E+2);R[E+1]=(1<<y)-1;for(let A=E;A>=O;A-=1){let b=A-1,M=n[e.charAt(b)];if(f&&(l[b]=+!!M),R[A]=(R[A+1]<<1|1)&M,y&&(R[A]|=(m[A+1]|m[A])<<1|1|m[A+1]),R[A]&P&&(S=Et(t,{errors:y,currentLocation:b,expectedLocation:C,distance:i,ignoreLocation:v}),S<=_)){if(_=S,k=b,k<=C)break;O=Math.max(1,2*C-k)}}if(Et(t,{errors:y+1,currentLocation:C,expectedLocation:C,distance:i,ignoreLocation:v})>_)break;m=R}const D={isMatch:k>=0,score:Math.max(.001,S)};if(f){const y=ls(l,h);y.length?c&&(D.indices=y):D.isMatch=!1}return D}function cs(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Ot=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class ke{constructor(t,{location:n=H.location,threshold:r=H.threshold,distance:i=H.distance,includeMatches:o=H.includeMatches,findAllMatches:s=H.findAllMatches,minMatchCharLength:h=H.minMatchCharLength,isCaseSensitive:c=H.isCaseSensitive,ignoreDiacritics:v=H.ignoreDiacritics,ignoreLocation:g=H.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:h,isCaseSensitive:c,ignoreDiacritics:v,ignoreLocation:g},t=c?t:t.toLowerCase(),t=v?Ot(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const w=(_,k)=>{this.chunks.push({pattern:_,alphabet:cs(_),startIndex:k})},C=this.pattern.length;if(C>$t){let _=0;const k=C%$t,f=C-k;for(;_<f;)w(this.pattern.substr(_,$t),_),_+=$t;if(k){const l=C-$t;w(this.pattern.substr(l),l)}}else w(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?Ot(t):t,this.pattern===t){let f={isMatch:!0,score:0};return i&&(f.indices=[[0,t.length-1]]),f}const{location:o,distance:s,threshold:h,findAllMatches:c,minMatchCharLength:v,ignoreLocation:g}=this.options;let w=[],C=0,_=!1;this.chunks.forEach(({pattern:f,alphabet:l,startIndex:a})=>{const{isMatch:m,score:S,indices:F}=us(t,f,l,{location:o+a,distance:s,threshold:h,findAllMatches:c,minMatchCharLength:v,includeMatches:i,ignoreLocation:g});m&&(_=!0),C+=S,m&&F&&(w=[...w,...F])});let k={isMatch:_,score:_?C/this.chunks.length:1};return _&&i&&(k.indices=w),k}}class xt{constructor(t){this.pattern=t}static isMultiMatch(t){return ie(t,this.multiRegex)}static isSingleMatch(t){return ie(t,this.singleRegex)}search(){}}function ie(e,t){const n=e.match(t);return n?n[1]:null}class ds extends xt{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class hs extends xt{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class fs extends xt{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ms extends xt{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ps extends xt{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class gs extends xt{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Ce extends xt{constructor(t,{location:n=H.location,threshold:r=H.threshold,distance:i=H.distance,includeMatches:o=H.includeMatches,findAllMatches:s=H.findAllMatches,minMatchCharLength:h=H.minMatchCharLength,isCaseSensitive:c=H.isCaseSensitive,ignoreDiacritics:v=H.ignoreDiacritics,ignoreLocation:g=H.ignoreLocation}={}){super(t),this._bitapSearch=new ke(t,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:h,isCaseSensitive:c,ignoreDiacritics:v,ignoreLocation:g})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class _e extends xt{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],o=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const zt=[ds,_e,fs,ms,gs,ps,hs,Ce],re=zt.length,vs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ys="|";function xs(e,t={}){return e.split(ys).map(n=>{let r=n.trim().split(vs).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){const h=r[o];let c=!1,v=-1;for(;!c&&++v<re;){const g=zt[v];let w=g.isMultiMatch(h);w&&(i.push(new g(w,t)),c=!0)}if(!c)for(v=-1;++v<re;){const g=zt[v];let w=g.isSingleMatch(h);if(w){i.push(new g(w,t));break}}}return i})}const $s=new Set([Ce.type,_e.type]);class bs{constructor(t,{isCaseSensitive:n=H.isCaseSensitive,ignoreDiacritics:r=H.ignoreDiacritics,includeMatches:i=H.includeMatches,minMatchCharLength:o=H.minMatchCharLength,ignoreLocation:s=H.ignoreLocation,findAllMatches:h=H.findAllMatches,location:c=H.location,threshold:v=H.threshold,distance:g=H.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:o,findAllMatches:h,ignoreLocation:s,location:c,threshold:v,distance:g},t=n?t:t.toLowerCase(),t=r?Ot(t):t,this.pattern=t,this.query=xs(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:o}=this.options;t=i?t:t.toLowerCase(),t=o?Ot(t):t;let s=0,h=[],c=0;for(let v=0,g=n.length;v<g;v+=1){const w=n[v];h.length=0,s=0;for(let C=0,_=w.length;C<_;C+=1){const k=w[C],{isMatch:f,indices:l,score:a}=k.search(t);if(f){if(s+=1,c+=a,r){const m=k.constructor.type;$s.has(m)?h=[...h,...l]:h.push(l)}}else{c=0,s=0,h.length=0;break}}if(s){let C={isMatch:!0,score:c/s};return r&&(C.indices=h),C}}return{isMatch:!1,score:1}}}const Kt=[];function Ms(...e){Kt.push(...e)}function Wt(e,t){for(let n=0,r=Kt.length;n<r;n+=1){let i=Kt[n];if(i.condition(e,t))return new i(e,t)}return new ke(e,t)}const Lt={AND:"$and",OR:"$or"},Zt={PATH:"$path",PATTERN:"$val"},Gt=e=>!!(e[Lt.AND]||e[Lt.OR]),ws=e=>!!e[Zt.PATH],As=e=>!gt(e)&&Me(e)&&!Gt(e),oe=e=>({[Lt.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Se(e,t,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const s=ws(i);if(!s&&o.length>1&&!Gt(i))return r(oe(i));if(As(i)){const c=s?i[Zt.PATH]:o[0],v=s?i[Zt.PATTERN]:i[c];if(!ft(v))throw new Error(Ge(c));const g={keyId:Rt(c),pattern:v};return n&&(g.searcher=Wt(v,t)),g}let h={children:[],operator:o[0]};return o.forEach(c=>{const v=i[c];gt(v)&&v.forEach(g=>{h.children.push(r(g))})}),h};return Gt(e)||(e=oe(e)),r(e)}function Ds(e,{ignoreFieldNorm:t=H.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:s})=>{const h=i?i.weight:null;r*=Math.pow(s===0&&h?Number.EPSILON:s,(h||1)*(t?1:o))}),n.score=r})}function ks(e,t){const n=e.matches;t.matches=[],at(n)&&n.forEach(r=>{if(!at(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),t.matches.push(s)})}function Cs(e,t){t.score=e.score}function _s(e,t,{includeMatches:n=H.includeMatches,includeScore:r=H.includeScore}={}){const i=[];return n&&i.push(ks),r&&i.push(Cs),e.map(o=>{const{idx:s}=o,h={item:t[s],refIndex:s};return i.length&&i.forEach(c=>{c(o,h)}),h})}class bt{constructor(t,n={},r){this.options={...H,...n},this.options.useExtendedSearch,this._keyStore=new Xe(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Jt))throw new Error(Ze);this._myIndex=n||De(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){at(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];t(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:h}=this.options;let c=ft(t)?ft(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ds(c,{ignoreFieldNorm:h}),o&&c.sort(s),be(n)&&n>-1&&(c=c.slice(0,n)),_s(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=Wt(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:h})=>{if(!at(o))return;const{isMatch:c,score:v,indices:g}=n.searchIn(o);c&&i.push({item:o,idx:s,matches:[{score:v,value:o,norm:h,indices:g}]})}),i}_searchLogical(t){const n=Se(t,this.options),r=(h,c,v)=>{if(!h.children){const{keyId:w,searcher:C}=h,_=this._findMatches({key:this._keyStore.get(w),value:this._myIndex.getValueForItemAtKeyId(c,w),searcher:C});return _&&_.length?[{idx:v,item:c,matches:_}]:[]}const g=[];for(let w=0,C=h.children.length;w<C;w+=1){const _=h.children[w],k=r(_,c,v);if(k.length)g.push(...k);else if(h.operator===Lt.AND)return[]}return g},i=this._myIndex.records,o={},s=[];return i.forEach(({$:h,i:c})=>{if(at(h)){let v=r(n,h,c);v.length&&(o[c]||(o[c]={idx:c,item:h,matches:[]},s.push(o[c])),v.forEach(({matches:g})=>{o[c].matches.push(...g)}))}}),s}_searchObjectList(t){const n=Wt(t,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:h})=>{if(!at(s))return;let c=[];r.forEach((v,g)=>{c.push(...this._findMatches({key:v,value:s[g],searcher:n}))}),c.length&&o.push({idx:h,item:s,matches:c})}),o}_findMatches({key:t,value:n,searcher:r}){if(!at(n))return[];let i=[];if(gt(n))n.forEach(({v:o,i:s,n:h})=>{if(!at(o))return;const{isMatch:c,score:v,indices:g}=r.searchIn(o);c&&i.push({score:v,key:t,value:o,idx:s,norm:h,indices:g})});else{const{v:o,n:s}=n,{isMatch:h,score:c,indices:v}=r.searchIn(o);h&&i.push({score:c,key:t,value:o,norm:s,indices:v})}return i}}bt.version="7.1.0";bt.createIndex=De;bt.parseIndex=as;bt.config=H;bt.parseQuery=Se;Ms(bs);const Ss={class:"relative"},Es=["for"],Ts={class:"relative rounded-lg bg-primary-1 focus-within:ring-2 focus-within:ring-accent focus-within:border-accent transition-colors","data-multiselect":""},Fs={key:0,class:"flex flex-wrap gap-1 p-2 border-b border-primary-2"},Is=["onClick"],Bs={class:"relative"},Ys=["id","placeholder","disabled"],Ps={key:1,class:"absolute z-50 w-full mt-1 bg-primary-1 border border-primary-2 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Os=["onClick","onMouseenter"],Ls={key:0,class:"i-mdi-check text-accent"},Vs={class:"text-primary-4"},Us={key:1,class:"px-3 py-2 text-primary-3 text-center"},js=yt({__name:"AppInputMultiSelect",props:{id:{default:()=>`multiselect-${Math.random().toString(36).substr(2,9)}`},label:{default:""},placeholder:{default:"Search and select options..."},options:{},modelValue:{},disabled:{type:Boolean,default:!1},maxSelections:{default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=t,i=Q(""),o=Q(!1),s=Q(-1),h=Q(),c=X({get:()=>n.modelValue,set:l=>r("update:modelValue",l)}),v=X(()=>new bt(n.options,{threshold:.3,includeScore:!0,minMatchCharLength:1})),g=X(()=>i.value.trim()?v.value.search(i.value).map(a=>a.item).slice(0,50):n.options.slice(0,50)),w=l=>{const a=[...c.value],m=a.indexOf(l);m>-1?a.splice(m,1):(!n.maxSelections||a.length<n.maxSelections)&&a.push(l),c.value=a,s.value=-1},C=l=>{const a=[...c.value],m=a.indexOf(l);m>-1&&(a.splice(m,1),c.value=a)},_=l=>{l&&!c.value.includes(l)&&(!n.maxSelections||c.value.length<n.maxSelections)&&(c.value=[...c.value,l]),o.value=!1,s.value=-1},k=()=>{n.disabled||(o.value=!o.value,o.value&&Xt(()=>{h.value?.focus()}))},f=l=>{if(n.disabled)return;const a=i.value.trim()&&!n.options.includes(i.value.trim())&&!c.value.includes(i.value.trim()),m=g.value.length+(a?1:0);switch(l.key){case"ArrowDown":l.preventDefault(),o.value=!0,s.value<m-1?s.value++:s.value=0;break;case"ArrowUp":l.preventDefault(),o.value=!0,s.value>0?s.value--:s.value=m-1;break;case"Enter":l.preventDefault(),o.value&&s.value>=0&&m>0?s.value<g.value.length?w(g.value[s.value]):a&&_(i.value.trim()):(o.value=!0,m>0&&(s.value=0));break;case"Escape":l.preventDefault(),o.value=!1,s.value=-1,h.value?.blur();break;case"Backspace":if(!i.value&&c.value.length>0){l.preventDefault();const S=c.value[c.value.length-1];S&&C(S)}break}};return Dt(i,()=>{s.value=-1}),Dt(o,l=>{l&&Xt(()=>{h.value?.focus()})}),(l,a)=>(T(),B("div",Ss,[e.label?(T(),B("label",{key:0,for:e.id,class:"block text-sm font-medium mb-2"},z(e.label),9,Es)):J("",!0),u("div",Ts,[$(c).length>0?(T(),B("div",Fs,[(T(!0),B(lt,null,ct($(c),m=>(T(),B("span",{key:m,class:"inline-flex items-center gap-1 px-2 py-1 bg-primary-2 text-primary-4 text-xs rounded"},[ot(z(m)+" ",1),u("button",{type:"button",class:"hover:text-accent transition-colors",onClick:S=>C(m)},[...a[5]||(a[5]=[u("div",{class:"i-mdi-close text-xs"},null,-1)])],8,Is)]))),128))])):J("",!0),u("div",Bs,[me(u("input",{id:e.id,ref_key:"inputRef",ref:h,"onUpdate:modelValue":a[0]||(a[0]=m=>wt(i)?i.value=m:null),type:"text",placeholder:e.placeholder,disabled:e.disabled,class:"w-full px-3 py-2 bg-transparent text-primary-4 placeholder-primary-3 focus:outline-none",autocomplete:"off",onFocus:a[1]||(a[1]=m=>o.value=!0),onKeydown:kt(f,["stop"])},null,40,Ys),[[Fe,$(i)]]),u("button",{type:"button",class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-primary-3 hover:text-accent transition-colors",onClick:k},[u("div",{class:dt(["transition-transform duration-200",$(o)?"i-mdi-chevron-up":"i-mdi-chevron-down"])},null,2)])])]),$(o)&&($(g).length>0||$(i).trim())?(T(),B("div",Ps,[(T(!0),B(lt,null,ct($(g),(m,S)=>(T(),B("button",{key:m,type:"button",class:dt(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center justify-between",$(s)===S?"bg-bg-gradient":"",$(c).includes(m)?"text-accent":"text-primary-4"]),onClick:F=>w(m),onMouseenter:F=>s.value=S},[u("span",null,z(m),1),$(c).includes(m)?(T(),B("div",Ls)):J("",!0)],42,Os))),128)),$(i).trim()&&!e.options.includes($(i).trim())&&!$(c).includes($(i).trim())?(T(),B("button",{key:0,type:"button",class:dt(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center gap-2 border-t border-primary-2",$(s)===$(g).length?"bg-bg-gradient":""]),onClick:a[2]||(a[2]=m=>_($(i).trim())),onMouseenter:a[3]||(a[3]=m=>s.value=$(g).length)},[a[6]||(a[6]=u("div",{class:"i-mdi-plus text-accent"},null,-1)),u("span",Vs,'Add "'+z($(i).trim())+'"',1)],34)):J("",!0),$(g).length===0&&!$(i).trim()?(T(),B("div",Us," No options available ")):J("",!0)])):J("",!0),$(o)?(T(),B("div",{key:2,class:"fixed inset-0 z-40",onClick:a[4]||(a[4]=m=>o.value=!1)})):J("",!0)]))}}),Ns=Object.assign(js,{__name:"AppInputMultiSelect"}),Hs={class:"flex justify-between items-center mb-4"},Rs={class:"space-y-3"},zs={class:"flex justify-between items-center"},Ks={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Ws={class:"flex justify-between items-center"},Zs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Gs={class:"flex justify-between items-center"},qs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Js={class:"flex justify-between items-center"},Qs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Xs={class:"flex justify-between items-center"},tn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},en={class:"flex justify-between items-center"},sn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},nn={class:"flex justify-between items-center"},rn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},on={class:"flex justify-between items-center"},an={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},ln={class:"flex justify-between items-center"},un={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},cn={class:"mt-6 pt-4 border-t border-primary-2"},dn={class:"text-sm text-primary-3"},hn={class:"text-primary-4 font-medium"},fn=yt({__name:"KeyboardShortcutsHelp",props:{showHelp:{type:Boolean,default:!1}},emits:["close"],setup(e){const{currentKeyboardShortcuts:t,settings:n}=vt(Ct()),r=X(()=>({playPause:i(t.value.playPause),nextTrack:i(t.value.nextTrack),previousTrack:i(t.value.previousTrack),volumeUp:i(t.value.volumeUp),volumeDown:i(t.value.volumeDown),mute:i(t.value.mute),seekForward:i(t.value.seekForward),seekBackward:i(t.value.seekBackward),focusSearch:i(t.value.focusSearch)})),i=o=>({" ":"Space",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓",x:"X",z:"Z",b:"B",c:"C",v:"V",m:"M",l:"L",j:"J",k:"K",n:"N",p:"P","ctrl+k":"Ctrl+K"})[o]||o.toUpperCase();return(o,s)=>{const h=fe;return e.showHelp?(T(),B("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:s[2]||(s[2]=c=>o.$emit("close"))},[u("div",{class:"bg-primary-1 rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:s[1]||(s[1]=kt(()=>{},["stop"]))},[u("div",Hs,[s[3]||(s[3]=u("h3",{class:"text-lg font-semibold text-primary-4"},"Keyboard Shortcuts",-1)),nt(h,{icon:"i-mdi-close",variant:"ghost",size:"small",onClick:s[0]||(s[0]=c=>o.$emit("close"))})]),u("div",Rs,[u("div",zs,[s[4]||(s[4]=u("span",{class:"text-primary-3"},"Play/Pause",-1)),u("kbd",Ks,z($(r).playPause),1)]),u("div",Ws,[s[5]||(s[5]=u("span",{class:"text-primary-3"},"Next Track",-1)),u("kbd",Zs,z($(r).nextTrack),1)]),u("div",Gs,[s[6]||(s[6]=u("span",{class:"text-primary-3"},"Previous Track",-1)),u("kbd",qs,z($(r).previousTrack),1)]),u("div",Js,[s[7]||(s[7]=u("span",{class:"text-primary-3"},"Volume Up",-1)),u("kbd",Qs,z($(r).volumeUp),1)]),u("div",Xs,[s[8]||(s[8]=u("span",{class:"text-primary-3"},"Volume Down",-1)),u("kbd",tn,z($(r).volumeDown),1)]),u("div",en,[s[9]||(s[9]=u("span",{class:"text-primary-3"},"Mute",-1)),u("kbd",sn,z($(r).mute),1)]),u("div",nn,[s[10]||(s[10]=u("span",{class:"text-primary-3"},"Seek Forward",-1)),u("kbd",rn,z($(r).seekForward),1)]),u("div",on,[s[11]||(s[11]=u("span",{class:"text-primary-3"},"Seek Backward",-1)),u("kbd",an,z($(r).seekBackward),1)]),u("div",ln,[s[12]||(s[12]=u("span",{class:"text-primary-3"},"Focus Search",-1)),u("kbd",un,z($(r).focusSearch),1)])]),u("div",cn,[u("p",dn,[s[13]||(s[13]=ot(" Current scheme: ",-1)),u("span",hn,z($(n).keyboardShortcutScheme==="simple"?"Default":$(n).keyboardShortcutScheme==="winamp"?"Winamp Style":"YouTube Style"),1)]),s[14]||(s[14]=u("p",{class:"text-xs text-primary-3 mt-2"}," Change keyboard shortcuts in the Filters panel ",-1))])])])):J("",!0)}}}),mn=Object.assign(fn,{__name:"KeyboardShortcutsHelp"}),pn={class:"fixed top-6 left-0 flex flex-col gap-8 sm:gap-12 px-4 sm:px-6 z-1 w-full"},gn={class:"backdrop-blur-3xl rounded-2xl flex justify-center items-center gap-4 sm:gap-6 w-full max-w-2xl mx-auto pl-3"},vn={class:"flex-1 min-w-0 overflow-hidden"},yn={class:"flex gap-2 sm:gap-3 items-center flex-shrink-0"},xn={key:0,class:"rounded-lg p-4 space-y-4 backdrop-blur-2xl bg-bg-gradient"},$n={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},bn={class:"flex flex-wrap gap-2"},Mn={class:"grid grid-cols-1 gap-4"},wn={class:"flex flex-wrap gap-2 max-h-32 overflow-y-auto"},An=["onClick"],Dn={class:"text-xs text-primary-3 px-2 py-1 rounded-full"},kn={class:"grid grid-cols-1 gap-4"},Cn={class:"flex flex-wrap gap-2"},_n={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Sn={class:"flex justify-between"},En=["value"],Tn=["value"],Fn={class:"flex justify-between items-center"},In={class:"text-sm text-primary-3"},Bn={class:"flex gap-2"},Yn=yt({__name:"VideoSearch",setup(e){const{setCurrentPlaylistVideos:t}=Pt(),{setKeyboardShortcutScheme:n,setSelectedPlatforms:r}=Ct(),{originalCurrentPlaylist:i}=vt(Pt()),{settings:o,availableShortcutSchemes:s,viewMode:h}=vt(Ct()),c=Q(!1);let v=0,g=null;const w=()=>{const j=window.scrollY;g&&clearTimeout(g),g=setTimeout(()=>{Math.abs(j-v)>500&&_.value&&(_.value=!1),v=j},150)};pe(()=>{c.value=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",v=window.scrollY,window.addEventListener("scroll",w)}),ge(()=>{window.removeEventListener("scroll",w),g&&clearTimeout(g)});const C=Q(""),_=Q(!1),k=Q([]),f=Q([]),l=Q([]),a=Q([]),m=Q(""),S=Q("createdAt"),F=Q(!1),P=Q(!1),D=X(()=>i.value?.videos||[]),y=X(()=>D.value.length),p=X(()=>k.value.length>0||f.value.length>0||l.value.length>0||a.value.length>0||m.value!==""||C.value.trim()!==""),Y=X(()=>[...new Set(D.value.filter(d=>d.artist).map(d=>d.artist))].sort()),O=X(()=>{const j=new Set;return D.value.forEach(d=>{d.tags&&d.tags.forEach(U=>j.add(U))}),Array.from(j).sort()}),E=X(()=>[...new Set(D.value.filter(d=>d.artistCountry).map(d=>d.artistCountry))].sort()),R=X(()=>{const j=new Map;return D.value.forEach(d=>{const U=d.userId||null;j.set(U,(j.get(U)||0)+1)}),Array.from(j.entries()).map(([d,U])=>({userId:d||"Anonymous",originalUserId:d,count:U,color:d?qt(d):"#666666"})).sort((d,U)=>U.count-d.count)}),Z={keys:[{name:"title",weight:.3},{name:"musicTitle",weight:.4},{name:"artist",weight:.4},{name:"tags",weight:.2},{name:"description",weight:.1}],threshold:.3,includeScore:!0,minMatchCharLength:2},A=X(()=>new bt(D.value,Z)),b=j=>{if(!j)return 0;const d=j.split(":").map(Number);return d.length===2&&d[0]!==void 0&&d[1]!==void 0?d[0]*60+d[1]:d.length===3&&d[0]!==void 0&&d[1]!==void 0&&d[2]!==void 0?d[0]*3600+d[1]*60+d[2]:0},M=j=>{if(!m.value)return!0;const U=b(j.duration)/60;switch(m.value){case"short":return U<4;case"medium":return U>=4&&U<=20;case"long":return U>20;default:return!0}},L=j=>{const d=a.value.indexOf(j);d>-1?a.value.splice(d,1):a.value.push(j)},x=X(()=>{let j=[];return C.value.trim()?j=A.value.search(C.value).map(U=>U.item):j=[...D.value],k.value.length>0&&(j=j.filter(d=>d.artist&&k.value.includes(d.artist))),f.value.length>0&&(j=j.filter(d=>d.tags&&f.value.some(U=>d.tags.includes(U)))),l.value.length>0&&(j=j.filter(d=>d.artistCountry&&l.value.includes(d.artistCountry))),a.value.length>0&&(j=j.filter(d=>{const U=d.userId||"Anonymous";return a.value.includes(U)})),j=j.filter(M),(S.value!=="relevance"||!C.value.trim())&&j.sort((d,U)=>{switch(S.value){case"createdAt":return d.createdAt&&!U.createdAt?-1:!d.createdAt&&U.createdAt?1:d.createdAt&&U.createdAt?U.createdAt-d.createdAt:0;case"releasedAt":return d.releasedAt&&!U.releasedAt?-1:!d.releasedAt&&U.releasedAt?1:d.releasedAt&&U.releasedAt?U.releasedAt.localeCompare(d.releasedAt):0;case"title":{const G=d.musicTitle||d.title,st=U.musicTitle||U.title;return G.localeCompare(st)}case"artist":{const G=d.artist||"Unknown",st=U.artist||"Unknown";return G.localeCompare(st)}case"duration":return b(d.duration)-b(U.duration);default:return 0}}),j}),V=()=>{_.value=!_.value},I=()=>{F.value=!F.value},N=j=>{m.value===j?m.value="":m.value=j},q=j=>{const d=o.value.selectedPlatforms||[],U=d.includes(j);r(U?d.filter(G=>G!==j):[...d,j])},W=()=>{C.value="",k.value=[],f.value=[],l.value=[],a.value=[],m.value="",S.value="createdAt",P.value=!1},tt=j=>{const d=[...j];for(let U=d.length-1;U>0;U--){const G=Math.floor(Math.random()*(U+1));[d[U],d[G]]=[d[G],d[U]]}return d},et=()=>{const j=tt(x.value);t(j)},ut=()=>{h.value==="grid"?h.value="list":h.value==="list"?h.value="timeline":h.value="grid"},rt=()=>{switch(h.value){case"grid":return"i-mdi-view-grid";case"list":return"i-mdi-view-list";case"timeline":return"i-mdi-timeline";default:return"i-mdi-view-grid"}};return Dt(x,j=>{t(j)},{immediate:!0}),(j,d)=>{const U=Te,G=fe,st=Ns,ht=mn;return T(),B("div",pn,[u("div",gn,[u("div",vn,[nt(U,{id:"search",modelValue:$(C),"onUpdate:modelValue":d[0]||(d[0]=K=>wt(C)?C.value=K:null),placeholder:"Search by title, artist, or tags...",size:"large"},null,8,["modelValue"])]),u("div",yn,[nt(G,{icon:"i-mdi-filter-variant text-3xl",variant:"ghost",size:"large",class:dt(["rounded-full",{"[&_[class^=i-mdi]]:text-accent":$(p)}]),onClick:V},null,8,["class"]),nt(G,{icon:rt(),variant:"ghost",size:"large",class:"rounded-full text-2xl",onClick:ut},null,8,["icon"]),$(c)?(T(),At(G,{key:0,to:"/admin",icon:"i-mdi-cog",variant:"ghost",size:"medium",class:"lt-sm:hidden"},{default:mt(()=>[...d[12]||(d[12]=[u("span",{class:"hidden sm:inline"},"Admin",-1)])]),_:1})):J("",!0)])]),$(_)?(T(),B("div",xn,[u("div",$n,[u("div",null,[nt(st,{id:"artist-filter",modelValue:$(k),"onUpdate:modelValue":d[1]||(d[1]=K=>wt(k)?k.value=K:null),label:"Artists",placeholder:"Search and select artists...",options:$(Y)},null,8,["modelValue","options"])]),u("div",null,[nt(st,{id:"tag-filter",modelValue:$(f),"onUpdate:modelValue":d[2]||(d[2]=K=>wt(f)?f.value=K:null),label:"Tags",placeholder:"Search and select tags...",options:$(O)},null,8,["modelValue","options"])]),u("div",null,[nt(st,{id:"country-filter",modelValue:$(l),"onUpdate:modelValue":d[3]||(d[3]=K=>wt(l)?l.value=K:null),label:"Countries",placeholder:"Search and select countries...",options:$(E)},null,8,["modelValue","options"])]),u("div",null,[d[16]||(d[16]=u("label",{class:"block text-sm font-medium mb-2"},"Duration",-1)),u("div",bn,[nt(G,{size:"small",variant:$(m)==="short"?"primary":"ghost",onClick:d[4]||(d[4]=K=>N("short"))},{default:mt(()=>[...d[13]||(d[13]=[ot(" Short (< 4 min) ",-1)])]),_:1},8,["variant"]),nt(G,{size:"small",variant:$(m)==="medium"?"primary":"ghost",onClick:d[5]||(d[5]=K=>N("medium"))},{default:mt(()=>[...d[14]||(d[14]=[ot(" Medium (4-20 min) ",-1)])]),_:1},8,["variant"]),nt(G,{size:"small",variant:$(m)==="long"?"primary":"ghost",onClick:d[6]||(d[6]=K=>N("long"))},{default:mt(()=>[...d[15]||(d[15]=[ot(" Long (> 20 min) ",-1)])]),_:1},8,["variant"])])])]),u("div",Mn,[u("div",null,[d[18]||(d[18]=u("label",{class:"block text-sm font-medium mb-2"},"Users",-1)),u("div",wn,[(T(!0),B(lt,null,ct($(R),K=>(T(),B("div",{key:K.userId,class:dt(["flex items-center gap-2 cursor-pointer p-2 hover:bg-primary-1 rounded-2xl transition-colors",{"bg-primary-2":$(a).includes(K.userId)}]),onClick:Mt=>L(K.userId)},[u("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-black text-xs font-bold",style:_t({backgroundColor:K.color})},[...d[17]||(d[17]=[u("span",{class:"i-mdi-account text-xs"},null,-1)])],4),u("span",Dn,z(K.count),1)],10,An))),128))])])]),u("div",kn,[u("div",null,[d[19]||(d[19]=u("label",{class:"block text-sm font-medium mb-2"},"Music Platforms",-1)),u("div",Cn,[(T(!0),B(lt,null,ct(("getAllPlatforms"in j?j.getAllPlatforms:$(Pe))(),K=>(T(),At(G,{key:K.id,size:"small",variant:$(o).selectedPlatforms?.includes(K.id)?"primary":"ghost",onClick:Mt=>q(K.id)},{default:mt(()=>[u("div",{class:dt([K.icon,"text-sm mr-1"])},null,2),ot(" "+z(K.name),1)]),_:2},1032,["variant","onClick"]))),128))])])]),u("div",_n,[u("div",null,[d[21]||(d[21]=u("label",{class:"block text-sm font-medium mb-2"},"Sort By",-1)),me(u("select",{"onUpdate:modelValue":d[7]||(d[7]=K=>wt(S)?S.value=K:null),class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",onKeydown:d[8]||(d[8]=kt(()=>{},["stop"]))},[...d[20]||(d[20]=[ve('<option value="relevance">Relevance</option><option value="createdAt">Date Added (Latest First)</option><option value="releasedAt">Release Date (Latest First)</option><option value="title">Title A-Z</option><option value="artist">Artist A-Z</option><option value="duration">Duration</option>',6)])],544),[[Ie,$(S)]])]),u("div",null,[d[23]||(d[23]=u("label",{class:"block text-sm font-medium mb-2"},"Playlist",-1)),nt(G,{icon:"i-mdi-shuffle",variant:"primary",size:"medium",class:"w-full",onClick:et},{default:mt(()=>[...d[22]||(d[22]=[ot(" Shuffle ",-1)])]),_:1})]),u("div",null,[u("div",Sn,[d[25]||(d[25]=u("label",{class:"block text-sm font-medium mb-2"},"Keyboard ",-1)),nt(G,{icon:"i-mdi-keyboard",variant:"ghost",size:"medium",onClick:I},{default:mt(()=>[...d[24]||(d[24]=[u("span",{class:"hidden sm:inline"},"Shortcuts",-1)])]),_:1})]),u("select",{value:$(o).keyboardShortcutScheme,class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",onChange:d[9]||(d[9]=K=>$(n)(K.target.value)),onKeydown:d[10]||(d[10]=kt(()=>{},["stop"]))},[(T(!0),B(lt,null,ct($(s),K=>(T(),B("option",{key:K.value,value:K.value},z(K.label),9,Tn))),128))],40,En)]),d[26]||(d[26]=u("div",{class:"text-primary-3 w-full text-right"},"Scroll to close.",-1))]),u("div",Fn,[u("span",In,z($(x).length)+" of "+z($(y))+" videos ",1),u("div",Bn,[nt(G,{to:"/stats",icon:"i-mdi-chart-bar",variant:"ghost",size:"small"},{default:mt(()=>[...d[27]||(d[27]=[ot(" Stats ",-1)])]),_:1}),nt(G,{variant:"ghost",size:"small",onClick:W},{default:mt(()=>[...d[28]||(d[28]=[ot(" Clear All ",-1)])]),_:1})])])])):J("",!0),nt(ht,{"show-help":$(F),onClose:d[11]||(d[11]=K=>F.value=!1)},null,8,["show-help"])])}}}),Pn=Object.assign(Yn,{__name:"VideoSearch"});function St(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tt={exports:{}},On=Tt.exports,ae;function Ln(){return ae||(ae=1,(function(e,t){(function(n,r){e.exports=r()})(On,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",h="minute",c="hour",v="day",g="week",w="month",C="quarter",_="year",k="date",f="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var b=["th","st","nd","rd"],M=A%100;return"["+A+(b[(M-20)%10]||b[M]||b[0])+"]"}},S=function(A,b,M){var L=String(A);return!L||L.length>=b?A:""+Array(b+1-L.length).join(M)+A},F={s:S,z:function(A){var b=-A.utcOffset(),M=Math.abs(b),L=Math.floor(M/60),x=M%60;return(b<=0?"+":"-")+S(L,2,"0")+":"+S(x,2,"0")},m:function A(b,M){if(b.date()<M.date())return-A(M,b);var L=12*(M.year()-b.year())+(M.month()-b.month()),x=b.clone().add(L,w),V=M-x<0,I=b.clone().add(L+(V?-1:1),w);return+(-(L+(M-x)/(V?x-I:I-x))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:w,y:_,w:g,d:v,D:k,h:c,m:h,s,ms:o,Q:C}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},P="en",D={};D[P]=m;var y="$isDayjsObject",p=function(A){return A instanceof R||!(!A||!A[y])},Y=function A(b,M,L){var x;if(!b)return P;if(typeof b=="string"){var V=b.toLowerCase();D[V]&&(x=V),M&&(D[V]=M,x=V);var I=b.split("-");if(!x&&I.length>1)return A(I[0])}else{var N=b.name;D[N]=b,x=N}return!L&&x&&(P=x),x||!L&&P},O=function(A,b){if(p(A))return A.clone();var M=typeof b=="object"?b:{};return M.date=A,M.args=arguments,new R(M)},E=F;E.l=Y,E.i=p,E.w=function(A,b){return O(A,{locale:b.$L,utc:b.$u,x:b.$x,$offset:b.$offset})};var R=(function(){function A(M){this.$L=Y(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[y]=!0}var b=A.prototype;return b.parse=function(M){this.$d=(function(L){var x=L.date,V=L.utc;if(x===null)return new Date(NaN);if(E.u(x))return new Date;if(x instanceof Date)return new Date(x);if(typeof x=="string"&&!/Z$/i.test(x)){var I=x.match(l);if(I){var N=I[2]-1||0,q=(I[7]||"0").substring(0,3);return V?new Date(Date.UTC(I[1],N,I[3]||1,I[4]||0,I[5]||0,I[6]||0,q)):new Date(I[1],N,I[3]||1,I[4]||0,I[5]||0,I[6]||0,q)}}return new Date(x)})(M),this.init()},b.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},b.$utils=function(){return E},b.isValid=function(){return this.$d.toString()!==f},b.isSame=function(M,L){var x=O(M);return this.startOf(L)<=x&&x<=this.endOf(L)},b.isAfter=function(M,L){return O(M)<this.startOf(L)},b.isBefore=function(M,L){return this.endOf(L)<O(M)},b.$g=function(M,L,x){return E.u(M)?this[L]:this.set(x,M)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(M,L){var x=this,V=!!E.u(L)||L,I=E.p(M),N=function(d,U){var G=E.w(x.$u?Date.UTC(x.$y,U,d):new Date(x.$y,U,d),x);return V?G:G.endOf(v)},q=function(d,U){return E.w(x.toDate()[d].apply(x.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(U)),x)},W=this.$W,tt=this.$M,et=this.$D,ut="set"+(this.$u?"UTC":"");switch(I){case _:return V?N(1,0):N(31,11);case w:return V?N(1,tt):N(0,tt+1);case g:var rt=this.$locale().weekStart||0,j=(W<rt?W+7:W)-rt;return N(V?et-j:et+(6-j),tt);case v:case k:return q(ut+"Hours",0);case c:return q(ut+"Minutes",1);case h:return q(ut+"Seconds",2);case s:return q(ut+"Milliseconds",3);default:return this.clone()}},b.endOf=function(M){return this.startOf(M,!1)},b.$set=function(M,L){var x,V=E.p(M),I="set"+(this.$u?"UTC":""),N=(x={},x[v]=I+"Date",x[k]=I+"Date",x[w]=I+"Month",x[_]=I+"FullYear",x[c]=I+"Hours",x[h]=I+"Minutes",x[s]=I+"Seconds",x[o]=I+"Milliseconds",x)[V],q=V===v?this.$D+(L-this.$W):L;if(V===w||V===_){var W=this.clone().set(k,1);W.$d[N](q),W.init(),this.$d=W.set(k,Math.min(this.$D,W.daysInMonth())).$d}else N&&this.$d[N](q);return this.init(),this},b.set=function(M,L){return this.clone().$set(M,L)},b.get=function(M){return this[E.p(M)]()},b.add=function(M,L){var x,V=this;M=Number(M);var I=E.p(L),N=function(tt){var et=O(V);return E.w(et.date(et.date()+Math.round(tt*M)),V)};if(I===w)return this.set(w,this.$M+M);if(I===_)return this.set(_,this.$y+M);if(I===v)return N(1);if(I===g)return N(7);var q=(x={},x[h]=r,x[c]=i,x[s]=n,x)[I]||1,W=this.$d.getTime()+M*q;return E.w(W,this)},b.subtract=function(M,L){return this.add(-1*M,L)},b.format=function(M){var L=this,x=this.$locale();if(!this.isValid())return x.invalidDate||f;var V=M||"YYYY-MM-DDTHH:mm:ssZ",I=E.z(this),N=this.$H,q=this.$m,W=this.$M,tt=x.weekdays,et=x.months,ut=x.meridiem,rt=function(U,G,st,ht){return U&&(U[G]||U(L,V))||st[G].slice(0,ht)},j=function(U){return E.s(N%12||12,U,"0")},d=ut||function(U,G,st){var ht=U<12?"AM":"PM";return st?ht.toLowerCase():ht};return V.replace(a,(function(U,G){return G||(function(st){switch(st){case"YY":return String(L.$y).slice(-2);case"YYYY":return E.s(L.$y,4,"0");case"M":return W+1;case"MM":return E.s(W+1,2,"0");case"MMM":return rt(x.monthsShort,W,et,3);case"MMMM":return rt(et,W);case"D":return L.$D;case"DD":return E.s(L.$D,2,"0");case"d":return String(L.$W);case"dd":return rt(x.weekdaysMin,L.$W,tt,2);case"ddd":return rt(x.weekdaysShort,L.$W,tt,3);case"dddd":return tt[L.$W];case"H":return String(N);case"HH":return E.s(N,2,"0");case"h":return j(1);case"hh":return j(2);case"a":return d(N,q,!0);case"A":return d(N,q,!1);case"m":return String(q);case"mm":return E.s(q,2,"0");case"s":return String(L.$s);case"ss":return E.s(L.$s,2,"0");case"SSS":return E.s(L.$ms,3,"0");case"Z":return I}return null})(U)||I.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(M,L,x){var V,I=this,N=E.p(L),q=O(M),W=(q.utcOffset()-this.utcOffset())*r,tt=this-q,et=function(){return E.m(I,q)};switch(N){case _:V=et()/12;break;case w:V=et();break;case C:V=et()/3;break;case g:V=(tt-W)/6048e5;break;case v:V=(tt-W)/864e5;break;case c:V=tt/i;break;case h:V=tt/r;break;case s:V=tt/n;break;default:V=tt}return x?V:E.a(V)},b.daysInMonth=function(){return this.endOf(w).$D},b.$locale=function(){return D[this.$L]},b.locale=function(M,L){if(!M)return this.$L;var x=this.clone(),V=Y(M,L,!0);return V&&(x.$L=V),x},b.clone=function(){return E.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},A})(),Z=R.prototype;return O.prototype=Z,[["$ms",o],["$s",s],["$m",h],["$H",c],["$W",v],["$M",w],["$y",_],["$D",k]].forEach((function(A){Z[A[1]]=function(b){return this.$g(b,A[0],A[1])}})),O.extend=function(A,b){return A.$i||(A(b,R,O),A.$i=!0),O},O.locale=Y,O.isDayjs=p,O.unix=function(A){return O(1e3*A)},O.en=D[P],O.Ls=D,O.p={},O}))})(Tt)),Tt.exports}var Vn=Ln();const it=St(Vn);var Ft={exports:{}},Un=Ft.exports,le;function jn(){return le||(le=1,(function(e,t){(function(n,r){e.exports=r()})(Un,(function(){return function(n,r,i){n=n||{};var o=r.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function h(v,g,w,C){return o.fromToBase(v,g,w,C)}i.en.relativeTime=s,o.fromToBase=function(v,g,w,C,_){for(var k,f,l,a=w.$locale().relativeTime||s,m=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],S=m.length,F=0;F<S;F+=1){var P=m[F];P.d&&(k=C?i(v).diff(w,P.d,!0):w.diff(v,P.d,!0));var D=(n.rounding||Math.round)(Math.abs(k));if(l=k>0,D<=P.r||!P.r){D<=1&&F>0&&(P=m[F-1]);var y=a[P.l];_&&(D=_(""+D)),f=typeof y=="string"?y.replace("%d",D):y(D,g,P.l,l);break}}if(g)return f;var p=l?a.future:a.past;return typeof p=="function"?p(f):p.replace("%s",f)},o.to=function(v,g){return h(v,g,this,!0)},o.from=function(v,g){return h(v,g,this)};var c=function(v){return v.$u?i.utc():i()};o.toNow=function(v){return this.to(c(this),v)},o.fromNow=function(v){return this.from(c(this),v)}}}))})(Ft)),Ft.exports}var Nn=jn();const Qt=St(Nn),Hn={class:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] sm:grid-cols-[repeat(auto-fill,minmax(240px,1fr))] md:grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 sm:gap-6 px-6"},Rn=["onClick"],zn={key:0,class:"absolute top-2 right-2 bg-accent text-black px-2 py-1 rounded text-xs font-medium flex items-center gap-1"},Kn=["src","alt"],Wn={class:"flex flex-col gap-1"},Zn={key:0,class:"text-gray-5 text-sm font-medium"},Gn={class:"leading-5 text-primary-3 line-clamp-2"},qn={class:"flex items-center justify-between gap-3 mb-2"},Jn={class:"text-gray-400 text-xs sm:text-sm"},Qn={class:"flex flex-col items-end gap-1"},Xn={class:"text-gray-500 text-xs sm:text-sm flex items-center justify-center gap-1"},ti={key:0,class:"flex items-center gap-1 text-xs"},ei=["title"],si=["title"],ni={class:"flex items-center justify-between gap-3 mb-2"},ii={class:"flex items-center gap-2"},ri={key:0,class:"text-gray-500 text-xs sm:text-sm"},oi={key:0,class:"pt-2"},ai={class:"flex flex-wrap gap-1"},li={key:1,class:"pt-2"},ui={class:"flex items-center gap-2"},ci=["href","title"],di=yt({__name:"VideoGrid",props:{videos:{default:()=>[]},highlightVideoId:{default:void 0}},emits:["play","visibleVideosChange"],setup(e,{emit:t}){const n=e,r=t,i=Q([]),o=Q([]),s=Be(new Map),h=Le(f=>{r("visibleVideosChange",f)},150),{stop:c}=Oe(i,f=>{f.forEach(a=>{const m=i.value.indexOf(a.target);if(m!==-1&&n.videos[m]){const S=n.videos[m];s.set(S.id,a.isIntersecting)}});const l=n.videos.filter(a=>s.get(a.id)||!1);v(o.value,l)||(o.value=l,h(l))},{threshold:.1,rootMargin:"50px"}),v=(f,l)=>f.length!==l.length?!1:f.every((a,m)=>a.id===l[m]?.id);Dt(()=>n.videos,()=>{const f=new Set(n.videos.map(l=>l.id));for(const[l]of s)f.has(l)||s.delete(l)},{deep:!0}),ge(()=>{c()});const{settings:g}=vt(Ct()),w=X(()=>g.value.selectedPlatforms||[]);it.extend(Qt);const C=f=>it(f).fromNow(),_=f=>{if(!f)return"";const l=f.split("-");return l.length===1?l[0]:l.length===2?it(`${f}-01`).format("MMM YYYY"):it(f).format("MMM D, YYYY")},k=f=>{if(!f||f.length!==2)return"";const l=f.toUpperCase().split("").map(a=>127397+a.charCodeAt(0));return String.fromCodePoint(...l)};return(f,l)=>(T(),B("div",Hn,[(T(!0),B(lt,null,ct(e.videos,a=>(T(),B("div",{key:a.id,ref_for:!0,ref_key:"videoElements",ref:i,class:dt(["relative group shadow-black hover:shadow-md hover:bg-zinc-900 flex flex-col gap-3 rounded-2xl hover:rounded-b-0 pa-2 transition-shadow duration-200",{"outline-accent outline-2 outline-solid outline-bottom-0":e.highlightVideoId===a.id}])},[u("div",{class:"rounded-2xl overflow-hidden w-full aspect-video relative cursor-pointer",onClick:m=>f.$emit("play",a)},[l[1]||(l[1]=u("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[u("div",{class:"i-mdi-play-outline text-accent text-8xl"})],-1)),e.highlightVideoId===a.id?(T(),B("div",zn,[...l[0]||(l[0]=[u("div",{class:"i-mdi-volume-high w-3 h-3"},null,-1),ot(" Playing ",-1)])])):J("",!0),u("img",{src:`https://i.ytimg.com/vi/${a.id}/hqdefault.jpg`,alt:a.title,class:"w-full h-full object-cover",loading:"lazy"},null,8,Kn)],8,Rn),u("div",Wn,[a.artist?(T(),B("div",Zn,z(a.artist),1)):J("",!0),u("div",Gn,z(a.musicTitle||a.title),1)]),u("div",{class:dt(["hidden group-hover:flex absolute bg-zinc-900 w-full top-full left-0 flex-col z-10 shadow-black shadow-md rounded-b-2xl p-3",{"outline-2 outline-solid outline-accent ":e.highlightVideoId===a.id}])},[u("div",qn,[u("p",Jn,z(a.channel),1),u("div",Qn,[u("p",Xn,[l[2]||(l[2]=u("span",{class:"i-mdi-clock-outline text-xs"},null,-1)),ot(" "+z(a.duration),1)]),a.releasedAt||a.artistCountry?(T(),B("div",ti,[u("span",{class:"inline-block w-4",title:a.artistCountry?`Artist from ${a.artistCountry}`:""},z(a.artistCountry?k(a.artistCountry):""),9,ei),a.releasedAt?(T(),B("span",{key:0,class:"text-gray-500",title:_(a.releasedAt)},z(a.releasedAt.split("-")[0]),9,si)):J("",!0)])):J("",!0)])]),u("div",ni,[u("div",ii,[u("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:_t({backgroundColor:("getUserColor"in f?f.getUserColor:$(qt))(a.userId||" ")})},[...l[3]||(l[3]=[u("span",{class:"i-mdi-account text-xs"},null,-1)])],4)]),a.createdAt?(T(),B("p",ri,z(C(a.createdAt)),1)):J("",!0)]),a.tags&&a.tags.length>0?(T(),B("div",oi,[u("div",ai,[(T(!0),B(lt,null,ct(a.tags,m=>(T(),B("span",{key:m,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg"},z(m),1))),128))])])):J("",!0),a.externalIds&&$(w).some(m=>a.externalIds?.[m])?(T(),B("div",li,[u("div",ui,[l[4]||(l[4]=u("span",{class:"text-xs text-primary-3"},"Listen on:",-1)),(T(!0),B(lt,null,ct($(w).filter(m=>a.externalIds?.[m]),m=>(T(),B("a",{key:m,href:("getPlatformUrl"in f?f.getPlatformUrl:$(xe))(m,a.externalIds[m]),target:"_blank",rel:"noopener noreferrer",class:"text-primary-3 hover:text-accent transition-colors",title:`Listen on ${("getPlatformName"in f?f.getPlatformName:$(ye))(m)}`},[u("div",{class:dt([("getPlatformIcon"in f?f.getPlatformIcon:$($e))(m),"text-xl"])},null,2)],8,ci))),128))])])):J("",!0)],2)],2))),128))]))}}),hi=Object.assign(di,{__name:"VideoGrid"}),fi={class:"p-3 w-md"},mi={class:"flex items-center gap-3"},pi={class:"flex-shrink-0 relative"},gi=["src","alt"],vi={key:0,class:"absolute -top-1 -right-1 bg-accent text-black px-1 py-0.5 rounded text-xs font-medium flex items-center gap-1"},yi={class:"flex-1 min-w-0"},xi={class:"mb-1"},$i={key:0,class:"text-primary-2 text-xs font-medium"},bi={key:1,class:"text-xs text-gray-5 opacity-80 italic"},Mi={class:"font-medium text-primary-3 line-clamp-2 text-sm mb-1"},wi={class:"p-3"},Ai={class:"text-sm text-primary-3 font-mono flex items-center gap-1"},Di={class:"p-3"},ki={class:"flex items-center gap-2 text-xs"},Ci=["title"],_i=["title"],Si={class:"p-3 min-w-xs"},Ei={key:0,class:"relative flex gap-1 max-w-72 overflow-hidden"},Ti={class:"p-3"},Fi={key:0,class:"flex gap-2"},Ii=["href","title"],Bi={class:"p-3 min-w-30"},Yi={class:"flex items-center gap-2"},Pi=["title"],Oi={key:1,class:"text-sm text-primary-3 italic"},Li=yt({__name:"VideoListItem",props:{video:{},isHighlighted:{type:Boolean}},emits:["play"],setup(e){const{settings:t}=vt(Ct()),n=X(()=>t.value.selectedPlatforms||[]);it.extend(Qt);const r=s=>it(s).fromNow(),i=s=>{if(!s)return"";const h=s.split("-");return h.length===1?h[0]:h.length===2?it(`${s}-01`).format("MMM YYYY"):it(s).format("MMM D, YYYY")},o=s=>{if(!s||s.length!==2)return"";const h=s.toUpperCase().split("").map(c=>127397+c.charCodeAt(0));return String.fromCodePoint(...h)};return(s,h)=>(T(),B("tr",{class:dt(["relative border-b border-primary-2/30 hover:bg-bg-gradient transition-colors cursor-pointer",{"after:content-empty after:absolute after:inset-0 after:b-1 after:b-solid after:b-accent after:pointer-events-none after:rounded-2xl":e.isHighlighted}]),onClick:h[1]||(h[1]=c=>s.$emit("play",e.video))},[u("td",fi,[u("div",mi,[u("div",pi,[u("img",{src:`https://i.ytimg.com/vi/${e.video.id}/hqdefault.jpg`,alt:e.video.title,class:"rounded-full size-16 object-cover bg-primary-1"},null,8,gi),h[3]||(h[3]=u("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity rounded"},[u("div",{class:"i-mdi-play-outline text-accent text-2xl"})],-1)),e.isHighlighted?(T(),B("div",vi,[...h[2]||(h[2]=[u("div",{class:"i-mdi-volume-high w-2 h-2"},null,-1)])])):J("",!0)]),u("div",yi,[u("div",xi,[e.video.artist?(T(),B("span",$i,z(e.video.artist),1)):(T(),B("span",bi,z(e.video.channel),1))]),u("h4",Mi,z(e.video.musicTitle||e.video.title),1)])])]),u("td",wi,[u("span",Ai,[h[4]||(h[4]=u("span",{class:"i-mdi-clock-outline text-xs text-gray-6"},null,-1)),ot(" "+z(e.video.duration),1)])]),u("td",Di,[u("div",ki,[u("span",{class:"inline-block w-4",title:e.video.artistCountry?`Artist from ${e.video.artistCountry}`:""},z(e.video.artistCountry?o(e.video.artistCountry):""),9,Ci),e.video.releasedAt?(T(),B("span",{key:0,class:"text-primary-3",title:i(e.video.releasedAt)},z(e.video.releasedAt.split("-")[0]),9,_i)):J("",!0)])]),u("td",Si,[e.video.tags&&e.video.tags.length>0?(T(),B("div",Ei,[(T(!0),B(lt,null,ct(e.video.tags,c=>(T(),B("span",{key:c,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg whitespace-nowrap flex-shrink-0"},z(c),1))),128)),h[5]||(h[5]=u("div",{class:"absolute right-0 top-0 bottom-0 w-10 bg-gradient-to-r from-transparent to-background group-hover:to-bg-gradient pointer-events-none"},null,-1))])):J("",!0)]),u("td",Ti,[e.video.externalIds&&$(n).some(c=>e.video.externalIds?.[c])?(T(),B("div",Fi,[(T(!0),B(lt,null,ct($(n).filter(c=>e.video.externalIds?.[c]),c=>(T(),B("a",{key:c,href:("getPlatformUrl"in s?s.getPlatformUrl:$(xe))(c,e.video.externalIds[c]),target:"_blank",rel:"noopener noreferrer",class:"text-primary-3 hover:text-accent transition-colors",title:`Listen on ${("getPlatformName"in s?s.getPlatformName:$(ye))(c)}`,onClick:h[0]||(h[0]=kt(()=>{},["stop"]))},[u("div",{class:dt(("getPlatformIcon"in s?s.getPlatformIcon:$($e))(c))},null,2)],8,Ii))),128))])):J("",!0)]),u("td",Bi,[u("div",Yi,[u("div",{class:"w-3 h-3 rounded-full flex items-center justify-center text-white text-xs font-bold",style:_t({backgroundColor:("getUserColor"in s?s.getUserColor:$(qt))(e.video.userId||" ")})},[...h[6]||(h[6]=[u("span",{class:"i-mdi-account text-xs"},null,-1)])],4)]),e.video.createdAt?(T(),B("span",{key:0,class:"text-sm text-primary-3",title:new Date(e.video.createdAt).toLocaleString()},z(r(e.video.createdAt)),9,Pi)):(T(),B("span",Oi,"Unknown"))])],2))}}),Vi=Object.assign(Li,{__name:"VideoListItem"}),Ui={class:"rounded-lg sm:px-6"},ji={key:0,class:"text-center py-8"},Ni={key:1,class:"overflow-x-auto"},Hi={key:0},Ri={key:1},zi=yt({__name:"VideoList",props:{videos:{default:()=>[]},highlightVideoId:{default:""},itemHeight:{default:100},topPadding:{default:0},overscan:{default:5}},emits:["play","visibleVideosChange"],setup(e,{emit:t}){const n=e,r=t,i=Q(),{y:o}=Ve(),{height:s}=Ne(),{top:h}=Ue(i),c=je(o,16),v=X(()=>{if(!i.value||n.videos.length===0)return{startIndex:0,endIndex:-1};const f=n.itemHeight,l=c.value,a=h.value,m=s.value,S=a>=0?Math.max(0,l-a):l,F=Math.max(0,S-60),P=Math.max(0,Math.floor(F/f)-n.overscan),D=Math.ceil(m/f)+n.overscan*2,y=Math.min(n.videos.length-1,P+D);return{startIndex:P,endIndex:y}}),g=X(()=>{const{startIndex:f,endIndex:l}=v.value;return n.videos.slice(f,l+1).map((a,m)=>({index:f+m,video:a})).filter(a=>a.video!==void 0).map(({index:a,video:m})=>({index:a,data:m}))}),w=X(()=>v.value.startIndex*n.itemHeight),C=X(()=>{const{endIndex:f}=v.value,l=n.videos.length-1-f;return Math.max(0,l*n.itemHeight)}),_=(f,l)=>f.length!==l.length?!1:f.every((a,m)=>a===l[m]);let k=[];return Dt(g,f=>{const l=f.map(a=>a.data.id);if(!_(k,l)){k=l;const a=f.map(m=>m.data);r("visibleVideosChange",a)}},{immediate:!0,deep:!0}),(f,l)=>{const a=Vi;return T(),B("div",Ui,[e.videos.length?(T(),B("div",Ni,[u("table",{ref_key:"tableContainer",ref:i,class:"w-full border-collapse"},[l[2]||(l[2]=u("thead",{class:"sticky top-0 bg-bg-color z-10"},[u("tr",{class:"border-b border-primary-2"},[u("th",{class:"text-left p-3 font-medium text-primary-4"},"Video"),u("th",{class:"text-left p-3 font-medium text-primary-4"},"Duration"),u("th",{class:"text-left p-3 font-medium text-primary-4"},"Released"),u("th",{class:"text-left p-3 font-medium text-primary-4"},"Tags"),u("th",{class:"text-left p-3 font-medium text-primary-4"},"Platforms"),u("th",{class:"text-left p-3 font-medium text-primary-4"},"Added")])],-1)),u("tbody",null,[$(w)>0?(T(),B("tr",Hi,[u("td",{colspan:6,style:_t({height:$(w)+"px"})},null,4)])):J("",!0),(T(!0),B(lt,null,ct($(g),m=>(T(),At(a,{key:m.data.id,video:m.data,"is-highlighted":e.highlightVideoId===m.data.id,onPlay:l[0]||(l[0]=S=>f.$emit("play",S))},null,8,["video","is-highlighted"]))),128)),$(C)>0?(T(),B("tr",Ri,[u("td",{colspan:6,style:_t({height:$(C)+"px"})},null,4)])):J("",!0)])],512)])):(T(),B("div",ji,[...l[1]||(l[1]=[u("div",{class:"i-mdi-video-outline text-4xl mb-2"},null,-1),u("p",{class:"text-primary-3"},"No videos found.",-1)])]))])}}}),Ee=Object.assign(zi,{__name:"VideoList"});var It={exports:{}},Ki=It.exports,ue;function Wi(){return ue||(ue=1,(function(e,t){(function(n,r){e.exports=r()})(Ki,(function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(o,s,h){var c=s.prototype;h.utc=function(f){var l={date:f,utc:!0,args:arguments};return new s(l)},c.utc=function(f){var l=h(this.toDate(),{locale:this.$L,utc:!0});return f?l.add(this.utcOffset(),n):l},c.local=function(){return h(this.toDate(),{locale:this.$L,utc:!1})};var v=c.parse;c.parse=function(f){f.utc&&(this.$u=!0),this.$utils().u(f.$offset)||(this.$offset=f.$offset),v.call(this,f)};var g=c.init;c.init=function(){if(this.$u){var f=this.$d;this.$y=f.getUTCFullYear(),this.$M=f.getUTCMonth(),this.$D=f.getUTCDate(),this.$W=f.getUTCDay(),this.$H=f.getUTCHours(),this.$m=f.getUTCMinutes(),this.$s=f.getUTCSeconds(),this.$ms=f.getUTCMilliseconds()}else g.call(this)};var w=c.utcOffset;c.utcOffset=function(f,l){var a=this.$utils().u;if(a(f))return this.$u?0:a(this.$offset)?w.call(this):this.$offset;if(typeof f=="string"&&(f=(function(P){P===void 0&&(P="");var D=P.match(r);if(!D)return null;var y=(""+D[0]).match(i)||["-",0,0],p=y[0],Y=60*+y[1]+ +y[2];return Y===0?0:p==="+"?Y:-Y})(f),f===null))return this;var m=Math.abs(f)<=16?60*f:f;if(m===0)return this.utc(l);var S=this.clone();if(l)return S.$offset=m,S.$u=!1,S;var F=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(S=this.local().add(m+F,n)).$offset=m,S.$x.$localOffset=F,S};var C=c.format;c.format=function(f){var l=f||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return C.call(this,l)},c.valueOf=function(){var f=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*f},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var _=c.toDate;c.toDate=function(f){return f==="s"&&this.$offset?h(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():_.call(this)};var k=c.diff;c.diff=function(f,l,a){if(f&&this.$u===f.$u)return k.call(this,f,l,a);var m=this.local(),S=h(f).local();return k.call(m,S,l,a)}}}))})(It)),It.exports}var Zi=Wi();const Gi=St(Zi);var Bt={exports:{}},qi=Bt.exports,ce;function Ji(){return ce||(ce=1,(function(e,t){(function(n,r){e.exports=r()})(qi,(function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,o=/\d\d/,s=/\d\d?/,h=/\d*[^-_:/,()\s\d]+/,c={},v=function(l){return(l=+l)+(l>68?1900:2e3)},g=function(l){return function(a){this[l]=+a}},w=[/[+-]\d\d:?(\d\d)?|Z/,function(l){(this.zone||(this.zone={})).offset=(function(a){if(!a||a==="Z")return 0;var m=a.match(/([+-]|\d\d)/g),S=60*m[1]+(+m[2]||0);return S===0?0:m[0]==="+"?-S:S})(l)}],C=function(l){var a=c[l];return a&&(a.indexOf?a:a.s.concat(a.f))},_=function(l,a){var m,S=c.meridiem;if(S){for(var F=1;F<=24;F+=1)if(l.indexOf(S(F,0,a))>-1){m=F>12;break}}else m=l===(a?"pm":"PM");return m},k={A:[h,function(l){this.afternoon=_(l,!1)}],a:[h,function(l){this.afternoon=_(l,!0)}],Q:[i,function(l){this.month=3*(l-1)+1}],S:[i,function(l){this.milliseconds=100*+l}],SS:[o,function(l){this.milliseconds=10*+l}],SSS:[/\d{3}/,function(l){this.milliseconds=+l}],s:[s,g("seconds")],ss:[s,g("seconds")],m:[s,g("minutes")],mm:[s,g("minutes")],H:[s,g("hours")],h:[s,g("hours")],HH:[s,g("hours")],hh:[s,g("hours")],D:[s,g("day")],DD:[o,g("day")],Do:[h,function(l){var a=c.ordinal,m=l.match(/\d+/);if(this.day=m[0],a)for(var S=1;S<=31;S+=1)a(S).replace(/\[|\]/g,"")===l&&(this.day=S)}],w:[s,g("week")],ww:[o,g("week")],M:[s,g("month")],MM:[o,g("month")],MMM:[h,function(l){var a=C("months"),m=(C("monthsShort")||a.map((function(S){return S.slice(0,3)}))).indexOf(l)+1;if(m<1)throw new Error;this.month=m%12||m}],MMMM:[h,function(l){var a=C("months").indexOf(l)+1;if(a<1)throw new Error;this.month=a%12||a}],Y:[/[+-]?\d+/,g("year")],YY:[o,function(l){this.year=v(l)}],YYYY:[/\d{4}/,g("year")],Z:w,ZZ:w};function f(l){var a,m;a=l,m=c&&c.formats;for(var S=(l=a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(O,E,R){var Z=R&&R.toUpperCase();return E||m[R]||n[R]||m[Z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(A,b,M){return b||M.slice(1)}))}))).match(r),F=S.length,P=0;P<F;P+=1){var D=S[P],y=k[D],p=y&&y[0],Y=y&&y[1];S[P]=Y?{regex:p,parser:Y}:D.replace(/^\[|\]$/g,"")}return function(O){for(var E={},R=0,Z=0;R<F;R+=1){var A=S[R];if(typeof A=="string")Z+=A.length;else{var b=A.regex,M=A.parser,L=O.slice(Z),x=b.exec(L)[0];M.call(E,x),O=O.replace(x,"")}}return(function(V){var I=V.afternoon;if(I!==void 0){var N=V.hours;I?N<12&&(V.hours+=12):N===12&&(V.hours=0),delete V.afternoon}})(E),E}}return function(l,a,m){m.p.customParseFormat=!0,l&&l.parseTwoDigitYear&&(v=l.parseTwoDigitYear);var S=a.prototype,F=S.parse;S.parse=function(P){var D=P.date,y=P.utc,p=P.args;this.$u=y;var Y=p[1];if(typeof Y=="string"){var O=p[2]===!0,E=p[3]===!0,R=O||E,Z=p[2];E&&(Z=p[2]),c=this.$locale(),!O&&Z&&(c=m.Ls[Z]),this.$d=(function(L,x,V,I){try{if(["x","X"].indexOf(x)>-1)return new Date((x==="X"?1e3:1)*L);var N=f(x)(L),q=N.year,W=N.month,tt=N.day,et=N.hours,ut=N.minutes,rt=N.seconds,j=N.milliseconds,d=N.zone,U=N.week,G=new Date,st=tt||(q||W?1:G.getDate()),ht=q||G.getFullYear(),K=0;q&&!W||(K=W>0?W-1:G.getMonth());var Mt,Vt=et||0,Ut=ut||0,jt=rt||0,Nt=j||0;return d?new Date(Date.UTC(ht,K,st,Vt,Ut,jt,Nt+60*d.offset*1e3)):V?new Date(Date.UTC(ht,K,st,Vt,Ut,jt,Nt)):(Mt=new Date(ht,K,st,Vt,Ut,jt,Nt),U&&(Mt=I(Mt).week(U).toDate()),Mt)}catch{return new Date("")}})(D,Y,y,m),this.init(),Z&&Z!==!0&&(this.$L=this.locale(Z).$L),R&&D!=this.format(Y)&&(this.$d=new Date("")),c={}}else if(Y instanceof Array)for(var A=Y.length,b=1;b<=A;b+=1){p[1]=Y[b-1];var M=m.apply(this,p);if(M.isValid()){this.$d=M.$d,this.$L=M.$L,this.init();break}b===A&&(this.$d=new Date(""))}else F.call(this,P)}}}))})(Bt)),Bt.exports}var Qi=Ji();const Xi=St(Qi);var Yt={exports:{}},tr=Yt.exports,de;function er(){return de||(de=1,(function(e,t){(function(n,r){e.exports=r()})(tr,(function(){var n,r,i=1e3,o=6e4,s=36e5,h=864e5,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v=31536e6,g=2628e6,w=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,C={years:v,months:g,days:h,hours:s,minutes:o,seconds:i,milliseconds:1,weeks:6048e5},_=function(D){return D instanceof F},k=function(D,y,p){return new F(D,p,y.$l)},f=function(D){return r.p(D)+"s"},l=function(D){return D<0},a=function(D){return l(D)?Math.ceil(D):Math.floor(D)},m=function(D){return Math.abs(D)},S=function(D,y){return D?l(D)?{negative:!0,format:""+m(D)+y}:{negative:!1,format:""+D+y}:{negative:!1,format:""}},F=(function(){function D(p,Y,O){var E=this;if(this.$d={},this.$l=O,p===void 0&&(this.$ms=0,this.parseFromMilliseconds()),Y)return k(p*C[f(Y)],this);if(typeof p=="number")return this.$ms=p,this.parseFromMilliseconds(),this;if(typeof p=="object")return Object.keys(p).forEach((function(A){E.$d[f(A)]=p[A]})),this.calMilliseconds(),this;if(typeof p=="string"){var R=p.match(w);if(R){var Z=R.slice(2).map((function(A){return A!=null?Number(A):0}));return this.$d.years=Z[0],this.$d.months=Z[1],this.$d.weeks=Z[2],this.$d.days=Z[3],this.$d.hours=Z[4],this.$d.minutes=Z[5],this.$d.seconds=Z[6],this.calMilliseconds(),this}}return this}var y=D.prototype;return y.calMilliseconds=function(){var p=this;this.$ms=Object.keys(this.$d).reduce((function(Y,O){return Y+(p.$d[O]||0)*C[O]}),0)},y.parseFromMilliseconds=function(){var p=this.$ms;this.$d.years=a(p/v),p%=v,this.$d.months=a(p/g),p%=g,this.$d.days=a(p/h),p%=h,this.$d.hours=a(p/s),p%=s,this.$d.minutes=a(p/o),p%=o,this.$d.seconds=a(p/i),p%=i,this.$d.milliseconds=p},y.toISOString=function(){var p=S(this.$d.years,"Y"),Y=S(this.$d.months,"M"),O=+this.$d.days||0;this.$d.weeks&&(O+=7*this.$d.weeks);var E=S(O,"D"),R=S(this.$d.hours,"H"),Z=S(this.$d.minutes,"M"),A=this.$d.seconds||0;this.$d.milliseconds&&(A+=this.$d.milliseconds/1e3,A=Math.round(1e3*A)/1e3);var b=S(A,"S"),M=p.negative||Y.negative||E.negative||R.negative||Z.negative||b.negative,L=R.format||Z.format||b.format?"T":"",x=(M?"-":"")+"P"+p.format+Y.format+E.format+L+R.format+Z.format+b.format;return x==="P"||x==="-P"?"P0D":x},y.toJSON=function(){return this.toISOString()},y.format=function(p){var Y=p||"YYYY-MM-DDTHH:mm:ss",O={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return Y.replace(c,(function(E,R){return R||String(O[E])}))},y.as=function(p){return this.$ms/C[f(p)]},y.get=function(p){var Y=this.$ms,O=f(p);return O==="milliseconds"?Y%=1e3:Y=O==="weeks"?a(Y/C[O]):this.$d[O],Y||0},y.add=function(p,Y,O){var E;return E=Y?p*C[f(Y)]:_(p)?p.$ms:k(p,this).$ms,k(this.$ms+E*(O?-1:1),this)},y.subtract=function(p,Y){return this.add(p,Y,!0)},y.locale=function(p){var Y=this.clone();return Y.$l=p,Y},y.clone=function(){return k(this.$ms,this)},y.humanize=function(p){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!p)},y.valueOf=function(){return this.asMilliseconds()},y.milliseconds=function(){return this.get("milliseconds")},y.asMilliseconds=function(){return this.as("milliseconds")},y.seconds=function(){return this.get("seconds")},y.asSeconds=function(){return this.as("seconds")},y.minutes=function(){return this.get("minutes")},y.asMinutes=function(){return this.as("minutes")},y.hours=function(){return this.get("hours")},y.asHours=function(){return this.as("hours")},y.days=function(){return this.get("days")},y.asDays=function(){return this.as("days")},y.weeks=function(){return this.get("weeks")},y.asWeeks=function(){return this.as("weeks")},y.months=function(){return this.get("months")},y.asMonths=function(){return this.as("months")},y.years=function(){return this.get("years")},y.asYears=function(){return this.as("years")},D})(),P=function(D,y,p){return D.add(y.years()*p,"y").add(y.months()*p,"M").add(y.days()*p,"d").add(y.hours()*p,"h").add(y.minutes()*p,"m").add(y.seconds()*p,"s").add(y.milliseconds()*p,"ms")};return function(D,y,p){n=p,r=p().$utils(),p.duration=function(E,R){var Z=p.locale();return k(E,{$l:Z},R)},p.isDuration=_;var Y=y.prototype.add,O=y.prototype.subtract;y.prototype.add=function(E,R){return _(E)?P(this,E,1):Y.bind(this)(E,R)},y.prototype.subtract=function(E,R){return _(E)?P(this,E,-1):O.bind(this)(E,R)}}}))})(Yt)),Yt.exports}var sr=er();const nr=St(sr),ir={class:"text-xs text-primary-3 text-center mb-1"},rr={class:"relative group max-h-90%"},or=["y"],ar=["y"],lr=["y"],ur=["x","y","width","height"],cr={class:"text-xs text-primary-3 text-center mt-1"},dr={class:"ml-30"},pt=800,hr=1800,fr=157784760,he=1.15,mr=50,pr=yt({__name:"VideoTimeline",props:{videos:{default:()=>[]},highlightVideoId:{default:""}},emits:["play"],setup(e,{emit:t}){const n=e,r=t;it.extend(Gi),it.extend(Qt),it.extend(Xi),it.extend(nr);const i=pt/2,o=Q(1728e3),s=Q(it()),h=Q(),c=Q(!1),v=[{length:1,label:"s",unitName:"second",format:"HH:mm:ss",maxTimespan:300,alignmentUnit:"second",alignmentDivisor:1,incrementAmount:1,incrementUnit:"second"},{length:60,label:"m",unitName:"minute",format:"HH:mm",maxTimespan:3600,alignmentUnit:"minute",alignmentDivisor:1,incrementAmount:1,incrementUnit:"minute"},{length:900,label:"15m",unitName:"minute",format:"HH:mm",maxTimespan:28800,alignmentUnit:"hour",alignmentDivisor:15,incrementAmount:15,incrementUnit:"minute"},{length:3600,label:"h",unitName:"hour",format:"HH:mm",maxTimespan:129600,alignmentUnit:"hour",alignmentDivisor:1,incrementAmount:1,incrementUnit:"hour"},{length:86400,label:"d",unitName:"day",format:"MMM D",maxTimespan:1209600,alignmentUnit:"day",alignmentDivisor:1,incrementAmount:1,incrementUnit:"day"},{length:604800,label:"w",unitName:"week",format:"MMM D",maxTimespan:23587200,alignmentUnit:"week",alignmentDivisor:1,incrementAmount:1,incrementUnit:"week"},{length:2629746,label:"mo",unitName:"month",format:"MMM YYYY",maxTimespan:315569520,alignmentUnit:"month",alignmentDivisor:1,incrementAmount:1,incrementUnit:"month"},{length:31556952,label:"y",unitName:"year",format:"YYYY",maxTimespan:1/0,alignmentUnit:"year",alignmentDivisor:1,incrementAmount:1,incrementUnit:"year"}],g=X(()=>v.find(F=>o.value<=F.maxTimespan)??v[v.length-1]),w=X(()=>{const F=s.value.subtract(o.value,"second"),P=s.value,D=v.findIndex(x=>x.length===g.value.length),y=D>0?v[D-1]:g.value,p=(x,V,I)=>{const N=[],q=Math.ceil(o.value/I.length);let W;if(I.alignmentDivisor===1)W=x.startOf(I.alignmentUnit);else{const et=x.startOf(I.alignmentUnit),ut=x.get(I.alignmentUnit==="hour"?"minute":I.alignmentUnit),rt=Math.floor(ut/I.alignmentDivisor)*I.alignmentDivisor;W=et.set(I.alignmentUnit==="hour"?"minute":I.alignmentUnit,rt)}W.isAfter(x)&&(W=W.subtract(I.incrementAmount,I.incrementUnit));const tt=5;for(let et=0;et<=q+2+tt;et++)N.push(W),W=W.add(I.incrementAmount,I.incrementUnit);return N},Y=(x,V,I)=>{const N=x.format("YYYY-MM-DD-HH-mm-ss"),q=I||g.value;return{y:pt-x.diff(F,"second")/o.value*pt,isMajor:V,time:x,id:`${N}-${q.label}-${V?"major":"minor"}`,...V&&I?{label:a(x,I)}:{}}},O=o.value*.2,E=F.subtract(O,"second"),R=P.add(O,"second"),Z=p(E,R,g.value),A=y.length!==g.value.length?p(E,R,y):[],b=Z.map(x=>Y(x,!0,g.value)),M=A.map(x=>Y(x,!1)).filter(x=>!b.some(V=>Math.abs(V.y-x.y)<2));return[...b,...M].filter(x=>x.y>=-100&&x.y<=pt+100).sort((x,V)=>x.y-V.y)}),C=Q([]),_=X(()=>{const F=C.value;if(F.length===0)return null;const P=F.map(p=>p.createdAt?it(p.createdAt):null).filter(p=>p!==null);if(P.length===0)return null;const[D,y]=P.reduce(([p,Y],O)=>[O.isBefore(p)?O:p,O.isAfter(Y)?O:Y],[P[0],P[0]]);return{centerTime:D.add(y.diff(D,"second")/2,"second"),earliestDate:D,latestDate:y}}),k=X(()=>{const F=_.value;if(!F)return null;const{centerTime:P,earliestDate:D,latestDate:y}=F,p=s.value.subtract(o.value,"second"),Y=pt-P.diff(p,"second")/o.value*pt,O=y.diff(D,"second"),E=Math.max(O/o.value*pt,10);return{y:Y-E/2,height:E,x:65,width:19}}),f=ee(F=>{C.value=F,l()},150);function l(){const F=_.value;if(!F)return;const{centerTime:P}=F,D=s.value.subtract(o.value,"second"),y=pt-P.diff(D,"second")/o.value*pt,p=50,Y=y-i;if(Math.abs(Y)>p){const O=P.add(o.value/2,"second"),E=it(),R=O.isAfter(E)?E:O;S(R)}}function a(F,P){return F.format(P.format)}function m(F,P,D){const y=P||D?he*1.5:he;let p=o.value;return F>0?p=Math.min(p*y,fr):p=Math.max(p/y,hr),p<3600?Math.round(p/30)*30:p<86400?Math.round(p/300)*300:p<604800?Math.round(p/3600)*3600:Math.round(p/86400)*86400}He(h,"wheel",ee(async F=>{F.preventDefault(),F.stopPropagation();const P=m(F.deltaY,F.ctrlKey,F.metaKey);o.value=P},mr),{passive:!1});function S(F){c.value=!0,setTimeout(()=>{s.value=F,setTimeout(()=>{c.value=!1},500)},300)}return(F,P)=>{const D=Ee;return T(),B(lt,null,[u("div",{class:"fixed inset-0 h-screen flex flex-col justify-center pl-3 w-24",onWheel:P[0]||(P[0]=kt(()=>{},["prevent","stop"]))},[u("div",ir,z($(s).format("YYYY MMM D")),1),u("div",rr,[(T(),B("svg",{ref_key:"svgElement",ref:h,class:"h-full",width:"85",viewBox:"0 0 85 800",xmlns:"http://www.w3.org/2000/svg"},[(T(!0),B(lt,null,ct($(w),y=>(T(),B("g",{key:y.id},[y.isMajor?(T(),B("rect",{key:0,x:68,y:y.y-1,width:"12",height:"2",fill:"currentColor",class:"text-primary-4 transition-all duration-300 ease-in-out"},null,8,or)):(T(),B("rect",{key:1,x:72,y:y.y-.5,width:"8",height:"1",fill:"currentColor",class:"text-primary-3 transition-all duration-300 ease-in-out"},null,8,ar)),y.isMajor&&y.label?(T(),B("text",{key:2,x:60,y:y.y+4,class:dt([{"opacity-0":$(c),"opacity-100":!$(c)},"text-xs fill-primary-3 transition-opacity duration-500 ease-in-out"]),"text-anchor":"end"},z(y.label),11,lr)):J("",!0)]))),128)),$(k)?(T(),B("rect",{key:0,x:$(k).x,y:$(k).y,width:$(k).width,height:$(k).height,class:"fill-accent stroke-accent stroke-2 transition-all duration-300 ease-in-out","fill-opacity":"0.3","stroke-opacity":"1",rx:"4",ry:"4"},null,8,ur)):J("",!0)],512)),P[2]||(P[2]=ve('<div class="group-hover:flex hidden absolute inset-0 flex-col items-center justify-center pointer-events-none transition-opacity duration-200"><div class="flex flex-col items-center mb-4 text-accent animate-pulse"><div class="i-mdi-chevron-up text-2xl mb-1"></div><div class="i-mdi-magnify-plus text-lg"></div></div><div class="flex items-center justify-center mb-4"><div class="i-mdi-mouse text-3xl text-accent"></div></div><div class="flex flex-col items-center text-accent animate-pulse"><div class="i-mdi-magnify-minus text-lg"></div><div class="i-mdi-chevron-down text-2xl mt-1"></div></div></div>',1))]),u("div",cr,z($(s).subtract($(o),"second").format("YYYY MMM D")),1)],32),u("div",dr,[nt(D,{videos:e.videos,"highlight-video-id":n.highlightVideoId,onPlay:P[1]||(P[1]=y=>r("play",y)),onVisibleVideosChange:$(f)},null,8,["videos","highlight-video-id","onVisibleVideosChange"])])],64)}}}),gr=Object.assign(pr,{__name:"VideoTimeline"}),vr={class:"pt-24"},yr={key:0,class:"flex items-center justify-center py-12"},xr={key:1,class:"bg-primary-1 border border-primary-2 rounded-lg p-6 m-8"},$r={class:"flex items-center gap-2 text-primary-3"},br={key:2,class:"text-center py-12"},Mr={key:3,class:"flex flex-col gap-12 pt-6 pb-12"},Fr=yt({__name:"index",setup(e){Ye({title:"Music Playlist View",meta:[{name:"description",content:"Browse your cached YouTube playlists"}]});const{loadFirstPlaylist:t,findVideoIndex:n}=Pt(),{currentPlaylist:r,currentVideos:i,loading:o,error:s,hasCurrentPlaylist:h}=vt(Pt()),{viewMode:c}=vt(Ct()),{currentVideo:v}=vt(te()),{initializeGlobalPlayer:g}=te(),w=Q("");pe(async()=>{await t()});const C=_=>{if(!r.value)return;const k=n(_.id);k!==-1&&(w.value=_.id,g(k))};return Dt([v],([_])=>{_?w.value=_.id:w.value=""}),(_,k)=>{const f=Pn,l=hi,a=Ee,m=gr;return T(),B("div",vr,[$(o)?(T(),B("div",yr,[...k[0]||(k[0]=[u("div",{class:"flex items-center gap-3 text-primary-3"},[u("div",{class:"i-mdi-loading animate-spin text-2xl"}),u("span",null,"Loading playlist...")],-1)])])):$(s)?(T(),B("div",xr,[u("div",$r,[k[1]||(k[1]=u("div",{class:"i-mdi-alert-circle"},null,-1)),k[2]||(k[2]=u("strong",null,"Error:",-1)),ot(" "+z($(s)),1)])])):$(h)?(T(),B("div",Mr,[nt(f),$(c)==="grid"?(T(),At(l,{key:0,videos:$(i),"highlight-video-id":$(w),onPlay:C},null,8,["videos","highlight-video-id"])):$(c)==="list"?(T(),At(a,{key:1,videos:$(i),"highlight-video-id":$(w),onPlay:C},null,8,["videos","highlight-video-id"])):$(c)==="timeline"?(T(),At(m,{key:2,"highlight-video-id":$(w),videos:$(i),onPlay:C},null,8,["highlight-video-id","videos"])):J("",!0)])):(T(),B("div",br,[...k[3]||(k[3]=[u("div",{class:"i-mdi-playlist-remove text-6xl text-primary-3 mb-4"},null,-1),u("h3",{class:"text-xl font-semibold mb-2"},"No Playlists Found",-1),u("p",{class:"text-primary-3 mb-6"}," No cached playlists are available. Use the admin panel to fetch playlists from YouTube. ",-1)])]))])}}});export{Fr as default};
