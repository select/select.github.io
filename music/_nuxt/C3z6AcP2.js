import{_ as D}from"./CVQ3SKbN.js";import{u as Y,a as H}from"./CvfxjiHd.js";import{e as $,c as h,f as E,j as t,o as m,a as s,b as p,t as T,w as f,B as K,g as M,x as N,y as J,p as Q,G as W,H as X,l as Z,m as ee}from"./YlxtjBfn.js";import"./CPm_aSjZ.js";const te={key:0,class:"fixed bottom-0 left-1/2 transform -translate-x-1/2 z-40 bg-primary-1 p-4 rounded-xl mb-3"},se={class:"w-full sm:w-md md:w-2xl lg:w-3xl mx-auto flex items-center gap-4"},ae=["src","alt"],oe={class:"flex-1 min-w-0"},ne={class:"text-primary-4 font-medium text-sm line-clamp-1"},le={class:"text-primary-3 text-xs line-clamp-1"},ie={class:"flex items-center gap-2"},re={key:0,class:"i-mdi-pause w-5 h-5"},de={key:1,class:"i-mdi-play w-5 h-5"},ce={class:"text-primary-3 text-xs flex-shrink-0 hidden sm:block"},ue=$({__name:"VideoPlayerBar",setup(v){const{currentVideo:a,isPlaying:d,canPlayPrevious:c,canPlayNext:l,togglePlayPause:y,previousVideo:b,nextVideo:_,closePlayer:x}=Y();return(u,n)=>{const i=D;return t(a)?(m(),h("div",te,[s("div",se,[s("img",{src:`https://i.ytimg.com/vi/${t(a).id}/hqdefault.jpg`,alt:t(a).title,class:"w-12 h-9 object-cover rounded flex-shrink-0"},null,8,ae),s("div",oe,[s("h3",ne,T(t(a).title),1),s("p",le,T(t(a).channel),1)]),s("div",ie,[p(i,{variant:"secondary",onClick:t(b),disabled:!t(c),class:"!p-2"},{default:f(()=>[...n[0]||(n[0]=[s("div",{class:"i-mdi-skip-previous w-4 h-4"},null,-1)])]),_:1},8,["onClick","disabled"]),p(i,{variant:"primary",onClick:t(y),class:"!p-2"},{default:f(()=>[t(d)?(m(),h("div",re)):(m(),h("div",de))]),_:1},8,["onClick"]),p(i,{variant:"secondary",onClick:t(_),disabled:!t(l),class:"!p-2"},{default:f(()=>[...n[1]||(n[1]=[s("div",{class:"i-mdi-skip-next w-4 h-4"},null,-1)])]),_:1},8,["onClick","disabled"])]),s("div",ce,T(t(a).duration),1),p(i,{variant:"ghost",onClick:t(x),class:"!p-2"},{default:f(()=>[...n[2]||(n[2]=[s("div",{class:"i-mdi-close text-xl"},null,-1)])]),_:1},8,["onClick"])])])):E("",!0)}}}),pe=Object.assign(ue,{__name:"VideoPlayerBar"}),me={key:0,class:"fixed top-20 sm:top-1/2 left-1/2 sm:left-auto right-auto sm:right-4 z-50 w-full max-w-xs -translate-x-1/2 sm:translate-x-0 sm:-translate-y-1/2"},ye={class:"bg-primary-1 rounded-2xl shadow-xl overflow-hidden"},_e={class:"absolute top-2 right-2"},fe={class:"p-4"},he={class:"aspect-video bg-black rounded-2xl overflow-hidden"},ve=$({__name:"VideoPlayer",props:{isOpen:{type:Boolean,default:!1},initialVideoIndex:{default:0}},emits:["close","videoChange"],setup(v,{emit:a}){const d=v,c=a,{currentVideo:l,currentIndex:y,isPlaying:b,isPlayerReady:_,canPlayNext:x,setIsPlaying:u,setIsPlayerReady:n,setCurrentIndex:i,setYouTubePlayerInstance:P,togglePlayPause:k,previousVideo:g,nextVideo:w,closePlayer:V,initializeGlobalPlayer:C}=Y(),{currentVideos:j}=K(H()),O=M();let r=null;N(()=>d.initialVideoIndex,e=>{e!==void 0&&i(e)},{immediate:!0}),N(()=>d.isOpen,e=>{e?(j.value.length>0&&C(y.value),J(()=>{z()})):I()}),N([l,y],([e,o])=>{e&&(F(),c("videoChange",e,o))});const z=()=>{if(l.value){if(window.YT&&window.YT.Player)A();else if(!window.onYouTubeIframeAPIReady){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const o=document.getElementsByTagName("script")[0];o&&o.parentNode?o.parentNode.insertBefore(e,o):document.head.appendChild(e),window.onYouTubeIframeAPIReady=()=>{A()}}}},A=()=>{!O.value||!l.value||(I(),r=new window.YT.Player("youtube-player",{height:"100%",width:"100%",videoId:l.value.id,playerVars:{autoplay:1,controls:1,modestbranding:1,rel:0,showinfo:0},events:{onReady:G,onStateChange:L}}))},G=()=>{n(!0),u(!0),P(r)},L=e=>{const o=e.data,B=0,U=1,q=2;switch(o){case U:u(!0);break;case q:u(!1);break;case B:u(!1),x.value&&w();break}},F=()=>{!r||!_.value||!l.value||r.loadVideoById(l.value.id)},I=()=>{r&&typeof r.destroy=="function"&&(r.destroy(),r=null,n(!1),P(null))},R=()=>{V(),c("close")},S=e=>{if(d.isOpen)switch(e.code){case"Escape":R();break;case"Space":e.preventDefault(),k();break;case"ArrowLeft":e.preventDefault(),g();break;case"ArrowRight":e.preventDefault(),w();break}};return Q(()=>{document.addEventListener("keydown",S)}),W(()=>{document.removeEventListener("keydown",S),I()}),(e,o)=>{const B=D;return v.isOpen?(m(),h("div",me,[s("div",ye,[s("div",_e,[p(B,{variant:"ghost",onClick:R,class:"!p-2"},{default:f(()=>[...o[0]||(o[0]=[s("div",{class:"i-mdi-close w-5 h-5"},null,-1)])]),_:1})]),s("div",fe,[s("div",he,[s("div",{ref_key:"playerContainer",ref:O,id:"youtube-player",class:"w-full h-full"},null,512)])])])])):E("",!0)}}}),xe=Object.assign(ve,{__name:"VideoPlayer"}),ke=$({__name:"default",setup(v){const{showPlayerBar:a,currentVideo:d,currentIndex:c,isPlaying:l,canPlayPrevious:y,canPlayNext:b,isFloatingPlayerOpen:_,previousVideo:x,nextVideo:u,closePlayer:n,closeFloatingPlayer:i}=Y(),P=()=>{i()},k=(g,w)=>{};return(g,w)=>{const V=pe,C=xe;return m(),h("div",{class:ee(["min-h-screen bg-bg-color",{"pb-20":t(a)}])},[X(g.$slots,"default"),t(a)?(m(),Z(V,{key:0})):E("",!0),p(C,{isOpen:t(_),initialVideoIndex:t(c),onClose:P,onVideoChange:k},null,8,["isOpen","initialVideoIndex"])],2)}}});export{ke as default};
