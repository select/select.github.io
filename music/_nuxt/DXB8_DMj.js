import{_ as Te}from"./Dlz8z1tI.js";import{_ as he,c as Fe,g as fe,a as me,b as ge}from"./YyGGeXge.js";import{e as vt,h as Q,s as et,x as Mt,c as B,o as E,f as X,a as l,t as W,g as $,F as ot,r as lt,d as at,j as pe,v as Ie,k as Dt,q as At,n as dt,y as Xt,z as pt,b as nt,p as ve,A as ye,m as bt,w as gt,l as kt,B as Be,C as xe,D as Ye,u as Oe}from"./Bo59HTcz.js";import{u as wt,a as Ot,b as Pe,c as $e,d as Le,e as Ve,r as Ue,f as je,g as Ne,h as He,i as te}from"./COugypNV.js";import"./C_lm3Lxf.js";function mt(e){return Array.isArray?Array.isArray(e):we(e)==="[object Array]"}function Re(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ze(e){return e==null?"":Re(e)}function ft(e){return typeof e=="string"}function be(e){return typeof e=="number"}function Ke(e){return e===!0||e===!1||We(e)&&we(e)=="[object Boolean]"}function Me(e){return typeof e=="object"}function We(e){return Me(e)&&e!==null}function rt(e){return e!=null}function Ht(e){return!e.trim().length}function we(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ze="Incorrect 'index' type",Ge=e=>`Invalid value for key ${e}`,qe=e=>`Pattern length exceeds max of ${e}.`,Je=e=>`Missing ${e} property in key`,Qe=e=>`Property 'weight' in key '${e}' must be a positive integer`,ee=Object.prototype.hasOwnProperty;class Xe{constructor(t){this._keys=[],this._keyMap={};let s=0;t.forEach(o=>{let i=Ae(o);this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(o=>{o.weight/=s})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ae(e){let t=null,s=null,o=null,i=1,r=null;if(ft(e)||mt(e))o=e,t=se(e),s=Rt(e);else{if(!ee.call(e,"name"))throw new Error(Je("name"));const n=e.name;if(o=n,ee.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(Qe(n));t=se(n),s=Rt(n),r=e.getFn}return{path:t,id:s,weight:i,src:o,getFn:r}}function se(e){return mt(e)?e:e.split(".")}function Rt(e){return mt(e)?e.join("."):e}function ts(e,t){let s=[],o=!1;const i=(r,n,m)=>{if(rt(r))if(!n[m])s.push(r);else{let c=n[m];const p=r[c];if(!rt(p))return;if(m===n.length-1&&(ft(p)||be(p)||Ke(p)))s.push(ze(p));else if(mt(p)){o=!0;for(let g=0,k=p.length;g<k;g+=1)i(p[g],n,m+1)}else n.length&&i(p,n,m+1)}};return i(e,ft(t)?t.split("."):t,0),o?s:s[0]}const es={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ss={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},ns={location:0,threshold:.6,distance:100},is={useExtendedSearch:!1,getFn:ts,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var j={...ss,...es,...ns,...is};const rs=/[^ ]+/g;function os(e=1,t=3){const s=new Map,o=Math.pow(10,t);return{get(i){const r=i.match(rs).length;if(s.has(r))return s.get(r);const n=1/Math.pow(r,.5*e),m=parseFloat(Math.round(n*o)/o);return s.set(r,m),m},clear(){s.clear()}}}class qt{constructor({getFn:t=j.getFn,fieldNormWeight:s=j.fieldNormWeight}={}){this.norm=os(s,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((s,o)=>{this._keysMap[s.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ft(this.docs[0])?this.docs.forEach((t,s)=>{this._addString(t,s)}):this.docs.forEach((t,s)=>{this._addObject(t,s)}),this.norm.clear())}add(t){const s=this.size();ft(t)?this._addString(t,s):this._addObject(t,s)}removeAt(t){this.records.splice(t,1);for(let s=t,o=this.size();s<o;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(t,s){return t[this._keysMap[s]]}size(){return this.records.length}_addString(t,s){if(!rt(t)||Ht(t))return;let o={v:t,i:s,n:this.norm.get(t)};this.records.push(o)}_addObject(t,s){let o={i:s,$:{}};this.keys.forEach((i,r)=>{let n=i.getFn?i.getFn(t):this.getFn(t,i.path);if(rt(n)){if(mt(n)){let m=[];const c=[{nestedArrIndex:-1,value:n}];for(;c.length;){const{nestedArrIndex:p,value:g}=c.pop();if(rt(g))if(ft(g)&&!Ht(g)){let k={v:g,i:p,n:this.norm.get(g)};m.push(k)}else mt(g)&&g.forEach((k,D)=>{c.push({nestedArrIndex:D,value:k})})}o.$[r]=m}else if(ft(n)&&!Ht(n)){let m={v:n,n:this.norm.get(n)};o.$[r]=m}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function De(e,t,{getFn:s=j.getFn,fieldNormWeight:o=j.fieldNormWeight}={}){const i=new qt({getFn:s,fieldNormWeight:o});return i.setKeys(e.map(Ae)),i.setSources(t),i.create(),i}function as(e,{getFn:t=j.getFn,fieldNormWeight:s=j.fieldNormWeight}={}){const{keys:o,records:i}=e,r=new qt({getFn:t,fieldNormWeight:s});return r.setKeys(o),r.setIndexRecords(i),r}function Et(e,{errors:t=0,currentLocation:s=0,expectedLocation:o=0,distance:i=j.distance,ignoreLocation:r=j.ignoreLocation}={}){const n=t/e.length;if(r)return n;const m=Math.abs(o-s);return i?n+m/i:m?1:n}function ls(e=[],t=j.minMatchCharLength){let s=[],o=-1,i=-1,r=0;for(let n=e.length;r<n;r+=1){let m=e[r];m&&o===-1?o=r:!m&&o!==-1&&(i=r-1,i-o+1>=t&&s.push([o,i]),o=-1)}return e[r-1]&&r-o>=t&&s.push([o,r-1]),s}const xt=32;function us(e,t,s,{location:o=j.location,distance:i=j.distance,threshold:r=j.threshold,findAllMatches:n=j.findAllMatches,minMatchCharLength:m=j.minMatchCharLength,includeMatches:c=j.includeMatches,ignoreLocation:p=j.ignoreLocation}={}){if(t.length>xt)throw new Error(qe(xt));const g=t.length,k=e.length,D=Math.max(0,Math.min(o,k));let w=r,b=D;const d=m>1||c,a=d?Array(k):[];let u;for(;(u=e.indexOf(t,b))>-1;){let M=Et(t,{currentLocation:u,expectedLocation:D,distance:i,ignoreLocation:p});if(w=Math.min(M,w),b=u+g,d){let y=0;for(;y<g;)a[u+y]=1,y+=1}}b=-1;let f=[],_=1,Y=g+k;const I=1<<g-1;for(let M=0;M<g;M+=1){let y=0,O=Y;for(;y<O;)Et(t,{errors:M,currentLocation:D+O,expectedLocation:D,distance:i,ignoreLocation:p})<=w?y=O:Y=O,O=Math.floor((Y-y)/2+y);Y=O;let P=Math.max(1,D-O+1),F=n?k:Math.min(D+O,k)+g,R=Array(F+2);R[F+1]=(1<<M)-1;for(let C=F;C>=P;C-=1){let v=C-1,x=s[e.charAt(v)];if(d&&(a[v]=+!!x),R[C]=(R[C+1]<<1|1)&x,M&&(R[C]|=(f[C+1]|f[C])<<1|1|f[C+1]),R[C]&I&&(_=Et(t,{errors:M,currentLocation:v,expectedLocation:D,distance:i,ignoreLocation:p}),_<=w)){if(w=_,b=v,b<=D)break;P=Math.max(1,2*D-b)}}if(Et(t,{errors:M+1,currentLocation:D,expectedLocation:D,distance:i,ignoreLocation:p})>w)break;f=R}const T={isMatch:b>=0,score:Math.max(.001,_)};if(d){const M=ls(a,m);M.length?c&&(T.indices=M):T.isMatch=!1}return T}function cs(e){let t={};for(let s=0,o=e.length;s<o;s+=1){const i=e.charAt(s);t[i]=(t[i]||0)|1<<o-s-1}return t}const Pt=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class ke{constructor(t,{location:s=j.location,threshold:o=j.threshold,distance:i=j.distance,includeMatches:r=j.includeMatches,findAllMatches:n=j.findAllMatches,minMatchCharLength:m=j.minMatchCharLength,isCaseSensitive:c=j.isCaseSensitive,ignoreDiacritics:p=j.ignoreDiacritics,ignoreLocation:g=j.ignoreLocation}={}){if(this.options={location:s,threshold:o,distance:i,includeMatches:r,findAllMatches:n,minMatchCharLength:m,isCaseSensitive:c,ignoreDiacritics:p,ignoreLocation:g},t=c?t:t.toLowerCase(),t=p?Pt(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const k=(w,b)=>{this.chunks.push({pattern:w,alphabet:cs(w),startIndex:b})},D=this.pattern.length;if(D>xt){let w=0;const b=D%xt,d=D-b;for(;w<d;)k(this.pattern.substr(w,xt),w),w+=xt;if(b){const a=D-xt;k(this.pattern.substr(a),a)}}else k(this.pattern,0)}searchIn(t){const{isCaseSensitive:s,ignoreDiacritics:o,includeMatches:i}=this.options;if(t=s?t:t.toLowerCase(),t=o?Pt(t):t,this.pattern===t){let d={isMatch:!0,score:0};return i&&(d.indices=[[0,t.length-1]]),d}const{location:r,distance:n,threshold:m,findAllMatches:c,minMatchCharLength:p,ignoreLocation:g}=this.options;let k=[],D=0,w=!1;this.chunks.forEach(({pattern:d,alphabet:a,startIndex:u})=>{const{isMatch:f,score:_,indices:Y}=us(t,d,a,{location:r+u,distance:n,threshold:m,findAllMatches:c,minMatchCharLength:p,includeMatches:i,ignoreLocation:g});f&&(w=!0),D+=_,f&&Y&&(k=[...k,...Y])});let b={isMatch:w,score:w?D/this.chunks.length:1};return w&&i&&(b.indices=k),b}}class yt{constructor(t){this.pattern=t}static isMultiMatch(t){return ne(t,this.multiRegex)}static isSingleMatch(t){return ne(t,this.singleRegex)}search(){}}function ne(e,t){const s=e.match(t);return s?s[1]:null}class ds extends yt{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const s=t===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class hs extends yt{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const o=t.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,t.length-1]}}}class fs extends yt{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const s=t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class ms extends yt{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const s=!t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class gs extends yt{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const s=t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class ps extends yt{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const s=!t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class _e extends yt{constructor(t,{location:s=j.location,threshold:o=j.threshold,distance:i=j.distance,includeMatches:r=j.includeMatches,findAllMatches:n=j.findAllMatches,minMatchCharLength:m=j.minMatchCharLength,isCaseSensitive:c=j.isCaseSensitive,ignoreDiacritics:p=j.ignoreDiacritics,ignoreLocation:g=j.ignoreLocation}={}){super(t),this._bitapSearch=new ke(t,{location:s,threshold:o,distance:i,includeMatches:r,findAllMatches:n,minMatchCharLength:m,isCaseSensitive:c,ignoreDiacritics:p,ignoreLocation:g})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Se extends yt{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let s=0,o;const i=[],r=this.pattern.length;for(;(o=t.indexOf(this.pattern,s))>-1;)s=o+r,i.push([o,s-1]);const n=!!i.length;return{isMatch:n,score:n?0:1,indices:i}}}const zt=[ds,Se,fs,ms,ps,gs,hs,_e],ie=zt.length,vs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ys="|";function xs(e,t={}){return e.split(ys).map(s=>{let o=s.trim().split(vs).filter(r=>r&&!!r.trim()),i=[];for(let r=0,n=o.length;r<n;r+=1){const m=o[r];let c=!1,p=-1;for(;!c&&++p<ie;){const g=zt[p];let k=g.isMultiMatch(m);k&&(i.push(new g(k,t)),c=!0)}if(!c)for(p=-1;++p<ie;){const g=zt[p];let k=g.isSingleMatch(m);if(k){i.push(new g(k,t));break}}}return i})}const $s=new Set([_e.type,Se.type]);class bs{constructor(t,{isCaseSensitive:s=j.isCaseSensitive,ignoreDiacritics:o=j.ignoreDiacritics,includeMatches:i=j.includeMatches,minMatchCharLength:r=j.minMatchCharLength,ignoreLocation:n=j.ignoreLocation,findAllMatches:m=j.findAllMatches,location:c=j.location,threshold:p=j.threshold,distance:g=j.distance}={}){this.query=null,this.options={isCaseSensitive:s,ignoreDiacritics:o,includeMatches:i,minMatchCharLength:r,findAllMatches:m,ignoreLocation:n,location:c,threshold:p,distance:g},t=s?t:t.toLowerCase(),t=o?Pt(t):t,this.pattern=t,this.query=xs(this.pattern,this.options)}static condition(t,s){return s.useExtendedSearch}searchIn(t){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:i,ignoreDiacritics:r}=this.options;t=i?t:t.toLowerCase(),t=r?Pt(t):t;let n=0,m=[],c=0;for(let p=0,g=s.length;p<g;p+=1){const k=s[p];m.length=0,n=0;for(let D=0,w=k.length;D<w;D+=1){const b=k[D],{isMatch:d,indices:a,score:u}=b.search(t);if(d){if(n+=1,c+=u,o){const f=b.constructor.type;$s.has(f)?m=[...m,...a]:m.push(a)}}else{c=0,n=0,m.length=0;break}}if(n){let D={isMatch:!0,score:c/n};return o&&(D.indices=m),D}}return{isMatch:!1,score:1}}}const Kt=[];function Ms(...e){Kt.push(...e)}function Wt(e,t){for(let s=0,o=Kt.length;s<o;s+=1){let i=Kt[s];if(i.condition(e,t))return new i(e,t)}return new ke(e,t)}const Lt={AND:"$and",OR:"$or"},Zt={PATH:"$path",PATTERN:"$val"},Gt=e=>!!(e[Lt.AND]||e[Lt.OR]),ws=e=>!!e[Zt.PATH],As=e=>!mt(e)&&Me(e)&&!Gt(e),re=e=>({[Lt.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ce(e,t,{auto:s=!0}={}){const o=i=>{let r=Object.keys(i);const n=ws(i);if(!n&&r.length>1&&!Gt(i))return o(re(i));if(As(i)){const c=n?i[Zt.PATH]:r[0],p=n?i[Zt.PATTERN]:i[c];if(!ft(p))throw new Error(Ge(c));const g={keyId:Rt(c),pattern:p};return s&&(g.searcher=Wt(p,t)),g}let m={children:[],operator:r[0]};return r.forEach(c=>{const p=i[c];mt(p)&&p.forEach(g=>{m.children.push(o(g))})}),m};return Gt(e)||(e=re(e)),o(e)}function Ds(e,{ignoreFieldNorm:t=j.ignoreFieldNorm}){e.forEach(s=>{let o=1;s.matches.forEach(({key:i,norm:r,score:n})=>{const m=i?i.weight:null;o*=Math.pow(n===0&&m?Number.EPSILON:n,(m||1)*(t?1:r))}),s.score=o})}function ks(e,t){const s=e.matches;t.matches=[],rt(s)&&s.forEach(o=>{if(!rt(o.indices)||!o.indices.length)return;const{indices:i,value:r}=o;let n={indices:i,value:r};o.key&&(n.key=o.key.src),o.idx>-1&&(n.refIndex=o.idx),t.matches.push(n)})}function _s(e,t){t.score=e.score}function Ss(e,t,{includeMatches:s=j.includeMatches,includeScore:o=j.includeScore}={}){const i=[];return s&&i.push(ks),o&&i.push(_s),e.map(r=>{const{idx:n}=r,m={item:t[n],refIndex:n};return i.length&&i.forEach(c=>{c(r,m)}),m})}class $t{constructor(t,s={},o){this.options={...j,...s},this.options.useExtendedSearch,this._keyStore=new Xe(this.options.keys),this.setCollection(t,o)}setCollection(t,s){if(this._docs=t,s&&!(s instanceof qt))throw new Error(Ze);this._myIndex=s||De(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){rt(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const s=[];for(let o=0,i=this._docs.length;o<i;o+=1){const r=this._docs[o];t(r,o)&&(this.removeAt(o),o-=1,i-=1,s.push(r))}return s}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:s=-1}={}){const{includeMatches:o,includeScore:i,shouldSort:r,sortFn:n,ignoreFieldNorm:m}=this.options;let c=ft(t)?ft(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ds(c,{ignoreFieldNorm:m}),r&&c.sort(n),be(s)&&s>-1&&(c=c.slice(0,s)),Ss(c,this._docs,{includeMatches:o,includeScore:i})}_searchStringList(t){const s=Wt(t,this.options),{records:o}=this._myIndex,i=[];return o.forEach(({v:r,i:n,n:m})=>{if(!rt(r))return;const{isMatch:c,score:p,indices:g}=s.searchIn(r);c&&i.push({item:r,idx:n,matches:[{score:p,value:r,norm:m,indices:g}]})}),i}_searchLogical(t){const s=Ce(t,this.options),o=(m,c,p)=>{if(!m.children){const{keyId:k,searcher:D}=m,w=this._findMatches({key:this._keyStore.get(k),value:this._myIndex.getValueForItemAtKeyId(c,k),searcher:D});return w&&w.length?[{idx:p,item:c,matches:w}]:[]}const g=[];for(let k=0,D=m.children.length;k<D;k+=1){const w=m.children[k],b=o(w,c,p);if(b.length)g.push(...b);else if(m.operator===Lt.AND)return[]}return g},i=this._myIndex.records,r={},n=[];return i.forEach(({$:m,i:c})=>{if(rt(m)){let p=o(s,m,c);p.length&&(r[c]||(r[c]={idx:c,item:m,matches:[]},n.push(r[c])),p.forEach(({matches:g})=>{r[c].matches.push(...g)}))}}),n}_searchObjectList(t){const s=Wt(t,this.options),{keys:o,records:i}=this._myIndex,r=[];return i.forEach(({$:n,i:m})=>{if(!rt(n))return;let c=[];o.forEach((p,g)=>{c.push(...this._findMatches({key:p,value:n[g],searcher:s}))}),c.length&&r.push({idx:m,item:n,matches:c})}),r}_findMatches({key:t,value:s,searcher:o}){if(!rt(s))return[];let i=[];if(mt(s))s.forEach(({v:r,i:n,n:m})=>{if(!rt(r))return;const{isMatch:c,score:p,indices:g}=o.searchIn(r);c&&i.push({score:p,key:t,value:r,idx:n,norm:m,indices:g})});else{const{v:r,n}=s,{isMatch:m,score:c,indices:p}=o.searchIn(r);m&&i.push({score:c,key:t,value:r,norm:n,indices:p})}return i}}$t.version="7.1.0";$t.createIndex=De;$t.parseIndex=as;$t.config=j;$t.parseQuery=Ce;Ms(bs);const Cs={class:"relative"},Es=["for"],Ts={class:"relative rounded-lg bg-primary-1 focus-within:ring-2 focus-within:ring-accent focus-within:border-accent transition-colors","data-multiselect":""},Fs={key:0,class:"flex flex-wrap gap-1 p-2 border-b border-primary-2"},Is=["onClick"],Bs={class:"relative"},Ys=["id","placeholder","disabled"],Os={key:1,class:"absolute z-50 w-full mt-1 bg-primary-1 border border-primary-2 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Ps=["onClick","onMouseenter"],Ls={key:0,class:"i-mdi-check text-accent"},Vs={class:"text-primary-4"},Us={key:1,class:"px-3 py-2 text-primary-3 text-center"},js=vt({__name:"AppInputMultiSelect",props:{id:{default:()=>`multiselect-${Math.random().toString(36).substr(2,9)}`},label:{default:""},placeholder:{default:"Search and select options..."},options:{},modelValue:{},disabled:{type:Boolean,default:!1},maxSelections:{default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=t,i=Q(""),r=Q(!1),n=Q(-1),m=Q(),c=et({get:()=>s.modelValue,set:a=>o("update:modelValue",a)}),p=et(()=>new $t(s.options,{threshold:.3,includeScore:!0,minMatchCharLength:1})),g=et(()=>i.value.trim()?p.value.search(i.value).map(u=>u.item).slice(0,50):s.options.slice(0,50)),k=a=>{const u=[...c.value],f=u.indexOf(a);f>-1?u.splice(f,1):(!s.maxSelections||u.length<s.maxSelections)&&u.push(a),c.value=u,n.value=-1},D=a=>{const u=[...c.value],f=u.indexOf(a);f>-1&&(u.splice(f,1),c.value=u)},w=a=>{a&&!c.value.includes(a)&&(!s.maxSelections||c.value.length<s.maxSelections)&&(c.value=[...c.value,a]),r.value=!1,n.value=-1},b=()=>{s.disabled||(r.value=!r.value,r.value&&Xt(()=>{m.value?.focus()}))},d=a=>{if(s.disabled)return;const u=i.value.trim()&&!s.options.includes(i.value.trim())&&!c.value.includes(i.value.trim()),f=g.value.length+(u?1:0);switch(a.key){case"ArrowDown":a.preventDefault(),r.value=!0,n.value<f-1?n.value++:n.value=0;break;case"ArrowUp":a.preventDefault(),r.value=!0,n.value>0?n.value--:n.value=f-1;break;case"Enter":a.preventDefault(),r.value&&n.value>=0&&f>0?n.value<g.value.length?k(g.value[n.value]):u&&w(i.value.trim()):(r.value=!0,f>0&&(n.value=0));break;case"Escape":a.preventDefault(),r.value=!1,n.value=-1,m.value?.blur();break;case"Backspace":if(!i.value&&c.value.length>0){a.preventDefault();const _=c.value[c.value.length-1];_&&D(_)}break}};return Mt(i,()=>{n.value=-1}),Mt(r,a=>{a&&Xt(()=>{m.value?.focus()})}),(a,u)=>(E(),B("div",Cs,[e.label?(E(),B("label",{key:0,for:e.id,class:"block text-sm font-medium mb-2"},W(e.label),9,Es)):X("",!0),l("div",Ts,[$(c).length>0?(E(),B("div",Fs,[(E(!0),B(ot,null,lt($(c),f=>(E(),B("span",{key:f,class:"inline-flex items-center gap-1 px-2 py-1 bg-primary-2 text-primary-4 text-xs rounded"},[at(W(f)+" ",1),l("button",{type:"button",class:"hover:text-accent transition-colors",onClick:_=>D(f)},[...u[5]||(u[5]=[l("div",{class:"i-mdi-close text-xs"},null,-1)])],8,Is)]))),128))])):X("",!0),l("div",Bs,[pe(l("input",{id:e.id,ref_key:"inputRef",ref:m,"onUpdate:modelValue":u[0]||(u[0]=f=>At(i)?i.value=f:null),type:"text",placeholder:e.placeholder,disabled:e.disabled,class:"w-full px-3 py-2 bg-transparent text-primary-4 placeholder-primary-3 focus:outline-none",autocomplete:"off",onFocus:u[1]||(u[1]=f=>r.value=!0),onKeydown:Dt(d,["stop"])},null,40,Ys),[[Ie,$(i)]]),l("button",{type:"button",class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-primary-3 hover:text-accent transition-colors",onClick:b},[l("div",{class:dt(["transition-transform duration-200",$(r)?"i-mdi-chevron-up":"i-mdi-chevron-down"])},null,2)])])]),$(r)&&($(g).length>0||$(i).trim())?(E(),B("div",Os,[(E(!0),B(ot,null,lt($(g),(f,_)=>(E(),B("button",{key:f,type:"button",class:dt(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center justify-between",$(n)===_?"bg-bg-gradient":"",$(c).includes(f)?"text-accent":"text-primary-4"]),onClick:Y=>k(f),onMouseenter:Y=>n.value=_},[l("span",null,W(f),1),$(c).includes(f)?(E(),B("div",Ls)):X("",!0)],42,Ps))),128)),$(i).trim()&&!e.options.includes($(i).trim())&&!$(c).includes($(i).trim())?(E(),B("button",{key:0,type:"button",class:dt(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center gap-2 border-t border-primary-2",$(n)===$(g).length?"bg-bg-gradient":""]),onClick:u[2]||(u[2]=f=>w($(i).trim())),onMouseenter:u[3]||(u[3]=f=>n.value=$(g).length)},[u[6]||(u[6]=l("div",{class:"i-mdi-plus text-accent"},null,-1)),l("span",Vs,'Add "'+W($(i).trim())+'"',1)],34)):X("",!0),$(g).length===0&&!$(i).trim()?(E(),B("div",Us," No options available ")):X("",!0)])):X("",!0),$(r)?(E(),B("div",{key:2,class:"fixed inset-0 z-40",onClick:u[4]||(u[4]=f=>r.value=!1)})):X("",!0)]))}}),Ns=Object.assign(js,{__name:"AppInputMultiSelect"}),Hs={class:"flex justify-between items-center mb-4"},Rs={class:"space-y-3"},zs={class:"flex justify-between items-center"},Ks={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Ws={class:"flex justify-between items-center"},Zs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Gs={class:"flex justify-between items-center"},qs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Js={class:"flex justify-between items-center"},Qs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Xs={class:"flex justify-between items-center"},tn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},en={class:"flex justify-between items-center"},sn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},nn={class:"flex justify-between items-center"},rn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},on={class:"flex justify-between items-center"},an={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},ln={class:"flex justify-between items-center"},un={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},cn={class:"mt-6 pt-4 border-t border-primary-2"},dn={class:"text-sm text-primary-3"},hn={class:"text-primary-4 font-medium"},fn=vt({__name:"KeyboardShortcutsHelp",props:{showHelp:{type:Boolean,default:!1}},emits:["close"],setup(e){const{currentKeyboardShortcuts:t,settings:s}=pt(wt()),o=et(()=>({playPause:i(t.value.playPause),nextTrack:i(t.value.nextTrack),previousTrack:i(t.value.previousTrack),volumeUp:i(t.value.volumeUp),volumeDown:i(t.value.volumeDown),mute:i(t.value.mute),seekForward:i(t.value.seekForward),seekBackward:i(t.value.seekBackward),focusSearch:i(t.value.focusSearch)})),i=r=>({" ":"Space",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓",x:"X",z:"Z",b:"B",c:"C",v:"V",m:"M",l:"L",j:"J",k:"K",n:"N",p:"P","ctrl+k":"Ctrl+K"})[r]||r.toUpperCase();return(r,n)=>{const m=he;return e.showHelp?(E(),B("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:n[2]||(n[2]=c=>r.$emit("close"))},[l("div",{class:"bg-primary-1 rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:n[1]||(n[1]=Dt(()=>{},["stop"]))},[l("div",Hs,[n[3]||(n[3]=l("h3",{class:"text-lg font-semibold text-primary-4"},"Keyboard Shortcuts",-1)),nt(m,{icon:"i-mdi-close",variant:"ghost",size:"small",onClick:n[0]||(n[0]=c=>r.$emit("close"))})]),l("div",Rs,[l("div",zs,[n[4]||(n[4]=l("span",{class:"text-primary-3"},"Play/Pause",-1)),l("kbd",Ks,W($(o).playPause),1)]),l("div",Ws,[n[5]||(n[5]=l("span",{class:"text-primary-3"},"Next Track",-1)),l("kbd",Zs,W($(o).nextTrack),1)]),l("div",Gs,[n[6]||(n[6]=l("span",{class:"text-primary-3"},"Previous Track",-1)),l("kbd",qs,W($(o).previousTrack),1)]),l("div",Js,[n[7]||(n[7]=l("span",{class:"text-primary-3"},"Volume Up",-1)),l("kbd",Qs,W($(o).volumeUp),1)]),l("div",Xs,[n[8]||(n[8]=l("span",{class:"text-primary-3"},"Volume Down",-1)),l("kbd",tn,W($(o).volumeDown),1)]),l("div",en,[n[9]||(n[9]=l("span",{class:"text-primary-3"},"Mute",-1)),l("kbd",sn,W($(o).mute),1)]),l("div",nn,[n[10]||(n[10]=l("span",{class:"text-primary-3"},"Seek Forward",-1)),l("kbd",rn,W($(o).seekForward),1)]),l("div",on,[n[11]||(n[11]=l("span",{class:"text-primary-3"},"Seek Backward",-1)),l("kbd",an,W($(o).seekBackward),1)]),l("div",ln,[n[12]||(n[12]=l("span",{class:"text-primary-3"},"Focus Search",-1)),l("kbd",un,W($(o).focusSearch),1)])]),l("div",cn,[l("p",dn,[n[13]||(n[13]=at(" Current scheme: ",-1)),l("span",hn,W($(s).keyboardShortcutScheme==="simple"?"Default":$(s).keyboardShortcutScheme==="winamp"?"Winamp Style":"YouTube Style"),1)]),n[14]||(n[14]=l("p",{class:"text-xs text-primary-3 mt-2"}," Change keyboard shortcuts in the Filters panel ",-1))])])])):X("",!0)}}}),mn=Object.assign(fn,{__name:"KeyboardShortcutsHelp"}),Jt=e=>{let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const s=Math.abs(t)%360,o=65+Math.abs(t)%20,i=45+Math.abs(t)%15;return`hsl(${s}, ${o}%, ${i}%)`},gn={class:"fixed top-6 left-0 flex flex-col gap-8 sm:gap-12 px-4 sm:px-6 z-1 w-full"},pn={class:"backdrop-blur-3xl rounded-2xl flex justify-center items-center gap-4 sm:gap-6 w-full max-w-2xl mx-auto pl-3"},vn={class:"flex-1 min-w-0 overflow-hidden"},yn={class:"flex gap-2 sm:gap-3 items-center flex-shrink-0"},xn={key:0,class:"rounded-lg p-4 space-y-4 backdrop-blur-2xl bg-bg-gradient"},$n={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},bn={class:"flex flex-wrap gap-2"},Mn={class:"grid grid-cols-1 gap-4"},wn={class:"flex flex-wrap gap-2 max-h-32 overflow-y-auto"},An=["onClick"],Dn={class:"text-xs text-primary-3 px-2 py-1 rounded-full"},kn={class:"grid grid-cols-1 gap-4"},_n={class:"flex flex-wrap gap-2"},Sn={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Cn={class:"flex justify-between"},En=["value"],Tn=["value"],Fn={class:"flex justify-between items-center"},In={class:"text-sm text-primary-3"},Bn=vt({__name:"VideoSearch",setup(e){const{setCurrentPlaylistVideos:t}=Ot(),{setKeyboardShortcutScheme:s,setSelectedPlatforms:o}=wt(),{originalCurrentPlaylist:i}=pt(Ot()),{settings:r,availableShortcutSchemes:n,viewMode:m}=pt(wt());Q("day");const c=Q(!1);let p=0,g=null;const k=()=>{const U=window.scrollY;g&&clearTimeout(g),g=setTimeout(()=>{Math.abs(U-p)>500&&w.value&&(w.value=!1),p=U},150)};ve(()=>{c.value=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",p=window.scrollY,window.addEventListener("scroll",k)}),ye(()=>{window.removeEventListener("scroll",k),g&&clearTimeout(g)});const D=Q(""),w=Q(!1),b=Q([]),d=Q([]),a=Q([]),u=Q(""),f=Q("createdAt"),_=Q(!1),Y=Q(!1),I=et(()=>i.value?.videos||[]),T=et(()=>I.value.length),M=et(()=>b.value.length>0||d.value.length>0||a.value.length>0||u.value!==""||D.value.trim()!==""),y=et(()=>[...new Set(I.value.filter(h=>h.artist).map(h=>h.artist))].sort()),O=et(()=>{const U=new Set;return I.value.forEach(h=>{h.tags&&h.tags.forEach(N=>U.add(N))}),Array.from(U).sort()}),P=et(()=>{const U=new Map;return I.value.forEach(h=>{const N=h.userId||null;U.set(N,(U.get(N)||0)+1)}),Array.from(U.entries()).map(([h,N])=>({userId:h||"Anonymous",originalUserId:h,count:N,color:h?Jt(h):"#666666"})).sort((h,N)=>N.count-h.count)}),F={keys:[{name:"title",weight:.3},{name:"musicTitle",weight:.4},{name:"artist",weight:.4},{name:"tags",weight:.2},{name:"description",weight:.1}],threshold:.3,includeScore:!0,minMatchCharLength:2},R=et(()=>new $t(I.value,F)),K=U=>{if(!U)return 0;const h=U.split(":").map(Number);return h.length===2&&h[0]!==void 0&&h[1]!==void 0?h[0]*60+h[1]:h.length===3&&h[0]!==void 0&&h[1]!==void 0&&h[2]!==void 0?h[0]*3600+h[1]*60+h[2]:0},C=U=>{if(!u.value)return!0;const N=K(U.duration)/60;switch(u.value){case"short":return N<4;case"medium":return N>=4&&N<=20;case"long":return N>20;default:return!0}},v=U=>{const h=a.value.indexOf(U);h>-1?a.value.splice(h,1):a.value.push(U)},x=et(()=>{let U=[];return D.value.trim()?U=R.value.search(D.value).map(N=>N.item):U=[...I.value],b.value.length>0&&(U=U.filter(h=>h.artist&&b.value.includes(h.artist))),d.value.length>0&&(U=U.filter(h=>h.tags&&d.value.some(N=>h.tags.includes(N)))),a.value.length>0&&(U=U.filter(h=>{const N=h.userId||"Anonymous";return a.value.includes(N)})),U=U.filter(C),(f.value!=="relevance"||!D.value.trim())&&U.sort((h,N)=>{switch(f.value){case"createdAt":return h.createdAt&&!N.createdAt?-1:!h.createdAt&&N.createdAt?1:h.createdAt&&N.createdAt?N.createdAt-h.createdAt:0;case"title":{const G=h.musicTitle||h.title,J=N.musicTitle||N.title;return G.localeCompare(J)}case"artist":{const G=h.artist||"Unknown",J=N.artist||"Unknown";return G.localeCompare(J)}case"duration":return K(h.duration)-K(N.duration);default:return 0}}),U}),S=()=>{w.value=!w.value},A=()=>{_.value=!_.value},L=U=>{u.value===U?u.value="":u.value=U},V=U=>{const h=r.value.selectedPlatforms||[],N=h.includes(U);o(N?h.filter(G=>G!==U):[...h,U])},H=()=>{D.value="",b.value=[],d.value=[],a.value=[],u.value="",f.value="createdAt",Y.value=!1},Z=U=>{const h=[...U];for(let N=h.length-1;N>0;N--){const G=Math.floor(Math.random()*(N+1));[h[N],h[G]]=[h[G],h[N]]}return h},q=()=>{const U=Z(x.value);t(U)},tt=()=>{m.value==="grid"?m.value="list":m.value==="list"?m.value="timeline":m.value="grid"},st=()=>{switch(m.value){case"grid":return"i-mdi-view-grid";case"list":return"i-mdi-view-list";case"timeline":return"i-mdi-timeline";default:return"i-mdi-view-grid"}};return Mt(x,U=>{t(U)},{immediate:!0}),(U,h)=>{const N=Te,G=he,J=Ns,it=mn;return E(),B("div",gn,[l("div",pn,[l("div",vn,[nt(N,{id:"search",modelValue:$(D),"onUpdate:modelValue":h[0]||(h[0]=z=>At(D)?D.value=z:null),placeholder:"Search by title, artist, or tags...",size:"large"},null,8,["modelValue"])]),l("div",yn,[nt(G,{icon:"i-mdi-filter-variant text-3xl",variant:"ghost",size:"large",class:dt(["rounded-full",{"[&_[class^=i-mdi]]:text-accent":$(M)}]),onClick:S},null,8,["class"]),nt(G,{icon:st(),variant:"ghost",size:"large",class:"rounded-full text-2xl",onClick:tt},null,8,["icon"]),$(c)?(E(),bt(G,{key:0,to:"/admin",icon:"i-mdi-cog",variant:"ghost",size:"medium",class:"lt-sm:hidden"},{default:gt(()=>[...h[11]||(h[11]=[l("span",{class:"hidden sm:inline"},"Admin",-1)])]),_:1})):X("",!0)])]),$(w)?(E(),B("div",xn,[l("div",$n,[l("div",null,[nt(J,{id:"artist-filter",modelValue:$(b),"onUpdate:modelValue":h[1]||(h[1]=z=>At(b)?b.value=z:null),label:"Artists",placeholder:"Search and select artists...",options:$(y)},null,8,["modelValue","options"])]),l("div",null,[nt(J,{id:"tag-filter",modelValue:$(d),"onUpdate:modelValue":h[2]||(h[2]=z=>At(d)?d.value=z:null),label:"Tags",placeholder:"Search and select tags...",options:$(O)},null,8,["modelValue","options"])]),l("div",null,[h[15]||(h[15]=l("label",{class:"block text-sm font-medium mb-2"},"Duration",-1)),l("div",bn,[nt(G,{size:"small",variant:$(u)==="short"?"primary":"ghost",onClick:h[3]||(h[3]=z=>L("short"))},{default:gt(()=>[...h[12]||(h[12]=[at(" Short (< 4 min) ",-1)])]),_:1},8,["variant"]),nt(G,{size:"small",variant:$(u)==="medium"?"primary":"ghost",onClick:h[4]||(h[4]=z=>L("medium"))},{default:gt(()=>[...h[13]||(h[13]=[at(" Medium (4-20 min) ",-1)])]),_:1},8,["variant"]),nt(G,{size:"small",variant:$(u)==="long"?"primary":"ghost",onClick:h[5]||(h[5]=z=>L("long"))},{default:gt(()=>[...h[14]||(h[14]=[at(" Long (> 20 min) ",-1)])]),_:1},8,["variant"])])])]),l("div",Mn,[l("div",null,[h[17]||(h[17]=l("label",{class:"block text-sm font-medium mb-2"},"Users",-1)),l("div",wn,[(E(!0),B(ot,null,lt($(P),z=>(E(),B("div",{key:z.userId,class:dt(["flex items-center gap-2 cursor-pointer p-2 hover:bg-primary-1 rounded-2xl transition-colors",{"bg-primary-2":$(a).includes(z.userId)}]),onClick:ht=>v(z.userId)},[l("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-black text-xs font-bold",style:kt({backgroundColor:z.color})},[...h[16]||(h[16]=[l("span",{class:"i-mdi-account text-xs"},null,-1)])],4),l("span",Dn,W(z.count),1)],10,An))),128))])])]),l("div",kn,[l("div",null,[h[18]||(h[18]=l("label",{class:"block text-sm font-medium mb-2"},"Music Platforms",-1)),l("div",_n,[(E(!0),B(ot,null,lt(("getAllPlatforms"in U?U.getAllPlatforms:$(Fe))(),z=>(E(),bt(G,{key:z.id,size:"small",variant:$(r).selectedPlatforms?.includes(z.id)?"primary":"ghost",onClick:ht=>V(z.id)},{default:gt(()=>[l("div",{class:dt([z.icon,"text-sm mr-1"])},null,2),at(" "+W(z.name),1)]),_:2},1032,["variant","onClick"]))),128))])])]),l("div",Sn,[l("div",null,[h[20]||(h[20]=l("label",{class:"block text-sm font-medium mb-2"},"Sort By",-1)),pe(l("select",{"onUpdate:modelValue":h[6]||(h[6]=z=>At(f)?f.value=z:null),class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",onKeydown:h[7]||(h[7]=Dt(()=>{},["stop"]))},[...h[19]||(h[19]=[xe('<option value="relevance">Relevance</option><option value="createdAt">Date Added (Latest First)</option><option value="title">Title A-Z</option><option value="artist">Artist A-Z</option><option value="duration">Duration</option>',5)])],544),[[Be,$(f)]])]),l("div",null,[h[22]||(h[22]=l("label",{class:"block text-sm font-medium mb-2"},"Playlist",-1)),nt(G,{icon:"i-mdi-shuffle",variant:"primary",size:"medium",class:"w-full",onClick:q},{default:gt(()=>[...h[21]||(h[21]=[at(" Shuffle ",-1)])]),_:1})]),l("div",null,[l("div",Cn,[h[24]||(h[24]=l("label",{class:"block text-sm font-medium mb-2"},"Keyboard ",-1)),nt(G,{icon:"i-mdi-keyboard",variant:"ghost",size:"medium",onClick:A},{default:gt(()=>[...h[23]||(h[23]=[l("span",{class:"hidden sm:inline"},"Shortcuts",-1)])]),_:1})]),l("select",{value:$(r).keyboardShortcutScheme,class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",onChange:h[8]||(h[8]=z=>$(s)(z.target.value)),onKeydown:h[9]||(h[9]=Dt(()=>{},["stop"]))},[(E(!0),B(ot,null,lt($(n),z=>(E(),B("option",{key:z.value,value:z.value},W(z.label),9,Tn))),128))],40,En)]),h[25]||(h[25]=l("div",{class:"text-primary-3 w-full text-right"},"Scroll to close.",-1))]),l("div",Fn,[l("span",In,W($(x).length)+" of "+W($(T))+" videos ",1),nt(G,{variant:"ghost",size:"small",onClick:H},{default:gt(()=>[...h[26]||(h[26]=[at(" Clear All ",-1)])]),_:1})])])):X("",!0),nt(it,{"show-help":$(_),onClose:h[10]||(h[10]=z=>_.value=!1)},null,8,["show-help"])])}}}),Yn=Object.assign(Bn,{__name:"VideoSearch"});function _t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tt={exports:{}},On=Tt.exports,oe;function Pn(){return oe||(oe=1,(function(e,t){(function(s,o){e.exports=o()})(On,(function(){var s=1e3,o=6e4,i=36e5,r="millisecond",n="second",m="minute",c="hour",p="day",g="week",k="month",D="quarter",w="year",b="date",d="Invalid Date",a=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(C){var v=["th","st","nd","rd"],x=C%100;return"["+C+(v[(x-20)%10]||v[x]||v[0])+"]"}},_=function(C,v,x){var S=String(C);return!S||S.length>=v?C:""+Array(v+1-S.length).join(x)+C},Y={s:_,z:function(C){var v=-C.utcOffset(),x=Math.abs(v),S=Math.floor(x/60),A=x%60;return(v<=0?"+":"-")+_(S,2,"0")+":"+_(A,2,"0")},m:function C(v,x){if(v.date()<x.date())return-C(x,v);var S=12*(x.year()-v.year())+(x.month()-v.month()),A=v.clone().add(S,k),L=x-A<0,V=v.clone().add(S+(L?-1:1),k);return+(-(S+(x-A)/(L?A-V:V-A))||0)},a:function(C){return C<0?Math.ceil(C)||0:Math.floor(C)},p:function(C){return{M:k,y:w,w:g,d:p,D:b,h:c,m,s:n,ms:r,Q:D}[C]||String(C||"").toLowerCase().replace(/s$/,"")},u:function(C){return C===void 0}},I="en",T={};T[I]=f;var M="$isDayjsObject",y=function(C){return C instanceof R||!(!C||!C[M])},O=function C(v,x,S){var A;if(!v)return I;if(typeof v=="string"){var L=v.toLowerCase();T[L]&&(A=L),x&&(T[L]=x,A=L);var V=v.split("-");if(!A&&V.length>1)return C(V[0])}else{var H=v.name;T[H]=v,A=H}return!S&&A&&(I=A),A||!S&&I},P=function(C,v){if(y(C))return C.clone();var x=typeof v=="object"?v:{};return x.date=C,x.args=arguments,new R(x)},F=Y;F.l=O,F.i=y,F.w=function(C,v){return P(C,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var R=(function(){function C(x){this.$L=O(x.locale,null,!0),this.parse(x),this.$x=this.$x||x.x||{},this[M]=!0}var v=C.prototype;return v.parse=function(x){this.$d=(function(S){var A=S.date,L=S.utc;if(A===null)return new Date(NaN);if(F.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var V=A.match(a);if(V){var H=V[2]-1||0,Z=(V[7]||"0").substring(0,3);return L?new Date(Date.UTC(V[1],H,V[3]||1,V[4]||0,V[5]||0,V[6]||0,Z)):new Date(V[1],H,V[3]||1,V[4]||0,V[5]||0,V[6]||0,Z)}}return new Date(A)})(x),this.init()},v.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},v.$utils=function(){return F},v.isValid=function(){return this.$d.toString()!==d},v.isSame=function(x,S){var A=P(x);return this.startOf(S)<=A&&A<=this.endOf(S)},v.isAfter=function(x,S){return P(x)<this.startOf(S)},v.isBefore=function(x,S){return this.endOf(S)<P(x)},v.$g=function(x,S,A){return F.u(x)?this[S]:this.set(A,x)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(x,S){var A=this,L=!!F.u(S)||S,V=F.p(x),H=function(G,J){var it=F.w(A.$u?Date.UTC(A.$y,J,G):new Date(A.$y,J,G),A);return L?it:it.endOf(p)},Z=function(G,J){return F.w(A.toDate()[G].apply(A.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(J)),A)},q=this.$W,tt=this.$M,st=this.$D,U="set"+(this.$u?"UTC":"");switch(V){case w:return L?H(1,0):H(31,11);case k:return L?H(1,tt):H(0,tt+1);case g:var h=this.$locale().weekStart||0,N=(q<h?q+7:q)-h;return H(L?st-N:st+(6-N),tt);case p:case b:return Z(U+"Hours",0);case c:return Z(U+"Minutes",1);case m:return Z(U+"Seconds",2);case n:return Z(U+"Milliseconds",3);default:return this.clone()}},v.endOf=function(x){return this.startOf(x,!1)},v.$set=function(x,S){var A,L=F.p(x),V="set"+(this.$u?"UTC":""),H=(A={},A[p]=V+"Date",A[b]=V+"Date",A[k]=V+"Month",A[w]=V+"FullYear",A[c]=V+"Hours",A[m]=V+"Minutes",A[n]=V+"Seconds",A[r]=V+"Milliseconds",A)[L],Z=L===p?this.$D+(S-this.$W):S;if(L===k||L===w){var q=this.clone().set(b,1);q.$d[H](Z),q.init(),this.$d=q.set(b,Math.min(this.$D,q.daysInMonth())).$d}else H&&this.$d[H](Z);return this.init(),this},v.set=function(x,S){return this.clone().$set(x,S)},v.get=function(x){return this[F.p(x)]()},v.add=function(x,S){var A,L=this;x=Number(x);var V=F.p(S),H=function(tt){var st=P(L);return F.w(st.date(st.date()+Math.round(tt*x)),L)};if(V===k)return this.set(k,this.$M+x);if(V===w)return this.set(w,this.$y+x);if(V===p)return H(1);if(V===g)return H(7);var Z=(A={},A[m]=o,A[c]=i,A[n]=s,A)[V]||1,q=this.$d.getTime()+x*Z;return F.w(q,this)},v.subtract=function(x,S){return this.add(-1*x,S)},v.format=function(x){var S=this,A=this.$locale();if(!this.isValid())return A.invalidDate||d;var L=x||"YYYY-MM-DDTHH:mm:ssZ",V=F.z(this),H=this.$H,Z=this.$m,q=this.$M,tt=A.weekdays,st=A.months,U=A.meridiem,h=function(J,it,z,ht){return J&&(J[it]||J(S,L))||z[it].slice(0,ht)},N=function(J){return F.s(H%12||12,J,"0")},G=U||function(J,it,z){var ht=J<12?"AM":"PM";return z?ht.toLowerCase():ht};return L.replace(u,(function(J,it){return it||(function(z){switch(z){case"YY":return String(S.$y).slice(-2);case"YYYY":return F.s(S.$y,4,"0");case"M":return q+1;case"MM":return F.s(q+1,2,"0");case"MMM":return h(A.monthsShort,q,st,3);case"MMMM":return h(st,q);case"D":return S.$D;case"DD":return F.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return h(A.weekdaysMin,S.$W,tt,2);case"ddd":return h(A.weekdaysShort,S.$W,tt,3);case"dddd":return tt[S.$W];case"H":return String(H);case"HH":return F.s(H,2,"0");case"h":return N(1);case"hh":return N(2);case"a":return G(H,Z,!0);case"A":return G(H,Z,!1);case"m":return String(Z);case"mm":return F.s(Z,2,"0");case"s":return String(S.$s);case"ss":return F.s(S.$s,2,"0");case"SSS":return F.s(S.$ms,3,"0");case"Z":return V}return null})(J)||V.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(x,S,A){var L,V=this,H=F.p(S),Z=P(x),q=(Z.utcOffset()-this.utcOffset())*o,tt=this-Z,st=function(){return F.m(V,Z)};switch(H){case w:L=st()/12;break;case k:L=st();break;case D:L=st()/3;break;case g:L=(tt-q)/6048e5;break;case p:L=(tt-q)/864e5;break;case c:L=tt/i;break;case m:L=tt/o;break;case n:L=tt/s;break;default:L=tt}return A?L:F.a(L)},v.daysInMonth=function(){return this.endOf(k).$D},v.$locale=function(){return T[this.$L]},v.locale=function(x,S){if(!x)return this.$L;var A=this.clone(),L=O(x,S,!0);return L&&(A.$L=L),A},v.clone=function(){return F.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},C})(),K=R.prototype;return P.prototype=K,[["$ms",r],["$s",n],["$m",m],["$H",c],["$W",p],["$M",k],["$y",w],["$D",b]].forEach((function(C){K[C[1]]=function(v){return this.$g(v,C[0],C[1])}})),P.extend=function(C,v){return C.$i||(C(v,R,P),C.$i=!0),P},P.locale=O,P.isDayjs=y,P.unix=function(C){return P(1e3*C)},P.en=T[I],P.Ls=T,P.p={},P}))})(Tt)),Tt.exports}var Ln=Pn();const ct=_t(Ln);var Ft={exports:{}},Vn=Ft.exports,ae;function Un(){return ae||(ae=1,(function(e,t){(function(s,o){e.exports=o()})(Vn,(function(){return function(s,o,i){s=s||{};var r=o.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function m(p,g,k,D){return r.fromToBase(p,g,k,D)}i.en.relativeTime=n,r.fromToBase=function(p,g,k,D,w){for(var b,d,a,u=k.$locale().relativeTime||n,f=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],_=f.length,Y=0;Y<_;Y+=1){var I=f[Y];I.d&&(b=D?i(p).diff(k,I.d,!0):k.diff(p,I.d,!0));var T=(s.rounding||Math.round)(Math.abs(b));if(a=b>0,T<=I.r||!I.r){T<=1&&Y>0&&(I=f[Y-1]);var M=u[I.l];w&&(T=w(""+T)),d=typeof M=="string"?M.replace("%d",T):M(T,g,I.l,a);break}}if(g)return d;var y=a?u.future:u.past;return typeof y=="function"?y(d):y.replace("%s",d)},r.to=function(p,g){return m(p,g,this,!0)},r.from=function(p,g){return m(p,g,this)};var c=function(p){return p.$u?i.utc():i()};r.toNow=function(p){return this.to(c(this),p)},r.fromNow=function(p){return this.from(c(this),p)}}}))})(Ft)),Ft.exports}var jn=Un();const Qt=_t(jn),Nn={class:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] sm:grid-cols-[repeat(auto-fill,minmax(240px,1fr))] md:grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 sm:gap-6 px-6"},Hn=["onClick"],Rn={key:0,class:"absolute top-2 right-2 bg-accent text-black px-2 py-1 rounded text-xs font-medium flex items-center gap-1"},zn=["src","alt"],Kn={class:"flex flex-col gap-1"},Wn={key:0,class:"text-gray-5 text-sm font-medium"},Zn={class:"leading-5 text-primary-3 line-clamp-2"},Gn={class:"flex items-center justify-between gap-3 mb-2"},qn={class:"text-gray-400 text-xs sm:text-sm"},Jn={class:"text-gray-500 text-xs sm:text-sm flex items-center justify-center gap-1"},Qn={class:"flex items-center justify-between gap-3 mb-2"},Xn={class:"flex items-center gap-2"},ti={key:0,class:"text-gray-500 text-xs sm:text-sm"},ei={key:0,class:"pt-2"},si={class:"flex flex-wrap gap-1"},ni={key:1,class:"pt-2"},ii={class:"flex items-center gap-2"},ri=["href","title"],oi=vt({__name:"VideoGrid",props:{videos:{default:()=>[]},highlightVideoId:{default:void 0}},emits:["play","visibleVideosChange"],setup(e,{emit:t}){const s=e,o=t,i=Q([]),r=Q([]),n=Ye(new Map),m=$e(w=>{o("visibleVideosChange",w)},150),{stop:c}=Pe(i,w=>{w.forEach(d=>{const a=i.value.indexOf(d.target);if(a!==-1&&s.videos[a]){const u=s.videos[a];n.set(u.id,d.isIntersecting)}});const b=s.videos.filter(d=>n.get(d.id)||!1);p(r.value,b)||(r.value=b,m(b))},{threshold:.1,rootMargin:"50px"}),p=(w,b)=>w.length!==b.length?!1:w.every((d,a)=>d.id===b[a]?.id);Mt(()=>s.videos,()=>{const w=new Set(s.videos.map(b=>b.id));for(const[b]of n)w.has(b)||n.delete(b)},{deep:!0}),ye(()=>{c()});const{settings:g}=pt(wt()),k=et(()=>g.value.selectedPlatforms||[]);ct.extend(Qt);const D=w=>ct(w).fromNow();return(w,b)=>(E(),B("div",Nn,[(E(!0),B(ot,null,lt(e.videos,d=>(E(),B("div",{key:d.id,ref_for:!0,ref_key:"videoElements",ref:i,class:dt(["relative group shadow-black hover:shadow-md hover:bg-zinc-900 flex flex-col gap-3 rounded-2xl hover:rounded-b-0 pa-2 transition-shadow duration-200",{"outline-accent outline-2 outline-solid outline-bottom-0":e.highlightVideoId===d.id}])},[l("div",{class:"rounded-2xl overflow-hidden w-full aspect-video relative cursor-pointer",onClick:a=>w.$emit("play",d)},[b[1]||(b[1]=l("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[l("div",{class:"i-mdi-play-outline text-accent text-8xl"})],-1)),e.highlightVideoId===d.id?(E(),B("div",Rn,[...b[0]||(b[0]=[l("div",{class:"i-mdi-volume-high w-3 h-3"},null,-1),at(" Playing ",-1)])])):X("",!0),l("img",{src:`https://i.ytimg.com/vi/${d.id}/hqdefault.jpg`,alt:d.title,class:"w-full h-full object-cover",loading:"lazy"},null,8,zn)],8,Hn),l("div",Kn,[d.artist?(E(),B("div",Wn,W(d.artist),1)):X("",!0),l("div",Zn,W(d.musicTitle||d.title),1)]),l("div",{class:dt(["hidden group-hover:flex absolute bg-zinc-900 w-full top-full left-0 flex-col z-10 shadow-black shadow-md rounded-b-2xl p-3",{"outline-2 outline-solid outline-accent ":e.highlightVideoId===d.id}])},[l("div",Gn,[l("p",qn,W(d.channel),1),l("p",Jn,[b[2]||(b[2]=l("span",{class:"i-mdi-clock-outline text-xs"},null,-1)),at(" "+W(d.duration),1)])]),l("div",Qn,[l("div",Xn,[l("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:kt({backgroundColor:("getUserColor"in w?w.getUserColor:$(Jt))(d.userId||" ")})},[...b[3]||(b[3]=[l("span",{class:"i-mdi-account text-xs"},null,-1)])],4)]),d.createdAt?(E(),B("p",ti,W(D(d.createdAt)),1)):X("",!0)]),d.tags&&d.tags.length>0?(E(),B("div",ei,[l("div",si,[(E(!0),B(ot,null,lt(d.tags,a=>(E(),B("span",{key:a,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg"},W(a),1))),128))])])):X("",!0),d.externalIds&&$(k).some(a=>d.externalIds?.[a])?(E(),B("div",ni,[l("div",ii,[b[4]||(b[4]=l("span",{class:"text-xs text-primary-3"},"Listen on:",-1)),(E(!0),B(ot,null,lt($(k).filter(a=>d.externalIds?.[a]),a=>(E(),B("a",{key:a,href:("getPlatformUrl"in w?w.getPlatformUrl:$(me))(a,d.externalIds[a]),target:"_blank",rel:"noopener noreferrer",class:"text-primary-3 hover:text-accent transition-colors",title:`Listen on ${("getPlatformName"in w?w.getPlatformName:$(fe))(a)}`},[l("div",{class:dt([("getPlatformIcon"in w?w.getPlatformIcon:$(ge))(a),"text-xl"])},null,2)],8,ri))),128))])])):X("",!0)],2)],2))),128))]))}}),ai=Object.assign(oi,{__name:"VideoGrid"}),li={class:"p-3 w-md"},ui={class:"flex items-center gap-3"},ci={class:"flex-shrink-0 relative"},di=["src","alt"],hi={key:0,class:"absolute -top-1 -right-1 bg-accent text-black px-1 py-0.5 rounded text-xs font-medium flex items-center gap-1"},fi={class:"flex-1 min-w-0"},mi={class:"mb-1"},gi={key:0,class:"text-primary-2 text-xs font-medium"},pi={key:1,class:"text-xs text-gray-5 opacity-80 italic"},vi={class:"font-medium text-primary-3 line-clamp-2 text-sm mb-1"},yi={class:"p-3"},xi={class:"text-sm text-primary-3 font-mono flex items-center gap-1"},$i={class:"p-3 min-w-xs"},bi={key:0,class:"relative flex gap-1 max-w-72 overflow-hidden"},Mi={class:"p-3"},wi={key:0,class:"flex gap-2"},Ai=["href","title"],Di={class:"p-3 min-w-30"},ki={class:"flex items-center gap-2"},_i=["title"],Si={key:1,class:"text-sm text-primary-3 italic"},Ci=vt({__name:"VideoListItem",props:{video:{},isHighlighted:{type:Boolean}},emits:["play"],setup(e){const{settings:t}=pt(wt()),s=et(()=>t.value.selectedPlatforms||[]);ct.extend(Qt);const o=i=>ct(i).fromNow();return(i,r)=>(E(),B("tr",{class:dt(["relative border-b border-primary-2/30 hover:bg-bg-gradient transition-colors cursor-pointer",{"after:content-empty after:absolute after:inset-0 after:b-1 after:b-solid after:b-accent after:pointer-events-none after:rounded-2xl":e.isHighlighted}]),onClick:r[0]||(r[0]=n=>i.$emit("play",e.video))},[l("td",li,[l("div",ui,[l("div",ci,[l("img",{src:`https://i.ytimg.com/vi/${e.video.id}/hqdefault.jpg`,alt:e.video.title,class:"rounded-full size-16 object-cover bg-primary-1"},null,8,di),r[2]||(r[2]=l("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity rounded"},[l("div",{class:"i-mdi-play-outline text-accent text-2xl"})],-1)),e.isHighlighted?(E(),B("div",hi,[...r[1]||(r[1]=[l("div",{class:"i-mdi-volume-high w-2 h-2"},null,-1)])])):X("",!0)]),l("div",fi,[l("div",mi,[e.video.artist?(E(),B("span",gi,W(e.video.artist),1)):(E(),B("span",pi,W(e.video.channel),1))]),l("h4",vi,W(e.video.musicTitle||e.video.title),1)])])]),l("td",yi,[l("span",xi,[r[3]||(r[3]=l("span",{class:"i-mdi-clock-outline text-xs text-gray-6"},null,-1)),at(" "+W(e.video.duration),1)])]),l("td",$i,[e.video.tags&&e.video.tags.length>0?(E(),B("div",bi,[(E(!0),B(ot,null,lt(e.video.tags,n=>(E(),B("span",{key:n,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg whitespace-nowrap flex-shrink-0"},W(n),1))),128)),r[4]||(r[4]=l("div",{class:"absolute right-0 top-0 bottom-0 w-10 bg-gradient-to-r from-transparent to-background group-hover:to-bg-gradient pointer-events-none"},null,-1))])):X("",!0)]),l("td",Mi,[e.video.externalIds&&$(s).some(n=>e.video.externalIds?.[n])?(E(),B("div",wi,[(E(!0),B(ot,null,lt($(s).filter(n=>e.video.externalIds?.[n]),n=>(E(),B("a",{key:n,href:("getPlatformUrl"in i?i.getPlatformUrl:$(me))(n,e.video.externalIds[n]),target:"_blank",rel:"noopener noreferrer",class:"text-primary-3 hover:text-accent transition-colors",title:`Listen on ${("getPlatformName"in i?i.getPlatformName:$(fe))(n)}`},[l("div",{class:dt([("getPlatformIcon"in i?i.getPlatformIcon:$(ge))(n),"text-sm"])},null,2)],8,Ai))),128))])):X("",!0)]),l("td",Di,[l("div",ki,[l("div",{class:"w-3 h-3 rounded-full flex items-center justify-center text-white text-xs font-bold",style:kt({backgroundColor:("getUserColor"in i?i.getUserColor:$(Jt))(e.video.userId||" ")})},[...r[5]||(r[5]=[l("span",{class:"i-mdi-account text-xs"},null,-1)])],4)]),e.video.createdAt?(E(),B("span",{key:0,class:"text-sm text-primary-3",title:new Date(e.video.createdAt).toLocaleString()},W(o(e.video.createdAt)),9,_i)):(E(),B("span",Si,"Unknown"))])],2))}}),Ei=Object.assign(Ci,{__name:"VideoListItem"}),Ti={class:"rounded-lg sm:px-6"},Fi={key:0,class:"text-center py-8"},Ii={key:1,class:"overflow-x-auto"},Bi={key:0},Yi={key:1},Oi=vt({__name:"VideoList",props:{videos:{default:()=>[]},highlightVideoId:{default:""},itemHeight:{default:100},topPadding:{default:0},overscan:{default:5}},emits:["play","visibleVideosChange"],setup(e,{emit:t}){const s=e,o=t,i=Q(),{y:r}=Le(),{height:n}=je(),{top:m}=Ve(i),c=Ue(r,16),p=et(()=>{if(!i.value||s.videos.length===0)return{startIndex:0,endIndex:-1};const d=s.itemHeight,a=c.value,u=m.value,f=n.value,_=u>=0?Math.max(0,a-u):a,Y=Math.max(0,_-60),I=Math.max(0,Math.floor(Y/d)-s.overscan),T=Math.ceil(f/d)+s.overscan*2,M=Math.min(s.videos.length-1,I+T);return{startIndex:I,endIndex:M}}),g=et(()=>{const{startIndex:d,endIndex:a}=p.value;return s.videos.slice(d,a+1).map((u,f)=>({index:d+f,video:u})).filter(u=>u.video!==void 0).map(({index:u,video:f})=>({index:u,data:f}))}),k=et(()=>p.value.startIndex*s.itemHeight),D=et(()=>{const{endIndex:d}=p.value,a=s.videos.length-1-d;return Math.max(0,a*s.itemHeight)}),w=(d,a)=>d.length!==a.length?!1:d.every((u,f)=>u===a[f]);let b=[];return Mt(g,d=>{const a=d.map(u=>u.data.id);if(!w(b,a)){b=a;const u=d.map(f=>f.data);o("visibleVideosChange",u)}},{immediate:!0,deep:!0}),(d,a)=>{const u=Ei;return E(),B("div",Ti,[e.videos.length?(E(),B("div",Ii,[l("table",{ref_key:"tableContainer",ref:i,class:"w-full border-collapse"},[a[2]||(a[2]=l("thead",{class:"sticky top-0 bg-bg-color z-10"},[l("tr",{class:"border-b border-primary-2"},[l("th",{class:"text-left p-3 font-medium text-primary-4"},"Video"),l("th",{class:"text-left p-3 font-medium text-primary-4"},"Duration"),l("th",{class:"text-left p-3 font-medium text-primary-4"},"Tags"),l("th",{class:"text-left p-3 font-medium text-primary-4"},"Platforms"),l("th",{class:"text-left p-3 font-medium text-primary-4"},"Added")])],-1)),l("tbody",null,[$(k)>0?(E(),B("tr",Bi,[l("td",{colspan:5,style:kt({height:$(k)+"px"})},null,4)])):X("",!0),(E(!0),B(ot,null,lt($(g),f=>(E(),bt(u,{key:f.data.id,video:f.data,"is-highlighted":e.highlightVideoId===f.data.id,onPlay:a[0]||(a[0]=_=>d.$emit("play",_))},null,8,["video","is-highlighted"]))),128)),$(D)>0?(E(),B("tr",Yi,[l("td",{colspan:5,style:kt({height:$(D)+"px"})},null,4)])):X("",!0)])],512)])):(E(),B("div",Fi,[...a[1]||(a[1]=[l("div",{class:"i-mdi-video-outline text-4xl mb-2"},null,-1),l("p",{class:"text-primary-3"},"No videos found.",-1)])]))])}}}),Ee=Object.assign(Oi,{__name:"VideoList"});var It={exports:{}},Pi=It.exports,le;function Li(){return le||(le=1,(function(e,t){(function(s,o){e.exports=o()})(Pi,(function(){var s="minute",o=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(r,n,m){var c=n.prototype;m.utc=function(d){var a={date:d,utc:!0,args:arguments};return new n(a)},c.utc=function(d){var a=m(this.toDate(),{locale:this.$L,utc:!0});return d?a.add(this.utcOffset(),s):a},c.local=function(){return m(this.toDate(),{locale:this.$L,utc:!1})};var p=c.parse;c.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),p.call(this,d)};var g=c.init;c.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else g.call(this)};var k=c.utcOffset;c.utcOffset=function(d,a){var u=this.$utils().u;if(u(d))return this.$u?0:u(this.$offset)?k.call(this):this.$offset;if(typeof d=="string"&&(d=(function(I){I===void 0&&(I="");var T=I.match(o);if(!T)return null;var M=(""+T[0]).match(i)||["-",0,0],y=M[0],O=60*+M[1]+ +M[2];return O===0?0:y==="+"?O:-O})(d),d===null))return this;var f=Math.abs(d)<=16?60*d:d;if(f===0)return this.utc(a);var _=this.clone();if(a)return _.$offset=f,_.$u=!1,_;var Y=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(_=this.local().add(f+Y,s)).$offset=f,_.$x.$localOffset=Y,_};var D=c.format;c.format=function(d){var a=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return D.call(this,a)},c.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var w=c.toDate;c.toDate=function(d){return d==="s"&&this.$offset?m(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():w.call(this)};var b=c.diff;c.diff=function(d,a,u){if(d&&this.$u===d.$u)return b.call(this,d,a,u);var f=this.local(),_=m(d).local();return b.call(f,_,a,u)}}}))})(It)),It.exports}var Vi=Li();const Ui=_t(Vi);var Bt={exports:{}},ji=Bt.exports,ue;function Ni(){return ue||(ue=1,(function(e,t){(function(s,o){e.exports=o()})(ji,(function(){var s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,r=/\d\d/,n=/\d\d?/,m=/\d*[^-_:/,()\s\d]+/,c={},p=function(a){return(a=+a)+(a>68?1900:2e3)},g=function(a){return function(u){this[a]=+u}},k=[/[+-]\d\d:?(\d\d)?|Z/,function(a){(this.zone||(this.zone={})).offset=(function(u){if(!u||u==="Z")return 0;var f=u.match(/([+-]|\d\d)/g),_=60*f[1]+(+f[2]||0);return _===0?0:f[0]==="+"?-_:_})(a)}],D=function(a){var u=c[a];return u&&(u.indexOf?u:u.s.concat(u.f))},w=function(a,u){var f,_=c.meridiem;if(_){for(var Y=1;Y<=24;Y+=1)if(a.indexOf(_(Y,0,u))>-1){f=Y>12;break}}else f=a===(u?"pm":"PM");return f},b={A:[m,function(a){this.afternoon=w(a,!1)}],a:[m,function(a){this.afternoon=w(a,!0)}],Q:[i,function(a){this.month=3*(a-1)+1}],S:[i,function(a){this.milliseconds=100*+a}],SS:[r,function(a){this.milliseconds=10*+a}],SSS:[/\d{3}/,function(a){this.milliseconds=+a}],s:[n,g("seconds")],ss:[n,g("seconds")],m:[n,g("minutes")],mm:[n,g("minutes")],H:[n,g("hours")],h:[n,g("hours")],HH:[n,g("hours")],hh:[n,g("hours")],D:[n,g("day")],DD:[r,g("day")],Do:[m,function(a){var u=c.ordinal,f=a.match(/\d+/);if(this.day=f[0],u)for(var _=1;_<=31;_+=1)u(_).replace(/\[|\]/g,"")===a&&(this.day=_)}],w:[n,g("week")],ww:[r,g("week")],M:[n,g("month")],MM:[r,g("month")],MMM:[m,function(a){var u=D("months"),f=(D("monthsShort")||u.map((function(_){return _.slice(0,3)}))).indexOf(a)+1;if(f<1)throw new Error;this.month=f%12||f}],MMMM:[m,function(a){var u=D("months").indexOf(a)+1;if(u<1)throw new Error;this.month=u%12||u}],Y:[/[+-]?\d+/,g("year")],YY:[r,function(a){this.year=p(a)}],YYYY:[/\d{4}/,g("year")],Z:k,ZZ:k};function d(a){var u,f;u=a,f=c&&c.formats;for(var _=(a=u.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(P,F,R){var K=R&&R.toUpperCase();return F||f[R]||s[R]||f[K].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(C,v,x){return v||x.slice(1)}))}))).match(o),Y=_.length,I=0;I<Y;I+=1){var T=_[I],M=b[T],y=M&&M[0],O=M&&M[1];_[I]=O?{regex:y,parser:O}:T.replace(/^\[|\]$/g,"")}return function(P){for(var F={},R=0,K=0;R<Y;R+=1){var C=_[R];if(typeof C=="string")K+=C.length;else{var v=C.regex,x=C.parser,S=P.slice(K),A=v.exec(S)[0];x.call(F,A),P=P.replace(A,"")}}return(function(L){var V=L.afternoon;if(V!==void 0){var H=L.hours;V?H<12&&(L.hours+=12):H===12&&(L.hours=0),delete L.afternoon}})(F),F}}return function(a,u,f){f.p.customParseFormat=!0,a&&a.parseTwoDigitYear&&(p=a.parseTwoDigitYear);var _=u.prototype,Y=_.parse;_.parse=function(I){var T=I.date,M=I.utc,y=I.args;this.$u=M;var O=y[1];if(typeof O=="string"){var P=y[2]===!0,F=y[3]===!0,R=P||F,K=y[2];F&&(K=y[2]),c=this.$locale(),!P&&K&&(c=f.Ls[K]),this.$d=(function(S,A,L,V){try{if(["x","X"].indexOf(A)>-1)return new Date((A==="X"?1e3:1)*S);var H=d(A)(S),Z=H.year,q=H.month,tt=H.day,st=H.hours,U=H.minutes,h=H.seconds,N=H.milliseconds,G=H.zone,J=H.week,it=new Date,z=tt||(Z||q?1:it.getDate()),ht=Z||it.getFullYear(),St=0;Z&&!q||(St=q>0?q-1:it.getMonth());var Ct,Vt=st||0,Ut=U||0,jt=h||0,Nt=N||0;return G?new Date(Date.UTC(ht,St,z,Vt,Ut,jt,Nt+60*G.offset*1e3)):L?new Date(Date.UTC(ht,St,z,Vt,Ut,jt,Nt)):(Ct=new Date(ht,St,z,Vt,Ut,jt,Nt),J&&(Ct=V(Ct).week(J).toDate()),Ct)}catch{return new Date("")}})(T,O,M,f),this.init(),K&&K!==!0&&(this.$L=this.locale(K).$L),R&&T!=this.format(O)&&(this.$d=new Date("")),c={}}else if(O instanceof Array)for(var C=O.length,v=1;v<=C;v+=1){y[1]=O[v-1];var x=f.apply(this,y);if(x.isValid()){this.$d=x.$d,this.$L=x.$L,this.init();break}v===C&&(this.$d=new Date(""))}else Y.call(this,I)}}}))})(Bt)),Bt.exports}var Hi=Ni();const Ri=_t(Hi);var Yt={exports:{}},zi=Yt.exports,ce;function Ki(){return ce||(ce=1,(function(e,t){(function(s,o){e.exports=o()})(zi,(function(){var s,o,i=1e3,r=6e4,n=36e5,m=864e5,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p=31536e6,g=2628e6,k=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,D={years:p,months:g,days:m,hours:n,minutes:r,seconds:i,milliseconds:1,weeks:6048e5},w=function(T){return T instanceof Y},b=function(T,M,y){return new Y(T,y,M.$l)},d=function(T){return o.p(T)+"s"},a=function(T){return T<0},u=function(T){return a(T)?Math.ceil(T):Math.floor(T)},f=function(T){return Math.abs(T)},_=function(T,M){return T?a(T)?{negative:!0,format:""+f(T)+M}:{negative:!1,format:""+T+M}:{negative:!1,format:""}},Y=(function(){function T(y,O,P){var F=this;if(this.$d={},this.$l=P,y===void 0&&(this.$ms=0,this.parseFromMilliseconds()),O)return b(y*D[d(O)],this);if(typeof y=="number")return this.$ms=y,this.parseFromMilliseconds(),this;if(typeof y=="object")return Object.keys(y).forEach((function(C){F.$d[d(C)]=y[C]})),this.calMilliseconds(),this;if(typeof y=="string"){var R=y.match(k);if(R){var K=R.slice(2).map((function(C){return C!=null?Number(C):0}));return this.$d.years=K[0],this.$d.months=K[1],this.$d.weeks=K[2],this.$d.days=K[3],this.$d.hours=K[4],this.$d.minutes=K[5],this.$d.seconds=K[6],this.calMilliseconds(),this}}return this}var M=T.prototype;return M.calMilliseconds=function(){var y=this;this.$ms=Object.keys(this.$d).reduce((function(O,P){return O+(y.$d[P]||0)*D[P]}),0)},M.parseFromMilliseconds=function(){var y=this.$ms;this.$d.years=u(y/p),y%=p,this.$d.months=u(y/g),y%=g,this.$d.days=u(y/m),y%=m,this.$d.hours=u(y/n),y%=n,this.$d.minutes=u(y/r),y%=r,this.$d.seconds=u(y/i),y%=i,this.$d.milliseconds=y},M.toISOString=function(){var y=_(this.$d.years,"Y"),O=_(this.$d.months,"M"),P=+this.$d.days||0;this.$d.weeks&&(P+=7*this.$d.weeks);var F=_(P,"D"),R=_(this.$d.hours,"H"),K=_(this.$d.minutes,"M"),C=this.$d.seconds||0;this.$d.milliseconds&&(C+=this.$d.milliseconds/1e3,C=Math.round(1e3*C)/1e3);var v=_(C,"S"),x=y.negative||O.negative||F.negative||R.negative||K.negative||v.negative,S=R.format||K.format||v.format?"T":"",A=(x?"-":"")+"P"+y.format+O.format+F.format+S+R.format+K.format+v.format;return A==="P"||A==="-P"?"P0D":A},M.toJSON=function(){return this.toISOString()},M.format=function(y){var O=y||"YYYY-MM-DDTHH:mm:ss",P={Y:this.$d.years,YY:o.s(this.$d.years,2,"0"),YYYY:o.s(this.$d.years,4,"0"),M:this.$d.months,MM:o.s(this.$d.months,2,"0"),D:this.$d.days,DD:o.s(this.$d.days,2,"0"),H:this.$d.hours,HH:o.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:o.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:o.s(this.$d.seconds,2,"0"),SSS:o.s(this.$d.milliseconds,3,"0")};return O.replace(c,(function(F,R){return R||String(P[F])}))},M.as=function(y){return this.$ms/D[d(y)]},M.get=function(y){var O=this.$ms,P=d(y);return P==="milliseconds"?O%=1e3:O=P==="weeks"?u(O/D[P]):this.$d[P],O||0},M.add=function(y,O,P){var F;return F=O?y*D[d(O)]:w(y)?y.$ms:b(y,this).$ms,b(this.$ms+F*(P?-1:1),this)},M.subtract=function(y,O){return this.add(y,O,!0)},M.locale=function(y){var O=this.clone();return O.$l=y,O},M.clone=function(){return b(this.$ms,this)},M.humanize=function(y){return s().add(this.$ms,"ms").locale(this.$l).fromNow(!y)},M.valueOf=function(){return this.asMilliseconds()},M.milliseconds=function(){return this.get("milliseconds")},M.asMilliseconds=function(){return this.as("milliseconds")},M.seconds=function(){return this.get("seconds")},M.asSeconds=function(){return this.as("seconds")},M.minutes=function(){return this.get("minutes")},M.asMinutes=function(){return this.as("minutes")},M.hours=function(){return this.get("hours")},M.asHours=function(){return this.as("hours")},M.days=function(){return this.get("days")},M.asDays=function(){return this.as("days")},M.weeks=function(){return this.get("weeks")},M.asWeeks=function(){return this.as("weeks")},M.months=function(){return this.get("months")},M.asMonths=function(){return this.as("months")},M.years=function(){return this.get("years")},M.asYears=function(){return this.as("years")},T})(),I=function(T,M,y){return T.add(M.years()*y,"y").add(M.months()*y,"M").add(M.days()*y,"d").add(M.hours()*y,"h").add(M.minutes()*y,"m").add(M.seconds()*y,"s").add(M.milliseconds()*y,"ms")};return function(T,M,y){s=y,o=y().$utils(),y.duration=function(F,R){var K=y.locale();return b(F,{$l:K},R)},y.isDuration=w;var O=M.prototype.add,P=M.prototype.subtract;M.prototype.add=function(F,R){return w(F)?I(this,F,1):O.bind(this)(F,R)},M.prototype.subtract=function(F,R){return w(F)?I(this,F,-1):P.bind(this)(F,R)}}}))})(Yt)),Yt.exports}var Wi=Ki();const Zi=_t(Wi),Gi={class:"text-xs text-primary-3 text-center mb-1"},qi={class:"relative group max-h-90%"},Ji=["y1","y2"],Qi=["y1","y2"],Xi=["y"],tr=["x","y","width","height"],er={class:"text-xs text-primary-3 text-center mt-1"},sr={class:"ml-30"},ut=800,nr=1800,ir=157784760,de=1.15,rr=50,or=vt({__name:"VideoTimeline",props:{videos:{default:()=>[]},highlightVideoId:{default:""}},emits:["play"],setup(e,{emit:t}){const s=e,o=t;ct.extend(Ui),ct.extend(Qt),ct.extend(Ri),ct.extend(Zi);const i=ut/2,r=Q(1728e3),n=Q(ct()),m=Q(),c=[{length:1,label:"s",unitName:"second",format:"HH:mm:ss",maxTimespan:300,alignmentUnit:"second",alignmentDivisor:1,incrementAmount:1,incrementUnit:"second"},{length:60,label:"m",unitName:"minute",format:"HH:mm",maxTimespan:3600,alignmentUnit:"minute",alignmentDivisor:1,incrementAmount:1,incrementUnit:"minute"},{length:900,label:"15m",unitName:"minute",format:"HH:mm",maxTimespan:28800,alignmentUnit:"hour",alignmentDivisor:15,incrementAmount:15,incrementUnit:"minute"},{length:3600,label:"h",unitName:"hour",format:"HH:mm",maxTimespan:129600,alignmentUnit:"hour",alignmentDivisor:1,incrementAmount:1,incrementUnit:"hour"},{length:86400,label:"d",unitName:"day",format:"MMM D",maxTimespan:1209600,alignmentUnit:"day",alignmentDivisor:1,incrementAmount:1,incrementUnit:"day"},{length:604800,label:"w",unitName:"week",format:"MMM D",maxTimespan:23587200,alignmentUnit:"week",alignmentDivisor:1,incrementAmount:1,incrementUnit:"week"},{length:2629746,label:"mo",unitName:"month",format:"MMM YYYY",maxTimespan:315569520,alignmentUnit:"month",alignmentDivisor:1,incrementAmount:1,incrementUnit:"month"},{length:31556952,label:"y",unitName:"year",format:"YYYY",maxTimespan:1/0,alignmentUnit:"year",alignmentDivisor:1,incrementAmount:1,incrementUnit:"year"}],p=et(()=>c.find(u=>r.value<=u.maxTimespan)??c[c.length-1]),g=et(()=>{const u=n.value.subtract(r.value,"second"),f=n.value,_=c.findIndex(v=>v.length===p.value.length),Y=_>0?c[_-1]:p.value,I=(v,x,S)=>{const A=[],L=Math.ceil(r.value/S.length);let V;if(S.alignmentDivisor===1)V=v.startOf(S.alignmentUnit);else{const Z=v.startOf(S.alignmentUnit),q=v.get(S.alignmentUnit==="hour"?"minute":S.alignmentUnit),tt=Math.floor(q/S.alignmentDivisor)*S.alignmentDivisor;V=Z.set(S.alignmentUnit==="hour"?"minute":S.alignmentUnit,tt)}V.isAfter(v)&&(V=V.subtract(S.incrementAmount,S.incrementUnit));const H=5;for(let Z=0;Z<=L+2+H;Z++)A.push(V),V=V.add(S.incrementAmount,S.incrementUnit);return A},T=(v,x,S)=>{const A=v.format("YYYY-MM-DD-HH-mm-ss"),L=S||p.value;return{y:ut-v.diff(u,"second")/r.value*ut,isMajor:x,time:v,id:`${A}-${L.label}-${x?"major":"minor"}`,...x&&S?{label:d(v,S)}:{}}},M=r.value*.2,y=u.subtract(M,"second"),O=f.add(M,"second"),P=I(y,O,p.value),F=Y.length!==p.value.length?I(y,O,Y):[],R=P.map(v=>T(v,!0,p.value)),K=F.map(v=>T(v,!1)).filter(v=>!R.some(x=>Math.abs(x.y-v.y)<2));return[...R,...K].filter(v=>v.y>=-100&&v.y<=ut+100).sort((v,x)=>v.y-x.y)}),k=u=>{if(u.length===0)return null;const f=n.value.subtract(r.value,"second"),_=u.map(y=>y.createdAt?ct(y.createdAt):null).filter(y=>y!==null);if(_.length===0)return null;const[Y,I]=_.reduce(([y,O],P)=>[P.isBefore(y)?P:y,P.isAfter(O)?P:O],[_[0],_[0]]),T=Math.max(0,Math.min(ut-Y.diff(f,"second")/r.value*ut,ut)),M=Math.max(0,Math.min(ut-I.diff(f,"second")/r.value*ut,ut));return{y:Math.min(T,M),height:Math.abs(M-T)||10,x:65,width:19}},D=Q(null),w=$e(u=>{const f=k(u),_=f&&(!D.value||Math.abs(f.y-D.value.y)>10||Math.abs(f.height-D.value.height)>10);D.value=f,_&&b(f)},150);function b(u){const f=u.y+u.height/2;if(f>i+20){const Y=f-i,I=Y/ut*r.value,T=n.value.subtract(I,"second"),M=ct(),y=T.isAfter(M)?M:T;console.log("Timeline centering:",{videosBoxCenter:f,timelineCenter:i,pixelDifference:Y,timeDifference:I,oldTime:n.value.format(),newTime:y.format()}),n.value=y}}function d(u,f){return u.format(f.format)}function a(u,f,_){const Y=f||_?de*1.5:de;let I=r.value;return u>0?I=Math.min(I*Y,ir):I=Math.max(I/Y,nr),I<3600?Math.round(I/30)*30:I<86400?Math.round(I/300)*300:I<604800?Math.round(I/3600)*3600:Math.round(I/86400)*86400}return Ne(m,"wheel",He(u=>{u.preventDefault(),u.stopPropagation();const f=a(u.deltaY,u.ctrlKey,u.metaKey);r.value=f},rr),{passive:!1}),(u,f)=>{const _=Ee;return E(),B(ot,null,[l("div",{class:"fixed inset-0 h-screen flex flex-col justify-center pl-3 w-24",onWheel:f[0]||(f[0]=Dt(()=>{},["prevent","stop"]))},[l("div",Gi,W($(n).format("YYYY MMM D")),1),l("div",qi,[(E(),B("svg",{ref_key:"svgElement",ref:m,class:"h-full",width:"85",viewBox:"0 0 85 800",xmlns:"http://www.w3.org/2000/svg"},[(E(!0),B(ot,null,lt($(g),Y=>(E(),B("g",{key:Y.id},[Y.isMajor?(E(),B("line",{key:0,x1:68,x2:80,y1:Y.y,y2:Y.y,stroke:"currentColor","stroke-width":"2",class:"text-primary-4 transition-all duration-300 ease-in-out"},null,8,Ji)):(E(),B("line",{key:1,x1:72,x2:80,y1:Y.y,y2:Y.y,stroke:"currentColor","stroke-width":"1",class:"text-primary-3 transition-all duration-300 ease-in-out"},null,8,Qi)),Y.isMajor&&Y.label?(E(),B("text",{key:2,x:60,y:Y.y+4,class:"text-xs fill-primary-3 transition-all duration-300 ease-in-out","text-anchor":"end"},W(Y.label),9,Xi)):X("",!0)]))),128)),$(D)?(E(),B("rect",{key:0,x:$(D).x,y:$(D).y,width:$(D).width,height:$(D).height,class:"fill-accent stroke-accent stroke-2 transition-all duration-300 ease-in-out","fill-opacity":"0.3","stroke-opacity":"1",rx:"4",ry:"4"},null,8,tr)):X("",!0)],512)),f[2]||(f[2]=xe('<div class="group-hover:flex hidden absolute inset-0 flex-col items-center justify-center pointer-events-none transition-opacity duration-200"><div class="flex flex-col items-center mb-4 text-accent animate-pulse"><div class="i-mdi-chevron-up text-2xl mb-1"></div><div class="i-mdi-magnify-plus text-lg"></div></div><div class="flex items-center justify-center mb-4"><div class="i-mdi-mouse text-3xl text-accent"></div></div><div class="flex flex-col items-center text-accent animate-pulse"><div class="i-mdi-magnify-minus text-lg"></div><div class="i-mdi-chevron-down text-2xl mt-1"></div></div></div>',1))]),l("div",er,W($(n).subtract($(r),"second").format("YYYY MMM D")),1)],32),l("div",sr,[nt(_,{videos:e.videos,"highlight-video-id":s.highlightVideoId,onPlay:f[1]||(f[1]=Y=>o("play",Y)),onVisibleVideosChange:$(w)},null,8,["videos","highlight-video-id","onVisibleVideosChange"])])],64)}}}),ar=Object.assign(or,{__name:"VideoTimeline"}),lr={class:"pt-24"},ur={key:0,class:"flex items-center justify-center py-12"},cr={key:1,class:"bg-primary-1 border border-primary-2 rounded-lg p-6 m-8"},dr={class:"flex items-center gap-2 text-primary-3"},hr={key:2,class:"text-center py-12"},fr={key:3,class:"flex flex-col gap-12 pt-6 pb-12"},$r=vt({__name:"index",setup(e){Oe({title:"Music Playlist View",meta:[{name:"description",content:"Browse your cached YouTube playlists"}]});const{loadFirstPlaylist:t,findVideoIndex:s}=Ot(),{currentPlaylist:o,currentVideos:i,loading:r,error:n,hasCurrentPlaylist:m}=pt(Ot()),{viewMode:c}=pt(wt()),{currentVideo:p}=pt(te()),{initializeGlobalPlayer:g}=te(),k=Q("");ve(async()=>{await t()});const D=w=>{if(!o.value)return;const b=s(w.id);b!==-1&&(k.value=w.id,g(b))};return Mt([p],([w])=>{w?k.value=w.id:k.value=""}),(w,b)=>{const d=Yn,a=ai,u=Ee,f=ar;return E(),B("div",lr,[$(r)?(E(),B("div",ur,[...b[0]||(b[0]=[l("div",{class:"flex items-center gap-3 text-primary-3"},[l("div",{class:"i-mdi-loading animate-spin text-2xl"}),l("span",null,"Loading playlist...")],-1)])])):$(n)?(E(),B("div",cr,[l("div",dr,[b[1]||(b[1]=l("div",{class:"i-mdi-alert-circle"},null,-1)),b[2]||(b[2]=l("strong",null,"Error:",-1)),at(" "+W($(n)),1)])])):$(m)?(E(),B("div",fr,[nt(d),$(c)==="grid"?(E(),bt(a,{key:0,videos:$(i),"highlight-video-id":$(k),onPlay:D},null,8,["videos","highlight-video-id"])):$(c)==="list"?(E(),bt(u,{key:1,videos:$(i),"highlight-video-id":$(k),onPlay:D},null,8,["videos","highlight-video-id"])):$(c)==="timeline"?(E(),bt(f,{key:2,"highlight-video-id":$(k),videos:$(i),onPlay:D},null,8,["highlight-video-id","videos"])):X("",!0)])):(E(),B("div",hr,[...b[3]||(b[3]=[l("div",{class:"i-mdi-playlist-remove text-6xl text-primary-3 mb-4"},null,-1),l("h3",{class:"text-xl font-semibold mb-2"},"No Playlists Found",-1),l("p",{class:"text-primary-3 mb-6"}," No cached playlists are available. Use the admin panel to fetch playlists from YouTube. ",-1)])]))])}}});export{$r as default};
