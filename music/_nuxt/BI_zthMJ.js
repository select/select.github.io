import{_ as O}from"./DkiqO2a4.js";import{_ as J}from"./CgjMXvpa.js";import{e as U,c,f as k,o as i,a as t,t as f,F as R,r as F,g as b,h as Q,b as E,w as A,d as _,i as H,v as K,j as l,n as X,k as L,l as Z,u as G,m as W,p as tt,q as et}from"./PujhHyWQ.js";import"./B6QH0cCt.js";const st={key:0,class:"p-2 rounded text-xs"},at={class:"font-medium text-primary-4 line-clamp-1"},lt={class:"text-primary-3 line-clamp-1"},it={key:0,class:"text-primary-3 line-clamp-1"},nt={key:1,class:"mt-1 flex gap-2 flex-wrap"},ot=["title"],rt=["title"],ct=U({__name:"AdminMusicDataDisplay",props:{songData:{default:void 0}},setup(d){return(g,p)=>d.songData?(i(),c("div",st,[t("div",at,f(d.songData.title),1),t("div",lt,"by "+f(d.songData.artist),1),d.songData.album?(i(),c("div",it,f(d.songData.album),1)):k("",!0),d.songData.tags?.length||d.songData.genres?.length||d.songData.artistTags?.length?(i(),c("div",nt,[(i(!0),c(R,null,F(d.songData.tags?.slice(0,3)||[],s=>(i(),c("span",{key:`song-${s}`,class:"inline-block bg-accent/20 text-black px-1 rounded text-xs mr-1"},f(s),1))),128)),(i(!0),c(R,null,F(d.songData.genres?.slice(0,3)||[],s=>(i(),c("span",{key:`genre-${s}`,class:"inline-block bg-primary-3/30 text-primary-4 px-1 rounded text-xs mr-1",title:`Genre: ${s}`},f(s),9,ot))),128)),(i(!0),c(R,null,F(d.songData.artistTags?.slice(0,2)||[],s=>(i(),c("span",{key:`artist-${s}`,class:"inline-block bg-primary-2/60 text-primary-4 px-1 rounded text-xs mr-1",title:`Artist tag: ${s}`},f(s),9,rt))),128))])):k("",!0)])):k("",!0)}}),dt=Object.assign(ct,{__name:"AdminMusicDataDisplay"}),ut={key:0,class:"space-y-4"},mt={class:"flex items-center justify-between mb-3"},pt={class:"text-sm font-medium text-primary-4"},ht={class:"overflow-x-auto"},ft={class:"w-full border-collapse text-sm"},gt={class:"p-2"},yt=["onUpdate:modelValue","placeholder"],xt={class:"p-2 text-center"},vt={class:"p-2"},_t=["onUpdate:modelValue","placeholder"],bt={class:"p-2"},$t={class:"flex items-center gap-2"},kt={class:"w-12 h-2 bg-primary-1 rounded-full overflow-hidden"},wt={class:"text-xs text-primary-3 font-mono"},Ct={class:"p-2"},At={key:0,class:"text-xs text-primary-3 text-center"},St={key:1,class:"mt-3 p-2 bg-red-500/10 border border-red-500/20 rounded text-xs text-red-400 text-center"},Mt=U({__name:"AdminSearchForm",props:{parsedTitles:{default:void 0},videoId:{}},emits:["searchComplete","searchError","cancel"],setup(d,{emit:g}){const p=d,s=g,a=b(null),o=b(null),$=b([]);Q(()=>{p.parsedTitles&&($.value=p.parsedTitles.map(y=>({artist:y.artist,title:y.title})))});const T=async y=>{a.value=y;const u=$.value[y];if(!u||!u.artist||!u.title){o.value="Artist and title are required",a.value=null;return}try{const v=await $fetch("/api/musicbrainz/search",{method:"POST",body:{artist:u.artist,title:u.title}});v.success&&v.results?.length>0?(o.value=null,s("searchComplete",v.results)):(o.value="No search results found",s("searchError","No search results found"))}catch(v){const M=v instanceof Error?v.message:"Unknown error occurred";o.value=`Search failed: ${M}`,s("searchError",`Search failed: ${M}`)}finally{a.value=null}},x=()=>{o.value=null,s("cancel")},S=y=>{const u=$.value[y];if(u){const v=u.artist;u.artist=u.title,u.title=v}};return(y,u)=>{const v=O;return d.parsedTitles?.length?(i(),c("div",ut,[t("div",mt,[t("h4",pt," Parsed Titles ("+f(d.parsedTitles.length)+" found) ",1),E(v,{size:"small",variant:"ghost",onClick:x,class:"text-xs"},{default:A(()=>[...u[0]||(u[0]=[_(" Cancel ",-1)])]),_:1})]),t("div",ht,[t("table",ft,[u[6]||(u[6]=t("thead",null,[t("tr",{class:"border-b border-primary-2/50"},[t("th",{class:"text-left p-2 font-medium text-primary-4 text-xs"}," Artist "),t("th",{class:"text-center p-2 font-medium text-primary-4 text-xs w-12"}),t("th",{class:"text-left p-2 font-medium text-primary-4 text-xs"}," Title "),t("th",{class:"text-left p-2 font-medium text-primary-4 text-xs"}," Confidence "),t("th",{class:"text-left p-2 font-medium text-primary-4 text-xs"}," Action ")])],-1)),t("tbody",null,[(i(!0),c(R,null,F(d.parsedTitles,(M,D)=>(i(),c("tr",{key:D,class:"border-b border-primary-2/30 hover:bg-bg-gradient transition-colors"},[t("td",gt,[H(t("input",{"onUpdate:modelValue":P=>l($)[D].artist=P,class:"w-full bg-transparent border border-primary-2/50 rounded px-2 py-1 text-primary-4 text-xs focus:border-accent focus:outline-none",placeholder:M.artist},null,8,yt),[[K,l($)[D].artist]])]),t("td",xt,[E(v,{size:"small",variant:"ghost",onClick:P=>S(D),class:"!p-1 !min-w-0 hover:bg-accent/20",title:"Swap artist and title"},{default:A(()=>[...u[1]||(u[1]=[t("div",{class:"i-mdi-swap-horizontal text-xs"},null,-1)])]),_:1},8,["onClick"])]),t("td",vt,[H(t("input",{"onUpdate:modelValue":P=>l($)[D].title=P,class:"w-full bg-transparent border border-primary-2/50 rounded px-2 py-1 text-primary-3 text-xs focus:border-accent focus:outline-none",placeholder:M.title},null,8,_t),[[K,l($)[D].title]])]),t("td",bt,[t("div",$t,[t("div",kt,[t("div",{class:"h-full bg-accent rounded-full transition-all",style:X({width:`${M.confidence*100}%`})},null,4)]),t("span",wt,f(Math.round(M.confidence*100))+"% ",1)])]),t("td",Ct,[E(v,{size:"small",variant:"primary",disabled:l(a)===D,onClick:P=>T(D),class:"text-xs"},{default:A(()=>[l(a)===D?(i(),c(R,{key:0},[u[2]||(u[2]=t("div",{class:"i-mdi-loading animate-spin mr-1"},null,-1)),u[3]||(u[3]=_(" Searching... ",-1))],64)):(i(),c(R,{key:1},[u[4]||(u[4]=t("div",{class:"i-mdi-magnify mr-1"},null,-1)),u[5]||(u[5]=_(" Search ",-1))],64))]),_:2},1032,["disabled","onClick"])])]))),128))])])]),l(a)!==null?(i(),c("div",At,' Searching MusicBrainz for "'+f(d.parsedTitles[l(a)]?.artist)+" - "+f(d.parsedTitles[l(a)]?.title)+'"... ',1)):k("",!0),l(o)?(i(),c("div",St,f(l(o)),1)):k("",!0)])):k("",!0)}}}),Dt=Object.assign(Mt,{__name:"AdminSearchForm"}),Et={key:0,class:"space-y-2"},Tt=["onClick"],Vt={class:"text-xs font-medium text-primary-4 line-clamp-1"},Rt={class:"text-xs text-primary-3 line-clamp-1"},Pt={class:"flex justify-between items-center mt-1"},zt={class:"text-xs text-primary-3"},Lt={class:"text-xs text-accent"},Ft=U({__name:"AdminSearchResultsSelection",props:{videoId:{},searchResults:{default:void 0}},emits:["matchComplete","matchError","cancel"],setup(d,{emit:g}){const p=d,s=g,a=b(!1),o=async T=>{a.value=!0;try{const x=await $fetch("/api/musicbrainz/match",{method:"POST",body:{videoId:p.videoId,selectedMbid:T}});x.success&&x.data?s("matchComplete",x.data):s("matchError","Failed to match recording")}catch(x){const S=x instanceof Error?x.message:"Unknown error occurred";s("matchError",`Error matching recording: ${S}`)}finally{a.value=!1}},$=()=>{s("cancel")};return(T,x)=>{const S=O;return d.searchResults?.length?(i(),c("div",Et,[x[2]||(x[2]=t("div",{class:"text-xs font-medium text-primary-4 mb-2"}," Select best match: ",-1)),(i(!0),c(R,null,F(d.searchResults.slice(0,3),y=>(i(),c("div",{key:y.id,class:Z(["bg-primary-2 p-2 rounded cursor-pointer hover:bg-primary-3/20 transition-colors",{"opacity-50 pointer-events-none":l(a)}]),onClick:u=>o(y.id)},[t("div",Vt,f(y.title),1),t("div",Rt," by "+f(y.artist),1),t("div",Pt,[t("span",zt,f(y.releaseCount)+" release"+f(y.releaseCount!==1?"s":""),1),t("span",Lt,f(y.score)+"%",1)])],10,Tt))),128)),l(a)?(i(),L(S,{key:0,size:"small",variant:"ghost",disabled:"",class:"text-xs"},{default:A(()=>[...x[0]||(x[0]=[_(" Matching... ",-1)])]),_:1})):(i(),L(S,{key:1,size:"small",variant:"ghost",onClick:$,class:"text-xs"},{default:A(()=>[...x[1]||(x[1]=[_(" Cancel ",-1)])]),_:1}))])):k("",!0)}}}),Ut=Object.assign(Ft,{__name:"AdminSearchResultsSelection"});function C(d){return d.replace(/\s*\((Original\s+Mix|Radio\s+Edit|Extended\s+Mix|Club\s+Mix|Remix|Remaster|Remastered|Version)\)\s*/gi,"").replace(/\s*[-–~|:]\s*$/,"").replace(/^\s*[-–~|:]\s*/,"").replace(/\s*[()\[\]{}]\s*$/,"").replace(/^\s*[()\[\]{}]\s*/,"").replace(/\s*[,;.!?]\s*$/,"").replace(/\s*[-–~|:]\s*[-–~|:]\s*/g," - ").replace(/\s+/g," ").trim()}function jt(d){const g=[],p=Ot(d);let s=p.match(/^(.+?)\s*[-–]\s*([^-–]+?)(?:\s*[-–].*)?$/);if(s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.9})}if(s=p.match(/^(.+?)\s*~\s*(.+?)(?:\s*~.*)?$/),s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.85})}if(s=p.match(/^([^-]+?)\s*-\s*([^-]+?)(?:\s*-.*)?$/),s&&s[1]&&s[2]){const[,a,o]=s,$=["live","version","remix","cover","acoustic","instrumental","edit","remaster","demo","alternate","extended","radio","single"],T=["feat","ft","featuring","vs","x","with","and","&"],x=$.some(v=>a.toLowerCase().includes(v)),S=T.some(v=>o.toLowerCase().includes(v)),y=o.length<25&&o.split(" ").length<=3&&!/[()[\]]/.test(o);(x||y&&!S&&o.length<a.length*.7)&&g.push({artist:C(o),title:C(a),confidence:.75})}if(s=p.match(/^(.+?)\s*:\s*(.+)$/),s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.8})}if(s=p.match(/^(.+?)\s*\|\s*([^|]+?)(?:\s*\|.*)?$/),s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.8})}if(s=p.match(/^(.+?)\s*["'"](.+?)["'"].*$/),s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.85})}if(s=p.match(/^(.+?)\s+([A-Z\s]{3,})(?:\s|$)/),s&&s[1]&&s[2]){const[,a,o]=s;o.trim().split(" ").length<=5&&g.push({artist:C(a),title:C(o),confidence:.7})}return g.length===0&&g.push({artist:"Unknown Artist",title:C(p||d),confidence:.1}),g.sort((a,o)=>o.confidence-a.confidence)}function Ot(d){return d.replace(/\s*\[Official Music Video\]/gi,"").replace(/\s*\[4K Remaster\]/gi,"").replace(/\s*\[(Official|Music|Video|Audio|Lyric|Live|HD|4K|HQ|MV)\s?(Video|Audio|Music|Performance|MV)?\]/gi,"").replace(/\s*\((Official|Music|Video|Audio|Lyric|Live|HD|4K|HQ|MV)\s?(Video|Audio|Music|Performance|MV)?\)/gi,"").replace(/\s*\(\d{4}\)/g,"").replace(/\s*\/\d{4}\/\s*/g,"").replace(/\s*\((Stereo|Mono|Remastered?|Remaster|\d{4}\s*Remaster(ed)?)\)/gi,"").replace(/\s*\[(Stereo|Mono|Remastered?|Remaster|\d{4}\s*Remaster(ed)?)\]/gi,"").replace(/\s*\b(HD|4K|1080p|720p|HQ|High Quality)\b/gi,"").replace(/\s*[fF]t\.?\s+[^-~|:]+?(?=\s*[-~|:]|$)/g,"").replace(/\s*[Ff]eat\.?\s+[^-~|:]+?(?=\s*[-~|:]|$)/g,"").replace(/\s*[Ff]eaturing\.?\s+[^-~|:]+?(?=\s*[-~|:]|$)/g,"").replace(/\s*\([^)]*\)/g,"").replace(/\s+/g," ").trim()}function It(d){return C(d.replace(/\s*(Official|Music|VEVO|Records|Entertainment)$/gi,"").replace(/\s*-.*$/,"").trim())}const Nt={class:"rounded-lg shadow-sm"},Bt={class:"flex items-center justify-between mb-4"},Ht={class:"text-lg font-semibold flex items-center gap-2"},Kt={key:0,class:"text-center py-8"},Qt={key:1,class:"overflow-x-auto"},Yt={class:"w-full border-collapse"},qt={class:"border-b border-primary-2/30 hover:bg-bg-gradient transition-colors"},Jt={class:"p-3"},Xt={class:"flex items-center gap-3"},Zt={class:"flex-shrink-0"},Gt=["src","alt"],Wt={class:"flex-1 min-w-0"},te={class:"font-medium text-primary-4 line-clamp-2 text-sm"},ee=["href"],se={class:"p-3"},ae={class:"text-sm text-primary-3"},le={class:"p-3"},ie={class:"text-sm text-primary-3 font-mono"},ne={class:"p-3"},oe={class:"min-w-48"},re={key:0,class:"text-xs text-primary-3"},ce={class:"p-3"},de={class:"flex flex-wrap items-center gap-2"},ue={key:0,class:"border-b border-primary-2/30"},me={colspan:"5",class:"p-3 space-y-4"},pe=U({__name:"AdminVideoList",props:{videos:{default:()=>[]}},setup(d){const g=d,p=b({}),s=b({}),a=b({}),o=b({}),$=async()=>{for(const r of g.videos)try{const n=await $fetch(`/api/songs/${r.id}`);n.success&&n.data&&(p.value[r.id]=n.data)}catch{}};Q(async()=>{await $()});const T=(r,n)=>{p.value[r]=n,delete s.value[r],delete a.value[r]},x=r=>{console.error("Match error:",r)},S=(r,n)=>{s.value[r]=n},y=r=>{console.error("Search error:",r)},u=r=>{delete s.value[r],delete a.value[r]},v=r=>{const n=jt(r.title);if(n.length===0||n.length===1&&n[0]&&n[0].confidence<=.1){const z={artist:It(r.channel)||"Unknown Artist",title:r.title,confidence:.2};n.length===0?n.push(z):n[0]=z}a.value[r.id]=n},M=r=>{delete a.value[r]},D=r=>{delete p.value[r],delete s.value[r],delete a.value[r]},P=async r=>{try{o.value[r]=!0;const n=await $fetch("/api/musicbrainz/artist-tags",{method:"POST",body:{youtubeId:r}});n.success&&n.data&&(p.value[r]=n.data)}catch(n){console.error("Error fetching artist tags:",n)}finally{delete o.value[r]}};return(r,n)=>{const j=dt,z=O,I=Dt,N=Ut;return i(),c("div",Nt,[t("div",Bt,[t("h3",Ht,[n[2]||(n[2]=t("div",{class:"i-mdi-playlist-music"},null,-1)),_(" Video List ("+f(d.videos.length)+" videos) ",1)])]),d.videos.length?(i(),c("div",Qt,[t("table",Yt,[n[7]||(n[7]=t("thead",null,[t("tr",{class:"border-b border-primary-2"},[t("th",{class:"text-left p-3 font-medium text-primary-4"},"Video"),t("th",{class:"text-left p-3 font-medium text-primary-4"},"Channel"),t("th",{class:"text-left p-3 font-medium text-primary-4"},"Duration"),t("th",{class:"text-left p-3 font-medium text-primary-4"},"Music Data"),t("th",{class:"text-left p-3 font-medium text-primary-4"},"Actions")])],-1)),t("tbody",null,[(i(!0),c(R,null,F(d.videos,(m,h)=>(i(),c(R,{key:m.id},[t("tr",qt,[t("td",Jt,[t("div",Xt,[t("div",Zt,[t("img",{src:m.thumbnail,alt:m.title,class:"w-12 h-12 rounded-full object-cover bg-primary-1"},null,8,Gt)]),t("div",Wt,[t("h4",te,f(m.title),1),t("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",class:"text-xs text-primary-3 hover:text-accent transition-colors"}," Watch on YouTube ",8,ee)])])]),t("td",se,[t("span",ae,f(m.channel),1)]),t("td",le,[t("span",ie,f(m.duration),1)]),t("td",ne,[t("div",oe,[E(j,{"song-data":l(p)[m.id]},null,8,["song-data"]),!l(p)[m.id]&&!l(s)[m.id]?.length&&!l(a)[m.id]?.length?(i(),c("div",re)):k("",!0)])]),t("td",ce,[t("div",de,[!l(p)[m.id]&&!l(a)[m.id]?.length?(i(),L(z,{key:0,icon:"i-mdi-text-search",size:"small",variant:"ghost",onClick:e=>v(m)},{default:A(()=>[...n[4]||(n[4]=[_(" Search ",-1)])]),_:1},8,["onClick"])):k("",!0),l(p)[m.id]&&!l(p)[m.id]?.artistTags?.length&&!l(p)[m.id]?.tags?.length?(i(),L(z,{key:1,icon:"i-mdi-tag-plus",size:"small",variant:"ghost",disabled:l(o)[m.id],onClick:e=>P(m.id)},{default:A(()=>[...n[5]||(n[5]=[_(" Add Artist Tags ",-1)])]),_:1},8,["disabled","onClick"])):k("",!0),l(p)[m.id]?(i(),L(z,{key:2,icon:"i-mdi-delete",size:"small",variant:"ghost",onClick:e=>D(m.id)},{default:A(()=>[...n[6]||(n[6]=[_(" Clear ",-1)])]),_:1},8,["onClick"])):k("",!0)])])]),l(a)[m.id]?.length||l(s)[m.id]?.length?(i(),c("tr",ue,[t("td",me,[l(a)[m.id]?.length?(i(),L(I,{key:0,"video-id":m.id,"parsed-titles":l(a)[m.id],onSearchComplete:e=>S(m.id,e),onSearchError:n[0]||(n[0]=e=>y(e)),onCancel:e=>M(m.id)},null,8,["video-id","parsed-titles","onSearchComplete","onCancel"])):k("",!0),l(s)[m.id]?.length?(i(),L(N,{key:1,"video-id":m.id,"search-results":l(s)[m.id],onMatchComplete:e=>T(m.id,e),onMatchError:n[1]||(n[1]=e=>x(e)),onCancel:e=>u(m.id)},null,8,["video-id","search-results","onMatchComplete","onCancel"])):k("",!0)])])):k("",!0)],64))),128))])])])):(i(),c("div",Kt,[...n[3]||(n[3]=[t("div",{class:"i-mdi-video-outline text-4xl mb-2"},null,-1),t("p",{class:""},"No videos found in this playlist.",-1)])]))])}}}),he=Object.assign(pe,{__name:"AdminVideoList"}),fe={class:"p-8 max-w-6xl mx-auto"},ge={class:"flex items-center justify-between mb-8"},ye={class:"flex flex-col gap-6"},xe={class:"rounded-lg mb-8 shadow-sm"},ve={key:0,class:"rounded-lg p-4 mb-8"},_e={class:"flex items-center gap-2"},be={key:1,class:"rounded-lg p-4 mb-8"},$e={class:"flex items-center gap-2"},ke={class:"rounded-lg shadow-sm"},we={class:"flex items-center justify-between mb-4"},Ce={key:0,class:"text-center py-8"},Ae={key:1,class:"text-center py-8"},Se={key:2,class:"space-y-4"},Me={class:"flex-1"},De={class:"font-medium text-primary-3"},Ee={class:"text-sm"},Te={key:0,class:"text-xs mt-1 line-clamp-2"},Ve={class:"flex items-center gap-2 ml-4"},Re={key:2,class:"rounded-lg shadow-sm"},Pe={class:"flex items-center justify-between mb-4"},ze={class:"text-xl font-semibold flex items-center gap-2"},Le={key:0,class:"text-center py-8"},Fe={key:2,class:"text-center py-8"},Ne=U({__name:"admin",setup(d){G({title:"Admin Panel - Music Playlist View",meta:[{name:"description",content:"Manage your YouTube playlists"}]});const g=b(""),p=b(!1),s=b(""),a=b(""),o=b([]),$=b(!0),T=b(null),x=b(null),S=b(null),y=b(null),u=b(null),v=b([]),M=b(!1);W(async()=>{await r()});const D=h=>{const e=h.trim(),V=e.match(/[?&]list=([a-zA-Z0-9_-]+)/);return V&&V[1]?V[1]:e},P=async()=>{if(g.value.trim()){p.value=!0,s.value="",a.value="";try{const h=D(g.value);if(!h)throw new Error("Invalid playlist ID or URL");const e=await $fetch(`/api/playlists/${h}`);if(e.success)a.value=`Successfully loaded playlist: ${e.data.title}`,g.value="",await r();else throw new Error("Failed to fetch playlist")}catch(h){console.error("Error fetching playlist:",h),s.value=h.data?.message||h.message||"Failed to fetch playlist. Please check the playlist ID and try again."}finally{p.value=!1}}},r=async()=>{try{$.value=!0;const h=await $fetch("/index.json");h.success&&(o.value=h.data)}catch(h){console.error("Error loading cached playlists:",h)}finally{$.value=!1}},n=async h=>{try{T.value=h;const e=await $fetch(`/api/playlists/${h}`);e.success&&(await r(),a.value=`Successfully updated playlist: ${e.data.title}`,s.value="")}catch(e){console.error("Error refreshing playlist:",e),s.value="Failed to refresh playlist",a.value=""}finally{T.value=null}},j=async h=>{if(confirm("Are you sure you want to delete this cached playlist?"))try{x.value=h,await $fetch(`/api/playlists/${h}`,{method:"DELETE"}),await r(),a.value="Successfully deleted cached playlist",s.value=""}catch(e){console.error("Error deleting playlist:",e),s.value="Failed to delete playlist",a.value=""}finally{x.value=null}},z=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),I=async h=>{try{S.value=h.id,M.value=!0;const e=await $fetch(`/playlist/${h.fileName}`);if(e)u.value=h,v.value=e.videos||[];else throw new Error("Failed to load playlist videos")}catch(e){console.error("Error loading playlist for editing:",e),s.value="Failed to load playlist videos",a.value=""}finally{S.value=null,M.value=!1}},N=()=>{u.value=null,v.value=[]},m=async h=>{try{y.value=h,s.value="",a.value="";const e=await $fetch("/api/playlists/update-data",{method:"POST",body:{playlistId:h}});if(e.success)a.value=e.message,await r();else throw new Error("Failed to update playlist music data")}catch(e){console.error("Error updating playlist music data:",e),s.value=e.data?.message||e.message||"Failed to update playlist music data",a.value=""}finally{y.value=null}};return(h,e)=>{const V=O,Y=J,q=he;return i(),c("div",fe,[t("div",ge,[e[2]||(e[2]=t("h1",{class:"text-3xl font-bold flex items-center gap-3"},[t("div",{class:"i-mdi-cog"}),_(" Admin Panel ")],-1)),E(V,{icon:"i-mdi-arrow-left",variant:"primary",to:"/"},{default:A(()=>[...e[1]||(e[1]=[_(" Back to Playlists ",-1)])]),_:1})]),t("div",ye,[t("div",xe,[e[3]||(e[3]=t("h2",{class:"text-xl font-semibold mb-4 flex items-center gap-2"},[t("div",{class:"i-mdi-plus"}),_(" Add New Playlist ")],-1)),t("form",{class:"space-y-4",onSubmit:tt(P,["prevent"])},[E(Y,{id:"playlistId",modelValue:l(g),"onUpdate:modelValue":e[0]||(e[0]=w=>et(g)?g.value=w:null),label:"YouTube Playlist ID or URL",placeholder:"Enter playlist ID (e.g., PLrAXtmRdnEQy8VVXvSgb5eKzwJJxd0FMz) or full URL",class:"max-w-xl","help-text":"You can paste either the playlist ID or the full YouTube playlist URL",disabled:l(p),required:""},null,8,["modelValue","disabled"]),E(V,{type:"submit",icon:"i-mdi-download",size:"medium",disabled:!l(g).trim(),loading:l(p),"show-text-while-loading":!0},{default:A(()=>[_(f(l(p)?"Loading...":"Load Playlist"),1)]),_:1},8,["disabled","loading"])],32)]),l(a)?(i(),c("div",ve,[t("div",_e,[e[4]||(e[4]=t("div",{class:"i-mdi-check-circle"},null,-1)),e[5]||(e[5]=t("strong",null,"Success:",-1)),_(" "+f(l(a)),1)])])):k("",!0),l(s)?(i(),c("div",be,[t("div",$e,[e[6]||(e[6]=t("div",{class:"i-mdi-alert-circle"},null,-1)),e[7]||(e[7]=t("strong",null,"Error:",-1)),_(" "+f(l(s)),1)])])):k("",!0),t("div",ke,[t("div",we,[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold flex items-center gap-2"},[t("div",{class:"i-mdi-playlist-play"}),_(" Cached Playlists ")],-1)),E(V,{icon:"i-mdi-refresh",size:"small",loading:l($),onClick:r},{default:A(()=>[...e[8]||(e[8]=[_(" Refresh ",-1)])]),_:1},8,["loading"])]),l($)?(i(),c("div",Ce,[...e[10]||(e[10]=[t("div",{class:"i-mdi-loading animate-spin text-2xl mb-2"},null,-1),t("p",{class:""},"Loading cached playlists...",-1)])])):l(o).length?(i(),c("div",Se,[(i(!0),c(R,null,F(l(o),w=>(i(),c("div",{key:w.id,class:"flex items-center justify-between rounded-lg hover:bg-bg-gradient py-6"},[t("div",Me,[t("h3",De,f(w.title),1),t("p",Ee,f(w.videoCount)+" videos • Last updated: "+f(z(w.lastFetched)),1),w.description?(i(),c("p",Te,f(w.description),1)):k("",!0)]),t("div",Ve,[E(V,{icon:"i-mdi-database-plus",size:"small",variant:"primary",loading:l(y)===w.id,onClick:B=>m(w.id)},{default:A(()=>[...e[12]||(e[12]=[_(" Update All Music Data ",-1)])]),_:1},8,["loading","onClick"]),E(V,{icon:"i-mdi-pencil",size:"small",variant:"secondary",loading:l(S)===w.id,onClick:B=>I(w)},{default:A(()=>[...e[13]||(e[13]=[_(" Edit ",-1)])]),_:1},8,["loading","onClick"]),E(V,{icon:"i-mdi-refresh",size:"small",loading:l(T)===w.id,onClick:B=>n(w.id)},{default:A(()=>[...e[14]||(e[14]=[_(" Update ",-1)])]),_:1},8,["loading","onClick"]),E(V,{icon:"i-mdi-delete",size:"small",variant:"danger",loading:l(x)===w.id,onClick:B=>j(w.id)},{default:A(()=>[...e[15]||(e[15]=[_(" Delete ",-1)])]),_:1},8,["loading","onClick"])])]))),128))])):(i(),c("div",Ae,[...e[11]||(e[11]=[t("div",{class:"i-mdi-playlist-remove text-4xl mb-2"},null,-1),t("p",{class:""},"No cached playlists found.",-1)])]))]),l(u)?(i(),c("div",Re,[t("div",Pe,[t("h2",ze,[e[16]||(e[16]=t("div",{class:"i-mdi-pencil"},null,-1)),_(" Editing: "+f(l(u).title),1)]),E(V,{icon:"i-mdi-close",size:"small",variant:"ghost",onClick:N},{default:A(()=>[...e[17]||(e[17]=[_(" Close ",-1)])]),_:1})]),l(M)?(i(),c("div",Le,[...e[18]||(e[18]=[t("div",{class:"i-mdi-loading animate-spin text-2xl mb-2"},null,-1),t("p",{class:""},"Loading playlist videos...",-1)])])):l(v).length?(i(),L(q,{key:1,videos:l(v)},null,8,["videos"])):(i(),c("div",Fe,[...e[19]||(e[19]=[t("div",{class:"i-mdi-video-off text-4xl mb-2"},null,-1),t("p",{class:""},"No videos found in this playlist.",-1)])]))])):k("",!0)])])}}});export{Ne as default};
