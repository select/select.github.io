import{_ as O}from"./_v23j7ja.js";import{_ as X}from"./BsPME8UN.js";import{e as U,c as d,f as w,o as i,a as t,t as f,F as R,r as F,g as b,h as Y,b as E,w as A,d as _,i as K,v as Q,j as l,k as H,n as Z,l as L,m as G,u as W,p as tt,q as et}from"./CA9ftbMx.js";import"./sLnsEy2_.js";const st={key:0,class:"p-2 rounded text-xs"},at={class:"font-medium text-primary-4 line-clamp-1"},lt={class:"text-primary-3 line-clamp-1"},it={key:0,class:"text-primary-3 line-clamp-1"},nt={key:1,class:"mt-1 flex gap-2 flex-wrap"},ot=["title"],rt=["title"],ct=U({__name:"AdminMusicDataDisplay",props:{songData:{default:void 0}},setup(u){return(g,p)=>u.songData?(i(),d("div",st,[t("div",at,f(u.songData.title),1),t("div",lt,"by "+f(u.songData.artist),1),u.songData.album?(i(),d("div",it,f(u.songData.album),1)):w("",!0),u.songData.tags?.length||u.songData.genres?.length||u.songData.artistTags?.length?(i(),d("div",nt,[(i(!0),d(R,null,F(u.songData.tags?.slice(0,3)||[],s=>(i(),d("span",{key:`song-${s}`,class:"inline-block bg-accent/20 text-black px-1 rounded text-xs mr-1"},f(s),1))),128)),(i(!0),d(R,null,F(u.songData.genres?.slice(0,3)||[],s=>(i(),d("span",{key:`genre-${s}`,class:"inline-block bg-primary-3/30 text-primary-4 px-1 rounded text-xs mr-1",title:`Genre: ${s}`},f(s),9,ot))),128)),(i(!0),d(R,null,F(u.songData.artistTags?.slice(0,2)||[],s=>(i(),d("span",{key:`artist-${s}`,class:"inline-block bg-primary-2/60 text-primary-4 px-1 rounded text-xs mr-1",title:`Artist tag: ${s}`},f(s),9,rt))),128))])):w("",!0)])):w("",!0)}}),dt=Object.assign(ct,{__name:"AdminMusicDataDisplay"}),ut={key:0,class:"space-y-4"},mt={class:"flex items-center justify-between mb-3"},pt={class:"text-sm font-medium text-primary-4"},ht={class:"overflow-x-auto"},ft={class:"w-full border-collapse text-sm"},gt={class:"p-2"},yt=["onUpdate:modelValue","placeholder"],xt={class:"p-2 text-center"},vt={class:"p-2"},_t=["onUpdate:modelValue","placeholder"],bt={class:"p-2"},$t={class:"flex items-center gap-2"},wt={class:"w-12 h-2 bg-primary-1 rounded-full overflow-hidden"},kt={class:"text-xs text-primary-3 font-mono"},Ct={class:"p-2"},At={key:0,class:"text-xs text-primary-3 text-center"},St={key:1,class:"mt-3 p-2 bg-red-500/10 border border-red-500/20 rounded text-xs text-red-400 text-center"},Mt=U({__name:"AdminSearchForm",props:{parsedTitles:{default:void 0},videoId:{}},emits:["searchComplete","searchError","cancel"],setup(u,{emit:g}){const p=u,s=g,a=b(null),o=b(null),$=b([]);Y(()=>{p.parsedTitles&&($.value=p.parsedTitles.map(y=>({artist:y.artist,title:y.title})))});const T=async y=>{a.value=y;const r=$.value[y];if(!r||!r.artist||!r.title){o.value="Artist and title are required",a.value=null;return}try{const v=await $fetch("/api/musicbrainz/search",{method:"POST",body:{artist:r.artist,title:r.title}});v.success&&v.results?.length>0?(o.value=null,s("searchComplete",v.results)):(o.value="No search results found",s("searchError","No search results found"))}catch(v){const M=v instanceof Error?v.message:"Unknown error occurred";o.value=`Search failed: ${M}`,s("searchError",`Search failed: ${M}`)}finally{a.value=null}},x=()=>{o.value=null,s("cancel")},S=y=>{const r=$.value[y];if(r){const v=r.artist;r.artist=r.title,r.title=v}};return(y,r)=>{const v=O;return u.parsedTitles?.length?(i(),d("div",ut,[t("div",mt,[t("h4",pt," Parsed Titles ("+f(u.parsedTitles.length)+" found) ",1),E(v,{size:"small",variant:"ghost",onClick:x,class:"text-xs"},{default:A(()=>[...r[2]||(r[2]=[_(" Cancel ",-1)])]),_:1})]),t("div",ht,[t("table",ft,[r[8]||(r[8]=t("thead",null,[t("tr",{class:"border-b border-primary-2/50"},[t("th",{class:"text-left p-2 font-medium text-primary-4 text-xs"}," Artist "),t("th",{class:"text-center p-2 font-medium text-primary-4 text-xs w-12"}),t("th",{class:"text-left p-2 font-medium text-primary-4 text-xs"}," Title "),t("th",{class:"text-left p-2 font-medium text-primary-4 text-xs"}," Confidence "),t("th",{class:"text-left p-2 font-medium text-primary-4 text-xs"}," Action ")])],-1)),t("tbody",null,[(i(!0),d(R,null,F(u.parsedTitles,(M,D)=>(i(),d("tr",{key:D,class:"border-b border-primary-2/30 hover:bg-bg-gradient transition-colors"},[t("td",gt,[K(t("input",{"onUpdate:modelValue":P=>l($)[D].artist=P,class:"w-full bg-transparent border border-primary-2/50 rounded px-2 py-1 text-primary-4 text-xs focus:border-accent focus:outline-none",placeholder:M.artist,"data-input":"",onKeydown:r[0]||(r[0]=H(()=>{},["stop"]))},null,40,yt),[[Q,l($)[D].artist]])]),t("td",xt,[E(v,{size:"small",variant:"ghost",onClick:P=>S(D),class:"!p-1 !min-w-0 hover:bg-accent/20",title:"Swap artist and title"},{default:A(()=>[...r[3]||(r[3]=[t("div",{class:"i-mdi-swap-horizontal text-xs"},null,-1)])]),_:1},8,["onClick"])]),t("td",vt,[K(t("input",{"onUpdate:modelValue":P=>l($)[D].title=P,class:"w-full bg-transparent border border-primary-2/50 rounded px-2 py-1 text-primary-3 text-xs focus:border-accent focus:outline-none",placeholder:M.title,"data-input":"",onKeydown:r[1]||(r[1]=H(()=>{},["stop"]))},null,40,_t),[[Q,l($)[D].title]])]),t("td",bt,[t("div",$t,[t("div",wt,[t("div",{class:"h-full bg-accent rounded-full transition-all",style:Z({width:`${M.confidence*100}%`})},null,4)]),t("span",kt,f(Math.round(M.confidence*100))+"% ",1)])]),t("td",Ct,[E(v,{size:"small",variant:"primary",disabled:l(a)===D,onClick:P=>T(D),class:"text-xs"},{default:A(()=>[l(a)===D?(i(),d(R,{key:0},[r[4]||(r[4]=t("div",{class:"i-mdi-loading animate-spin mr-1"},null,-1)),r[5]||(r[5]=_(" Searching... ",-1))],64)):(i(),d(R,{key:1},[r[6]||(r[6]=t("div",{class:"i-mdi-magnify mr-1"},null,-1)),r[7]||(r[7]=_(" Search ",-1))],64))]),_:2},1032,["disabled","onClick"])])]))),128))])])]),l(a)!==null?(i(),d("div",At,' Searching MusicBrainz for "'+f(u.parsedTitles[l(a)]?.artist)+" - "+f(u.parsedTitles[l(a)]?.title)+'"... ',1)):w("",!0),l(o)?(i(),d("div",St,f(l(o)),1)):w("",!0)])):w("",!0)}}}),Dt=Object.assign(Mt,{__name:"AdminSearchForm"}),Et={key:0,class:"space-y-2"},Tt=["onClick"],Vt={class:"text-xs font-medium text-primary-4 line-clamp-1"},Rt={class:"text-xs text-primary-3 line-clamp-1"},Pt={class:"flex justify-between items-center mt-1"},zt={class:"text-xs text-primary-3"},Lt={class:"text-xs text-accent"},Ft=U({__name:"AdminSearchResultsSelection",props:{videoId:{},searchResults:{default:void 0}},emits:["matchComplete","matchError","cancel"],setup(u,{emit:g}){const p=u,s=g,a=b(!1),o=async T=>{a.value=!0;try{const x=await $fetch("/api/musicbrainz/match",{method:"POST",body:{videoId:p.videoId,selectedMbid:T}});x.success&&x.data?s("matchComplete",x.data):s("matchError","Failed to match recording")}catch(x){const S=x instanceof Error?x.message:"Unknown error occurred";s("matchError",`Error matching recording: ${S}`)}finally{a.value=!1}},$=()=>{s("cancel")};return(T,x)=>{const S=O;return u.searchResults?.length?(i(),d("div",Et,[x[2]||(x[2]=t("div",{class:"text-xs font-medium text-primary-4 mb-2"}," Select best match: ",-1)),(i(!0),d(R,null,F(u.searchResults.slice(0,3),y=>(i(),d("div",{key:y.id,class:G(["bg-primary-2 p-2 rounded cursor-pointer hover:bg-primary-3/20 transition-colors",{"opacity-50 pointer-events-none":l(a)}]),onClick:r=>o(y.id)},[t("div",Vt,f(y.title),1),t("div",Rt," by "+f(y.artist),1),t("div",Pt,[t("span",zt,f(y.releaseCount)+" release"+f(y.releaseCount!==1?"s":""),1),t("span",Lt,f(y.score)+"%",1)])],10,Tt))),128)),l(a)?(i(),L(S,{key:0,size:"small",variant:"ghost",disabled:"",class:"text-xs"},{default:A(()=>[...x[0]||(x[0]=[_(" Matching... ",-1)])]),_:1})):(i(),L(S,{key:1,size:"small",variant:"ghost",onClick:$,class:"text-xs"},{default:A(()=>[...x[1]||(x[1]=[_(" Cancel ",-1)])]),_:1}))])):w("",!0)}}}),Ut=Object.assign(Ft,{__name:"AdminSearchResultsSelection"});function C(u){return u.replace(/\s*\((Original\s+Mix|Radio\s+Edit|Extended\s+Mix|Club\s+Mix|Remix|Remaster|Remastered|Version)\)\s*/gi,"").replace(/\s*[-–~|:]\s*$/,"").replace(/^\s*[-–~|:]\s*/,"").replace(/\s*[()\[\]{}]\s*$/,"").replace(/^\s*[()\[\]{}]\s*/,"").replace(/\s*[,;.!?]\s*$/,"").replace(/\s*[-–~|:]\s*[-–~|:]\s*/g," - ").replace(/\s+/g," ").trim()}function jt(u){const g=[],p=Ot(u);let s=p.match(/^(.+?)\s*[-–]\s*([^-–]+?)(?:\s*[-–].*)?$/);if(s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.9})}if(s=p.match(/^(.+?)\s*~\s*(.+?)(?:\s*~.*)?$/),s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.85})}if(s=p.match(/^([^-]+?)\s*-\s*([^-]+?)(?:\s*-.*)?$/),s&&s[1]&&s[2]){const[,a,o]=s,$=["live","version","remix","cover","acoustic","instrumental","edit","remaster","demo","alternate","extended","radio","single"],T=["feat","ft","featuring","vs","x","with","and","&"],x=$.some(v=>a.toLowerCase().includes(v)),S=T.some(v=>o.toLowerCase().includes(v)),y=o.length<25&&o.split(" ").length<=3&&!/[()[\]]/.test(o);(x||y&&!S&&o.length<a.length*.7)&&g.push({artist:C(o),title:C(a),confidence:.75})}if(s=p.match(/^(.+?)\s*:\s*(.+)$/),s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.8})}if(s=p.match(/^(.+?)\s*\|\s*([^|]+?)(?:\s*\|.*)?$/),s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.8})}if(s=p.match(/^(.+?)\s*["'"](.+?)["'"].*$/),s&&s[1]&&s[2]){const[,a,o]=s;g.push({artist:C(a),title:C(o),confidence:.85})}if(s=p.match(/^(.+?)\s+([A-Z\s]{3,})(?:\s|$)/),s&&s[1]&&s[2]){const[,a,o]=s;o.trim().split(" ").length<=5&&g.push({artist:C(a),title:C(o),confidence:.7})}return g.length===0&&g.push({artist:"Unknown Artist",title:C(p||u),confidence:.1}),g.sort((a,o)=>o.confidence-a.confidence)}function Ot(u){return u.replace(/\s*\[Official Music Video\]/gi,"").replace(/\s*\[4K Remaster\]/gi,"").replace(/\s*\[(Official|Music|Video|Audio|Lyric|Live|HD|4K|HQ|MV)\s?(Video|Audio|Music|Performance|MV)?\]/gi,"").replace(/\s*\((Official|Music|Video|Audio|Lyric|Live|HD|4K|HQ|MV)\s?(Video|Audio|Music|Performance|MV)?\)/gi,"").replace(/\s*\(\d{4}\)/g,"").replace(/\s*\/\d{4}\/\s*/g,"").replace(/\s*\((Stereo|Mono|Remastered?|Remaster|\d{4}\s*Remaster(ed)?)\)/gi,"").replace(/\s*\[(Stereo|Mono|Remastered?|Remaster|\d{4}\s*Remaster(ed)?)\]/gi,"").replace(/\s*\b(HD|4K|1080p|720p|HQ|High Quality)\b/gi,"").replace(/\s*[fF]t\.?\s+[^-~|:]+?(?=\s*[-~|:]|$)/g,"").replace(/\s*[Ff]eat\.?\s+[^-~|:]+?(?=\s*[-~|:]|$)/g,"").replace(/\s*[Ff]eaturing\.?\s+[^-~|:]+?(?=\s*[-~|:]|$)/g,"").replace(/\s*\([^)]*\)/g,"").replace(/\s+/g," ").trim()}function It(u){return C(u.replace(/\s*(Official|Music|VEVO|Records|Entertainment)$/gi,"").replace(/\s*-.*$/,"").trim())}const Nt={class:"rounded-lg shadow-sm"},Bt={class:"flex items-center justify-between mb-4"},Ht={class:"text-lg font-semibold flex items-center gap-2"},Kt={key:0,class:"text-center py-8"},Qt={key:1,class:"overflow-x-auto"},Yt={class:"w-full border-collapse"},qt={class:"border-b border-primary-2/30 hover:bg-bg-gradient transition-colors"},Jt={class:"p-3"},Xt={class:"flex items-center gap-3"},Zt={class:"flex-shrink-0"},Gt=["src","alt"],Wt={class:"flex-1 min-w-0"},te={class:"font-medium text-primary-4 line-clamp-2 text-sm"},ee=["href"],se={class:"p-3"},ae={class:"text-sm text-primary-3"},le={class:"p-3"},ie={class:"text-sm text-primary-3 font-mono"},ne={class:"p-3"},oe={class:"min-w-48"},re={key:0,class:"text-xs text-primary-3"},ce={class:"p-3"},de={class:"flex flex-wrap items-center gap-2"},ue={key:0,class:"border-b border-primary-2/30"},me={colspan:"5",class:"p-3 space-y-4"},pe=U({__name:"AdminVideoList",props:{videos:{default:()=>[]}},setup(u){const g=u,p=b({}),s=b({}),a=b({}),o=b({}),$=async()=>{for(const c of g.videos)try{const n=await $fetch(`/api/songs/${c.id}`);n.success&&n.data&&(p.value[c.id]=n.data)}catch{}};Y(async()=>{await $()});const T=(c,n)=>{p.value[c]=n,delete s.value[c],delete a.value[c]},x=c=>{console.error("Match error:",c)},S=(c,n)=>{s.value[c]=n},y=c=>{console.error("Search error:",c)},r=c=>{delete s.value[c],delete a.value[c]},v=c=>{const n=jt(c.title);if(n.length===0||n.length===1&&n[0]&&n[0].confidence<=.1){const z={artist:It(c.channel)||"Unknown Artist",title:c.title,confidence:.2};n.length===0?n.push(z):n[0]=z}a.value[c.id]=n},M=c=>{delete a.value[c]},D=c=>{delete p.value[c],delete s.value[c],delete a.value[c]},P=async c=>{try{o.value[c]=!0;const n=await $fetch("/api/musicbrainz/artist-tags",{method:"POST",body:{youtubeId:c}});n.success&&n.data&&(p.value[c]=n.data)}catch(n){console.error("Error fetching artist tags:",n)}finally{delete o.value[c]}};return(c,n)=>{const j=dt,z=O,I=Dt,N=Ut;return i(),d("div",Nt,[t("div",Bt,[t("h3",Ht,[n[2]||(n[2]=t("div",{class:"i-mdi-playlist-music"},null,-1)),_(" Video List ("+f(u.videos.length)+" videos) ",1)])]),u.videos.length?(i(),d("div",Qt,[t("table",Yt,[n[7]||(n[7]=t("thead",null,[t("tr",{class:"border-b border-primary-2"},[t("th",{class:"text-left p-3 font-medium text-primary-4"},"Video"),t("th",{class:"text-left p-3 font-medium text-primary-4"},"Channel"),t("th",{class:"text-left p-3 font-medium text-primary-4"},"Duration"),t("th",{class:"text-left p-3 font-medium text-primary-4"},"Music Data"),t("th",{class:"text-left p-3 font-medium text-primary-4"},"Actions")])],-1)),t("tbody",null,[(i(!0),d(R,null,F(u.videos,(m,h)=>(i(),d(R,{key:m.id},[t("tr",qt,[t("td",Jt,[t("div",Xt,[t("div",Zt,[t("img",{src:`https://i.ytimg.com/vi/${m.id}/hqdefault.jpg`,alt:m.title,class:"w-12 h-12 rounded-full object-cover bg-primary-1"},null,8,Gt)]),t("div",Wt,[t("h4",te,f(m.title),1),t("a",{href:`https://www.youtube.com/watch?v=${m.id}`,target:"_blank",rel:"noopener noreferrer",class:"text-xs text-primary-3 hover:text-accent transition-colors"}," Watch on YouTube ",8,ee)])])]),t("td",se,[t("span",ae,f(m.channel),1)]),t("td",le,[t("span",ie,f(m.duration),1)]),t("td",ne,[t("div",oe,[E(j,{"song-data":l(p)[m.id]},null,8,["song-data"]),!l(p)[m.id]&&!l(s)[m.id]?.length&&!l(a)[m.id]?.length?(i(),d("div",re)):w("",!0)])]),t("td",ce,[t("div",de,[!l(p)[m.id]&&!l(a)[m.id]?.length?(i(),L(z,{key:0,icon:"i-mdi-text-search",size:"small",variant:"ghost",onClick:e=>v(m)},{default:A(()=>[...n[4]||(n[4]=[_(" Search ",-1)])]),_:1},8,["onClick"])):w("",!0),l(p)[m.id]&&!l(p)[m.id]?.artistTags?.length&&!l(p)[m.id]?.tags?.length?(i(),L(z,{key:1,icon:"i-mdi-tag-plus",size:"small",variant:"ghost",disabled:l(o)[m.id],onClick:e=>P(m.id)},{default:A(()=>[...n[5]||(n[5]=[_(" Add Artist Tags ",-1)])]),_:1},8,["disabled","onClick"])):w("",!0),l(p)[m.id]?(i(),L(z,{key:2,icon:"i-mdi-delete",size:"small",variant:"ghost",onClick:e=>D(m.id)},{default:A(()=>[...n[6]||(n[6]=[_(" Clear ",-1)])]),_:1},8,["onClick"])):w("",!0)])])]),l(a)[m.id]?.length||l(s)[m.id]?.length?(i(),d("tr",ue,[t("td",me,[l(a)[m.id]?.length?(i(),L(I,{key:0,"video-id":m.id,"parsed-titles":l(a)[m.id],onSearchComplete:e=>S(m.id,e),onSearchError:n[0]||(n[0]=e=>y(e)),onCancel:e=>M(m.id)},null,8,["video-id","parsed-titles","onSearchComplete","onCancel"])):w("",!0),l(s)[m.id]?.length?(i(),L(N,{key:1,"video-id":m.id,"search-results":l(s)[m.id],onMatchComplete:e=>T(m.id,e),onMatchError:n[1]||(n[1]=e=>x(e)),onCancel:e=>r(m.id)},null,8,["video-id","search-results","onMatchComplete","onCancel"])):w("",!0)])])):w("",!0)],64))),128))])])])):(i(),d("div",Kt,[...n[3]||(n[3]=[t("div",{class:"i-mdi-video-outline text-4xl mb-2"},null,-1),t("p",{class:""},"No videos found in this playlist.",-1)])]))])}}}),he=Object.assign(pe,{__name:"AdminVideoList"}),fe={class:"p-8 max-w-6xl mx-auto"},ge={class:"flex items-center justify-between mb-8"},ye={class:"flex flex-col gap-6"},xe={class:"rounded-lg mb-8 shadow-sm"},ve={key:0,class:"rounded-lg p-4 mb-8"},_e={class:"flex items-center gap-2"},be={key:1,class:"rounded-lg p-4 mb-8"},$e={class:"flex items-center gap-2"},we={class:"rounded-lg shadow-sm"},ke={class:"flex items-center justify-between mb-4"},Ce={key:0,class:"text-center py-8"},Ae={key:1,class:"text-center py-8"},Se={key:2,class:"space-y-4"},Me={class:"flex-1"},De={class:"font-medium text-primary-3"},Ee={class:"text-sm"},Te={key:0,class:"text-xs mt-1 line-clamp-2"},Ve={class:"flex items-center gap-2 ml-4"},Re={key:2,class:"rounded-lg shadow-sm"},Pe={class:"flex items-center justify-between mb-4"},ze={class:"text-xl font-semibold flex items-center gap-2"},Le={key:0,class:"text-center py-8"},Fe={key:2,class:"text-center py-8"},Ne=U({__name:"admin",setup(u){W({title:"Admin Panel - Music Playlist View",meta:[{name:"description",content:"Manage your YouTube playlists"}]});const g=b(""),p=b(!1),s=b(""),a=b(""),o=b([]),$=b(!0),T=b(null),x=b(null),S=b(null),y=b(null),r=b(null),v=b([]),M=b(!1);tt(async()=>{await c()});const D=h=>{const e=h.trim(),V=e.match(/[?&]list=([a-zA-Z0-9_-]+)/);return V&&V[1]?V[1]:e},P=async()=>{if(g.value.trim()){p.value=!0,s.value="",a.value="";try{const h=D(g.value);if(!h)throw new Error("Invalid playlist ID or URL");const e=await $fetch(`/api/playlists/${h}`);if(e.success)a.value=`Successfully loaded playlist: ${e.data.title}`,g.value="",await c();else throw new Error("Failed to fetch playlist")}catch(h){console.error("Error fetching playlist:",h),s.value=h.data?.message||h.message||"Failed to fetch playlist. Please check the playlist ID and try again."}finally{p.value=!1}}},c=async()=>{try{$.value=!0;const h=await $fetch("/index.json");h.success&&(o.value=h.data)}catch(h){console.error("Error loading cached playlists:",h)}finally{$.value=!1}},n=async h=>{try{T.value=h;const e=await $fetch(`/api/playlists/${h}`);e.success&&(await c(),a.value=`Successfully updated playlist: ${e.data.title}`,s.value="")}catch(e){console.error("Error refreshing playlist:",e),s.value="Failed to refresh playlist",a.value=""}finally{T.value=null}},j=async h=>{if(confirm("Are you sure you want to delete this cached playlist?"))try{x.value=h,await $fetch(`/api/playlists/${h}`,{method:"DELETE"}),await c(),a.value="Successfully deleted cached playlist",s.value=""}catch(e){console.error("Error deleting playlist:",e),s.value="Failed to delete playlist",a.value=""}finally{x.value=null}},z=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),I=async h=>{try{S.value=h.id,M.value=!0;const e=await $fetch(`/playlist/${h.fileName}`);if(e)r.value=h,v.value=e.videos||[];else throw new Error("Failed to load playlist videos")}catch(e){console.error("Error loading playlist for editing:",e),s.value="Failed to load playlist videos",a.value=""}finally{S.value=null,M.value=!1}},N=()=>{r.value=null,v.value=[]},m=async h=>{try{y.value=h,s.value="",a.value="";const e=await $fetch("/api/playlists/update-data",{method:"POST",body:{playlistId:h}});if(e.success)a.value=e.message,await c();else throw new Error("Failed to update playlist music data")}catch(e){console.error("Error updating playlist music data:",e),s.value=e.data?.message||e.message||"Failed to update playlist music data",a.value=""}finally{y.value=null}};return(h,e)=>{const V=O,q=X,J=he;return i(),d("div",fe,[t("div",ge,[e[2]||(e[2]=t("h1",{class:"text-3xl font-bold flex items-center gap-3"},[t("div",{class:"i-mdi-cog"}),_(" Admin Panel ")],-1)),E(V,{icon:"i-mdi-arrow-left",variant:"primary",to:"/"},{default:A(()=>[...e[1]||(e[1]=[_(" Back to Playlists ",-1)])]),_:1})]),t("div",ye,[t("div",xe,[e[3]||(e[3]=t("h2",{class:"text-xl font-semibold mb-4 flex items-center gap-2"},[t("div",{class:"i-mdi-plus"}),_(" Add New Playlist ")],-1)),t("form",{class:"space-y-4",onSubmit:H(P,["prevent"])},[E(q,{id:"playlistId",modelValue:l(g),"onUpdate:modelValue":e[0]||(e[0]=k=>et(g)?g.value=k:null),label:"YouTube Playlist ID or URL",placeholder:"Enter playlist ID (e.g., PLrAXtmRdnEQy8VVXvSgb5eKzwJJxd0FMz) or full URL",class:"max-w-xl","help-text":"You can paste either the playlist ID or the full YouTube playlist URL",disabled:l(p),required:""},null,8,["modelValue","disabled"]),E(V,{type:"submit",icon:"i-mdi-download",size:"medium",disabled:!l(g).trim(),loading:l(p),"show-text-while-loading":!0},{default:A(()=>[_(f(l(p)?"Loading...":"Load Playlist"),1)]),_:1},8,["disabled","loading"])],32)]),l(a)?(i(),d("div",ve,[t("div",_e,[e[4]||(e[4]=t("div",{class:"i-mdi-check-circle"},null,-1)),e[5]||(e[5]=t("strong",null,"Success:",-1)),_(" "+f(l(a)),1)])])):w("",!0),l(s)?(i(),d("div",be,[t("div",$e,[e[6]||(e[6]=t("div",{class:"i-mdi-alert-circle"},null,-1)),e[7]||(e[7]=t("strong",null,"Error:",-1)),_(" "+f(l(s)),1)])])):w("",!0),t("div",we,[t("div",ke,[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold flex items-center gap-2"},[t("div",{class:"i-mdi-playlist-play"}),_(" Cached Playlists ")],-1)),E(V,{icon:"i-mdi-refresh",size:"small",loading:l($),onClick:c},{default:A(()=>[...e[8]||(e[8]=[_(" Refresh ",-1)])]),_:1},8,["loading"])]),l($)?(i(),d("div",Ce,[...e[10]||(e[10]=[t("div",{class:"i-mdi-loading animate-spin text-2xl mb-2"},null,-1),t("p",{class:""},"Loading cached playlists...",-1)])])):l(o).length?(i(),d("div",Se,[(i(!0),d(R,null,F(l(o),k=>(i(),d("div",{key:k.id,class:"flex items-center justify-between rounded-lg hover:bg-bg-gradient py-6"},[t("div",Me,[t("h3",De,f(k.title),1),t("p",Ee,f(k.videoCount)+" videos • Last updated: "+f(z(k.lastFetched)),1),k.description?(i(),d("p",Te,f(k.description),1)):w("",!0)]),t("div",Ve,[E(V,{icon:"i-mdi-database-plus",size:"small",variant:"primary",loading:l(y)===k.id,onClick:B=>m(k.id)},{default:A(()=>[...e[12]||(e[12]=[_(" Update All Music Data ",-1)])]),_:1},8,["loading","onClick"]),E(V,{icon:"i-mdi-pencil",size:"small",variant:"secondary",loading:l(S)===k.id,onClick:B=>I(k)},{default:A(()=>[...e[13]||(e[13]=[_(" Edit ",-1)])]),_:1},8,["loading","onClick"]),E(V,{icon:"i-mdi-refresh",size:"small",loading:l(T)===k.id,onClick:B=>n(k.id)},{default:A(()=>[...e[14]||(e[14]=[_(" Update ",-1)])]),_:1},8,["loading","onClick"]),E(V,{icon:"i-mdi-delete",size:"small",variant:"danger",loading:l(x)===k.id,onClick:B=>j(k.id)},{default:A(()=>[...e[15]||(e[15]=[_(" Delete ",-1)])]),_:1},8,["loading","onClick"])])]))),128))])):(i(),d("div",Ae,[...e[11]||(e[11]=[t("div",{class:"i-mdi-playlist-remove text-4xl mb-2"},null,-1),t("p",{class:""},"No cached playlists found.",-1)])]))]),l(r)?(i(),d("div",Re,[t("div",Pe,[t("h2",ze,[e[16]||(e[16]=t("div",{class:"i-mdi-pencil"},null,-1)),_(" Editing: "+f(l(r).title),1)]),E(V,{icon:"i-mdi-close",size:"small",variant:"ghost",onClick:N},{default:A(()=>[...e[17]||(e[17]=[_(" Close ",-1)])]),_:1})]),l(M)?(i(),d("div",Le,[...e[18]||(e[18]=[t("div",{class:"i-mdi-loading animate-spin text-2xl mb-2"},null,-1),t("p",{class:""},"Loading playlist videos...",-1)])])):l(v).length?(i(),L(J,{key:1,videos:l(v)},null,8,["videos"])):(i(),d("div",Fe,[...e[19]||(e[19]=[t("div",{class:"i-mdi-video-off text-4xl mb-2"},null,-1),t("p",{class:""},"No videos found in this playlist.",-1)])]))])):w("",!0)])])}}});export{Ne as default};
