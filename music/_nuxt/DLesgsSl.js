import{_ as Te}from"./goYnVs-h.js";import{_ as fe,c as Fe,g as me,a as pe,b as ge}from"./fBXjPMKJ.js";import{e as vt,h as Q,p as et,x as Mt,c as L,o as E,f as X,a as l,t as W,g as $,F as ot,r as lt,d as at,j as ve,v as Ie,k as wt,s as Dt,n as ut,y as Xt,z as gt,b as nt,q as ye,A as xe,m as bt,w as pt,l as kt,B as Be,C as $e,D as Ye,u as Oe}from"./0gWphXmz.js";import{u as At,a as Ot,b as Pe,c as Le,d as Ve,e as Ue,r as je,f as Ne,g as He,h as te,i as ee}from"./DmxC-sAk.js";import"./8r7SmuO1.js";function mt(e){return Array.isArray?Array.isArray(e):we(e)==="[object Array]"}function Re(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ze(e){return e==null?"":Re(e)}function ht(e){return typeof e=="string"}function be(e){return typeof e=="number"}function Ke(e){return e===!0||e===!1||We(e)&&we(e)=="[object Boolean]"}function Me(e){return typeof e=="object"}function We(e){return Me(e)&&e!==null}function rt(e){return e!=null}function Ht(e){return!e.trim().length}function we(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ze="Incorrect 'index' type",Ge=e=>`Invalid value for key ${e}`,qe=e=>`Pattern length exceeds max of ${e}.`,Je=e=>`Missing ${e} property in key`,Qe=e=>`Property 'weight' in key '${e}' must be a positive integer`,se=Object.prototype.hasOwnProperty;class Xe{constructor(t){this._keys=[],this._keyMap={};let s=0;t.forEach(o=>{let r=Ae(o);this._keys.push(r),this._keyMap[r.id]=r,s+=r.weight}),this._keys.forEach(o=>{o.weight/=s})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ae(e){let t=null,s=null,o=null,r=1,i=null;if(ht(e)||mt(e))o=e,t=ne(e),s=Rt(e);else{if(!se.call(e,"name"))throw new Error(Je("name"));const n=e.name;if(o=n,se.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(Qe(n));t=ne(n),s=Rt(n),i=e.getFn}return{path:t,id:s,weight:r,src:o,getFn:i}}function ne(e){return mt(e)?e:e.split(".")}function Rt(e){return mt(e)?e.join("."):e}function ts(e,t){let s=[],o=!1;const r=(i,n,m)=>{if(rt(i))if(!n[m])s.push(i);else{let u=n[m];const g=i[u];if(!rt(g))return;if(m===n.length-1&&(ht(g)||be(g)||Ke(g)))s.push(ze(g));else if(mt(g)){o=!0;for(let p=0,D=g.length;p<D;p+=1)r(g[p],n,m+1)}else n.length&&r(g,n,m+1)}};return r(e,ht(t)?t.split("."):t,0),o?s:s[0]}const es={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ss={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},ns={location:0,threshold:.6,distance:100},is={useExtendedSearch:!1,getFn:ts,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var j={...ss,...es,...ns,...is};const rs=/[^ ]+/g;function os(e=1,t=3){const s=new Map,o=Math.pow(10,t);return{get(r){const i=r.match(rs).length;if(s.has(i))return s.get(i);const n=1/Math.pow(i,.5*e),m=parseFloat(Math.round(n*o)/o);return s.set(i,m),m},clear(){s.clear()}}}class qt{constructor({getFn:t=j.getFn,fieldNormWeight:s=j.fieldNormWeight}={}){this.norm=os(s,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((s,o)=>{this._keysMap[s.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ht(this.docs[0])?this.docs.forEach((t,s)=>{this._addString(t,s)}):this.docs.forEach((t,s)=>{this._addObject(t,s)}),this.norm.clear())}add(t){const s=this.size();ht(t)?this._addString(t,s):this._addObject(t,s)}removeAt(t){this.records.splice(t,1);for(let s=t,o=this.size();s<o;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(t,s){return t[this._keysMap[s]]}size(){return this.records.length}_addString(t,s){if(!rt(t)||Ht(t))return;let o={v:t,i:s,n:this.norm.get(t)};this.records.push(o)}_addObject(t,s){let o={i:s,$:{}};this.keys.forEach((r,i)=>{let n=r.getFn?r.getFn(t):this.getFn(t,r.path);if(rt(n)){if(mt(n)){let m=[];const u=[{nestedArrIndex:-1,value:n}];for(;u.length;){const{nestedArrIndex:g,value:p}=u.pop();if(rt(p))if(ht(p)&&!Ht(p)){let D={v:p,i:g,n:this.norm.get(p)};m.push(D)}else mt(p)&&p.forEach((D,_)=>{u.push({nestedArrIndex:_,value:D})})}o.$[i]=m}else if(ht(n)&&!Ht(n)){let m={v:n,n:this.norm.get(n)};o.$[i]=m}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function De(e,t,{getFn:s=j.getFn,fieldNormWeight:o=j.fieldNormWeight}={}){const r=new qt({getFn:s,fieldNormWeight:o});return r.setKeys(e.map(Ae)),r.setSources(t),r.create(),r}function as(e,{getFn:t=j.getFn,fieldNormWeight:s=j.fieldNormWeight}={}){const{keys:o,records:r}=e,i=new qt({getFn:t,fieldNormWeight:s});return i.setKeys(o),i.setIndexRecords(r),i}function Et(e,{errors:t=0,currentLocation:s=0,expectedLocation:o=0,distance:r=j.distance,ignoreLocation:i=j.ignoreLocation}={}){const n=t/e.length;if(i)return n;const m=Math.abs(o-s);return r?n+m/r:m?1:n}function ls(e=[],t=j.minMatchCharLength){let s=[],o=-1,r=-1,i=0;for(let n=e.length;i<n;i+=1){let m=e[i];m&&o===-1?o=i:!m&&o!==-1&&(r=i-1,r-o+1>=t&&s.push([o,r]),o=-1)}return e[i-1]&&i-o>=t&&s.push([o,i-1]),s}const xt=32;function us(e,t,s,{location:o=j.location,distance:r=j.distance,threshold:i=j.threshold,findAllMatches:n=j.findAllMatches,minMatchCharLength:m=j.minMatchCharLength,includeMatches:u=j.includeMatches,ignoreLocation:g=j.ignoreLocation}={}){if(t.length>xt)throw new Error(qe(xt));const p=t.length,D=e.length,_=Math.max(0,Math.min(o,D));let M=i,b=_;const d=m>1||u,a=d?Array(D):[];let h;for(;(h=e.indexOf(t,b))>-1;){let v=Et(t,{currentLocation:h,expectedLocation:_,distance:r,ignoreLocation:g});if(M=Math.min(v,M),b=h+p,d){let f=0;for(;f<p;)a[h+f]=1,f+=1}}b=-1;let x=[],T=1,B=p+D;const F=1<<p-1;for(let v=0;v<p;v+=1){let f=0,Y=B;for(;f<Y;)Et(t,{errors:v,currentLocation:_+Y,expectedLocation:_,distance:r,ignoreLocation:g})<=M?f=Y:B=Y,Y=Math.floor((B-f)/2+f);B=Y;let O=Math.max(1,_-Y+1),S=n?D:Math.min(_+Y,D)+p,R=Array(S+2);R[S+1]=(1<<v)-1;for(let k=S;k>=O;k-=1){let A=k-1,w=s[e.charAt(A)];if(d&&(a[A]=+!!w),R[k]=(R[k+1]<<1|1)&w,v&&(R[k]|=(x[k+1]|x[k])<<1|1|x[k+1]),R[k]&F&&(T=Et(t,{errors:v,currentLocation:A,expectedLocation:_,distance:r,ignoreLocation:g}),T<=M)){if(M=T,b=A,b<=_)break;O=Math.max(1,2*_-b)}}if(Et(t,{errors:v+1,currentLocation:_,expectedLocation:_,distance:r,ignoreLocation:g})>M)break;x=R}const C={isMatch:b>=0,score:Math.max(.001,T)};if(d){const v=ls(a,m);v.length?u&&(C.indices=v):C.isMatch=!1}return C}function cs(e){let t={};for(let s=0,o=e.length;s<o;s+=1){const r=e.charAt(s);t[r]=(t[r]||0)|1<<o-s-1}return t}const Pt=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class ke{constructor(t,{location:s=j.location,threshold:o=j.threshold,distance:r=j.distance,includeMatches:i=j.includeMatches,findAllMatches:n=j.findAllMatches,minMatchCharLength:m=j.minMatchCharLength,isCaseSensitive:u=j.isCaseSensitive,ignoreDiacritics:g=j.ignoreDiacritics,ignoreLocation:p=j.ignoreLocation}={}){if(this.options={location:s,threshold:o,distance:r,includeMatches:i,findAllMatches:n,minMatchCharLength:m,isCaseSensitive:u,ignoreDiacritics:g,ignoreLocation:p},t=u?t:t.toLowerCase(),t=g?Pt(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const D=(M,b)=>{this.chunks.push({pattern:M,alphabet:cs(M),startIndex:b})},_=this.pattern.length;if(_>xt){let M=0;const b=_%xt,d=_-b;for(;M<d;)D(this.pattern.substr(M,xt),M),M+=xt;if(b){const a=_-xt;D(this.pattern.substr(a),a)}}else D(this.pattern,0)}searchIn(t){const{isCaseSensitive:s,ignoreDiacritics:o,includeMatches:r}=this.options;if(t=s?t:t.toLowerCase(),t=o?Pt(t):t,this.pattern===t){let d={isMatch:!0,score:0};return r&&(d.indices=[[0,t.length-1]]),d}const{location:i,distance:n,threshold:m,findAllMatches:u,minMatchCharLength:g,ignoreLocation:p}=this.options;let D=[],_=0,M=!1;this.chunks.forEach(({pattern:d,alphabet:a,startIndex:h})=>{const{isMatch:x,score:T,indices:B}=us(t,d,a,{location:i+h,distance:n,threshold:m,findAllMatches:u,minMatchCharLength:g,includeMatches:r,ignoreLocation:p});x&&(M=!0),_+=T,x&&B&&(D=[...D,...B])});let b={isMatch:M,score:M?_/this.chunks.length:1};return M&&r&&(b.indices=D),b}}class yt{constructor(t){this.pattern=t}static isMultiMatch(t){return ie(t,this.multiRegex)}static isSingleMatch(t){return ie(t,this.singleRegex)}search(){}}function ie(e,t){const s=e.match(t);return s?s[1]:null}class ds extends yt{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const s=t===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class hs extends yt{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const o=t.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,t.length-1]}}}class fs extends yt{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const s=t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class ms extends yt{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const s=!t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class ps extends yt{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const s=t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class gs extends yt{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const s=!t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class _e extends yt{constructor(t,{location:s=j.location,threshold:o=j.threshold,distance:r=j.distance,includeMatches:i=j.includeMatches,findAllMatches:n=j.findAllMatches,minMatchCharLength:m=j.minMatchCharLength,isCaseSensitive:u=j.isCaseSensitive,ignoreDiacritics:g=j.ignoreDiacritics,ignoreLocation:p=j.ignoreLocation}={}){super(t),this._bitapSearch=new ke(t,{location:s,threshold:o,distance:r,includeMatches:i,findAllMatches:n,minMatchCharLength:m,isCaseSensitive:u,ignoreDiacritics:g,ignoreLocation:p})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Se extends yt{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let s=0,o;const r=[],i=this.pattern.length;for(;(o=t.indexOf(this.pattern,s))>-1;)s=o+i,r.push([o,s-1]);const n=!!r.length;return{isMatch:n,score:n?0:1,indices:r}}}const zt=[ds,Se,fs,ms,gs,ps,hs,_e],re=zt.length,vs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ys="|";function xs(e,t={}){return e.split(ys).map(s=>{let o=s.trim().split(vs).filter(i=>i&&!!i.trim()),r=[];for(let i=0,n=o.length;i<n;i+=1){const m=o[i];let u=!1,g=-1;for(;!u&&++g<re;){const p=zt[g];let D=p.isMultiMatch(m);D&&(r.push(new p(D,t)),u=!0)}if(!u)for(g=-1;++g<re;){const p=zt[g];let D=p.isSingleMatch(m);if(D){r.push(new p(D,t));break}}}return r})}const $s=new Set([_e.type,Se.type]);class bs{constructor(t,{isCaseSensitive:s=j.isCaseSensitive,ignoreDiacritics:o=j.ignoreDiacritics,includeMatches:r=j.includeMatches,minMatchCharLength:i=j.minMatchCharLength,ignoreLocation:n=j.ignoreLocation,findAllMatches:m=j.findAllMatches,location:u=j.location,threshold:g=j.threshold,distance:p=j.distance}={}){this.query=null,this.options={isCaseSensitive:s,ignoreDiacritics:o,includeMatches:r,minMatchCharLength:i,findAllMatches:m,ignoreLocation:n,location:u,threshold:g,distance:p},t=s?t:t.toLowerCase(),t=o?Pt(t):t,this.pattern=t,this.query=xs(this.pattern,this.options)}static condition(t,s){return s.useExtendedSearch}searchIn(t){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:r,ignoreDiacritics:i}=this.options;t=r?t:t.toLowerCase(),t=i?Pt(t):t;let n=0,m=[],u=0;for(let g=0,p=s.length;g<p;g+=1){const D=s[g];m.length=0,n=0;for(let _=0,M=D.length;_<M;_+=1){const b=D[_],{isMatch:d,indices:a,score:h}=b.search(t);if(d){if(n+=1,u+=h,o){const x=b.constructor.type;$s.has(x)?m=[...m,...a]:m.push(a)}}else{u=0,n=0,m.length=0;break}}if(n){let _={isMatch:!0,score:u/n};return o&&(_.indices=m),_}}return{isMatch:!1,score:1}}}const Kt=[];function Ms(...e){Kt.push(...e)}function Wt(e,t){for(let s=0,o=Kt.length;s<o;s+=1){let r=Kt[s];if(r.condition(e,t))return new r(e,t)}return new ke(e,t)}const Lt={AND:"$and",OR:"$or"},Zt={PATH:"$path",PATTERN:"$val"},Gt=e=>!!(e[Lt.AND]||e[Lt.OR]),ws=e=>!!e[Zt.PATH],As=e=>!mt(e)&&Me(e)&&!Gt(e),oe=e=>({[Lt.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ce(e,t,{auto:s=!0}={}){const o=r=>{let i=Object.keys(r);const n=ws(r);if(!n&&i.length>1&&!Gt(r))return o(oe(r));if(As(r)){const u=n?r[Zt.PATH]:i[0],g=n?r[Zt.PATTERN]:r[u];if(!ht(g))throw new Error(Ge(u));const p={keyId:Rt(u),pattern:g};return s&&(p.searcher=Wt(g,t)),p}let m={children:[],operator:i[0]};return i.forEach(u=>{const g=r[u];mt(g)&&g.forEach(p=>{m.children.push(o(p))})}),m};return Gt(e)||(e=oe(e)),o(e)}function Ds(e,{ignoreFieldNorm:t=j.ignoreFieldNorm}){e.forEach(s=>{let o=1;s.matches.forEach(({key:r,norm:i,score:n})=>{const m=r?r.weight:null;o*=Math.pow(n===0&&m?Number.EPSILON:n,(m||1)*(t?1:i))}),s.score=o})}function ks(e,t){const s=e.matches;t.matches=[],rt(s)&&s.forEach(o=>{if(!rt(o.indices)||!o.indices.length)return;const{indices:r,value:i}=o;let n={indices:r,value:i};o.key&&(n.key=o.key.src),o.idx>-1&&(n.refIndex=o.idx),t.matches.push(n)})}function _s(e,t){t.score=e.score}function Ss(e,t,{includeMatches:s=j.includeMatches,includeScore:o=j.includeScore}={}){const r=[];return s&&r.push(ks),o&&r.push(_s),e.map(i=>{const{idx:n}=i,m={item:t[n],refIndex:n};return r.length&&r.forEach(u=>{u(i,m)}),m})}class $t{constructor(t,s={},o){this.options={...j,...s},this.options.useExtendedSearch,this._keyStore=new Xe(this.options.keys),this.setCollection(t,o)}setCollection(t,s){if(this._docs=t,s&&!(s instanceof qt))throw new Error(Ze);this._myIndex=s||De(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){rt(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const s=[];for(let o=0,r=this._docs.length;o<r;o+=1){const i=this._docs[o];t(i,o)&&(this.removeAt(o),o-=1,r-=1,s.push(i))}return s}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:s=-1}={}){const{includeMatches:o,includeScore:r,shouldSort:i,sortFn:n,ignoreFieldNorm:m}=this.options;let u=ht(t)?ht(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ds(u,{ignoreFieldNorm:m}),i&&u.sort(n),be(s)&&s>-1&&(u=u.slice(0,s)),Ss(u,this._docs,{includeMatches:o,includeScore:r})}_searchStringList(t){const s=Wt(t,this.options),{records:o}=this._myIndex,r=[];return o.forEach(({v:i,i:n,n:m})=>{if(!rt(i))return;const{isMatch:u,score:g,indices:p}=s.searchIn(i);u&&r.push({item:i,idx:n,matches:[{score:g,value:i,norm:m,indices:p}]})}),r}_searchLogical(t){const s=Ce(t,this.options),o=(m,u,g)=>{if(!m.children){const{keyId:D,searcher:_}=m,M=this._findMatches({key:this._keyStore.get(D),value:this._myIndex.getValueForItemAtKeyId(u,D),searcher:_});return M&&M.length?[{idx:g,item:u,matches:M}]:[]}const p=[];for(let D=0,_=m.children.length;D<_;D+=1){const M=m.children[D],b=o(M,u,g);if(b.length)p.push(...b);else if(m.operator===Lt.AND)return[]}return p},r=this._myIndex.records,i={},n=[];return r.forEach(({$:m,i:u})=>{if(rt(m)){let g=o(s,m,u);g.length&&(i[u]||(i[u]={idx:u,item:m,matches:[]},n.push(i[u])),g.forEach(({matches:p})=>{i[u].matches.push(...p)}))}}),n}_searchObjectList(t){const s=Wt(t,this.options),{keys:o,records:r}=this._myIndex,i=[];return r.forEach(({$:n,i:m})=>{if(!rt(n))return;let u=[];o.forEach((g,p)=>{u.push(...this._findMatches({key:g,value:n[p],searcher:s}))}),u.length&&i.push({idx:m,item:n,matches:u})}),i}_findMatches({key:t,value:s,searcher:o}){if(!rt(s))return[];let r=[];if(mt(s))s.forEach(({v:i,i:n,n:m})=>{if(!rt(i))return;const{isMatch:u,score:g,indices:p}=o.searchIn(i);u&&r.push({score:g,key:t,value:i,idx:n,norm:m,indices:p})});else{const{v:i,n}=s,{isMatch:m,score:u,indices:g}=o.searchIn(i);m&&r.push({score:u,key:t,value:i,norm:n,indices:g})}return r}}$t.version="7.1.0";$t.createIndex=De;$t.parseIndex=as;$t.config=j;$t.parseQuery=Ce;Ms(bs);const Cs={class:"relative"},Es=["for"],Ts={class:"relative rounded-lg bg-primary-1 focus-within:ring-2 focus-within:ring-accent focus-within:border-accent transition-colors","data-multiselect":""},Fs={key:0,class:"flex flex-wrap gap-1 p-2 border-b border-primary-2"},Is=["onClick"],Bs={class:"relative"},Ys=["id","placeholder","disabled"],Os={key:1,class:"absolute z-50 w-full mt-1 bg-primary-1 border border-primary-2 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Ps=["onClick","onMouseenter"],Ls={key:0,class:"i-mdi-check text-accent"},Vs={class:"text-primary-4"},Us={key:1,class:"px-3 py-2 text-primary-3 text-center"},js=vt({__name:"AppInputMultiSelect",props:{id:{default:()=>`multiselect-${Math.random().toString(36).substr(2,9)}`},label:{default:""},placeholder:{default:"Search and select options..."},options:{},modelValue:{},disabled:{type:Boolean,default:!1},maxSelections:{default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=t,r=Q(""),i=Q(!1),n=Q(-1),m=Q(),u=et({get:()=>s.modelValue,set:a=>o("update:modelValue",a)}),g=et(()=>new $t(s.options,{threshold:.3,includeScore:!0,minMatchCharLength:1})),p=et(()=>r.value.trim()?g.value.search(r.value).map(h=>h.item).slice(0,50):s.options.slice(0,50)),D=a=>{const h=[...u.value],x=h.indexOf(a);x>-1?h.splice(x,1):(!s.maxSelections||h.length<s.maxSelections)&&h.push(a),u.value=h,n.value=-1},_=a=>{const h=[...u.value],x=h.indexOf(a);x>-1&&(h.splice(x,1),u.value=h)},M=a=>{a&&!u.value.includes(a)&&(!s.maxSelections||u.value.length<s.maxSelections)&&(u.value=[...u.value,a]),i.value=!1,n.value=-1},b=()=>{s.disabled||(i.value=!i.value,i.value&&Xt(()=>{m.value?.focus()}))},d=a=>{if(s.disabled)return;const h=r.value.trim()&&!s.options.includes(r.value.trim())&&!u.value.includes(r.value.trim()),x=p.value.length+(h?1:0);switch(a.key){case"ArrowDown":a.preventDefault(),i.value=!0,n.value<x-1?n.value++:n.value=0;break;case"ArrowUp":a.preventDefault(),i.value=!0,n.value>0?n.value--:n.value=x-1;break;case"Enter":a.preventDefault(),i.value&&n.value>=0&&x>0?n.value<p.value.length?D(p.value[n.value]):h&&M(r.value.trim()):(i.value=!0,x>0&&(n.value=0));break;case"Escape":a.preventDefault(),i.value=!1,n.value=-1,m.value?.blur();break;case"Backspace":if(!r.value&&u.value.length>0){a.preventDefault();const T=u.value[u.value.length-1];T&&_(T)}break}};return Mt(r,()=>{n.value=-1}),Mt(i,a=>{a&&Xt(()=>{m.value?.focus()})}),(a,h)=>(E(),L("div",Cs,[e.label?(E(),L("label",{key:0,for:e.id,class:"block text-sm font-medium mb-2"},W(e.label),9,Es)):X("",!0),l("div",Ts,[$(u).length>0?(E(),L("div",Fs,[(E(!0),L(ot,null,lt($(u),x=>(E(),L("span",{key:x,class:"inline-flex items-center gap-1 px-2 py-1 bg-primary-2 text-primary-4 text-xs rounded"},[at(W(x)+" ",1),l("button",{type:"button",class:"hover:text-accent transition-colors",onClick:T=>_(x)},[...h[5]||(h[5]=[l("div",{class:"i-mdi-close text-xs"},null,-1)])],8,Is)]))),128))])):X("",!0),l("div",Bs,[ve(l("input",{id:e.id,ref_key:"inputRef",ref:m,"onUpdate:modelValue":h[0]||(h[0]=x=>Dt(r)?r.value=x:null),type:"text",placeholder:e.placeholder,disabled:e.disabled,class:"w-full px-3 py-2 bg-transparent text-primary-4 placeholder-primary-3 focus:outline-none",autocomplete:"off",onFocus:h[1]||(h[1]=x=>i.value=!0),onKeydown:wt(d,["stop"])},null,40,Ys),[[Ie,$(r)]]),l("button",{type:"button",class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-primary-3 hover:text-accent transition-colors",onClick:b},[l("div",{class:ut(["transition-transform duration-200",$(i)?"i-mdi-chevron-up":"i-mdi-chevron-down"])},null,2)])])]),$(i)&&($(p).length>0||$(r).trim())?(E(),L("div",Os,[(E(!0),L(ot,null,lt($(p),(x,T)=>(E(),L("button",{key:x,type:"button",class:ut(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center justify-between",$(n)===T?"bg-bg-gradient":"",$(u).includes(x)?"text-accent":"text-primary-4"]),onClick:B=>D(x),onMouseenter:B=>n.value=T},[l("span",null,W(x),1),$(u).includes(x)?(E(),L("div",Ls)):X("",!0)],42,Ps))),128)),$(r).trim()&&!e.options.includes($(r).trim())&&!$(u).includes($(r).trim())?(E(),L("button",{key:0,type:"button",class:ut(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center gap-2 border-t border-primary-2",$(n)===$(p).length?"bg-bg-gradient":""]),onClick:h[2]||(h[2]=x=>M($(r).trim())),onMouseenter:h[3]||(h[3]=x=>n.value=$(p).length)},[h[6]||(h[6]=l("div",{class:"i-mdi-plus text-accent"},null,-1)),l("span",Vs,'Add "'+W($(r).trim())+'"',1)],34)):X("",!0),$(p).length===0&&!$(r).trim()?(E(),L("div",Us," No options available ")):X("",!0)])):X("",!0),$(i)?(E(),L("div",{key:2,class:"fixed inset-0 z-40",onClick:h[4]||(h[4]=x=>i.value=!1)})):X("",!0)]))}}),Ns=Object.assign(js,{__name:"AppInputMultiSelect"}),Hs={class:"flex justify-between items-center mb-4"},Rs={class:"space-y-3"},zs={class:"flex justify-between items-center"},Ks={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Ws={class:"flex justify-between items-center"},Zs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Gs={class:"flex justify-between items-center"},qs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Js={class:"flex justify-between items-center"},Qs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Xs={class:"flex justify-between items-center"},tn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},en={class:"flex justify-between items-center"},sn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},nn={class:"flex justify-between items-center"},rn={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},on={class:"flex justify-between items-center"},an={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},ln={class:"flex justify-between items-center"},un={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},cn={class:"mt-6 pt-4 border-t border-primary-2"},dn={class:"text-sm text-primary-3"},hn={class:"text-primary-4 font-medium"},fn=vt({__name:"KeyboardShortcutsHelp",props:{showHelp:{type:Boolean,default:!1}},emits:["close"],setup(e){const{currentKeyboardShortcuts:t,settings:s}=gt(At()),o=et(()=>({playPause:r(t.value.playPause),nextTrack:r(t.value.nextTrack),previousTrack:r(t.value.previousTrack),volumeUp:r(t.value.volumeUp),volumeDown:r(t.value.volumeDown),mute:r(t.value.mute),seekForward:r(t.value.seekForward),seekBackward:r(t.value.seekBackward),focusSearch:r(t.value.focusSearch)})),r=i=>({" ":"Space",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓",x:"X",z:"Z",b:"B",c:"C",v:"V",m:"M",l:"L",j:"J",k:"K",n:"N",p:"P","ctrl+k":"Ctrl+K"})[i]||i.toUpperCase();return(i,n)=>{const m=fe;return e.showHelp?(E(),L("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:n[2]||(n[2]=u=>i.$emit("close"))},[l("div",{class:"bg-primary-1 rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:n[1]||(n[1]=wt(()=>{},["stop"]))},[l("div",Hs,[n[3]||(n[3]=l("h3",{class:"text-lg font-semibold text-primary-4"},"Keyboard Shortcuts",-1)),nt(m,{icon:"i-mdi-close",variant:"ghost",size:"small",onClick:n[0]||(n[0]=u=>i.$emit("close"))})]),l("div",Rs,[l("div",zs,[n[4]||(n[4]=l("span",{class:"text-primary-3"},"Play/Pause",-1)),l("kbd",Ks,W($(o).playPause),1)]),l("div",Ws,[n[5]||(n[5]=l("span",{class:"text-primary-3"},"Next Track",-1)),l("kbd",Zs,W($(o).nextTrack),1)]),l("div",Gs,[n[6]||(n[6]=l("span",{class:"text-primary-3"},"Previous Track",-1)),l("kbd",qs,W($(o).previousTrack),1)]),l("div",Js,[n[7]||(n[7]=l("span",{class:"text-primary-3"},"Volume Up",-1)),l("kbd",Qs,W($(o).volumeUp),1)]),l("div",Xs,[n[8]||(n[8]=l("span",{class:"text-primary-3"},"Volume Down",-1)),l("kbd",tn,W($(o).volumeDown),1)]),l("div",en,[n[9]||(n[9]=l("span",{class:"text-primary-3"},"Mute",-1)),l("kbd",sn,W($(o).mute),1)]),l("div",nn,[n[10]||(n[10]=l("span",{class:"text-primary-3"},"Seek Forward",-1)),l("kbd",rn,W($(o).seekForward),1)]),l("div",on,[n[11]||(n[11]=l("span",{class:"text-primary-3"},"Seek Backward",-1)),l("kbd",an,W($(o).seekBackward),1)]),l("div",ln,[n[12]||(n[12]=l("span",{class:"text-primary-3"},"Focus Search",-1)),l("kbd",un,W($(o).focusSearch),1)])]),l("div",cn,[l("p",dn,[n[13]||(n[13]=at(" Current scheme: ",-1)),l("span",hn,W($(s).keyboardShortcutScheme==="simple"?"Default":$(s).keyboardShortcutScheme==="winamp"?"Winamp Style":"YouTube Style"),1)]),n[14]||(n[14]=l("p",{class:"text-xs text-primary-3 mt-2"}," Change keyboard shortcuts in the Filters panel ",-1))])])])):X("",!0)}}}),mn=Object.assign(fn,{__name:"KeyboardShortcutsHelp"}),Jt=e=>{let t=0;for(let i=0;i<e.length;i++)t=e.charCodeAt(i)+((t<<5)-t);const s=Math.abs(t)%360,o=65+Math.abs(t)%20,r=45+Math.abs(t)%15;return`hsl(${s}, ${o}%, ${r}%)`},pn={class:"fixed top-6 left-0 flex flex-col gap-8 sm:gap-12 px-4 sm:px-6 z-1 w-full"},gn={class:"backdrop-blur-3xl rounded-2xl flex justify-center items-center gap-4 sm:gap-6 w-full max-w-2xl mx-auto pl-3"},vn={class:"flex-1 min-w-0 overflow-hidden"},yn={class:"flex gap-2 sm:gap-3 items-center flex-shrink-0"},xn={key:0,class:"rounded-lg p-4 space-y-4 backdrop-blur-2xl bg-bg-gradient"},$n={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},bn={class:"flex flex-wrap gap-2"},Mn={class:"grid grid-cols-1 gap-4"},wn={class:"flex flex-wrap gap-2 max-h-32 overflow-y-auto"},An=["onClick"],Dn={class:"text-xs text-primary-3 px-2 py-1 rounded-full"},kn={class:"grid grid-cols-1 gap-4"},_n={class:"flex flex-wrap gap-2"},Sn={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Cn={class:"flex justify-between"},En=["value"],Tn=["value"],Fn={class:"flex justify-between items-center"},In={class:"text-sm text-primary-3"},Bn=vt({__name:"VideoSearch",setup(e){const{setCurrentPlaylistVideos:t}=Ot(),{setKeyboardShortcutScheme:s,setSelectedPlatforms:o}=At(),{originalCurrentPlaylist:r}=gt(Ot()),{settings:i,availableShortcutSchemes:n,viewMode:m}=gt(At());Q("day");const u=Q(!1);let g=0,p=null;const D=()=>{const U=window.scrollY;p&&clearTimeout(p),p=setTimeout(()=>{Math.abs(U-g)>500&&M.value&&(M.value=!1),g=U},150)};ye(()=>{u.value=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",g=window.scrollY,window.addEventListener("scroll",D)}),xe(()=>{window.removeEventListener("scroll",D),p&&clearTimeout(p)});const _=Q(""),M=Q(!1),b=Q([]),d=Q([]),a=Q([]),h=Q(""),x=Q("createdAt"),T=Q(!1),B=Q(!1),F=et(()=>r.value?.videos||[]),C=et(()=>F.value.length),v=et(()=>b.value.length>0||d.value.length>0||a.value.length>0||h.value!==""||_.value.trim()!==""),f=et(()=>[...new Set(F.value.filter(c=>c.artist).map(c=>c.artist))].sort()),Y=et(()=>{const U=new Set;return F.value.forEach(c=>{c.tags&&c.tags.forEach(H=>U.add(H))}),Array.from(U).sort()}),O=et(()=>{const U=new Map;return F.value.forEach(c=>{const H=c.userId||null;U.set(H,(U.get(H)||0)+1)}),Array.from(U.entries()).map(([c,H])=>({userId:c||"Anonymous",originalUserId:c,count:H,color:c?Jt(c):"#666666"})).sort((c,H)=>H.count-c.count)}),S={keys:[{name:"title",weight:.3},{name:"musicTitle",weight:.4},{name:"artist",weight:.4},{name:"tags",weight:.2},{name:"description",weight:.1}],threshold:.3,includeScore:!0,minMatchCharLength:2},R=et(()=>new $t(F.value,S)),K=U=>{if(!U)return 0;const c=U.split(":").map(Number);return c.length===2&&c[0]!==void 0&&c[1]!==void 0?c[0]*60+c[1]:c.length===3&&c[0]!==void 0&&c[1]!==void 0&&c[2]!==void 0?c[0]*3600+c[1]*60+c[2]:0},k=U=>{if(!h.value)return!0;const H=K(U.duration)/60;switch(h.value){case"short":return H<4;case"medium":return H>=4&&H<=20;case"long":return H>20;default:return!0}},A=U=>{const c=a.value.indexOf(U);c>-1?a.value.splice(c,1):a.value.push(U)},w=et(()=>{let U=[];return _.value.trim()?U=R.value.search(_.value).map(H=>H.item):U=[...F.value],b.value.length>0&&(U=U.filter(c=>c.artist&&b.value.includes(c.artist))),d.value.length>0&&(U=U.filter(c=>c.tags&&d.value.some(H=>c.tags.includes(H)))),a.value.length>0&&(U=U.filter(c=>{const H=c.userId||"Anonymous";return a.value.includes(H)})),U=U.filter(k),(x.value!=="relevance"||!_.value.trim())&&U.sort((c,H)=>{switch(x.value){case"createdAt":return c.createdAt&&!H.createdAt?-1:!c.createdAt&&H.createdAt?1:c.createdAt&&H.createdAt?H.createdAt-c.createdAt:0;case"title":{const q=c.musicTitle||c.title,J=H.musicTitle||H.title;return q.localeCompare(J)}case"artist":{const q=c.artist||"Unknown",J=H.artist||"Unknown";return q.localeCompare(J)}case"duration":return K(c.duration)-K(H.duration);default:return 0}}),U}),P=()=>{M.value=!M.value},y=()=>{T.value=!T.value},V=U=>{h.value===U?h.value="":h.value=U},I=U=>{const c=i.value.selectedPlatforms||[],H=c.includes(U);o(H?c.filter(q=>q!==U):[...c,U])},N=()=>{_.value="",b.value=[],d.value=[],a.value=[],h.value="",x.value="createdAt",B.value=!1},G=U=>{const c=[...U];for(let H=c.length-1;H>0;H--){const q=Math.floor(Math.random()*(H+1));[c[H],c[q]]=[c[q],c[H]]}return c},Z=()=>{const U=G(w.value);t(U)},tt=()=>{m.value==="grid"?m.value="list":m.value==="list"?m.value="timeline":m.value="grid"},st=()=>{switch(m.value){case"grid":return"i-mdi-view-grid";case"list":return"i-mdi-view-list";case"timeline":return"i-mdi-timeline";default:return"i-mdi-view-grid"}};return Mt(w,U=>{t(U)},{immediate:!0}),(U,c)=>{const H=Te,q=fe,J=Ns,it=mn;return E(),L("div",pn,[l("div",gn,[l("div",vn,[nt(H,{id:"search",modelValue:$(_),"onUpdate:modelValue":c[0]||(c[0]=z=>Dt(_)?_.value=z:null),placeholder:"Search by title, artist, or tags...",size:"large"},null,8,["modelValue"])]),l("div",yn,[nt(q,{icon:"i-mdi-filter-variant text-3xl",variant:"ghost",size:"large",class:ut(["rounded-full",{"[&_[class^=i-mdi]]:text-accent":$(v)}]),onClick:P},null,8,["class"]),nt(q,{icon:st(),variant:"ghost",size:"large",class:"rounded-full text-2xl",onClick:tt},null,8,["icon"]),$(u)?(E(),bt(q,{key:0,to:"/admin",icon:"i-mdi-cog",variant:"ghost",size:"medium",class:"lt-sm:hidden"},{default:pt(()=>[...c[11]||(c[11]=[l("span",{class:"hidden sm:inline"},"Admin",-1)])]),_:1})):X("",!0)])]),$(M)?(E(),L("div",xn,[l("div",$n,[l("div",null,[nt(J,{id:"artist-filter",modelValue:$(b),"onUpdate:modelValue":c[1]||(c[1]=z=>Dt(b)?b.value=z:null),label:"Artists",placeholder:"Search and select artists...",options:$(f)},null,8,["modelValue","options"])]),l("div",null,[nt(J,{id:"tag-filter",modelValue:$(d),"onUpdate:modelValue":c[2]||(c[2]=z=>Dt(d)?d.value=z:null),label:"Tags",placeholder:"Search and select tags...",options:$(Y)},null,8,["modelValue","options"])]),l("div",null,[c[15]||(c[15]=l("label",{class:"block text-sm font-medium mb-2"},"Duration",-1)),l("div",bn,[nt(q,{size:"small",variant:$(h)==="short"?"primary":"ghost",onClick:c[3]||(c[3]=z=>V("short"))},{default:pt(()=>[...c[12]||(c[12]=[at(" Short (< 4 min) ",-1)])]),_:1},8,["variant"]),nt(q,{size:"small",variant:$(h)==="medium"?"primary":"ghost",onClick:c[4]||(c[4]=z=>V("medium"))},{default:pt(()=>[...c[13]||(c[13]=[at(" Medium (4-20 min) ",-1)])]),_:1},8,["variant"]),nt(q,{size:"small",variant:$(h)==="long"?"primary":"ghost",onClick:c[5]||(c[5]=z=>V("long"))},{default:pt(()=>[...c[14]||(c[14]=[at(" Long (> 20 min) ",-1)])]),_:1},8,["variant"])])])]),l("div",Mn,[l("div",null,[c[17]||(c[17]=l("label",{class:"block text-sm font-medium mb-2"},"Users",-1)),l("div",wn,[(E(!0),L(ot,null,lt($(O),z=>(E(),L("div",{key:z.userId,class:ut(["flex items-center gap-2 cursor-pointer p-2 hover:bg-primary-1 rounded-2xl transition-colors",{"bg-primary-2":$(a).includes(z.userId)}]),onClick:dt=>A(z.userId)},[l("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-black text-xs font-bold",style:kt({backgroundColor:z.color})},[...c[16]||(c[16]=[l("span",{class:"i-mdi-account text-xs"},null,-1)])],4),l("span",Dn,W(z.count),1)],10,An))),128))])])]),l("div",kn,[l("div",null,[c[18]||(c[18]=l("label",{class:"block text-sm font-medium mb-2"},"Music Platforms",-1)),l("div",_n,[(E(!0),L(ot,null,lt(("getAllPlatforms"in U?U.getAllPlatforms:$(Fe))(),z=>(E(),bt(q,{key:z.id,size:"small",variant:$(i).selectedPlatforms?.includes(z.id)?"primary":"ghost",onClick:dt=>I(z.id)},{default:pt(()=>[l("div",{class:ut([z.icon,"text-sm mr-1"])},null,2),at(" "+W(z.name),1)]),_:2},1032,["variant","onClick"]))),128))])])]),l("div",Sn,[l("div",null,[c[20]||(c[20]=l("label",{class:"block text-sm font-medium mb-2"},"Sort By",-1)),ve(l("select",{"onUpdate:modelValue":c[6]||(c[6]=z=>Dt(x)?x.value=z:null),class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",onKeydown:c[7]||(c[7]=wt(()=>{},["stop"]))},[...c[19]||(c[19]=[$e('<option value="relevance">Relevance</option><option value="createdAt">Date Added (Latest First)</option><option value="title">Title A-Z</option><option value="artist">Artist A-Z</option><option value="duration">Duration</option>',5)])],544),[[Be,$(x)]])]),l("div",null,[c[22]||(c[22]=l("label",{class:"block text-sm font-medium mb-2"},"Playlist",-1)),nt(q,{icon:"i-mdi-shuffle",variant:"primary",size:"medium",class:"w-full",onClick:Z},{default:pt(()=>[...c[21]||(c[21]=[at(" Shuffle ",-1)])]),_:1})]),l("div",null,[l("div",Cn,[c[24]||(c[24]=l("label",{class:"block text-sm font-medium mb-2"},"Keyboard ",-1)),nt(q,{icon:"i-mdi-keyboard",variant:"ghost",size:"medium",onClick:y},{default:pt(()=>[...c[23]||(c[23]=[l("span",{class:"hidden sm:inline"},"Shortcuts",-1)])]),_:1})]),l("select",{value:$(i).keyboardShortcutScheme,class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",onChange:c[8]||(c[8]=z=>$(s)(z.target.value)),onKeydown:c[9]||(c[9]=wt(()=>{},["stop"]))},[(E(!0),L(ot,null,lt($(n),z=>(E(),L("option",{key:z.value,value:z.value},W(z.label),9,Tn))),128))],40,En)]),c[25]||(c[25]=l("div",{class:"text-primary-3 w-full text-right"},"Scroll to close.",-1))]),l("div",Fn,[l("span",In,W($(w).length)+" of "+W($(C))+" videos ",1),nt(q,{variant:"ghost",size:"small",onClick:N},{default:pt(()=>[...c[26]||(c[26]=[at(" Clear All ",-1)])]),_:1})])])):X("",!0),nt(it,{"show-help":$(T),onClose:c[10]||(c[10]=z=>T.value=!1)},null,8,["show-help"])])}}}),Yn=Object.assign(Bn,{__name:"VideoSearch"});function _t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tt={exports:{}},On=Tt.exports,ae;function Pn(){return ae||(ae=1,(function(e,t){(function(s,o){e.exports=o()})(On,(function(){var s=1e3,o=6e4,r=36e5,i="millisecond",n="second",m="minute",u="hour",g="day",p="week",D="month",_="quarter",M="year",b="date",d="Invalid Date",a=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var A=["th","st","nd","rd"],w=k%100;return"["+k+(A[(w-20)%10]||A[w]||A[0])+"]"}},T=function(k,A,w){var P=String(k);return!P||P.length>=A?k:""+Array(A+1-P.length).join(w)+k},B={s:T,z:function(k){var A=-k.utcOffset(),w=Math.abs(A),P=Math.floor(w/60),y=w%60;return(A<=0?"+":"-")+T(P,2,"0")+":"+T(y,2,"0")},m:function k(A,w){if(A.date()<w.date())return-k(w,A);var P=12*(w.year()-A.year())+(w.month()-A.month()),y=A.clone().add(P,D),V=w-y<0,I=A.clone().add(P+(V?-1:1),D);return+(-(P+(w-y)/(V?y-I:I-y))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:D,y:M,w:p,d:g,D:b,h:u,m,s:n,ms:i,Q:_}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},F="en",C={};C[F]=x;var v="$isDayjsObject",f=function(k){return k instanceof R||!(!k||!k[v])},Y=function k(A,w,P){var y;if(!A)return F;if(typeof A=="string"){var V=A.toLowerCase();C[V]&&(y=V),w&&(C[V]=w,y=V);var I=A.split("-");if(!y&&I.length>1)return k(I[0])}else{var N=A.name;C[N]=A,y=N}return!P&&y&&(F=y),y||!P&&F},O=function(k,A){if(f(k))return k.clone();var w=typeof A=="object"?A:{};return w.date=k,w.args=arguments,new R(w)},S=B;S.l=Y,S.i=f,S.w=function(k,A){return O(k,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var R=(function(){function k(w){this.$L=Y(w.locale,null,!0),this.parse(w),this.$x=this.$x||w.x||{},this[v]=!0}var A=k.prototype;return A.parse=function(w){this.$d=(function(P){var y=P.date,V=P.utc;if(y===null)return new Date(NaN);if(S.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var I=y.match(a);if(I){var N=I[2]-1||0,G=(I[7]||"0").substring(0,3);return V?new Date(Date.UTC(I[1],N,I[3]||1,I[4]||0,I[5]||0,I[6]||0,G)):new Date(I[1],N,I[3]||1,I[4]||0,I[5]||0,I[6]||0,G)}}return new Date(y)})(w),this.init()},A.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},A.$utils=function(){return S},A.isValid=function(){return this.$d.toString()!==d},A.isSame=function(w,P){var y=O(w);return this.startOf(P)<=y&&y<=this.endOf(P)},A.isAfter=function(w,P){return O(w)<this.startOf(P)},A.isBefore=function(w,P){return this.endOf(P)<O(w)},A.$g=function(w,P,y){return S.u(w)?this[P]:this.set(y,w)},A.unix=function(){return Math.floor(this.valueOf()/1e3)},A.valueOf=function(){return this.$d.getTime()},A.startOf=function(w,P){var y=this,V=!!S.u(P)||P,I=S.p(w),N=function(q,J){var it=S.w(y.$u?Date.UTC(y.$y,J,q):new Date(y.$y,J,q),y);return V?it:it.endOf(g)},G=function(q,J){return S.w(y.toDate()[q].apply(y.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(J)),y)},Z=this.$W,tt=this.$M,st=this.$D,U="set"+(this.$u?"UTC":"");switch(I){case M:return V?N(1,0):N(31,11);case D:return V?N(1,tt):N(0,tt+1);case p:var c=this.$locale().weekStart||0,H=(Z<c?Z+7:Z)-c;return N(V?st-H:st+(6-H),tt);case g:case b:return G(U+"Hours",0);case u:return G(U+"Minutes",1);case m:return G(U+"Seconds",2);case n:return G(U+"Milliseconds",3);default:return this.clone()}},A.endOf=function(w){return this.startOf(w,!1)},A.$set=function(w,P){var y,V=S.p(w),I="set"+(this.$u?"UTC":""),N=(y={},y[g]=I+"Date",y[b]=I+"Date",y[D]=I+"Month",y[M]=I+"FullYear",y[u]=I+"Hours",y[m]=I+"Minutes",y[n]=I+"Seconds",y[i]=I+"Milliseconds",y)[V],G=V===g?this.$D+(P-this.$W):P;if(V===D||V===M){var Z=this.clone().set(b,1);Z.$d[N](G),Z.init(),this.$d=Z.set(b,Math.min(this.$D,Z.daysInMonth())).$d}else N&&this.$d[N](G);return this.init(),this},A.set=function(w,P){return this.clone().$set(w,P)},A.get=function(w){return this[S.p(w)]()},A.add=function(w,P){var y,V=this;w=Number(w);var I=S.p(P),N=function(tt){var st=O(V);return S.w(st.date(st.date()+Math.round(tt*w)),V)};if(I===D)return this.set(D,this.$M+w);if(I===M)return this.set(M,this.$y+w);if(I===g)return N(1);if(I===p)return N(7);var G=(y={},y[m]=o,y[u]=r,y[n]=s,y)[I]||1,Z=this.$d.getTime()+w*G;return S.w(Z,this)},A.subtract=function(w,P){return this.add(-1*w,P)},A.format=function(w){var P=this,y=this.$locale();if(!this.isValid())return y.invalidDate||d;var V=w||"YYYY-MM-DDTHH:mm:ssZ",I=S.z(this),N=this.$H,G=this.$m,Z=this.$M,tt=y.weekdays,st=y.months,U=y.meridiem,c=function(J,it,z,dt){return J&&(J[it]||J(P,V))||z[it].slice(0,dt)},H=function(J){return S.s(N%12||12,J,"0")},q=U||function(J,it,z){var dt=J<12?"AM":"PM";return z?dt.toLowerCase():dt};return V.replace(h,(function(J,it){return it||(function(z){switch(z){case"YY":return String(P.$y).slice(-2);case"YYYY":return S.s(P.$y,4,"0");case"M":return Z+1;case"MM":return S.s(Z+1,2,"0");case"MMM":return c(y.monthsShort,Z,st,3);case"MMMM":return c(st,Z);case"D":return P.$D;case"DD":return S.s(P.$D,2,"0");case"d":return String(P.$W);case"dd":return c(y.weekdaysMin,P.$W,tt,2);case"ddd":return c(y.weekdaysShort,P.$W,tt,3);case"dddd":return tt[P.$W];case"H":return String(N);case"HH":return S.s(N,2,"0");case"h":return H(1);case"hh":return H(2);case"a":return q(N,G,!0);case"A":return q(N,G,!1);case"m":return String(G);case"mm":return S.s(G,2,"0");case"s":return String(P.$s);case"ss":return S.s(P.$s,2,"0");case"SSS":return S.s(P.$ms,3,"0");case"Z":return I}return null})(J)||I.replace(":","")}))},A.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},A.diff=function(w,P,y){var V,I=this,N=S.p(P),G=O(w),Z=(G.utcOffset()-this.utcOffset())*o,tt=this-G,st=function(){return S.m(I,G)};switch(N){case M:V=st()/12;break;case D:V=st();break;case _:V=st()/3;break;case p:V=(tt-Z)/6048e5;break;case g:V=(tt-Z)/864e5;break;case u:V=tt/r;break;case m:V=tt/o;break;case n:V=tt/s;break;default:V=tt}return y?V:S.a(V)},A.daysInMonth=function(){return this.endOf(D).$D},A.$locale=function(){return C[this.$L]},A.locale=function(w,P){if(!w)return this.$L;var y=this.clone(),V=Y(w,P,!0);return V&&(y.$L=V),y},A.clone=function(){return S.w(this.$d,this)},A.toDate=function(){return new Date(this.valueOf())},A.toJSON=function(){return this.isValid()?this.toISOString():null},A.toISOString=function(){return this.$d.toISOString()},A.toString=function(){return this.$d.toUTCString()},k})(),K=R.prototype;return O.prototype=K,[["$ms",i],["$s",n],["$m",m],["$H",u],["$W",g],["$M",D],["$y",M],["$D",b]].forEach((function(k){K[k[1]]=function(A){return this.$g(A,k[0],k[1])}})),O.extend=function(k,A){return k.$i||(k(A,R,O),k.$i=!0),O},O.locale=Y,O.isDayjs=f,O.unix=function(k){return O(1e3*k)},O.en=C[F],O.Ls=C,O.p={},O}))})(Tt)),Tt.exports}var Ln=Pn();const ct=_t(Ln);var Ft={exports:{}},Vn=Ft.exports,le;function Un(){return le||(le=1,(function(e,t){(function(s,o){e.exports=o()})(Vn,(function(){return function(s,o,r){s=s||{};var i=o.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function m(g,p,D,_){return i.fromToBase(g,p,D,_)}r.en.relativeTime=n,i.fromToBase=function(g,p,D,_,M){for(var b,d,a,h=D.$locale().relativeTime||n,x=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],T=x.length,B=0;B<T;B+=1){var F=x[B];F.d&&(b=_?r(g).diff(D,F.d,!0):D.diff(g,F.d,!0));var C=(s.rounding||Math.round)(Math.abs(b));if(a=b>0,C<=F.r||!F.r){C<=1&&B>0&&(F=x[B-1]);var v=h[F.l];M&&(C=M(""+C)),d=typeof v=="string"?v.replace("%d",C):v(C,p,F.l,a);break}}if(p)return d;var f=a?h.future:h.past;return typeof f=="function"?f(d):f.replace("%s",d)},i.to=function(g,p){return m(g,p,this,!0)},i.from=function(g,p){return m(g,p,this)};var u=function(g){return g.$u?r.utc():r()};i.toNow=function(g){return this.to(u(this),g)},i.fromNow=function(g){return this.from(u(this),g)}}}))})(Ft)),Ft.exports}var jn=Un();const Qt=_t(jn),Nn={class:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] sm:grid-cols-[repeat(auto-fill,minmax(240px,1fr))] md:grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 sm:gap-6 px-6"},Hn=["onClick"],Rn={key:0,class:"absolute top-2 right-2 bg-accent text-black px-2 py-1 rounded text-xs font-medium flex items-center gap-1"},zn=["src","alt"],Kn={class:"flex flex-col gap-1"},Wn={key:0,class:"text-gray-5 text-sm font-medium"},Zn={class:"leading-5 text-primary-3 line-clamp-2"},Gn={class:"flex items-center justify-between gap-3 mb-2"},qn={class:"text-gray-400 text-xs sm:text-sm"},Jn={class:"text-gray-500 text-xs sm:text-sm flex items-center justify-center gap-1"},Qn={class:"flex items-center justify-between gap-3 mb-2"},Xn={class:"flex items-center gap-2"},ti={key:0,class:"text-gray-500 text-xs sm:text-sm"},ei={key:0,class:"pt-2"},si={class:"flex flex-wrap gap-1"},ni={key:1,class:"pt-2"},ii={class:"flex items-center gap-2"},ri=["href","title"],oi=vt({__name:"VideoGrid",props:{videos:{default:()=>[]},highlightVideoId:{default:void 0}},emits:["play","visibleVideosChange"],setup(e,{emit:t}){const s=e,o=t,r=Q([]),i=Q([]),n=Ye(new Map),m=Le(M=>{o("visibleVideosChange",M)},150),{stop:u}=Pe(r,M=>{M.forEach(d=>{const a=r.value.indexOf(d.target);if(a!==-1&&s.videos[a]){const h=s.videos[a];n.set(h.id,d.isIntersecting)}});const b=s.videos.filter(d=>n.get(d.id)||!1);g(i.value,b)||(i.value=b,m(b))},{threshold:.1,rootMargin:"50px"}),g=(M,b)=>M.length!==b.length?!1:M.every((d,a)=>d.id===b[a]?.id);Mt(()=>s.videos,()=>{const M=new Set(s.videos.map(b=>b.id));for(const[b]of n)M.has(b)||n.delete(b)},{deep:!0}),xe(()=>{u()});const{settings:p}=gt(At()),D=et(()=>p.value.selectedPlatforms||[]);ct.extend(Qt);const _=M=>ct(M).fromNow();return(M,b)=>(E(),L("div",Nn,[(E(!0),L(ot,null,lt(e.videos,d=>(E(),L("div",{key:d.id,ref_for:!0,ref_key:"videoElements",ref:r,class:ut(["relative group shadow-black hover:shadow-md hover:bg-zinc-900 flex flex-col gap-3 rounded-2xl hover:rounded-b-0 pa-2 transition-shadow duration-200",{"outline-accent outline-2 outline-solid outline-bottom-0":e.highlightVideoId===d.id}])},[l("div",{class:"rounded-2xl overflow-hidden w-full aspect-video relative cursor-pointer",onClick:a=>M.$emit("play",d)},[b[1]||(b[1]=l("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[l("div",{class:"i-mdi-play-outline text-accent text-8xl"})],-1)),e.highlightVideoId===d.id?(E(),L("div",Rn,[...b[0]||(b[0]=[l("div",{class:"i-mdi-volume-high w-3 h-3"},null,-1),at(" Playing ",-1)])])):X("",!0),l("img",{src:`https://i.ytimg.com/vi/${d.id}/hqdefault.jpg`,alt:d.title,class:"w-full h-full object-cover",loading:"lazy"},null,8,zn)],8,Hn),l("div",Kn,[d.artist?(E(),L("div",Wn,W(d.artist),1)):X("",!0),l("div",Zn,W(d.musicTitle||d.title),1)]),l("div",{class:ut(["hidden group-hover:flex absolute bg-zinc-900 w-full top-full left-0 flex-col z-10 shadow-black shadow-md rounded-b-2xl p-3",{"outline-2 outline-solid outline-accent ":e.highlightVideoId===d.id}])},[l("div",Gn,[l("p",qn,W(d.channel),1),l("p",Jn,[b[2]||(b[2]=l("span",{class:"i-mdi-clock-outline text-xs"},null,-1)),at(" "+W(d.duration),1)])]),l("div",Qn,[l("div",Xn,[l("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:kt({backgroundColor:("getUserColor"in M?M.getUserColor:$(Jt))(d.userId||" ")})},[...b[3]||(b[3]=[l("span",{class:"i-mdi-account text-xs"},null,-1)])],4)]),d.createdAt?(E(),L("p",ti,W(_(d.createdAt)),1)):X("",!0)]),d.tags&&d.tags.length>0?(E(),L("div",ei,[l("div",si,[(E(!0),L(ot,null,lt(d.tags,a=>(E(),L("span",{key:a,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg"},W(a),1))),128))])])):X("",!0),d.externalIds&&$(D).some(a=>d.externalIds?.[a])?(E(),L("div",ni,[l("div",ii,[b[4]||(b[4]=l("span",{class:"text-xs text-primary-3"},"Listen on:",-1)),(E(!0),L(ot,null,lt($(D).filter(a=>d.externalIds?.[a]),a=>(E(),L("a",{key:a,href:("getPlatformUrl"in M?M.getPlatformUrl:$(pe))(a,d.externalIds[a]),target:"_blank",rel:"noopener noreferrer",class:"text-primary-3 hover:text-accent transition-colors",title:`Listen on ${("getPlatformName"in M?M.getPlatformName:$(me))(a)}`},[l("div",{class:ut([("getPlatformIcon"in M?M.getPlatformIcon:$(ge))(a),"text-xl"])},null,2)],8,ri))),128))])])):X("",!0)],2)],2))),128))]))}}),ai=Object.assign(oi,{__name:"VideoGrid"}),li={class:"p-3 w-md"},ui={class:"flex items-center gap-3"},ci={class:"flex-shrink-0 relative"},di=["src","alt"],hi={key:0,class:"absolute -top-1 -right-1 bg-accent text-black px-1 py-0.5 rounded text-xs font-medium flex items-center gap-1"},fi={class:"flex-1 min-w-0"},mi={class:"mb-1"},pi={key:0,class:"text-primary-2 text-xs font-medium"},gi={key:1,class:"text-xs text-gray-5 opacity-80 italic"},vi={class:"font-medium text-primary-3 line-clamp-2 text-sm mb-1"},yi={class:"p-3"},xi={class:"text-sm text-primary-3 font-mono flex items-center gap-1"},$i={class:"p-3 min-w-xs"},bi={key:0,class:"relative flex gap-1 max-w-72 overflow-hidden"},Mi={class:"p-3"},wi={key:0,class:"flex gap-2"},Ai=["href","title"],Di={class:"p-3 min-w-30"},ki={class:"flex items-center gap-2"},_i=["title"],Si={key:1,class:"text-sm text-primary-3 italic"},Ci=vt({__name:"VideoListItem",props:{video:{},isHighlighted:{type:Boolean}},emits:["play"],setup(e){const{settings:t}=gt(At()),s=et(()=>t.value.selectedPlatforms||[]);ct.extend(Qt);const o=r=>ct(r).fromNow();return(r,i)=>(E(),L("tr",{class:ut(["relative border-b border-primary-2/30 hover:bg-bg-gradient transition-colors cursor-pointer",{"after:content-empty after:absolute after:inset-0 after:b-1 after:b-solid after:b-accent after:pointer-events-none after:rounded-2xl":e.isHighlighted}]),onClick:i[1]||(i[1]=n=>r.$emit("play",e.video))},[l("td",li,[l("div",ui,[l("div",ci,[l("img",{src:`https://i.ytimg.com/vi/${e.video.id}/hqdefault.jpg`,alt:e.video.title,class:"rounded-full size-16 object-cover bg-primary-1"},null,8,di),i[3]||(i[3]=l("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity rounded"},[l("div",{class:"i-mdi-play-outline text-accent text-2xl"})],-1)),e.isHighlighted?(E(),L("div",hi,[...i[2]||(i[2]=[l("div",{class:"i-mdi-volume-high w-2 h-2"},null,-1)])])):X("",!0)]),l("div",fi,[l("div",mi,[e.video.artist?(E(),L("span",pi,W(e.video.artist),1)):(E(),L("span",gi,W(e.video.channel),1))]),l("h4",vi,W(e.video.musicTitle||e.video.title),1)])])]),l("td",yi,[l("span",xi,[i[4]||(i[4]=l("span",{class:"i-mdi-clock-outline text-xs text-gray-6"},null,-1)),at(" "+W(e.video.duration),1)])]),l("td",$i,[e.video.tags&&e.video.tags.length>0?(E(),L("div",bi,[(E(!0),L(ot,null,lt(e.video.tags,n=>(E(),L("span",{key:n,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg whitespace-nowrap flex-shrink-0"},W(n),1))),128)),i[5]||(i[5]=l("div",{class:"absolute right-0 top-0 bottom-0 w-10 bg-gradient-to-r from-transparent to-background group-hover:to-bg-gradient pointer-events-none"},null,-1))])):X("",!0)]),l("td",Mi,[e.video.externalIds&&$(s).some(n=>e.video.externalIds?.[n])?(E(),L("div",wi,[(E(!0),L(ot,null,lt($(s).filter(n=>e.video.externalIds?.[n]),n=>(E(),L("a",{key:n,href:("getPlatformUrl"in r?r.getPlatformUrl:$(pe))(n,e.video.externalIds[n]),target:"_blank",rel:"noopener noreferrer",class:"text-primary-3 hover:text-accent transition-colors",title:`Listen on ${("getPlatformName"in r?r.getPlatformName:$(me))(n)}`,onClick:i[0]||(i[0]=wt(()=>{},["stop"]))},[l("div",{class:ut([("getPlatformIcon"in r?r.getPlatformIcon:$(ge))(n),"text-xl"])},null,2)],8,Ai))),128))])):X("",!0)]),l("td",Di,[l("div",ki,[l("div",{class:"w-3 h-3 rounded-full flex items-center justify-center text-white text-xs font-bold",style:kt({backgroundColor:("getUserColor"in r?r.getUserColor:$(Jt))(e.video.userId||" ")})},[...i[6]||(i[6]=[l("span",{class:"i-mdi-account text-xs"},null,-1)])],4)]),e.video.createdAt?(E(),L("span",{key:0,class:"text-sm text-primary-3",title:new Date(e.video.createdAt).toLocaleString()},W(o(e.video.createdAt)),9,_i)):(E(),L("span",Si,"Unknown"))])],2))}}),Ei=Object.assign(Ci,{__name:"VideoListItem"}),Ti={class:"rounded-lg sm:px-6"},Fi={key:0,class:"text-center py-8"},Ii={key:1,class:"overflow-x-auto"},Bi={key:0},Yi={key:1},Oi=vt({__name:"VideoList",props:{videos:{default:()=>[]},highlightVideoId:{default:""},itemHeight:{default:100},topPadding:{default:0},overscan:{default:5}},emits:["play","visibleVideosChange"],setup(e,{emit:t}){const s=e,o=t,r=Q(),{y:i}=Ve(),{height:n}=Ne(),{top:m}=Ue(r),u=je(i,16),g=et(()=>{if(!r.value||s.videos.length===0)return{startIndex:0,endIndex:-1};const d=s.itemHeight,a=u.value,h=m.value,x=n.value,T=h>=0?Math.max(0,a-h):a,B=Math.max(0,T-60),F=Math.max(0,Math.floor(B/d)-s.overscan),C=Math.ceil(x/d)+s.overscan*2,v=Math.min(s.videos.length-1,F+C);return{startIndex:F,endIndex:v}}),p=et(()=>{const{startIndex:d,endIndex:a}=g.value;return s.videos.slice(d,a+1).map((h,x)=>({index:d+x,video:h})).filter(h=>h.video!==void 0).map(({index:h,video:x})=>({index:h,data:x}))}),D=et(()=>g.value.startIndex*s.itemHeight),_=et(()=>{const{endIndex:d}=g.value,a=s.videos.length-1-d;return Math.max(0,a*s.itemHeight)}),M=(d,a)=>d.length!==a.length?!1:d.every((h,x)=>h===a[x]);let b=[];return Mt(p,d=>{const a=d.map(h=>h.data.id);if(!M(b,a)){b=a;const h=d.map(x=>x.data);o("visibleVideosChange",h)}},{immediate:!0,deep:!0}),(d,a)=>{const h=Ei;return E(),L("div",Ti,[e.videos.length?(E(),L("div",Ii,[l("table",{ref_key:"tableContainer",ref:r,class:"w-full border-collapse"},[a[2]||(a[2]=l("thead",{class:"sticky top-0 bg-bg-color z-10"},[l("tr",{class:"border-b border-primary-2"},[l("th",{class:"text-left p-3 font-medium text-primary-4"},"Video"),l("th",{class:"text-left p-3 font-medium text-primary-4"},"Duration"),l("th",{class:"text-left p-3 font-medium text-primary-4"},"Tags"),l("th",{class:"text-left p-3 font-medium text-primary-4"},"Platforms"),l("th",{class:"text-left p-3 font-medium text-primary-4"},"Added")])],-1)),l("tbody",null,[$(D)>0?(E(),L("tr",Bi,[l("td",{colspan:5,style:kt({height:$(D)+"px"})},null,4)])):X("",!0),(E(!0),L(ot,null,lt($(p),x=>(E(),bt(h,{key:x.data.id,video:x.data,"is-highlighted":e.highlightVideoId===x.data.id,onPlay:a[0]||(a[0]=T=>d.$emit("play",T))},null,8,["video","is-highlighted"]))),128)),$(_)>0?(E(),L("tr",Yi,[l("td",{colspan:5,style:kt({height:$(_)+"px"})},null,4)])):X("",!0)])],512)])):(E(),L("div",Fi,[...a[1]||(a[1]=[l("div",{class:"i-mdi-video-outline text-4xl mb-2"},null,-1),l("p",{class:"text-primary-3"},"No videos found.",-1)])]))])}}}),Ee=Object.assign(Oi,{__name:"VideoList"});var It={exports:{}},Pi=It.exports,ue;function Li(){return ue||(ue=1,(function(e,t){(function(s,o){e.exports=o()})(Pi,(function(){var s="minute",o=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(i,n,m){var u=n.prototype;m.utc=function(d){var a={date:d,utc:!0,args:arguments};return new n(a)},u.utc=function(d){var a=m(this.toDate(),{locale:this.$L,utc:!0});return d?a.add(this.utcOffset(),s):a},u.local=function(){return m(this.toDate(),{locale:this.$L,utc:!1})};var g=u.parse;u.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),g.call(this,d)};var p=u.init;u.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else p.call(this)};var D=u.utcOffset;u.utcOffset=function(d,a){var h=this.$utils().u;if(h(d))return this.$u?0:h(this.$offset)?D.call(this):this.$offset;if(typeof d=="string"&&(d=(function(F){F===void 0&&(F="");var C=F.match(o);if(!C)return null;var v=(""+C[0]).match(r)||["-",0,0],f=v[0],Y=60*+v[1]+ +v[2];return Y===0?0:f==="+"?Y:-Y})(d),d===null))return this;var x=Math.abs(d)<=16?60*d:d;if(x===0)return this.utc(a);var T=this.clone();if(a)return T.$offset=x,T.$u=!1,T;var B=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(T=this.local().add(x+B,s)).$offset=x,T.$x.$localOffset=B,T};var _=u.format;u.format=function(d){var a=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return _.call(this,a)},u.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var M=u.toDate;u.toDate=function(d){return d==="s"&&this.$offset?m(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():M.call(this)};var b=u.diff;u.diff=function(d,a,h){if(d&&this.$u===d.$u)return b.call(this,d,a,h);var x=this.local(),T=m(d).local();return b.call(x,T,a,h)}}}))})(It)),It.exports}var Vi=Li();const Ui=_t(Vi);var Bt={exports:{}},ji=Bt.exports,ce;function Ni(){return ce||(ce=1,(function(e,t){(function(s,o){e.exports=o()})(ji,(function(){var s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,i=/\d\d/,n=/\d\d?/,m=/\d*[^-_:/,()\s\d]+/,u={},g=function(a){return(a=+a)+(a>68?1900:2e3)},p=function(a){return function(h){this[a]=+h}},D=[/[+-]\d\d:?(\d\d)?|Z/,function(a){(this.zone||(this.zone={})).offset=(function(h){if(!h||h==="Z")return 0;var x=h.match(/([+-]|\d\d)/g),T=60*x[1]+(+x[2]||0);return T===0?0:x[0]==="+"?-T:T})(a)}],_=function(a){var h=u[a];return h&&(h.indexOf?h:h.s.concat(h.f))},M=function(a,h){var x,T=u.meridiem;if(T){for(var B=1;B<=24;B+=1)if(a.indexOf(T(B,0,h))>-1){x=B>12;break}}else x=a===(h?"pm":"PM");return x},b={A:[m,function(a){this.afternoon=M(a,!1)}],a:[m,function(a){this.afternoon=M(a,!0)}],Q:[r,function(a){this.month=3*(a-1)+1}],S:[r,function(a){this.milliseconds=100*+a}],SS:[i,function(a){this.milliseconds=10*+a}],SSS:[/\d{3}/,function(a){this.milliseconds=+a}],s:[n,p("seconds")],ss:[n,p("seconds")],m:[n,p("minutes")],mm:[n,p("minutes")],H:[n,p("hours")],h:[n,p("hours")],HH:[n,p("hours")],hh:[n,p("hours")],D:[n,p("day")],DD:[i,p("day")],Do:[m,function(a){var h=u.ordinal,x=a.match(/\d+/);if(this.day=x[0],h)for(var T=1;T<=31;T+=1)h(T).replace(/\[|\]/g,"")===a&&(this.day=T)}],w:[n,p("week")],ww:[i,p("week")],M:[n,p("month")],MM:[i,p("month")],MMM:[m,function(a){var h=_("months"),x=(_("monthsShort")||h.map((function(T){return T.slice(0,3)}))).indexOf(a)+1;if(x<1)throw new Error;this.month=x%12||x}],MMMM:[m,function(a){var h=_("months").indexOf(a)+1;if(h<1)throw new Error;this.month=h%12||h}],Y:[/[+-]?\d+/,p("year")],YY:[i,function(a){this.year=g(a)}],YYYY:[/\d{4}/,p("year")],Z:D,ZZ:D};function d(a){var h,x;h=a,x=u&&u.formats;for(var T=(a=h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(O,S,R){var K=R&&R.toUpperCase();return S||x[R]||s[R]||x[K].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(k,A,w){return A||w.slice(1)}))}))).match(o),B=T.length,F=0;F<B;F+=1){var C=T[F],v=b[C],f=v&&v[0],Y=v&&v[1];T[F]=Y?{regex:f,parser:Y}:C.replace(/^\[|\]$/g,"")}return function(O){for(var S={},R=0,K=0;R<B;R+=1){var k=T[R];if(typeof k=="string")K+=k.length;else{var A=k.regex,w=k.parser,P=O.slice(K),y=A.exec(P)[0];w.call(S,y),O=O.replace(y,"")}}return(function(V){var I=V.afternoon;if(I!==void 0){var N=V.hours;I?N<12&&(V.hours+=12):N===12&&(V.hours=0),delete V.afternoon}})(S),S}}return function(a,h,x){x.p.customParseFormat=!0,a&&a.parseTwoDigitYear&&(g=a.parseTwoDigitYear);var T=h.prototype,B=T.parse;T.parse=function(F){var C=F.date,v=F.utc,f=F.args;this.$u=v;var Y=f[1];if(typeof Y=="string"){var O=f[2]===!0,S=f[3]===!0,R=O||S,K=f[2];S&&(K=f[2]),u=this.$locale(),!O&&K&&(u=x.Ls[K]),this.$d=(function(P,y,V,I){try{if(["x","X"].indexOf(y)>-1)return new Date((y==="X"?1e3:1)*P);var N=d(y)(P),G=N.year,Z=N.month,tt=N.day,st=N.hours,U=N.minutes,c=N.seconds,H=N.milliseconds,q=N.zone,J=N.week,it=new Date,z=tt||(G||Z?1:it.getDate()),dt=G||it.getFullYear(),St=0;G&&!Z||(St=Z>0?Z-1:it.getMonth());var Ct,Vt=st||0,Ut=U||0,jt=c||0,Nt=H||0;return q?new Date(Date.UTC(dt,St,z,Vt,Ut,jt,Nt+60*q.offset*1e3)):V?new Date(Date.UTC(dt,St,z,Vt,Ut,jt,Nt)):(Ct=new Date(dt,St,z,Vt,Ut,jt,Nt),J&&(Ct=I(Ct).week(J).toDate()),Ct)}catch{return new Date("")}})(C,Y,v,x),this.init(),K&&K!==!0&&(this.$L=this.locale(K).$L),R&&C!=this.format(Y)&&(this.$d=new Date("")),u={}}else if(Y instanceof Array)for(var k=Y.length,A=1;A<=k;A+=1){f[1]=Y[A-1];var w=x.apply(this,f);if(w.isValid()){this.$d=w.$d,this.$L=w.$L,this.init();break}A===k&&(this.$d=new Date(""))}else B.call(this,F)}}}))})(Bt)),Bt.exports}var Hi=Ni();const Ri=_t(Hi);var Yt={exports:{}},zi=Yt.exports,de;function Ki(){return de||(de=1,(function(e,t){(function(s,o){e.exports=o()})(zi,(function(){var s,o,r=1e3,i=6e4,n=36e5,m=864e5,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g=31536e6,p=2628e6,D=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,_={years:g,months:p,days:m,hours:n,minutes:i,seconds:r,milliseconds:1,weeks:6048e5},M=function(C){return C instanceof B},b=function(C,v,f){return new B(C,f,v.$l)},d=function(C){return o.p(C)+"s"},a=function(C){return C<0},h=function(C){return a(C)?Math.ceil(C):Math.floor(C)},x=function(C){return Math.abs(C)},T=function(C,v){return C?a(C)?{negative:!0,format:""+x(C)+v}:{negative:!1,format:""+C+v}:{negative:!1,format:""}},B=(function(){function C(f,Y,O){var S=this;if(this.$d={},this.$l=O,f===void 0&&(this.$ms=0,this.parseFromMilliseconds()),Y)return b(f*_[d(Y)],this);if(typeof f=="number")return this.$ms=f,this.parseFromMilliseconds(),this;if(typeof f=="object")return Object.keys(f).forEach((function(k){S.$d[d(k)]=f[k]})),this.calMilliseconds(),this;if(typeof f=="string"){var R=f.match(D);if(R){var K=R.slice(2).map((function(k){return k!=null?Number(k):0}));return this.$d.years=K[0],this.$d.months=K[1],this.$d.weeks=K[2],this.$d.days=K[3],this.$d.hours=K[4],this.$d.minutes=K[5],this.$d.seconds=K[6],this.calMilliseconds(),this}}return this}var v=C.prototype;return v.calMilliseconds=function(){var f=this;this.$ms=Object.keys(this.$d).reduce((function(Y,O){return Y+(f.$d[O]||0)*_[O]}),0)},v.parseFromMilliseconds=function(){var f=this.$ms;this.$d.years=h(f/g),f%=g,this.$d.months=h(f/p),f%=p,this.$d.days=h(f/m),f%=m,this.$d.hours=h(f/n),f%=n,this.$d.minutes=h(f/i),f%=i,this.$d.seconds=h(f/r),f%=r,this.$d.milliseconds=f},v.toISOString=function(){var f=T(this.$d.years,"Y"),Y=T(this.$d.months,"M"),O=+this.$d.days||0;this.$d.weeks&&(O+=7*this.$d.weeks);var S=T(O,"D"),R=T(this.$d.hours,"H"),K=T(this.$d.minutes,"M"),k=this.$d.seconds||0;this.$d.milliseconds&&(k+=this.$d.milliseconds/1e3,k=Math.round(1e3*k)/1e3);var A=T(k,"S"),w=f.negative||Y.negative||S.negative||R.negative||K.negative||A.negative,P=R.format||K.format||A.format?"T":"",y=(w?"-":"")+"P"+f.format+Y.format+S.format+P+R.format+K.format+A.format;return y==="P"||y==="-P"?"P0D":y},v.toJSON=function(){return this.toISOString()},v.format=function(f){var Y=f||"YYYY-MM-DDTHH:mm:ss",O={Y:this.$d.years,YY:o.s(this.$d.years,2,"0"),YYYY:o.s(this.$d.years,4,"0"),M:this.$d.months,MM:o.s(this.$d.months,2,"0"),D:this.$d.days,DD:o.s(this.$d.days,2,"0"),H:this.$d.hours,HH:o.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:o.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:o.s(this.$d.seconds,2,"0"),SSS:o.s(this.$d.milliseconds,3,"0")};return Y.replace(u,(function(S,R){return R||String(O[S])}))},v.as=function(f){return this.$ms/_[d(f)]},v.get=function(f){var Y=this.$ms,O=d(f);return O==="milliseconds"?Y%=1e3:Y=O==="weeks"?h(Y/_[O]):this.$d[O],Y||0},v.add=function(f,Y,O){var S;return S=Y?f*_[d(Y)]:M(f)?f.$ms:b(f,this).$ms,b(this.$ms+S*(O?-1:1),this)},v.subtract=function(f,Y){return this.add(f,Y,!0)},v.locale=function(f){var Y=this.clone();return Y.$l=f,Y},v.clone=function(){return b(this.$ms,this)},v.humanize=function(f){return s().add(this.$ms,"ms").locale(this.$l).fromNow(!f)},v.valueOf=function(){return this.asMilliseconds()},v.milliseconds=function(){return this.get("milliseconds")},v.asMilliseconds=function(){return this.as("milliseconds")},v.seconds=function(){return this.get("seconds")},v.asSeconds=function(){return this.as("seconds")},v.minutes=function(){return this.get("minutes")},v.asMinutes=function(){return this.as("minutes")},v.hours=function(){return this.get("hours")},v.asHours=function(){return this.as("hours")},v.days=function(){return this.get("days")},v.asDays=function(){return this.as("days")},v.weeks=function(){return this.get("weeks")},v.asWeeks=function(){return this.as("weeks")},v.months=function(){return this.get("months")},v.asMonths=function(){return this.as("months")},v.years=function(){return this.get("years")},v.asYears=function(){return this.as("years")},C})(),F=function(C,v,f){return C.add(v.years()*f,"y").add(v.months()*f,"M").add(v.days()*f,"d").add(v.hours()*f,"h").add(v.minutes()*f,"m").add(v.seconds()*f,"s").add(v.milliseconds()*f,"ms")};return function(C,v,f){s=f,o=f().$utils(),f.duration=function(S,R){var K=f.locale();return b(S,{$l:K},R)},f.isDuration=M;var Y=v.prototype.add,O=v.prototype.subtract;v.prototype.add=function(S,R){return M(S)?F(this,S,1):Y.bind(this)(S,R)},v.prototype.subtract=function(S,R){return M(S)?F(this,S,-1):O.bind(this)(S,R)}}}))})(Yt)),Yt.exports}var Wi=Ki();const Zi=_t(Wi),Gi={class:"text-xs text-primary-3 text-center mb-1"},qi={class:"relative group max-h-90%"},Ji=["y"],Qi=["y"],Xi=["y"],tr=["x","y","width","height"],er={class:"text-xs text-primary-3 text-center mt-1"},sr={class:"ml-30"},ft=800,nr=1800,ir=157784760,he=1.15,rr=50,or=vt({__name:"VideoTimeline",props:{videos:{default:()=>[]},highlightVideoId:{default:""}},emits:["play"],setup(e,{emit:t}){const s=e,o=t;ct.extend(Ui),ct.extend(Qt),ct.extend(Ri),ct.extend(Zi);const r=ft/2,i=Q(1728e3),n=Q(ct()),m=Q(),u=Q(!1),g=[{length:1,label:"s",unitName:"second",format:"HH:mm:ss",maxTimespan:300,alignmentUnit:"second",alignmentDivisor:1,incrementAmount:1,incrementUnit:"second"},{length:60,label:"m",unitName:"minute",format:"HH:mm",maxTimespan:3600,alignmentUnit:"minute",alignmentDivisor:1,incrementAmount:1,incrementUnit:"minute"},{length:900,label:"15m",unitName:"minute",format:"HH:mm",maxTimespan:28800,alignmentUnit:"hour",alignmentDivisor:15,incrementAmount:15,incrementUnit:"minute"},{length:3600,label:"h",unitName:"hour",format:"HH:mm",maxTimespan:129600,alignmentUnit:"hour",alignmentDivisor:1,incrementAmount:1,incrementUnit:"hour"},{length:86400,label:"d",unitName:"day",format:"MMM D",maxTimespan:1209600,alignmentUnit:"day",alignmentDivisor:1,incrementAmount:1,incrementUnit:"day"},{length:604800,label:"w",unitName:"week",format:"MMM D",maxTimespan:23587200,alignmentUnit:"week",alignmentDivisor:1,incrementAmount:1,incrementUnit:"week"},{length:2629746,label:"mo",unitName:"month",format:"MMM YYYY",maxTimespan:315569520,alignmentUnit:"month",alignmentDivisor:1,incrementAmount:1,incrementUnit:"month"},{length:31556952,label:"y",unitName:"year",format:"YYYY",maxTimespan:1/0,alignmentUnit:"year",alignmentDivisor:1,incrementAmount:1,incrementUnit:"year"}],p=et(()=>g.find(B=>i.value<=B.maxTimespan)??g[g.length-1]),D=et(()=>{const B=n.value.subtract(i.value,"second"),F=n.value,C=g.findIndex(y=>y.length===p.value.length),v=C>0?g[C-1]:p.value,f=(y,V,I)=>{const N=[],G=Math.ceil(i.value/I.length);let Z;if(I.alignmentDivisor===1)Z=y.startOf(I.alignmentUnit);else{const st=y.startOf(I.alignmentUnit),U=y.get(I.alignmentUnit==="hour"?"minute":I.alignmentUnit),c=Math.floor(U/I.alignmentDivisor)*I.alignmentDivisor;Z=st.set(I.alignmentUnit==="hour"?"minute":I.alignmentUnit,c)}Z.isAfter(y)&&(Z=Z.subtract(I.incrementAmount,I.incrementUnit));const tt=5;for(let st=0;st<=G+2+tt;st++)N.push(Z),Z=Z.add(I.incrementAmount,I.incrementUnit);return N},Y=(y,V,I)=>{const N=y.format("YYYY-MM-DD-HH-mm-ss"),G=I||p.value;return{y:ft-y.diff(B,"second")/i.value*ft,isMajor:V,time:y,id:`${N}-${G.label}-${V?"major":"minor"}`,...V&&I?{label:h(y,I)}:{}}},O=i.value*.2,S=B.subtract(O,"second"),R=F.add(O,"second"),K=f(S,R,p.value),k=v.length!==p.value.length?f(S,R,v):[],A=K.map(y=>Y(y,!0,p.value)),w=k.map(y=>Y(y,!1)).filter(y=>!A.some(V=>Math.abs(V.y-y.y)<2));return[...A,...w].filter(y=>y.y>=-100&&y.y<=ft+100).sort((y,V)=>y.y-V.y)}),_=Q([]),M=et(()=>{const B=_.value;if(B.length===0)return null;const F=B.map(f=>f.createdAt?ct(f.createdAt):null).filter(f=>f!==null);if(F.length===0)return null;const[C,v]=F.reduce(([f,Y],O)=>[O.isBefore(f)?O:f,O.isAfter(Y)?O:Y],[F[0],F[0]]);return{centerTime:C.add(v.diff(C,"second")/2,"second"),earliestDate:C,latestDate:v}}),b=et(()=>{const B=M.value;if(!B)return null;const{centerTime:F,earliestDate:C,latestDate:v}=B,f=n.value.subtract(i.value,"second"),Y=ft-F.diff(f,"second")/i.value*ft,O=v.diff(C,"second"),S=Math.max(O/i.value*ft,10);return{y:Y-S/2,height:S,x:65,width:19}}),d=te(B=>{_.value=B,a()},150);function a(){const B=M.value;if(!B)return;const{centerTime:F}=B,C=n.value.subtract(i.value,"second"),v=ft-F.diff(C,"second")/i.value*ft,f=50,Y=v-r;if(Math.abs(Y)>f){const O=F.add(i.value/2,"second"),S=ct(),R=O.isAfter(S)?S:O;T(R)}}function h(B,F){return B.format(F.format)}function x(B,F,C){const v=F||C?he*1.5:he;let f=i.value;return B>0?f=Math.min(f*v,ir):f=Math.max(f/v,nr),f<3600?Math.round(f/30)*30:f<86400?Math.round(f/300)*300:f<604800?Math.round(f/3600)*3600:Math.round(f/86400)*86400}He(m,"wheel",te(async B=>{B.preventDefault(),B.stopPropagation();const F=x(B.deltaY,B.ctrlKey,B.metaKey);i.value=F},rr),{passive:!1});function T(B){u.value=!0,setTimeout(()=>{n.value=B,setTimeout(()=>{u.value=!1},500)},300)}return(B,F)=>{const C=Ee;return E(),L(ot,null,[l("div",{class:"fixed inset-0 h-screen flex flex-col justify-center pl-3 w-24",onWheel:F[0]||(F[0]=wt(()=>{},["prevent","stop"]))},[l("div",Gi,W($(n).format("YYYY MMM D")),1),l("div",qi,[(E(),L("svg",{ref_key:"svgElement",ref:m,class:"h-full",width:"85",viewBox:"0 0 85 800",xmlns:"http://www.w3.org/2000/svg"},[(E(!0),L(ot,null,lt($(D),v=>(E(),L("g",{key:v.id},[v.isMajor?(E(),L("rect",{key:0,x:68,y:v.y-1,width:"12",height:"2",fill:"currentColor",class:"text-primary-4 transition-all duration-300 ease-in-out"},null,8,Ji)):(E(),L("rect",{key:1,x:72,y:v.y-.5,width:"8",height:"1",fill:"currentColor",class:"text-primary-3 transition-all duration-300 ease-in-out"},null,8,Qi)),v.isMajor&&v.label?(E(),L("text",{key:2,x:60,y:v.y+4,class:ut([{"opacity-0":$(u),"opacity-100":!$(u)},"text-xs fill-primary-3 transition-opacity duration-500 ease-in-out"]),"text-anchor":"end"},W(v.label),11,Xi)):X("",!0)]))),128)),$(b)?(E(),L("rect",{key:0,x:$(b).x,y:$(b).y,width:$(b).width,height:$(b).height,class:"fill-accent stroke-accent stroke-2 transition-all duration-300 ease-in-out","fill-opacity":"0.3","stroke-opacity":"1",rx:"4",ry:"4"},null,8,tr)):X("",!0)],512)),F[2]||(F[2]=$e('<div class="group-hover:flex hidden absolute inset-0 flex-col items-center justify-center pointer-events-none transition-opacity duration-200"><div class="flex flex-col items-center mb-4 text-accent animate-pulse"><div class="i-mdi-chevron-up text-2xl mb-1"></div><div class="i-mdi-magnify-plus text-lg"></div></div><div class="flex items-center justify-center mb-4"><div class="i-mdi-mouse text-3xl text-accent"></div></div><div class="flex flex-col items-center text-accent animate-pulse"><div class="i-mdi-magnify-minus text-lg"></div><div class="i-mdi-chevron-down text-2xl mt-1"></div></div></div>',1))]),l("div",er,W($(n).subtract($(i),"second").format("YYYY MMM D")),1)],32),l("div",sr,[nt(C,{videos:e.videos,"highlight-video-id":s.highlightVideoId,onPlay:F[1]||(F[1]=v=>o("play",v)),onVisibleVideosChange:$(d)},null,8,["videos","highlight-video-id","onVisibleVideosChange"])])],64)}}}),ar=Object.assign(or,{__name:"VideoTimeline"}),lr={class:"pt-24"},ur={key:0,class:"flex items-center justify-center py-12"},cr={key:1,class:"bg-primary-1 border border-primary-2 rounded-lg p-6 m-8"},dr={class:"flex items-center gap-2 text-primary-3"},hr={key:2,class:"text-center py-12"},fr={key:3,class:"flex flex-col gap-12 pt-6 pb-12"},$r=vt({__name:"index",setup(e){Oe({title:"Music Playlist View",meta:[{name:"description",content:"Browse your cached YouTube playlists"}]});const{loadFirstPlaylist:t,findVideoIndex:s}=Ot(),{currentPlaylist:o,currentVideos:r,loading:i,error:n,hasCurrentPlaylist:m}=gt(Ot()),{viewMode:u}=gt(At()),{currentVideo:g}=gt(ee()),{initializeGlobalPlayer:p}=ee(),D=Q("");ye(async()=>{await t()});const _=M=>{if(!o.value)return;const b=s(M.id);b!==-1&&(D.value=M.id,p(b))};return Mt([g],([M])=>{M?D.value=M.id:D.value=""}),(M,b)=>{const d=Yn,a=ai,h=Ee,x=ar;return E(),L("div",lr,[$(i)?(E(),L("div",ur,[...b[0]||(b[0]=[l("div",{class:"flex items-center gap-3 text-primary-3"},[l("div",{class:"i-mdi-loading animate-spin text-2xl"}),l("span",null,"Loading playlist...")],-1)])])):$(n)?(E(),L("div",cr,[l("div",dr,[b[1]||(b[1]=l("div",{class:"i-mdi-alert-circle"},null,-1)),b[2]||(b[2]=l("strong",null,"Error:",-1)),at(" "+W($(n)),1)])])):$(m)?(E(),L("div",fr,[nt(d),$(u)==="grid"?(E(),bt(a,{key:0,videos:$(r),"highlight-video-id":$(D),onPlay:_},null,8,["videos","highlight-video-id"])):$(u)==="list"?(E(),bt(h,{key:1,videos:$(r),"highlight-video-id":$(D),onPlay:_},null,8,["videos","highlight-video-id"])):$(u)==="timeline"?(E(),bt(x,{key:2,"highlight-video-id":$(D),videos:$(r),onPlay:_},null,8,["highlight-video-id","videos"])):X("",!0)])):(E(),L("div",hr,[...b[3]||(b[3]=[l("div",{class:"i-mdi-playlist-remove text-6xl text-primary-3 mb-4"},null,-1),l("h3",{class:"text-xl font-semibold mb-2"},"No Playlists Found",-1),l("p",{class:"text-primary-3 mb-6"}," No cached playlists are available. Use the admin panel to fetch playlists from YouTube. ",-1)])]))])}}});export{$r as default};
