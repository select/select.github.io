import{_ as ke}from"./CDADMVec.js";import{_ as Se}from"./CTMp4_ZW.js";import{e as se,g as D,s as P,x as X,c as C,o as b,f as S,a as f,t as $,j as m,F as Z,r as q,i as ye,v as $e,q as Y,l as H,y as fe,d as O,m as Ae,b as V,k as Ie,w as G,z as Le,u as Re}from"./5ezyl0Wq.js";import{u as Ve}from"./BN894dkK.js";import"./etyZeG4r.js";function T(s){return Array.isArray?Array.isArray(s):_e(s)==="[object Array]"}function Oe(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-1/0?"-0":e}function Ne(s){return s==null?"":Oe(s)}function N(s){return typeof s=="string"}function be(s){return typeof s=="number"}function Te(s){return s===!0||s===!1||je(s)&&_e(s)=="[object Boolean]"}function Ce(s){return typeof s=="object"}function je(s){return Ce(s)&&s!==null}function L(s){return s!=null}function ie(s){return!s.trim().length}function _e(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const Pe="Incorrect 'index' type",ze=s=>`Invalid value for key ${s}`,Ke=s=>`Pattern length exceeds max of ${s}.`,Ue=s=>`Missing ${s} property in key`,We=s=>`Property 'weight' in key '${s}' must be a positive integer`,ge=Object.prototype.hasOwnProperty;class Ge{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(n=>{let i=Ee(n);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(n=>{n.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ee(s){let e=null,t=null,n=null,i=1,r=null;if(N(s)||T(s))n=s,e=pe(s),t=re(s);else{if(!ge.call(s,"name"))throw new Error(Ue("name"));const o=s.name;if(n=o,ge.call(s,"weight")&&(i=s.weight,i<=0))throw new Error(We(o));e=pe(o),t=re(o),r=s.getFn}return{path:e,id:t,weight:i,src:n,getFn:r}}function pe(s){return T(s)?s:s.split(".")}function re(s){return T(s)?s.join("."):s}function Ye(s,e){let t=[],n=!1;const i=(r,o,u)=>{if(L(r))if(!o[u])t.push(r);else{let l=o[u];const d=r[l];if(!L(d))return;if(u===o.length-1&&(N(d)||be(d)||Te(d)))t.push(Ne(d));else if(T(d)){n=!0;for(let a=0,h=d.length;a<h;a+=1)i(d[a],o,u+1)}else o.length&&i(d,o,u+1)}};return i(s,N(e)?e.split("."):e,0),n?t:t[0]}const He={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Qe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},Je={location:0,threshold:.6,distance:100},Xe={useExtendedSearch:!1,getFn:Ye,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var g={...Qe,...He,...Je,...Xe};const Ze=/[^ ]+/g;function qe(s=1,e=3){const t=new Map,n=Math.pow(10,e);return{get(i){const r=i.match(Ze).length;if(t.has(r))return t.get(r);const o=1/Math.pow(r,.5*s),u=parseFloat(Math.round(o*n)/n);return t.set(r,u),u},clear(){t.clear()}}}class de{constructor({getFn:e=g.getFn,fieldNormWeight:t=g.fieldNormWeight}={}){this.norm=qe(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,N(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();N(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!L(e)||ie(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((i,r)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(L(o)){if(T(o)){let u=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:d,value:a}=l.pop();if(L(a))if(N(a)&&!ie(a)){let h={v:a,i:d,n:this.norm.get(a)};u.push(h)}else T(a)&&a.forEach((h,p)=>{l.push({nestedArrIndex:p,value:h})})}n.$[r]=u}else if(N(o)&&!ie(o)){let u={v:o,n:this.norm.get(o)};n.$[r]=u}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function we(s,e,{getFn:t=g.getFn,fieldNormWeight:n=g.fieldNormWeight}={}){const i=new de({getFn:t,fieldNormWeight:n});return i.setKeys(s.map(Ee)),i.setSources(e),i.create(),i}function et(s,{getFn:e=g.getFn,fieldNormWeight:t=g.fieldNormWeight}={}){const{keys:n,records:i}=s,r=new de({getFn:e,fieldNormWeight:t});return r.setKeys(n),r.setIndexRecords(i),r}function J(s,{errors:e=0,currentLocation:t=0,expectedLocation:n=0,distance:i=g.distance,ignoreLocation:r=g.ignoreLocation}={}){const o=e/s.length;if(r)return o;const u=Math.abs(n-t);return i?o+u/i:u?1:o}function tt(s=[],e=g.minMatchCharLength){let t=[],n=-1,i=-1,r=0;for(let o=s.length;r<o;r+=1){let u=s[r];u&&n===-1?n=r:!u&&n!==-1&&(i=r-1,i-n+1>=e&&t.push([n,i]),n=-1)}return s[r-1]&&r-n>=e&&t.push([n,r-1]),t}const U=32;function st(s,e,t,{location:n=g.location,distance:i=g.distance,threshold:r=g.threshold,findAllMatches:o=g.findAllMatches,minMatchCharLength:u=g.minMatchCharLength,includeMatches:l=g.includeMatches,ignoreLocation:d=g.ignoreLocation}={}){if(e.length>U)throw new Error(Ke(U));const a=e.length,h=s.length,p=Math.max(0,Math.min(n,h));let A=r,w=p;const M=u>1||l,y=M?Array(h):[];let v;for(;(v=s.indexOf(e,w))>-1;){let c=J(e,{currentLocation:v,expectedLocation:p,distance:i,ignoreLocation:d});if(A=Math.min(c,A),w=v+a,M){let E=0;for(;E<a;)y[v+E]=1,E+=1}}w=-1;let x=[],k=1,I=a+h;const ne=1<<a-1;for(let c=0;c<a;c+=1){let E=0,B=I;for(;E<B;)J(e,{errors:c,currentLocation:p+B,expectedLocation:p,distance:i,ignoreLocation:d})<=A?E=B:I=B,B=Math.floor((I-E)/2+E);I=B;let K=Math.max(1,p-B+1),F=o?h:Math.min(p+B,h)+a,j=Array(F+2);j[F+1]=(1<<c)-1;for(let R=F;R>=K;R-=1){let Q=R-1,he=t[s.charAt(Q)];if(M&&(y[Q]=+!!he),j[R]=(j[R+1]<<1|1)&he,c&&(j[R]|=(x[R+1]|x[R])<<1|1|x[R+1]),j[R]&ne&&(k=J(e,{errors:c,currentLocation:Q,expectedLocation:p,distance:i,ignoreLocation:d}),k<=A)){if(A=k,w=Q,w<=p)break;K=Math.max(1,2*p-w)}}if(J(e,{errors:c+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:d})>A)break;x=j}const _={isMatch:w>=0,score:Math.max(.001,k)};if(M){const c=tt(y,u);c.length?l&&(_.indices=c):_.isMatch=!1}return _}function nt(s){let e={};for(let t=0,n=s.length;t<n;t+=1){const i=s.charAt(t);e[i]=(e[i]||0)|1<<n-t-1}return e}const ee=String.prototype.normalize?(s=>s.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(s=>s);class Me{constructor(e,{location:t=g.location,threshold:n=g.threshold,distance:i=g.distance,includeMatches:r=g.includeMatches,findAllMatches:o=g.findAllMatches,minMatchCharLength:u=g.minMatchCharLength,isCaseSensitive:l=g.isCaseSensitive,ignoreDiacritics:d=g.ignoreDiacritics,ignoreLocation:a=g.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:l,ignoreDiacritics:d,ignoreLocation:a},e=l?e:e.toLowerCase(),e=d?ee(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(A,w)=>{this.chunks.push({pattern:A,alphabet:nt(A),startIndex:w})},p=this.pattern.length;if(p>U){let A=0;const w=p%U,M=p-w;for(;A<M;)h(this.pattern.substr(A,U),A),A+=U;if(w){const y=p-U;h(this.pattern.substr(y),y)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:i}=this.options;if(e=t?e:e.toLowerCase(),e=n?ee(e):e,this.pattern===e){let M={isMatch:!0,score:0};return i&&(M.indices=[[0,e.length-1]]),M}const{location:r,distance:o,threshold:u,findAllMatches:l,minMatchCharLength:d,ignoreLocation:a}=this.options;let h=[],p=0,A=!1;this.chunks.forEach(({pattern:M,alphabet:y,startIndex:v})=>{const{isMatch:x,score:k,indices:I}=st(e,M,y,{location:r+v,distance:o,threshold:u,findAllMatches:l,minMatchCharLength:d,includeMatches:i,ignoreLocation:a});x&&(A=!0),p+=k,x&&I&&(h=[...h,...I])});let w={isMatch:A,score:A?p/this.chunks.length:1};return A&&i&&(w.indices=h),w}}class z{constructor(e){this.pattern=e}static isMultiMatch(e){return me(e,this.multiRegex)}static isSingleMatch(e){return me(e,this.singleRegex)}search(){}}function me(s,e){const t=s.match(e);return t?t[1]:null}class it extends z{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class rt extends z{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class ot extends z{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class lt extends z{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class ut extends z{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class at extends z{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Be extends z{constructor(e,{location:t=g.location,threshold:n=g.threshold,distance:i=g.distance,includeMatches:r=g.includeMatches,findAllMatches:o=g.findAllMatches,minMatchCharLength:u=g.minMatchCharLength,isCaseSensitive:l=g.isCaseSensitive,ignoreDiacritics:d=g.ignoreDiacritics,ignoreLocation:a=g.ignoreLocation}={}){super(e),this._bitapSearch=new Me(e,{location:t,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:l,ignoreDiacritics:d,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Fe extends z{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,n;const i=[],r=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+r,i.push([n,t-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const oe=[it,Fe,ot,lt,at,ut,rt,Be],ve=oe.length,ct=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,dt="|";function ht(s,e={}){return s.split(dt).map(t=>{let n=t.trim().split(ct).filter(r=>r&&!!r.trim()),i=[];for(let r=0,o=n.length;r<o;r+=1){const u=n[r];let l=!1,d=-1;for(;!l&&++d<ve;){const a=oe[d];let h=a.isMultiMatch(u);h&&(i.push(new a(h,e)),l=!0)}if(!l)for(d=-1;++d<ve;){const a=oe[d];let h=a.isSingleMatch(u);if(h){i.push(new a(h,e));break}}}return i})}const ft=new Set([Be.type,Fe.type]);class gt{constructor(e,{isCaseSensitive:t=g.isCaseSensitive,ignoreDiacritics:n=g.ignoreDiacritics,includeMatches:i=g.includeMatches,minMatchCharLength:r=g.minMatchCharLength,ignoreLocation:o=g.ignoreLocation,findAllMatches:u=g.findAllMatches,location:l=g.location,threshold:d=g.threshold,distance:a=g.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:i,minMatchCharLength:r,findAllMatches:u,ignoreLocation:o,location:l,threshold:d,distance:a},e=t?e:e.toLowerCase(),e=n?ee(e):e,this.pattern=e,this.query=ht(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i,ignoreDiacritics:r}=this.options;e=i?e:e.toLowerCase(),e=r?ee(e):e;let o=0,u=[],l=0;for(let d=0,a=t.length;d<a;d+=1){const h=t[d];u.length=0,o=0;for(let p=0,A=h.length;p<A;p+=1){const w=h[p],{isMatch:M,indices:y,score:v}=w.search(e);if(M){if(o+=1,l+=v,n){const x=w.constructor.type;ft.has(x)?u=[...u,...y]:u.push(y)}}else{l=0,o=0,u.length=0;break}}if(o){let p={isMatch:!0,score:l/o};return n&&(p.indices=u),p}}return{isMatch:!1,score:1}}}const le=[];function pt(...s){le.push(...s)}function ue(s,e){for(let t=0,n=le.length;t<n;t+=1){let i=le[t];if(i.condition(s,e))return new i(s,e)}return new Me(s,e)}const te={AND:"$and",OR:"$or"},ae={PATH:"$path",PATTERN:"$val"},ce=s=>!!(s[te.AND]||s[te.OR]),mt=s=>!!s[ae.PATH],vt=s=>!T(s)&&Ce(s)&&!ce(s),xe=s=>({[te.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function De(s,e,{auto:t=!0}={}){const n=i=>{let r=Object.keys(i);const o=mt(i);if(!o&&r.length>1&&!ce(i))return n(xe(i));if(vt(i)){const l=o?i[ae.PATH]:r[0],d=o?i[ae.PATTERN]:i[l];if(!N(d))throw new Error(ze(l));const a={keyId:re(l),pattern:d};return t&&(a.searcher=ue(d,e)),a}let u={children:[],operator:r[0]};return r.forEach(l=>{const d=i[l];T(d)&&d.forEach(a=>{u.children.push(n(a))})}),u};return ce(s)||(s=xe(s)),n(s)}function xt(s,{ignoreFieldNorm:e=g.ignoreFieldNorm}){s.forEach(t=>{let n=1;t.matches.forEach(({key:i,norm:r,score:o})=>{const u=i?i.weight:null;n*=Math.pow(o===0&&u?Number.EPSILON:o,(u||1)*(e?1:r))}),t.score=n})}function yt(s,e){const t=s.matches;e.matches=[],L(t)&&t.forEach(n=>{if(!L(n.indices)||!n.indices.length)return;const{indices:i,value:r}=n;let o={indices:i,value:r};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function At(s,e){e.score=s.score}function bt(s,e,{includeMatches:t=g.includeMatches,includeScore:n=g.includeScore}={}){const i=[];return t&&i.push(yt),n&&i.push(At),s.map(r=>{const{idx:o}=r,u={item:e[o],refIndex:o};return i.length&&i.forEach(l=>{l(r,u)}),u})}class W{constructor(e,t={},n){this.options={...g,...t},this.options.useExtendedSearch,this._keyStore=new Ge(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof de))throw new Error(Pe);this._myIndex=t||we(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){L(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,i-=1,t.push(r))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:u}=this.options;let l=N(e)?N(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return xt(l,{ignoreFieldNorm:u}),r&&l.sort(o),be(t)&&t>-1&&(l=l.slice(0,t)),bt(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=ue(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:r,i:o,n:u})=>{if(!L(r))return;const{isMatch:l,score:d,indices:a}=t.searchIn(r);l&&i.push({item:r,idx:o,matches:[{score:d,value:r,norm:u,indices:a}]})}),i}_searchLogical(e){const t=De(e,this.options),n=(u,l,d)=>{if(!u.children){const{keyId:h,searcher:p}=u,A=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:p});return A&&A.length?[{idx:d,item:l,matches:A}]:[]}const a=[];for(let h=0,p=u.children.length;h<p;h+=1){const A=u.children[h],w=n(A,l,d);if(w.length)a.push(...w);else if(u.operator===te.AND)return[]}return a},i=this._myIndex.records,r={},o=[];return i.forEach(({$:u,i:l})=>{if(L(u)){let d=n(t,u,l);d.length&&(r[l]||(r[l]={idx:l,item:u,matches:[]},o.push(r[l])),d.forEach(({matches:a})=>{r[l].matches.push(...a)}))}}),o}_searchObjectList(e){const t=ue(e,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach(({$:o,i:u})=>{if(!L(o))return;let l=[];n.forEach((d,a)=>{l.push(...this._findMatches({key:d,value:o[a],searcher:t}))}),l.length&&r.push({idx:u,item:o,matches:l})}),r}_findMatches({key:e,value:t,searcher:n}){if(!L(t))return[];let i=[];if(T(t))t.forEach(({v:r,i:o,n:u})=>{if(!L(r))return;const{isMatch:l,score:d,indices:a}=n.searchIn(r);l&&i.push({score:d,key:e,value:r,idx:o,norm:u,indices:a})});else{const{v:r,n:o}=t,{isMatch:u,score:l,indices:d}=n.searchIn(r);u&&i.push({score:l,key:e,value:r,norm:o,indices:d})}return i}}W.version="7.1.0";W.createIndex=we;W.parseIndex=et;W.config=g;W.parseQuery=De;pt(gt);const Ct={class:"relative"},_t=["for"],Et={class:"relative rounded-lg bg-primary-1 border border-primary-2 focus-within:ring-2 focus-within:ring-accent focus-within:border-accent transition-colors"},wt={key:0,class:"flex flex-wrap gap-1 p-2 border-b border-primary-2"},Mt=["onClick"],Bt={class:"relative"},Ft=["id","placeholder","disabled"],Dt={key:1,class:"absolute z-50 w-full mt-1 bg-primary-1 border border-primary-2 rounded-lg shadow-lg max-h-60 overflow-y-auto"},kt=["onClick","onMouseenter"],St={key:0,class:"i-mdi-check text-accent"},$t={class:"text-primary-4"},It={key:1,class:"px-3 py-2 text-primary-3 text-center"},Lt={key:2,class:"mt-1 text-xs text-primary-3"},Rt=se({__name:"AppInputMultiSelect",props:{id:{default:()=>`multiselect-${Math.random().toString(36).substr(2,9)}`},label:{default:""},placeholder:{default:"Search and select options..."},helpText:{default:""},options:{},modelValue:{},disabled:{type:Boolean,default:!1},maxSelections:{default:void 0}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=D(""),r=D(!1),o=D(-1),u=D(),l=P({get:()=>t.modelValue,set:y=>n("update:modelValue",y)}),d=P(()=>new W(t.options,{threshold:.3,includeScore:!0,minMatchCharLength:1})),a=P(()=>i.value.trim()?d.value.search(i.value).map(v=>v.item).slice(0,50):t.options.slice(0,50)),h=y=>{const v=[...l.value],x=v.indexOf(y);x>-1?v.splice(x,1):(!t.maxSelections||v.length<t.maxSelections)&&v.push(y),l.value=v,o.value=-1},p=y=>{const v=[...l.value],x=v.indexOf(y);x>-1&&(v.splice(x,1),l.value=v)},A=y=>{y&&!l.value.includes(y)&&(!t.maxSelections||l.value.length<t.maxSelections)&&(l.value=[...l.value,y]),r.value=!1,o.value=-1},w=()=>{t.disabled||(r.value=!r.value,r.value&&fe(()=>{u.value?.focus()}))},M=y=>{if(t.disabled)return;const v=i.value.trim()&&!t.options.includes(i.value.trim())&&!l.value.includes(i.value.trim()),x=a.value.length+(v?1:0);switch(y.key){case"ArrowDown":y.preventDefault(),r.value=!0,o.value<x-1?o.value++:o.value=0;break;case"ArrowUp":y.preventDefault(),r.value=!0,o.value>0?o.value--:o.value=x-1;break;case"Enter":y.preventDefault(),r.value&&o.value>=0&&x>0?o.value<a.value.length?h(a.value[o.value]):v&&A(i.value.trim()):(r.value=!0,x>0&&(o.value=0));break;case"Escape":r.value=!1,o.value=-1,u.value?.blur();break;case"Backspace":if(!i.value&&l.value.length>0){y.preventDefault();const k=l.value[l.value.length-1];k&&p(k)}break}};return X(i,()=>{o.value=-1}),X(r,y=>{y&&fe(()=>{u.value?.focus()})}),(y,v)=>(b(),C("div",Ct,[s.label?(b(),C("label",{key:0,for:s.id,class:"block text-sm font-medium mb-2"},$(s.label),9,_t)):S("",!0),f("div",Et,[m(l).length>0?(b(),C("div",wt,[(b(!0),C(Z,null,q(m(l),x=>(b(),C("span",{key:x,class:"inline-flex items-center gap-1 px-2 py-1 bg-primary-2 text-primary-4 text-xs rounded"},[O($(x)+" ",1),f("button",{type:"button",class:"hover:text-accent transition-colors",onClick:k=>p(x)},[...v[5]||(v[5]=[f("div",{class:"i-mdi-close text-xs"},null,-1)])],8,Mt)]))),128))])):S("",!0),f("div",Bt,[ye(f("input",{id:s.id,ref_key:"inputRef",ref:u,"onUpdate:modelValue":v[0]||(v[0]=x=>Y(i)?i.value=x:null),type:"text",placeholder:s.placeholder,disabled:s.disabled,class:"w-full px-3 py-2 bg-transparent text-primary-4 placeholder-primary-3 focus:outline-none",autocomplete:"off",onFocus:v[1]||(v[1]=x=>r.value=!0),onKeydown:M},null,40,Ft),[[$e,m(i)]]),f("button",{type:"button",class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-primary-3 hover:text-accent transition-colors",onClick:w},[f("div",{class:H(["transition-transform duration-200",m(r)?"i-mdi-chevron-up":"i-mdi-chevron-down"])},null,2)])])]),m(r)&&(m(a).length>0||m(i).trim())?(b(),C("div",Dt,[(b(!0),C(Z,null,q(m(a),(x,k)=>(b(),C("button",{key:x,type:"button",class:H(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center justify-between",m(o)===k?"bg-bg-gradient":"",m(l).includes(x)?"text-accent":"text-primary-4"]),onClick:I=>h(x),onMouseenter:I=>o.value=k},[f("span",null,$(x),1),m(l).includes(x)?(b(),C("div",St)):S("",!0)],42,kt))),128)),m(i).trim()&&!s.options.includes(m(i).trim())&&!m(l).includes(m(i).trim())?(b(),C("button",{key:0,type:"button",class:H(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center gap-2 border-t border-primary-2",m(o)===m(a).length?"bg-bg-gradient":""]),onClick:v[2]||(v[2]=x=>A(m(i).trim())),onMouseenter:v[3]||(v[3]=x=>o.value=m(a).length)},[v[6]||(v[6]=f("div",{class:"i-mdi-plus text-accent"},null,-1)),f("span",$t,'Add "'+$(m(i).trim())+'"',1)],34)):S("",!0),m(a).length===0&&!m(i).trim()?(b(),C("div",It," No options available ")):S("",!0)])):S("",!0),s.helpText?(b(),C("p",Lt,$(s.helpText),1)):S("",!0),m(r)?(b(),C("div",{key:3,class:"fixed inset-0 z-40",onClick:v[4]||(v[4]=x=>r.value=!1)})):S("",!0)]))}}),Vt=Object.assign(Rt,{__name:"AppInputMultiSelect"}),Ot={class:"flex flex-col gap-12 px-6"},Nt={class:"flex justify-center items-center gap-6 w-3xl mx-auto"},Tt={class:"grow overflow-hidden"},jt={class:"flex gap-3 items-center"},Pt={key:0,class:"rounded-lg p-4 space-y-4"},zt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Kt={class:"flex gap-2"},Ut={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Wt={class:"flex justify-between items-center"},Gt={class:"text-sm text-primary-3"},Yt=se({__name:"VideoSearch",props:{videos:{default:()=>[]}},emits:["filtered-videos"],setup(s,{emit:e}){const t=s,n=e,i=D(!1);Ae(()=>{i.value=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"});const r=D(""),o=D(!1),u=D([]),l=D([]),d=D(""),a=D("relevance"),h=P(()=>t.videos.length),p=P(()=>[...new Set(t.videos.filter(c=>c.artist).map(c=>c.artist))].sort()),A=P(()=>{const _=new Set;return t.videos.forEach(c=>{c.tags&&c.tags.forEach(E=>_.add(E))}),Array.from(_).sort()}),w={keys:[{name:"title",weight:.3},{name:"musicTitle",weight:.4},{name:"artist",weight:.4},{name:"tags",weight:.2},{name:"description",weight:.1}],threshold:.3,includeScore:!0,minMatchCharLength:2},M=P(()=>new W(t.videos,w)),y=_=>{if(!_)return 0;const c=_.split(":").map(Number);return c.length===2&&c[0]!==void 0&&c[1]!==void 0?c[0]*60+c[1]:c.length===3&&c[0]!==void 0&&c[1]!==void 0&&c[2]!==void 0?c[0]*3600+c[1]*60+c[2]:0},v=_=>{if(!d.value)return!0;const E=y(_.duration)/60;switch(d.value){case"short":return E<4;case"medium":return E>=4&&E<=20;case"long":return E>20;default:return!0}},x=P(()=>{let _=[];return r.value.trim()?_=M.value.search(r.value).map(E=>E.item):_=[...t.videos],u.value.length>0&&(_=_.filter(c=>c.artist&&u.value.includes(c.artist))),l.value.length>0&&(_=_.filter(c=>c.tags&&l.value.some(E=>c.tags.includes(E)))),_=_.filter(v),(a.value!=="relevance"||!r.value.trim())&&_.sort((c,E)=>{switch(a.value){case"title":const B=c.musicTitle||c.title,K=E.musicTitle||E.title;return B.localeCompare(K);case"artist":const F=c.artist||"Unknown",j=E.artist||"Unknown";return F.localeCompare(j);case"duration":return y(c.duration)-y(E.duration);default:return 0}}),_}),k=()=>{o.value=!o.value},I=_=>{d.value===_?d.value="":d.value=_},ne=()=>{r.value="",u.value=[],l.value=[],d.value="",a.value="relevance"};return X(x,_=>{n("filtered-videos",_)},{immediate:!0}),(_,c)=>{const E=ke,B=Se,K=Vt;return b(),C("div",Ot,[f("div",Nt,[f("div",Tt,[V(E,{id:"search",modelValue:m(r),"onUpdate:modelValue":c[0]||(c[0]=F=>Y(r)?r.value=F:null),placeholder:"Search by title, artist, or tags...",size:"large"},null,8,["modelValue"])]),f("div",jt,[V(B,{icon:"i-mdi-filter-variant",variant:"ghost",size:"medium",onClick:k},{default:G(()=>[...c[7]||(c[7]=[O(" Filters ",-1)])]),_:1}),m(i)?(b(),Ie(B,{key:0,to:"/admin",icon:"i-mdi-cog",variant:"ghost",size:"medium",class:"ml-2"},{default:G(()=>[...c[8]||(c[8]=[O(" Admin ",-1)])]),_:1})):S("",!0)])]),m(o)?(b(),C("div",Pt,[f("div",zt,[f("div",null,[V(K,{id:"artist-filter",modelValue:m(u),"onUpdate:modelValue":c[1]||(c[1]=F=>Y(u)?u.value=F:null),label:"Artists",placeholder:"Search and select artists...",options:m(p),"help-text":"Select multiple artists to filter by"},null,8,["modelValue","options"])]),f("div",null,[V(K,{id:"tag-filter",modelValue:m(l),"onUpdate:modelValue":c[2]||(c[2]=F=>Y(l)?l.value=F:null),label:"Tags",placeholder:"Search and select tags...",options:m(A),"help-text":"Select multiple tags to filter by"},null,8,["modelValue","options"])]),f("div",null,[c[12]||(c[12]=f("label",{class:"block text-sm font-medium mb-2"},"Duration",-1)),f("div",Kt,[V(B,{size:"small",variant:m(d)==="short"?"primary":"ghost",onClick:c[3]||(c[3]=F=>I("short"))},{default:G(()=>[...c[9]||(c[9]=[O(" Short (< 4 min) ",-1)])]),_:1},8,["variant"]),V(B,{size:"small",variant:m(d)==="medium"?"primary":"ghost",onClick:c[4]||(c[4]=F=>I("medium"))},{default:G(()=>[...c[10]||(c[10]=[O(" Medium (4-20 min) ",-1)])]),_:1},8,["variant"]),V(B,{size:"small",variant:m(d)==="long"?"primary":"ghost",onClick:c[5]||(c[5]=F=>I("long"))},{default:G(()=>[...c[11]||(c[11]=[O(" Long (> 20 min) ",-1)])]),_:1},8,["variant"])])])]),f("div",Ut,[f("div",null,[c[14]||(c[14]=f("label",{class:"block text-sm font-medium mb-2"},"Sort By",-1)),ye(f("select",{"onUpdate:modelValue":c[6]||(c[6]=F=>Y(a)?a.value=F:null),class:"w-full rounded-lg bg-primary-1 text-accent border border-primary-2 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"},[...c[13]||(c[13]=[f("option",{value:"relevance"},"Relevance",-1),f("option",{value:"title"},"Title A-Z",-1),f("option",{value:"artist"},"Artist A-Z",-1),f("option",{value:"duration"},"Duration",-1)])],512),[[Le,m(a)]])])]),f("div",Wt,[f("span",Gt,$(m(x).length)+" of "+$(m(h))+" videos ",1),V(B,{variant:"ghost",size:"small",onClick:ne},{default:G(()=>[...c[15]||(c[15]=[O(" Clear All ",-1)])]),_:1})])])):S("",!0)])}}}),Ht=Object.assign(Yt,{__name:"VideoSearch"}),Qt={class:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] sm:grid-cols-[repeat(auto-fill,minmax(240px,1fr))] md:grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 sm:gap-6 px-6"},Jt=["onClick"],Xt={class:"rounded-2xl overflow-hidden w-full aspect-video relative"},Zt={key:0,class:"absolute top-2 right-2 bg-accent text-black px-2 py-1 rounded text-xs font-medium flex items-center gap-1"},qt=["src","alt"],es={key:2,class:"w-full h-full flex items-center justify-center bg-gray-700"},ts={class:"flex flex-col gap-1"},ss={key:0,class:"text-gray-5 text-sm font-medium"},ns={class:"leading-5 text-primary-3 line-clamp-2"},is={key:1,class:"text-xs"},rs={class:"flex items-center justify-between gap-3 mb-2"},os={class:"text-gray-400 text-xs sm:text-sm"},ls={class:"text-gray-500 text-xs sm:text-sm flex items-center justify-center gap-1"},us={key:0,class:"pt-2"},as={class:"flex flex-wrap gap-1"},cs=se({__name:"VideoGrid",props:{videos:{default:()=>[]},highlightVideoId:{default:""}},emits:["video-click"],setup(s){return(e,t)=>(b(),C("div",Qt,[(b(!0),C(Z,null,q(s.videos,(n,i)=>(b(),C("div",{key:n.id,class:H(["relative group shadow-black hover:shadow-md hover:bg-zinc-900 flex flex-col gap-3 rounded-2xl hover:rounded-b-0 pa-2 transition-shadow duration-200 cursor-pointer",{"outline-accent outline-2 outline-solid outline-bottom-0":s.highlightVideoId===n.id}]),onClick:r=>e.$emit("video-click",n)},[f("div",Xt,[t[2]||(t[2]=f("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[f("div",{class:"i-mdi-play-outline text-accent text-8xl"})],-1)),s.highlightVideoId===n.id?(b(),C("div",Zt,[...t[0]||(t[0]=[f("div",{class:"i-mdi-volume-high w-3 h-3"},null,-1),O(" Playing ",-1)])])):S("",!0),n.thumbnail?(b(),C("img",{key:1,src:n.thumbnail,alt:n.title,class:"w-full h-full object-cover",loading:"lazy"},null,8,qt)):(b(),C("div",es,[...t[1]||(t[1]=[f("div",{class:"i-mdi-video text-gray-500 text-3xl"},null,-1)])]))]),f("div",ts,[n.artist?(b(),C("div",ss,$(n.artist),1)):S("",!0),f("div",ns,$(n.musicTitle||n.title),1),n.tags&&n.tags.length>0?(b(),C("div",is,$(n.tags[0]),1)):S("",!0)]),f("div",{class:H(["hidden group-hover:flex absolute bg-zinc-900 w-full top-full left-0 flex-col z-10 shadow-black shadow-md rounded-b-2xl p-3",{"outline-2 outline-solid outline-accent ":s.highlightVideoId===n.id}])},[f("div",rs,[f("p",os,$(n.channel),1),f("p",ls,[t[3]||(t[3]=f("span",{class:"i-mdi-clock-outline text-xs"},null,-1)),O(" "+$(n.duration),1)])]),n.tags&&n.tags.length>0?(b(),C("div",us,[f("div",as,[(b(!0),C(Z,null,q(n.tags,r=>(b(),C("span",{key:r,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg"},$(r),1))),128))])])):S("",!0)],2)],10,Jt))),128))]))}}),ds=Object.assign(cs,{__name:"VideoGrid"}),hs={key:0,class:"flex items-center justify-center py-12"},fs={key:1,class:"bg-primary-1 border border-primary-2 rounded-lg p-6 m-8"},gs={class:"flex items-center gap-2 text-primary-3"},ps={key:2,class:"text-center py-12"},ms={key:3,class:"flex flex-col gap-12 pt-6 pb-12"},_s=se({__name:"index",setup(s){Re({title:"Music Playlist View",meta:[{name:"description",content:"Browse your cached YouTube playlists"}]});const e=D(null),t=D(!0),n=D(""),i=D([]),r=Ve(),o=D("");Ae(async()=>{await u()});const u=async()=>{try{t.value=!0,n.value="";const a=await $fetch("/index.json");if(!a.success||!a.data.length){e.value=null;return}const h=a.data[0],p=await $fetch(`/playlist/${h?.fileName}`);e.value=p,i.value=p.videos}catch(a){console.error("Error loading first playlist:",a),n.value=a.data?.message||a.message||"Failed to load playlist"}finally{t.value=!1}},l=a=>{i.value=a},d=a=>{if(!e.value)return;const h=e.value.videos.findIndex(p=>p.id===a.id);h!==-1&&(o.value=a.id,r.initializeGlobalPlayer(e.value.videos,h))};return X([r.currentVideo],([a])=>{a?o.value=a.id:o.value=""}),(a,h)=>{const p=Ht,A=ds;return b(),C("div",null,[m(t)?(b(),C("div",hs,[...h[0]||(h[0]=[f("div",{class:"flex items-center gap-3 text-primary-3"},[f("div",{class:"i-mdi-loading animate-spin text-2xl"}),f("span",null,"Loading playlist...")],-1)])])):m(n)?(b(),C("div",fs,[f("div",gs,[h[1]||(h[1]=f("div",{class:"i-mdi-alert-circle"},null,-1)),h[2]||(h[2]=f("strong",null,"Error:",-1)),O(" "+$(m(n)),1)])])):m(e)?(b(),C("div",ms,[V(p,{videos:m(e).videos,onFilteredVideos:l},null,8,["videos"]),V(A,{videos:m(i),"highlight-video-id":m(o),onVideoClick:d},null,8,["videos","highlight-video-id"])])):(b(),C("div",ps,[...h[3]||(h[3]=[f("div",{class:"i-mdi-playlist-remove text-6xl text-primary-3 mb-4"},null,-1),f("h3",{class:"text-xl font-semibold mb-2"},"No Playlists Found",-1),f("p",{class:"text-primary-3 mb-6"}," No cached playlists are available. Use the admin panel to fetch playlists from YouTube. ",-1)])]))])}}});export{_s as default};
