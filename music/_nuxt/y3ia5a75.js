import{_ as lt}from"./BKIuPfGX.js";import{_ as We}from"./FioJ1I_3.js";import{e as ve,g as K,s as Z,x as we,c as B,o as E,f as Y,a as c,t as T,j as x,F as he,r as fe,d as ee,i as Ge,v as ct,k as $e,q as ge,m as de,y as je,z as dt,A as Ne,B as ke,b as J,p as Je,l as ht,w as ae,n as Ze,C as ft,D as mt,u as pt}from"./C16Bt2mp.js";import{u as Qe,a as _e}from"./jMsGQ2lk.js";import"./C2XWZ_hw.js";function te(t){return Array.isArray?Array.isArray(t):et(t)==="[object Array]"}function gt(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function vt(t){return t==null?"":gt(t)}function q(t){return typeof t=="string"}function Xe(t){return typeof t=="number"}function yt(t){return t===!0||t===!1||xt(t)&&et(t)=="[object Boolean]"}function qe(t){return typeof t=="object"}function xt(t){return qe(t)&&t!==null}function Q(t){return t!=null}function De(t){return!t.trim().length}function et(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const bt="Incorrect 'index' type",At=t=>`Invalid value for key ${t}`,wt=t=>`Pattern length exceeds max of ${t}.`,$t=t=>`Missing ${t} property in key`,kt=t=>`Property 'weight' in key '${t}' must be a positive integer`,Re=Object.prototype.hasOwnProperty;class _t{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(o=>{let n=tt(o);this._keys.push(n),this._keyMap[n.id]=n,r+=n.weight}),this._keys.forEach(o=>{o.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function tt(t){let e=null,r=null,o=null,n=1,a=null;if(q(t)||te(t))o=t,e=Ve(t),r=Ce(t);else{if(!Re.call(t,"name"))throw new Error($t("name"));const i=t.name;if(o=i,Re.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(kt(i));e=Ve(i),r=Ce(i),a=t.getFn}return{path:e,id:r,weight:n,src:o,getFn:a}}function Ve(t){return te(t)?t:t.split(".")}function Ce(t){return te(t)?t.join("."):t}function St(t,e){let r=[],o=!1;const n=(a,i,h)=>{if(Q(a))if(!i[h])r.push(a);else{let u=i[h];const d=a[u];if(!Q(d))return;if(h===i.length-1&&(q(d)||Xe(d)||yt(d)))r.push(vt(d));else if(te(d)){o=!0;for(let f=0,g=d.length;f<g;f+=1)n(d[f],i,h+1)}else i.length&&n(d,i,h+1)}};return n(t,q(e)?e.split("."):e,0),o?r:r[0]}const Mt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Dt={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Ct={location:0,threshold:.6,distance:100},Et={useExtendedSearch:!1,getFn:St,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var S={...Dt,...Mt,...Ct,...Et};const Bt=/[^ ]+/g;function Ft(t=1,e=3){const r=new Map,o=Math.pow(10,e);return{get(n){const a=n.match(Bt).length;if(r.has(a))return r.get(a);const i=1/Math.pow(a,.5*t),h=parseFloat(Math.round(i*o)/o);return r.set(a,h),h},clear(){r.clear()}}}class Le{constructor({getFn:e=S.getFn,fieldNormWeight:r=S.fieldNormWeight}={}){this.norm=Ft(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,o)=>{this._keysMap[r.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,q(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();q(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,o=this.size();r<o;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!Q(e)||De(e))return;let o={v:e,i:r,n:this.norm.get(e)};this.records.push(o)}_addObject(e,r){let o={i:r,$:{}};this.keys.forEach((n,a)=>{let i=n.getFn?n.getFn(e):this.getFn(e,n.path);if(Q(i)){if(te(i)){let h=[];const u=[{nestedArrIndex:-1,value:i}];for(;u.length;){const{nestedArrIndex:d,value:f}=u.pop();if(Q(f))if(q(f)&&!De(f)){let g={v:f,i:d,n:this.norm.get(f)};h.push(g)}else te(f)&&f.forEach((g,v)=>{u.push({nestedArrIndex:v,value:g})})}o.$[a]=h}else if(q(i)&&!De(i)){let h={v:i,n:this.norm.get(i)};o.$[a]=h}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function st(t,e,{getFn:r=S.getFn,fieldNormWeight:o=S.fieldNormWeight}={}){const n=new Le({getFn:r,fieldNormWeight:o});return n.setKeys(t.map(tt)),n.setSources(e),n.create(),n}function It(t,{getFn:e=S.getFn,fieldNormWeight:r=S.fieldNormWeight}={}){const{keys:o,records:n}=t,a=new Le({getFn:e,fieldNormWeight:r});return a.setKeys(o),a.setIndexRecords(n),a}function xe(t,{errors:e=0,currentLocation:r=0,expectedLocation:o=0,distance:n=S.distance,ignoreLocation:a=S.ignoreLocation}={}){const i=e/t.length;if(a)return i;const h=Math.abs(o-r);return n?i+h/n:h?1:i}function Tt(t=[],e=S.minMatchCharLength){let r=[],o=-1,n=-1,a=0;for(let i=t.length;a<i;a+=1){let h=t[a];h&&o===-1?o=a:!h&&o!==-1&&(n=a-1,n-o+1>=e&&r.push([o,n]),o=-1)}return t[a-1]&&a-o>=e&&r.push([o,a-1]),r}const ue=32;function Ot(t,e,r,{location:o=S.location,distance:n=S.distance,threshold:a=S.threshold,findAllMatches:i=S.findAllMatches,minMatchCharLength:h=S.minMatchCharLength,includeMatches:u=S.includeMatches,ignoreLocation:d=S.ignoreLocation}={}){if(e.length>ue)throw new Error(wt(ue));const f=e.length,g=t.length,v=Math.max(0,Math.min(o,g));let A=a,y=v;const C=h>1||u,w=C?Array(g):[];let $;for(;($=t.indexOf(e,y))>-1;){let L=xe(e,{currentLocation:$,expectedLocation:v,distance:n,ignoreLocation:d});if(A=Math.min(L,A),y=$+f,C){let P=0;for(;P<f;)w[$+P]=1,P+=1}}y=-1;let k=[],I=1,R=f+g;const V=1<<f-1;for(let L=0;L<f;L+=1){let P=0,H=R;for(;P<H;)xe(e,{errors:L,currentLocation:v+H,expectedLocation:v,distance:n,ignoreLocation:d})<=A?P=H:R=H,H=Math.floor((R-P)/2+P);R=H;let O=Math.max(1,v-H+1),F=i?g:Math.min(v+H,g)+f,G=Array(F+2);G[F+1]=(1<<L)-1;for(let b=F;b>=O;b-=1){let l=b-1,s=r[t.charAt(l)];if(C&&(w[l]=+!!s),G[b]=(G[b+1]<<1|1)&s,L&&(G[b]|=(k[b+1]|k[b])<<1|1|k[b+1]),G[b]&V&&(I=xe(e,{errors:L,currentLocation:l,expectedLocation:v,distance:n,ignoreLocation:d}),I<=A)){if(A=I,y=l,y<=v)break;O=Math.max(1,2*v-y)}}if(xe(e,{errors:L+1,currentLocation:v,expectedLocation:v,distance:n,ignoreLocation:d})>A)break;k=G}const N={isMatch:y>=0,score:Math.max(.001,I)};if(C){const L=Tt(w,h);L.length?u&&(N.indices=L):N.isMatch=!1}return N}function Lt(t){let e={};for(let r=0,o=t.length;r<o;r+=1){const n=t.charAt(r);e[n]=(e[n]||0)|1<<o-r-1}return e}const Se=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class rt{constructor(e,{location:r=S.location,threshold:o=S.threshold,distance:n=S.distance,includeMatches:a=S.includeMatches,findAllMatches:i=S.findAllMatches,minMatchCharLength:h=S.minMatchCharLength,isCaseSensitive:u=S.isCaseSensitive,ignoreDiacritics:d=S.ignoreDiacritics,ignoreLocation:f=S.ignoreLocation}={}){if(this.options={location:r,threshold:o,distance:n,includeMatches:a,findAllMatches:i,minMatchCharLength:h,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:f},e=u?e:e.toLowerCase(),e=d?Se(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const g=(A,y)=>{this.chunks.push({pattern:A,alphabet:Lt(A),startIndex:y})},v=this.pattern.length;if(v>ue){let A=0;const y=v%ue,C=v-y;for(;A<C;)g(this.pattern.substr(A,ue),A),A+=ue;if(y){const w=v-ue;g(this.pattern.substr(w),w)}}else g(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:o,includeMatches:n}=this.options;if(e=r?e:e.toLowerCase(),e=o?Se(e):e,this.pattern===e){let C={isMatch:!0,score:0};return n&&(C.indices=[[0,e.length-1]]),C}const{location:a,distance:i,threshold:h,findAllMatches:u,minMatchCharLength:d,ignoreLocation:f}=this.options;let g=[],v=0,A=!1;this.chunks.forEach(({pattern:C,alphabet:w,startIndex:$})=>{const{isMatch:k,score:I,indices:R}=Ot(e,C,w,{location:a+$,distance:i,threshold:h,findAllMatches:u,minMatchCharLength:d,includeMatches:n,ignoreLocation:f});k&&(A=!0),v+=I,k&&R&&(g=[...g,...R])});let y={isMatch:A,score:A?v/this.chunks.length:1};return A&&n&&(y.indices=g),y}}class re{constructor(e){this.pattern=e}static isMultiMatch(e){return Pe(e,this.multiRegex)}static isSingleMatch(e){return Pe(e,this.singleRegex)}search(){}}function Pe(t,e){const r=t.match(e);return r?r[1]:null}class jt extends re{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Nt extends re{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const o=e.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,e.length-1]}}}class Rt extends re{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Vt extends re{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Pt extends re{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Ut extends re{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class nt extends re{constructor(e,{location:r=S.location,threshold:o=S.threshold,distance:n=S.distance,includeMatches:a=S.includeMatches,findAllMatches:i=S.findAllMatches,minMatchCharLength:h=S.minMatchCharLength,isCaseSensitive:u=S.isCaseSensitive,ignoreDiacritics:d=S.ignoreDiacritics,ignoreLocation:f=S.ignoreLocation}={}){super(e),this._bitapSearch=new rt(e,{location:r,threshold:o,distance:n,includeMatches:a,findAllMatches:i,minMatchCharLength:h,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class it extends re{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,o;const n=[],a=this.pattern.length;for(;(o=e.indexOf(this.pattern,r))>-1;)r=o+a,n.push([o,r-1]);const i=!!n.length;return{isMatch:i,score:i?0:1,indices:n}}}const Ee=[jt,it,Rt,Vt,Ut,Pt,Nt,nt],Ue=Ee.length,zt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Kt="|";function Ht(t,e={}){return t.split(Kt).map(r=>{let o=r.trim().split(zt).filter(a=>a&&!!a.trim()),n=[];for(let a=0,i=o.length;a<i;a+=1){const h=o[a];let u=!1,d=-1;for(;!u&&++d<Ue;){const f=Ee[d];let g=f.isMultiMatch(h);g&&(n.push(new f(g,e)),u=!0)}if(!u)for(d=-1;++d<Ue;){const f=Ee[d];let g=f.isSingleMatch(h);if(g){n.push(new f(g,e));break}}}return n})}const Yt=new Set([nt.type,it.type]);class Wt{constructor(e,{isCaseSensitive:r=S.isCaseSensitive,ignoreDiacritics:o=S.ignoreDiacritics,includeMatches:n=S.includeMatches,minMatchCharLength:a=S.minMatchCharLength,ignoreLocation:i=S.ignoreLocation,findAllMatches:h=S.findAllMatches,location:u=S.location,threshold:d=S.threshold,distance:f=S.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:o,includeMatches:n,minMatchCharLength:a,findAllMatches:h,ignoreLocation:i,location:u,threshold:d,distance:f},e=r?e:e.toLowerCase(),e=o?Se(e):e,this.pattern=e,this.query=Ht(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:n,ignoreDiacritics:a}=this.options;e=n?e:e.toLowerCase(),e=a?Se(e):e;let i=0,h=[],u=0;for(let d=0,f=r.length;d<f;d+=1){const g=r[d];h.length=0,i=0;for(let v=0,A=g.length;v<A;v+=1){const y=g[v],{isMatch:C,indices:w,score:$}=y.search(e);if(C){if(i+=1,u+=$,o){const k=y.constructor.type;Yt.has(k)?h=[...h,...w]:h.push(w)}}else{u=0,i=0,h.length=0;break}}if(i){let v={isMatch:!0,score:u/i};return o&&(v.indices=h),v}}return{isMatch:!1,score:1}}}const Be=[];function Gt(...t){Be.push(...t)}function Fe(t,e){for(let r=0,o=Be.length;r<o;r+=1){let n=Be[r];if(n.condition(t,e))return new n(t,e)}return new rt(t,e)}const Me={AND:"$and",OR:"$or"},Ie={PATH:"$path",PATTERN:"$val"},Te=t=>!!(t[Me.AND]||t[Me.OR]),Jt=t=>!!t[Ie.PATH],Zt=t=>!te(t)&&qe(t)&&!Te(t),ze=t=>({[Me.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function ot(t,e,{auto:r=!0}={}){const o=n=>{let a=Object.keys(n);const i=Jt(n);if(!i&&a.length>1&&!Te(n))return o(ze(n));if(Zt(n)){const u=i?n[Ie.PATH]:a[0],d=i?n[Ie.PATTERN]:n[u];if(!q(d))throw new Error(At(u));const f={keyId:Ce(u),pattern:d};return r&&(f.searcher=Fe(d,e)),f}let h={children:[],operator:a[0]};return a.forEach(u=>{const d=n[u];te(d)&&d.forEach(f=>{h.children.push(o(f))})}),h};return Te(t)||(t=ze(t)),o(t)}function Qt(t,{ignoreFieldNorm:e=S.ignoreFieldNorm}){t.forEach(r=>{let o=1;r.matches.forEach(({key:n,norm:a,score:i})=>{const h=n?n.weight:null;o*=Math.pow(i===0&&h?Number.EPSILON:i,(h||1)*(e?1:a))}),r.score=o})}function Xt(t,e){const r=t.matches;e.matches=[],Q(r)&&r.forEach(o=>{if(!Q(o.indices)||!o.indices.length)return;const{indices:n,value:a}=o;let i={indices:n,value:a};o.key&&(i.key=o.key.src),o.idx>-1&&(i.refIndex=o.idx),e.matches.push(i)})}function qt(t,e){e.score=t.score}function es(t,e,{includeMatches:r=S.includeMatches,includeScore:o=S.includeScore}={}){const n=[];return r&&n.push(Xt),o&&n.push(qt),t.map(a=>{const{idx:i}=a,h={item:e[i],refIndex:i};return n.length&&n.forEach(u=>{u(a,h)}),h})}class le{constructor(e,r={},o){this.options={...S,...r},this.options.useExtendedSearch,this._keyStore=new _t(this.options.keys),this.setCollection(e,o)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof Le))throw new Error(bt);this._myIndex=r||st(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Q(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let o=0,n=this._docs.length;o<n;o+=1){const a=this._docs[o];e(a,o)&&(this.removeAt(o),o-=1,n-=1,r.push(a))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:o,includeScore:n,shouldSort:a,sortFn:i,ignoreFieldNorm:h}=this.options;let u=q(e)?q(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Qt(u,{ignoreFieldNorm:h}),a&&u.sort(i),Xe(r)&&r>-1&&(u=u.slice(0,r)),es(u,this._docs,{includeMatches:o,includeScore:n})}_searchStringList(e){const r=Fe(e,this.options),{records:o}=this._myIndex,n=[];return o.forEach(({v:a,i,n:h})=>{if(!Q(a))return;const{isMatch:u,score:d,indices:f}=r.searchIn(a);u&&n.push({item:a,idx:i,matches:[{score:d,value:a,norm:h,indices:f}]})}),n}_searchLogical(e){const r=ot(e,this.options),o=(h,u,d)=>{if(!h.children){const{keyId:g,searcher:v}=h,A=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(u,g),searcher:v});return A&&A.length?[{idx:d,item:u,matches:A}]:[]}const f=[];for(let g=0,v=h.children.length;g<v;g+=1){const A=h.children[g],y=o(A,u,d);if(y.length)f.push(...y);else if(h.operator===Me.AND)return[]}return f},n=this._myIndex.records,a={},i=[];return n.forEach(({$:h,i:u})=>{if(Q(h)){let d=o(r,h,u);d.length&&(a[u]||(a[u]={idx:u,item:h,matches:[]},i.push(a[u])),d.forEach(({matches:f})=>{a[u].matches.push(...f)}))}}),i}_searchObjectList(e){const r=Fe(e,this.options),{keys:o,records:n}=this._myIndex,a=[];return n.forEach(({$:i,i:h})=>{if(!Q(i))return;let u=[];o.forEach((d,f)=>{u.push(...this._findMatches({key:d,value:i[f],searcher:r}))}),u.length&&a.push({idx:h,item:i,matches:u})}),a}_findMatches({key:e,value:r,searcher:o}){if(!Q(r))return[];let n=[];if(te(r))r.forEach(({v:a,i,n:h})=>{if(!Q(a))return;const{isMatch:u,score:d,indices:f}=o.searchIn(a);u&&n.push({score:d,key:e,value:a,idx:i,norm:h,indices:f})});else{const{v:a,n:i}=r,{isMatch:h,score:u,indices:d}=o.searchIn(a);h&&n.push({score:u,key:e,value:a,norm:i,indices:d})}return n}}le.version="7.1.0";le.createIndex=st;le.parseIndex=It;le.config=S;le.parseQuery=ot;Gt(Wt);const ts={class:"relative"},ss=["for"],rs={class:"relative rounded-lg bg-primary-1 focus-within:ring-2 focus-within:ring-accent focus-within:border-accent transition-colors","data-multiselect":""},ns={key:0,class:"flex flex-wrap gap-1 p-2 border-b border-primary-2"},is=["onClick"],os={class:"relative"},as=["id","placeholder","disabled"],us={key:1,class:"absolute z-50 w-full mt-1 bg-primary-1 border border-primary-2 rounded-lg shadow-lg max-h-60 overflow-y-auto"},ls=["onClick","onMouseenter"],cs={key:0,class:"i-mdi-check text-accent"},ds={class:"text-primary-4"},hs={key:1,class:"px-3 py-2 text-primary-3 text-center"},fs=ve({__name:"AppInputMultiSelect",props:{id:{default:()=>`multiselect-${Math.random().toString(36).substr(2,9)}`},label:{default:""},placeholder:{default:"Search and select options..."},options:{},modelValue:{},disabled:{type:Boolean,default:!1},maxSelections:{default:void 0}},emits:["update:modelValue"],setup(t,{emit:e}){const r=t,o=e,n=K(""),a=K(!1),i=K(-1),h=K(),u=Z({get:()=>r.modelValue,set:w=>o("update:modelValue",w)}),d=Z(()=>new le(r.options,{threshold:.3,includeScore:!0,minMatchCharLength:1})),f=Z(()=>n.value.trim()?d.value.search(n.value).map($=>$.item).slice(0,50):r.options.slice(0,50)),g=w=>{const $=[...u.value],k=$.indexOf(w);k>-1?$.splice(k,1):(!r.maxSelections||$.length<r.maxSelections)&&$.push(w),u.value=$,i.value=-1},v=w=>{const $=[...u.value],k=$.indexOf(w);k>-1&&($.splice(k,1),u.value=$)},A=w=>{w&&!u.value.includes(w)&&(!r.maxSelections||u.value.length<r.maxSelections)&&(u.value=[...u.value,w]),a.value=!1,i.value=-1},y=()=>{r.disabled||(a.value=!a.value,a.value&&je(()=>{h.value?.focus()}))},C=w=>{if(r.disabled)return;const $=n.value.trim()&&!r.options.includes(n.value.trim())&&!u.value.includes(n.value.trim()),k=f.value.length+($?1:0);switch(w.key){case"ArrowDown":w.preventDefault(),a.value=!0,i.value<k-1?i.value++:i.value=0;break;case"ArrowUp":w.preventDefault(),a.value=!0,i.value>0?i.value--:i.value=k-1;break;case"Enter":w.preventDefault(),a.value&&i.value>=0&&k>0?i.value<f.value.length?g(f.value[i.value]):$&&A(n.value.trim()):(a.value=!0,k>0&&(i.value=0));break;case"Escape":w.preventDefault(),a.value=!1,i.value=-1,h.value?.blur();break;case"Backspace":if(!n.value&&u.value.length>0){w.preventDefault();const I=u.value[u.value.length-1];I&&v(I)}break}};return we(n,()=>{i.value=-1}),we(a,w=>{w&&je(()=>{h.value?.focus()})}),(w,$)=>(E(),B("div",ts,[t.label?(E(),B("label",{key:0,for:t.id,class:"block text-sm font-medium mb-2"},T(t.label),9,ss)):Y("",!0),c("div",rs,[x(u).length>0?(E(),B("div",ns,[(E(!0),B(he,null,fe(x(u),k=>(E(),B("span",{key:k,class:"inline-flex items-center gap-1 px-2 py-1 bg-primary-2 text-primary-4 text-xs rounded"},[ee(T(k)+" ",1),c("button",{type:"button",class:"hover:text-accent transition-colors",onClick:I=>v(k)},[...$[5]||($[5]=[c("div",{class:"i-mdi-close text-xs"},null,-1)])],8,is)]))),128))])):Y("",!0),c("div",os,[Ge(c("input",{id:t.id,ref_key:"inputRef",ref:h,"onUpdate:modelValue":$[0]||($[0]=k=>ge(n)?n.value=k:null),type:"text",placeholder:t.placeholder,disabled:t.disabled,class:"w-full px-3 py-2 bg-transparent text-primary-4 placeholder-primary-3 focus:outline-none",autocomplete:"off",onFocus:$[1]||($[1]=k=>a.value=!0),onKeydown:$e(C,["stop"])},null,40,as),[[ct,x(n)]]),c("button",{type:"button",class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-primary-3 hover:text-accent transition-colors",onClick:y},[c("div",{class:de(["transition-transform duration-200",x(a)?"i-mdi-chevron-up":"i-mdi-chevron-down"])},null,2)])])]),x(a)&&(x(f).length>0||x(n).trim())?(E(),B("div",us,[(E(!0),B(he,null,fe(x(f),(k,I)=>(E(),B("button",{key:k,type:"button",class:de(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center justify-between",x(i)===I?"bg-bg-gradient":"",x(u).includes(k)?"text-accent":"text-primary-4"]),onClick:R=>g(k),onMouseenter:R=>i.value=I},[c("span",null,T(k),1),x(u).includes(k)?(E(),B("div",cs)):Y("",!0)],42,ls))),128)),x(n).trim()&&!t.options.includes(x(n).trim())&&!x(u).includes(x(n).trim())?(E(),B("button",{key:0,type:"button",class:de(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center gap-2 border-t border-primary-2",x(i)===x(f).length?"bg-bg-gradient":""]),onClick:$[2]||($[2]=k=>A(x(n).trim())),onMouseenter:$[3]||($[3]=k=>i.value=x(f).length)},[$[6]||($[6]=c("div",{class:"i-mdi-plus text-accent"},null,-1)),c("span",ds,'Add "'+T(x(n).trim())+'"',1)],34)):Y("",!0),x(f).length===0&&!x(n).trim()?(E(),B("div",hs," No options available ")):Y("",!0)])):Y("",!0),x(a)?(E(),B("div",{key:2,class:"fixed inset-0 z-40",onClick:$[4]||($[4]=k=>a.value=!1)})):Y("",!0)]))}}),ms=Object.assign(fs,{__name:"AppInputMultiSelect"}),ps={simple:{playPause:" ",nextTrack:"ArrowRight",previousTrack:"ArrowLeft",volumeUp:"ArrowUp",volumeDown:"ArrowDown",mute:"m",seekForward:"l",seekBackward:"j"},winamp:{playPause:"x",nextTrack:"b",previousTrack:"z",volumeUp:"ArrowUp",volumeDown:"ArrowDown",mute:"m",seekForward:"v",seekBackward:"c"},youtube:{playPause:"k",nextTrack:"n",previousTrack:"p",volumeUp:"ArrowUp",volumeDown:"ArrowDown",mute:"m",seekForward:"l",seekBackward:"j"}},Oe=dt("userSettingsStore",()=>{const t=K({keyboardShortcutScheme:"winamp"}),e=K(!0),r=Z(()=>t.value.customShortcuts?t.value.customShortcuts:ps[t.value.keyboardShortcutScheme]),o=Z(()=>[{value:"simple",label:"Simple (Space, Arrow Keys)"},{value:"winamp",label:"Winamp Style (X, Z, B, C, V)"},{value:"youtube",label:"YouTube Style (K, J, L, N, P)"}]),n=y=>{t.value.keyboardShortcutScheme=y,t.value.customShortcuts=void 0,u()},a=()=>{t.value={keyboardShortcutScheme:"simple"},u()},i=()=>{e.value=!0},h=()=>{e.value=!1},u=()=>{localStorage.setItem("userSettings",JSON.stringify(t.value))},d=()=>{try{const y=localStorage.getItem("userSettings");if(y){const C=JSON.parse(y);t.value={keyboardShortcutScheme:C.keyboardShortcutScheme||"simple",customShortcuts:C.customShortcuts}}}catch(y){console.warn("Failed to load user settings:",y),a()}},f=y=>{if(!e.value)return;const C=Qe();g(y,C)},g=(y,C)=>{const w=y.target;if(w instanceof HTMLInputElement||w instanceof HTMLTextAreaElement||w instanceof HTMLSelectElement||w?.contentEditable==="true"||w?.closest("input, textarea, select, [contenteditable]")||w?.closest("[class*='input'], [class*='select'], [class*='dropdown']")||w?.closest("[role='textbox'], [role='combobox'], [role='searchbox']")||w?.closest("[data-input], [data-multiselect]"))return!1;const $=r.value,k=y.key.toLowerCase();let I=!1;return k===$.playPause||t.value.keyboardShortcutScheme==="youtube"&&k===" "?(y.preventDefault(),C.setIsPlaying(!C.isPlaying.value),I=!0):k===$.nextTrack?(y.preventDefault(),C.nextVideo(),I=!0):k===$.previousTrack?(y.preventDefault(),C.previousVideo(),I=!0):(k===$.mute||k===$.volumeUp||k===$.volumeDown||k===$.seekForward||k===$.seekBackward)&&(y.preventDefault(),I=!0),I},v=()=>{document.addEventListener("keydown",f)},A=()=>{document.removeEventListener("keydown",f)};return d(),v(),{settings:Ne(t),shortcutsEnabled:Ne(e),currentKeyboardShortcuts:r,availableShortcutSchemes:o,setKeyboardShortcutScheme:n,resetToDefaults:a,loadSettings:d,saveSettings:u,handleKeyboardEvent:g,enableShortcuts:i,disableShortcuts:h,setupGlobalListeners:v,cleanupGlobalListeners:A}}),gs={class:"flex justify-between items-center mb-4"},vs={class:"space-y-3"},ys={class:"flex justify-between items-center"},xs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},bs={class:"flex justify-between items-center"},As={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},ws={class:"flex justify-between items-center"},$s={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},ks={class:"flex justify-between items-center"},_s={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Ss={class:"flex justify-between items-center"},Ms={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Ds={class:"flex justify-between items-center"},Cs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Es={class:"flex justify-between items-center"},Bs={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Fs={class:"flex justify-between items-center"},Is={class:"px-2 py-1 bg-primary-2 rounded text-sm text-primary-4"},Ts={class:"mt-6 pt-4 border-t border-primary-2"},Os={class:"text-sm text-primary-3"},Ls={class:"text-primary-4 font-medium"},js=ve({__name:"KeyboardShortcutsHelp",props:{showHelp:{type:Boolean,default:!1}},emits:["close"],setup(t){const{currentKeyboardShortcuts:e,settings:r}=ke(Oe()),o=Z(()=>({playPause:n(e.value.playPause),nextTrack:n(e.value.nextTrack),previousTrack:n(e.value.previousTrack),volumeUp:n(e.value.volumeUp),volumeDown:n(e.value.volumeDown),mute:n(e.value.mute),seekForward:n(e.value.seekForward),seekBackward:n(e.value.seekBackward)})),n=a=>({" ":"Space",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓",x:"X",z:"Z",b:"B",c:"C",v:"V",m:"M",l:"L",j:"J",k:"K",n:"N",p:"P"})[a]||a.toUpperCase();return(a,i)=>{const h=We;return t.showHelp?(E(),B("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:i[2]||(i[2]=u=>a.$emit("close"))},[c("div",{class:"bg-primary-1 rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:i[1]||(i[1]=$e(()=>{},["stop"]))},[c("div",gs,[i[3]||(i[3]=c("h3",{class:"text-lg font-semibold text-primary-4"},"Keyboard Shortcuts",-1)),J(h,{icon:"i-mdi-close",variant:"ghost",size:"small",onClick:i[0]||(i[0]=u=>a.$emit("close"))})]),c("div",vs,[c("div",ys,[i[4]||(i[4]=c("span",{class:"text-primary-3"},"Play/Pause",-1)),c("kbd",xs,T(x(o).playPause),1)]),c("div",bs,[i[5]||(i[5]=c("span",{class:"text-primary-3"},"Next Track",-1)),c("kbd",As,T(x(o).nextTrack),1)]),c("div",ws,[i[6]||(i[6]=c("span",{class:"text-primary-3"},"Previous Track",-1)),c("kbd",$s,T(x(o).previousTrack),1)]),c("div",ks,[i[7]||(i[7]=c("span",{class:"text-primary-3"},"Volume Up",-1)),c("kbd",_s,T(x(o).volumeUp),1)]),c("div",Ss,[i[8]||(i[8]=c("span",{class:"text-primary-3"},"Volume Down",-1)),c("kbd",Ms,T(x(o).volumeDown),1)]),c("div",Ds,[i[9]||(i[9]=c("span",{class:"text-primary-3"},"Mute",-1)),c("kbd",Cs,T(x(o).mute),1)]),c("div",Es,[i[10]||(i[10]=c("span",{class:"text-primary-3"},"Seek Forward",-1)),c("kbd",Bs,T(x(o).seekForward),1)]),c("div",Fs,[i[11]||(i[11]=c("span",{class:"text-primary-3"},"Seek Backward",-1)),c("kbd",Is,T(x(o).seekBackward),1)])]),c("div",Ts,[c("p",Os,[i[12]||(i[12]=ee(" Current scheme: ",-1)),c("span",Ls,T(x(r).keyboardShortcutScheme==="simple"?"Default":x(r).keyboardShortcutScheme==="winamp"?"Winamp Style":"YouTube Style"),1)]),i[13]||(i[13]=c("p",{class:"text-xs text-primary-3 mt-2"}," Change keyboard shortcuts in the Filters panel ",-1))])])])):Y("",!0)}}}),Ns=Object.assign(js,{__name:"KeyboardShortcutsHelp"}),at=t=>{let e=0;for(let a=0;a<t.length;a++)e=t.charCodeAt(a)+((e<<5)-e);const r=Math.abs(e)%360,o=65+Math.abs(e)%20,n=45+Math.abs(e)%15;return`hsl(${r}, ${o}%, ${n}%)`},Rs={class:"flex flex-col gap-8 sm:gap-12 px-4 sm:px-6"},Vs={class:"flex justify-center items-center gap-4 sm:gap-6 w-full max-w-7xl mx-auto"},Ps={class:"flex-1 min-w-0 overflow-hidden"},Us={class:"flex gap-2 sm:gap-3 items-center flex-shrink-0"},zs={key:0,class:"rounded-lg p-4 space-y-4"},Ks={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Hs={class:"flex flex-wrap gap-2"},Ys={class:"grid grid-cols-1 gap-4"},Ws={class:"flex flex-wrap gap-2 max-h-32 overflow-y-auto"},Gs=["onClick"],Js={class:"text-xs text-primary-3 px-2 py-1 rounded-full"},Zs={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Qs={class:"flex justify-between"},Xs=["value"],qs=["value"],er={class:"flex justify-between items-center"},tr={class:"text-sm text-primary-3"},sr=ve({__name:"VideoSearch",setup(t){const{setCurrentPlaylistVideos:e}=_e(),{setKeyboardShortcutScheme:r}=Oe(),{currentVideos:o,originalCurrentPlaylist:n}=ke(_e()),{settings:a,availableShortcutSchemes:i}=ke(Oe()),h=K(!1);Je(()=>{h.value=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"});const u=K(""),d=K(!1),f=K([]),g=K([]),v=K([]),A=K(""),y=K("createdAt"),C=K(!1),w=Z(()=>n.value?.videos||[]),$=Z(()=>w.value.length),k=Z(()=>[...new Set(w.value.filter(s=>s.artist).map(s=>s.artist))].sort()),I=Z(()=>{const l=new Set;return w.value.forEach(s=>{s.tags&&s.tags.forEach(m=>l.add(m))}),Array.from(l).sort()}),R=Z(()=>{const l=new Map;return w.value.forEach(s=>{const m=s.userId||null;l.set(m,(l.get(m)||0)+1)}),Array.from(l.entries()).map(([s,m])=>({userId:s||"Anonymous",originalUserId:s,count:m,color:s?at(s):"#666666"})).sort((s,m)=>m.count-s.count)}),V={keys:[{name:"title",weight:.3},{name:"musicTitle",weight:.4},{name:"artist",weight:.4},{name:"tags",weight:.2},{name:"description",weight:.1}],threshold:.3,includeScore:!0,minMatchCharLength:2},N=Z(()=>new le(w.value,V)),L=l=>{if(!l)return 0;const s=l.split(":").map(Number);return s.length===2&&s[0]!==void 0&&s[1]!==void 0?s[0]*60+s[1]:s.length===3&&s[0]!==void 0&&s[1]!==void 0&&s[2]!==void 0?s[0]*3600+s[1]*60+s[2]:0},P=l=>{if(!A.value)return!0;const m=L(l.duration)/60;switch(A.value){case"short":return m<4;case"medium":return m>=4&&m<=20;case"long":return m>20;default:return!0}},H=l=>{const s=v.value.indexOf(l);s>-1?v.value.splice(s,1):v.value.push(l)},O=Z(()=>{let l=[];return u.value.trim()?l=N.value.search(u.value).map(m=>m.item):l=[...w.value],f.value.length>0&&(l=l.filter(s=>s.artist&&f.value.includes(s.artist))),g.value.length>0&&(l=l.filter(s=>s.tags&&g.value.some(m=>s.tags.includes(m)))),v.value.length>0&&(l=l.filter(s=>{const m=s.userId||"Anonymous";return v.value.includes(m)})),l=l.filter(P),(y.value!=="relevance"||!u.value.trim())&&l.sort((s,m)=>{switch(y.value){case"createdAt":return s.createdAt&&!m.createdAt?-1:!s.createdAt&&m.createdAt?1:s.createdAt&&m.createdAt?m.createdAt-s.createdAt:0;case"title":const p=s.musicTitle||s.title,M=m.musicTitle||m.title;return p.localeCompare(M);case"artist":const D=s.artist||"Unknown",_=m.artist||"Unknown";return D.localeCompare(_);case"duration":return L(s.duration)-L(m.duration);default:return 0}}),l}),F=()=>{d.value=!d.value},G=()=>{C.value=!C.value},ne=l=>{A.value===l?A.value="":A.value=l},b=()=>{u.value="",f.value=[],g.value=[],v.value=[],A.value="",y.value="createdAt"};return we(O,l=>{e(l)},{immediate:!0}),(l,s)=>{const m=lt,p=We,M=ms,D=Ns;return E(),B("div",Rs,[c("div",Vs,[c("div",Ps,[J(m,{id:"search",modelValue:x(u),"onUpdate:modelValue":s[0]||(s[0]=_=>ge(u)?u.value=_:null),placeholder:"Search by title, artist, or tags...",size:"large"},null,8,["modelValue"])]),c("div",Us,[J(p,{icon:"i-mdi-filter-variant",variant:"ghost",size:"medium",onClick:F},{default:ae(()=>[...s[11]||(s[11]=[c("span",{class:"hidden sm:inline"},"Filters",-1)])]),_:1}),x(h)?(E(),ht(p,{key:0,to:"/admin",icon:"i-mdi-cog",variant:"ghost",size:"medium"},{default:ae(()=>[...s[12]||(s[12]=[c("span",{class:"hidden sm:inline"},"Admin",-1)])]),_:1})):Y("",!0)])]),x(d)?(E(),B("div",zs,[c("div",Ks,[c("div",null,[J(M,{id:"artist-filter",modelValue:x(f),"onUpdate:modelValue":s[1]||(s[1]=_=>ge(f)?f.value=_:null),label:"Artists",placeholder:"Search and select artists...",options:x(k)},null,8,["modelValue","options"])]),c("div",null,[J(M,{id:"tag-filter",modelValue:x(g),"onUpdate:modelValue":s[2]||(s[2]=_=>ge(g)?g.value=_:null),label:"Tags",placeholder:"Search and select tags...",options:x(I)},null,8,["modelValue","options"])]),c("div",null,[s[16]||(s[16]=c("label",{class:"block text-sm font-medium mb-2"},"Duration",-1)),c("div",Hs,[J(p,{size:"small",variant:x(A)==="short"?"primary":"ghost",onClick:s[3]||(s[3]=_=>ne("short"))},{default:ae(()=>[...s[13]||(s[13]=[ee(" Short (< 4 min) ",-1)])]),_:1},8,["variant"]),J(p,{size:"small",variant:x(A)==="medium"?"primary":"ghost",onClick:s[4]||(s[4]=_=>ne("medium"))},{default:ae(()=>[...s[14]||(s[14]=[ee(" Medium (4-20 min) ",-1)])]),_:1},8,["variant"]),J(p,{size:"small",variant:x(A)==="long"?"primary":"ghost",onClick:s[5]||(s[5]=_=>ne("long"))},{default:ae(()=>[...s[15]||(s[15]=[ee(" Long (> 20 min) ",-1)])]),_:1},8,["variant"])])])]),c("div",Ys,[c("div",null,[s[18]||(s[18]=c("label",{class:"block text-sm font-medium mb-2"},"Users",-1)),c("div",Ws,[(E(!0),B(he,null,fe(x(R),_=>(E(),B("div",{key:_.userId,class:de(["flex items-center gap-2 cursor-pointer p-2 hover:bg-primary-1 rounded-2xl transition-colors",{"bg-primary-2":x(v).includes(_.userId)}]),onClick:j=>H(_.userId)},[c("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-black text-xs font-bold",style:Ze({backgroundColor:_.color})},[...s[17]||(s[17]=[c("span",{class:"i-mdi-account text-xs"},null,-1)])],4),c("span",Js,T(_.count),1)],10,Gs))),128))])])]),c("div",Zs,[c("div",null,[s[20]||(s[20]=c("label",{class:"block text-sm font-medium mb-2"},"Sort By",-1)),Ge(c("select",{"onUpdate:modelValue":s[6]||(s[6]=_=>ge(y)?y.value=_:null),class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",onKeydown:s[7]||(s[7]=$e(()=>{},["stop"]))},[...s[19]||(s[19]=[mt('<option value="relevance">Relevance</option><option value="createdAt">Date Added (Latest First)</option><option value="title">Title A-Z</option><option value="artist">Artist A-Z</option><option value="duration">Duration</option>',5)])],544),[[ft,x(y)]])]),c("div",null,[c("div",Qs,[s[22]||(s[22]=c("label",{class:"block text-sm font-medium mb-2"},"Keyboard ",-1)),J(p,{icon:"i-mdi-keyboard",variant:"ghost",size:"medium",onClick:G},{default:ae(()=>[...s[21]||(s[21]=[c("span",{class:"hidden sm:inline"},"Shortcuts",-1)])]),_:1})]),c("select",{value:x(a).keyboardShortcutScheme,onChange:s[8]||(s[8]=_=>x(r)(_.target.value)),class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",onKeydown:s[9]||(s[9]=$e(()=>{},["stop"]))},[(E(!0),B(he,null,fe(x(i),_=>(E(),B("option",{key:_.value,value:_.value},T(_.label),9,qs))),128))],40,Xs)])]),c("div",er,[c("span",tr,T(x(O).length)+" of "+T(x($))+" videos ",1),J(p,{variant:"ghost",size:"small",onClick:b},{default:ae(()=>[...s[23]||(s[23]=[ee(" Clear All ",-1)])]),_:1})])])):Y("",!0),J(D,{showHelp:x(C),onClose:s[10]||(s[10]=_=>C.value=!1)},null,8,["showHelp"])])}}}),rr=Object.assign(sr,{__name:"VideoSearch"});function ut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var be={exports:{}},nr=be.exports,Ke;function ir(){return Ke||(Ke=1,(function(t,e){(function(r,o){t.exports=o()})(nr,(function(){var r=1e3,o=6e4,n=36e5,a="millisecond",i="second",h="minute",u="hour",d="day",f="week",g="month",v="quarter",A="year",y="date",C="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(b){var l=["th","st","nd","rd"],s=b%100;return"["+b+(l[(s-20)%10]||l[s]||l[0])+"]"}},I=function(b,l,s){var m=String(b);return!m||m.length>=l?b:""+Array(l+1-m.length).join(s)+b},R={s:I,z:function(b){var l=-b.utcOffset(),s=Math.abs(l),m=Math.floor(s/60),p=s%60;return(l<=0?"+":"-")+I(m,2,"0")+":"+I(p,2,"0")},m:function b(l,s){if(l.date()<s.date())return-b(s,l);var m=12*(s.year()-l.year())+(s.month()-l.month()),p=l.clone().add(m,g),M=s-p<0,D=l.clone().add(m+(M?-1:1),g);return+(-(m+(s-p)/(M?p-D:D-p))||0)},a:function(b){return b<0?Math.ceil(b)||0:Math.floor(b)},p:function(b){return{M:g,y:A,w:f,d,D:y,h:u,m:h,s:i,ms:a,Q:v}[b]||String(b||"").toLowerCase().replace(/s$/,"")},u:function(b){return b===void 0}},V="en",N={};N[V]=k;var L="$isDayjsObject",P=function(b){return b instanceof G||!(!b||!b[L])},H=function b(l,s,m){var p;if(!l)return V;if(typeof l=="string"){var M=l.toLowerCase();N[M]&&(p=M),s&&(N[M]=s,p=M);var D=l.split("-");if(!p&&D.length>1)return b(D[0])}else{var _=l.name;N[_]=l,p=_}return!m&&p&&(V=p),p||!m&&V},O=function(b,l){if(P(b))return b.clone();var s=typeof l=="object"?l:{};return s.date=b,s.args=arguments,new G(s)},F=R;F.l=H,F.i=P,F.w=function(b,l){return O(b,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var G=(function(){function b(s){this.$L=H(s.locale,null,!0),this.parse(s),this.$x=this.$x||s.x||{},this[L]=!0}var l=b.prototype;return l.parse=function(s){this.$d=(function(m){var p=m.date,M=m.utc;if(p===null)return new Date(NaN);if(F.u(p))return new Date;if(p instanceof Date)return new Date(p);if(typeof p=="string"&&!/Z$/i.test(p)){var D=p.match(w);if(D){var _=D[2]-1||0,j=(D[7]||"0").substring(0,3);return M?new Date(Date.UTC(D[1],_,D[3]||1,D[4]||0,D[5]||0,D[6]||0,j)):new Date(D[1],_,D[3]||1,D[4]||0,D[5]||0,D[6]||0,j)}}return new Date(p)})(s),this.init()},l.init=function(){var s=this.$d;this.$y=s.getFullYear(),this.$M=s.getMonth(),this.$D=s.getDate(),this.$W=s.getDay(),this.$H=s.getHours(),this.$m=s.getMinutes(),this.$s=s.getSeconds(),this.$ms=s.getMilliseconds()},l.$utils=function(){return F},l.isValid=function(){return this.$d.toString()!==C},l.isSame=function(s,m){var p=O(s);return this.startOf(m)<=p&&p<=this.endOf(m)},l.isAfter=function(s,m){return O(s)<this.startOf(m)},l.isBefore=function(s,m){return this.endOf(m)<O(s)},l.$g=function(s,m,p){return F.u(s)?this[m]:this.set(p,s)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(s,m){var p=this,M=!!F.u(m)||m,D=F.p(s),_=function(oe,W){var se=F.w(p.$u?Date.UTC(p.$y,W,oe):new Date(p.$y,W,oe),p);return M?se:se.endOf(d)},j=function(oe,W){return F.w(p.toDate()[oe].apply(p.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(W)),p)},U=this.$W,z=this.$M,X=this.$D,ce="set"+(this.$u?"UTC":"");switch(D){case A:return M?_(1,0):_(31,11);case g:return M?_(1,z):_(0,z+1);case f:var ie=this.$locale().weekStart||0,me=(U<ie?U+7:U)-ie;return _(M?X-me:X+(6-me),z);case d:case y:return j(ce+"Hours",0);case u:return j(ce+"Minutes",1);case h:return j(ce+"Seconds",2);case i:return j(ce+"Milliseconds",3);default:return this.clone()}},l.endOf=function(s){return this.startOf(s,!1)},l.$set=function(s,m){var p,M=F.p(s),D="set"+(this.$u?"UTC":""),_=(p={},p[d]=D+"Date",p[y]=D+"Date",p[g]=D+"Month",p[A]=D+"FullYear",p[u]=D+"Hours",p[h]=D+"Minutes",p[i]=D+"Seconds",p[a]=D+"Milliseconds",p)[M],j=M===d?this.$D+(m-this.$W):m;if(M===g||M===A){var U=this.clone().set(y,1);U.$d[_](j),U.init(),this.$d=U.set(y,Math.min(this.$D,U.daysInMonth())).$d}else _&&this.$d[_](j);return this.init(),this},l.set=function(s,m){return this.clone().$set(s,m)},l.get=function(s){return this[F.p(s)]()},l.add=function(s,m){var p,M=this;s=Number(s);var D=F.p(m),_=function(z){var X=O(M);return F.w(X.date(X.date()+Math.round(z*s)),M)};if(D===g)return this.set(g,this.$M+s);if(D===A)return this.set(A,this.$y+s);if(D===d)return _(1);if(D===f)return _(7);var j=(p={},p[h]=o,p[u]=n,p[i]=r,p)[D]||1,U=this.$d.getTime()+s*j;return F.w(U,this)},l.subtract=function(s,m){return this.add(-1*s,m)},l.format=function(s){var m=this,p=this.$locale();if(!this.isValid())return p.invalidDate||C;var M=s||"YYYY-MM-DDTHH:mm:ssZ",D=F.z(this),_=this.$H,j=this.$m,U=this.$M,z=p.weekdays,X=p.months,ce=p.meridiem,ie=function(W,se,pe,ye){return W&&(W[se]||W(m,M))||pe[se].slice(0,ye)},me=function(W){return F.s(_%12||12,W,"0")},oe=ce||function(W,se,pe){var ye=W<12?"AM":"PM";return pe?ye.toLowerCase():ye};return M.replace($,(function(W,se){return se||(function(pe){switch(pe){case"YY":return String(m.$y).slice(-2);case"YYYY":return F.s(m.$y,4,"0");case"M":return U+1;case"MM":return F.s(U+1,2,"0");case"MMM":return ie(p.monthsShort,U,X,3);case"MMMM":return ie(X,U);case"D":return m.$D;case"DD":return F.s(m.$D,2,"0");case"d":return String(m.$W);case"dd":return ie(p.weekdaysMin,m.$W,z,2);case"ddd":return ie(p.weekdaysShort,m.$W,z,3);case"dddd":return z[m.$W];case"H":return String(_);case"HH":return F.s(_,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return oe(_,j,!0);case"A":return oe(_,j,!1);case"m":return String(j);case"mm":return F.s(j,2,"0");case"s":return String(m.$s);case"ss":return F.s(m.$s,2,"0");case"SSS":return F.s(m.$ms,3,"0");case"Z":return D}return null})(W)||D.replace(":","")}))},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(s,m,p){var M,D=this,_=F.p(m),j=O(s),U=(j.utcOffset()-this.utcOffset())*o,z=this-j,X=function(){return F.m(D,j)};switch(_){case A:M=X()/12;break;case g:M=X();break;case v:M=X()/3;break;case f:M=(z-U)/6048e5;break;case d:M=(z-U)/864e5;break;case u:M=z/n;break;case h:M=z/o;break;case i:M=z/r;break;default:M=z}return p?M:F.a(M)},l.daysInMonth=function(){return this.endOf(g).$D},l.$locale=function(){return N[this.$L]},l.locale=function(s,m){if(!s)return this.$L;var p=this.clone(),M=H(s,m,!0);return M&&(p.$L=M),p},l.clone=function(){return F.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},b})(),ne=G.prototype;return O.prototype=ne,[["$ms",a],["$s",i],["$m",h],["$H",u],["$W",d],["$M",g],["$y",A],["$D",y]].forEach((function(b){ne[b[1]]=function(l){return this.$g(l,b[0],b[1])}})),O.extend=function(b,l){return b.$i||(b(l,G,O),b.$i=!0),O},O.locale=H,O.isDayjs=P,O.unix=function(b){return O(1e3*b)},O.en=N[V],O.Ls=N,O.p={},O}))})(be)),be.exports}var or=ir();const He=ut(or);var Ae={exports:{}},ar=Ae.exports,Ye;function ur(){return Ye||(Ye=1,(function(t,e){(function(r,o){t.exports=o()})(ar,(function(){return function(r,o,n){r=r||{};var a=o.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function h(d,f,g,v){return a.fromToBase(d,f,g,v)}n.en.relativeTime=i,a.fromToBase=function(d,f,g,v,A){for(var y,C,w,$=g.$locale().relativeTime||i,k=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],I=k.length,R=0;R<I;R+=1){var V=k[R];V.d&&(y=v?n(d).diff(g,V.d,!0):g.diff(d,V.d,!0));var N=(r.rounding||Math.round)(Math.abs(y));if(w=y>0,N<=V.r||!V.r){N<=1&&R>0&&(V=k[R-1]);var L=$[V.l];A&&(N=A(""+N)),C=typeof L=="string"?L.replace("%d",N):L(N,f,V.l,w);break}}if(f)return C;var P=w?$.future:$.past;return typeof P=="function"?P(C):P.replace("%s",C)},a.to=function(d,f){return h(d,f,this,!0)},a.from=function(d,f){return h(d,f,this)};var u=function(d){return d.$u?n.utc():n()};a.toNow=function(d){return this.to(u(this),d)},a.fromNow=function(d){return this.from(u(this),d)}}}))})(Ae)),Ae.exports}var lr=ur();const cr=ut(lr),dr={class:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] sm:grid-cols-[repeat(auto-fill,minmax(240px,1fr))] md:grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 sm:gap-6 px-6"},hr=["onClick"],fr={key:0,class:"absolute top-2 right-2 bg-accent text-black px-2 py-1 rounded text-xs font-medium flex items-center gap-1"},mr=["src","alt"],pr={key:2,class:"w-full h-full flex items-center justify-center bg-gray-700"},gr={class:"flex flex-col gap-1"},vr={key:0,class:"text-gray-5 text-sm font-medium"},yr={class:"leading-5 text-primary-3 line-clamp-2"},xr={key:1,class:"text-xs"},br={class:"flex items-center justify-between gap-3 mb-2"},Ar={class:"text-gray-400 text-xs sm:text-sm"},wr={class:"text-gray-500 text-xs sm:text-sm flex items-center justify-center gap-1"},$r={class:"flex items-center justify-between gap-3 mb-2"},kr={class:"flex items-center gap-2"},_r={key:0,class:"text-gray-500 text-xs sm:text-sm"},Sr={key:0,class:"pt-2"},Mr={class:"flex flex-wrap gap-1"},Dr=ve({__name:"VideoGrid",props:{videos:{default:()=>[]},highlightVideoId:{default:""}},emits:["play"],setup(t){He.extend(cr);const e=r=>He(r).fromNow();return(r,o)=>(E(),B("div",dr,[(E(!0),B(he,null,fe(t.videos,(n,a)=>(E(),B("div",{key:n.id,class:de(["relative group shadow-black hover:shadow-md hover:bg-zinc-900 flex flex-col gap-3 rounded-2xl hover:rounded-b-0 pa-2 transition-shadow duration-200",{"outline-accent outline-2 outline-solid outline-bottom-0":t.highlightVideoId===n.id}])},[c("div",{class:"rounded-2xl overflow-hidden w-full aspect-video relative cursor-pointer",onClick:i=>r.$emit("play",n)},[o[2]||(o[2]=c("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[c("div",{class:"i-mdi-play-outline text-accent text-8xl"})],-1)),t.highlightVideoId===n.id?(E(),B("div",fr,[...o[0]||(o[0]=[c("div",{class:"i-mdi-volume-high w-3 h-3"},null,-1),ee(" Playing ",-1)])])):Y("",!0),n.thumbnail?(E(),B("img",{key:1,src:n.thumbnail,alt:n.title,class:"w-full h-full object-cover",loading:"lazy"},null,8,mr)):(E(),B("div",pr,[...o[1]||(o[1]=[c("div",{class:"i-mdi-video text-gray-500 text-3xl"},null,-1)])]))],8,hr),c("div",gr,[n.artist?(E(),B("div",vr,T(n.artist),1)):Y("",!0),c("div",yr,T(n.musicTitle||n.title),1),n.tags&&n.tags.length>0?(E(),B("div",xr,T(n.tags[0]),1)):Y("",!0)]),c("div",{class:de(["hidden group-hover:flex absolute bg-zinc-900 w-full top-full left-0 flex-col z-10 shadow-black shadow-md rounded-b-2xl p-3",{"outline-2 outline-solid outline-accent ":t.highlightVideoId===n.id}])},[c("div",br,[c("p",Ar,T(n.channel),1),c("p",wr,[o[3]||(o[3]=c("span",{class:"i-mdi-clock-outline text-xs"},null,-1)),ee(" "+T(n.duration),1)])]),c("div",$r,[c("div",kr,[c("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:Ze({backgroundColor:("getUserColor"in r?r.getUserColor:x(at))(n.userId||" ")})},[...o[4]||(o[4]=[c("span",{class:"i-mdi-account text-xs"},null,-1)])],4)]),n.createdAt?(E(),B("p",_r,T(e(n.createdAt)),1)):Y("",!0)]),n.tags&&n.tags.length>0?(E(),B("div",Sr,[c("div",Mr,[(E(!0),B(he,null,fe(n.tags,i=>(E(),B("span",{key:i,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg"},T(i),1))),128))])])):Y("",!0)],2)],2))),128))]))}}),Cr=Object.assign(Dr,{__name:"VideoGrid"}),Er={key:0,class:"flex items-center justify-center py-12"},Br={key:1,class:"bg-primary-1 border border-primary-2 rounded-lg p-6 m-8"},Fr={class:"flex items-center gap-2 text-primary-3"},Ir={key:2,class:"text-center py-12"},Tr={key:3,class:"flex flex-col gap-12 pt-6 pb-12"},Vr=ve({__name:"index",setup(t){pt({title:"Music Playlist View",meta:[{name:"description",content:"Browse your cached YouTube playlists"}]});const{loadFirstPlaylist:e,findVideoIndex:r}=_e(),{currentPlaylist:o,currentVideos:n,loading:a,error:i,hasCurrentPlaylist:h}=ke(_e()),u=Qe(),d=K("");Je(async()=>{await e()});const f=g=>{if(!o.value)return;const v=r(g.id);v!==-1&&(d.value=g.id,u.initializeGlobalPlayer(v))};return we([u.currentVideo],([g])=>{g?d.value=g.id:d.value=""}),(g,v)=>{const A=rr,y=Cr;return E(),B("div",null,[x(a)?(E(),B("div",Er,[...v[0]||(v[0]=[c("div",{class:"flex items-center gap-3 text-primary-3"},[c("div",{class:"i-mdi-loading animate-spin text-2xl"}),c("span",null,"Loading playlist...")],-1)])])):x(i)?(E(),B("div",Br,[c("div",Fr,[v[1]||(v[1]=c("div",{class:"i-mdi-alert-circle"},null,-1)),v[2]||(v[2]=c("strong",null,"Error:",-1)),ee(" "+T(x(i)),1)])])):x(h)?(E(),B("div",Tr,[J(A),J(y,{videos:x(n),"highlight-video-id":x(d),onPlay:f},null,8,["videos","highlight-video-id"])])):(E(),B("div",Ir,[...v[3]||(v[3]=[c("div",{class:"i-mdi-playlist-remove text-6xl text-primary-3 mb-4"},null,-1),c("h3",{class:"text-xl font-semibold mb-2"},"No Playlists Found",-1),c("p",{class:"text-primary-3 mb-6"}," No cached playlists are available. Use the admin panel to fetch playlists from YouTube. ",-1)])]))])}}});export{Vr as default};
