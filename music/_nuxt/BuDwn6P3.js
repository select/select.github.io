import{_ as st}from"./c9ABe42D.js";import{_ as nt}from"./DcUr7X-d.js";import{e as _e,g as W,s as q,x as $e,c as B,o as F,f as G,a as y,t as H,j as w,F as pe,r as ge,i as ze,v as rt,q as me,l as de,y as Ie,d as ne,m as Ue,b as Z,k as it,w as ce,z as ot,A as ut,n as We,u as at}from"./Dl_Zpsyl.js";import{u as lt}from"./BQpxMvEj.js";import"./D28ed12B.js";function ee(s){return Array.isArray?Array.isArray(s):Ke(s)==="[object Array]"}function ct(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-1/0?"-0":e}function dt(s){return s==null?"":ct(s)}function X(s){return typeof s=="string"}function Ye(s){return typeof s=="number"}function ht(s){return s===!0||s===!1||ft(s)&&Ke(s)=="[object Boolean]"}function He(s){return typeof s=="object"}function ft(s){return He(s)&&s!==null}function J(s){return s!=null}function Ce(s){return!s.trim().length}function Ke(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const mt="Incorrect 'index' type",pt=s=>`Invalid value for key ${s}`,gt=s=>`Pattern length exceeds max of ${s}.`,vt=s=>`Missing ${s} property in key`,yt=s=>`Property 'weight' in key '${s}' must be a positive integer`,Oe=Object.prototype.hasOwnProperty;class xt{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let n=Ge(r);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ge(s){let e=null,t=null,r=null,n=1,i=null;if(X(s)||ee(s))r=s,e=Te(s),t=we(s);else{if(!Oe.call(s,"name"))throw new Error(vt("name"));const o=s.name;if(r=o,Oe.call(s,"weight")&&(n=s.weight,n<=0))throw new Error(yt(o));e=Te(o),t=we(o),i=s.getFn}return{path:e,id:t,weight:n,src:r,getFn:i}}function Te(s){return ee(s)?s:s.split(".")}function we(s){return ee(s)?s.join("."):s}function At(s,e){let t=[],r=!1;const n=(i,o,c)=>{if(J(i))if(!o[c])t.push(i);else{let l=o[c];const d=i[l];if(!J(d))return;if(c===o.length-1&&(X(d)||Ye(d)||ht(d)))t.push(dt(d));else if(ee(d)){r=!0;for(let a=0,h=d.length;a<h;a+=1)n(d[a],o,c+1)}else o.length&&n(d,o,c+1)}};return n(s,X(e)?e.split("."):e,0),r?t:t[0]}const $t={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},bt={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},Mt={location:0,threshold:.6,distance:100},_t={useExtendedSearch:!1,getFn:At,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var M={...bt,...$t,...Mt,..._t};const Ct=/[^ ]+/g;function wt(s=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(n){const i=n.match(Ct).length;if(t.has(i))return t.get(i);const o=1/Math.pow(i,.5*s),c=parseFloat(Math.round(o*r)/r);return t.set(i,c),c},clear(){t.clear()}}}class Be{constructor({getFn:e=M.getFn,fieldNormWeight:t=M.fieldNormWeight}={}){this.norm=wt(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,X(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();X(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!J(e)||Ce(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((n,i)=>{let o=n.getFn?n.getFn(e):this.getFn(e,n.path);if(J(o)){if(ee(o)){let c=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:d,value:a}=l.pop();if(J(a))if(X(a)&&!Ce(a)){let h={v:a,i:d,n:this.norm.get(a)};c.push(h)}else ee(a)&&a.forEach((h,A)=>{l.push({nestedArrIndex:A,value:h})})}r.$[i]=c}else if(X(o)&&!Ce(o)){let c={v:o,n:this.norm.get(o)};r.$[i]=c}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Je(s,e,{getFn:t=M.getFn,fieldNormWeight:r=M.fieldNormWeight}={}){const n=new Be({getFn:t,fieldNormWeight:r});return n.setKeys(s.map(Ge)),n.setSources(e),n.create(),n}function Dt(s,{getFn:e=M.getFn,fieldNormWeight:t=M.fieldNormWeight}={}){const{keys:r,records:n}=s,i=new Be({getFn:e,fieldNormWeight:t});return i.setKeys(r),i.setIndexRecords(n),i}function ye(s,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:n=M.distance,ignoreLocation:i=M.ignoreLocation}={}){const o=e/s.length;if(i)return o;const c=Math.abs(r-t);return n?o+c/n:c?1:o}function Et(s=[],e=M.minMatchCharLength){let t=[],r=-1,n=-1,i=0;for(let o=s.length;i<o;i+=1){let c=s[i];c&&r===-1?r=i:!c&&r!==-1&&(n=i-1,n-r+1>=e&&t.push([r,n]),r=-1)}return s[i-1]&&i-r>=e&&t.push([r,i-1]),t}const ue=32;function kt(s,e,t,{location:r=M.location,distance:n=M.distance,threshold:i=M.threshold,findAllMatches:o=M.findAllMatches,minMatchCharLength:c=M.minMatchCharLength,includeMatches:l=M.includeMatches,ignoreLocation:d=M.ignoreLocation}={}){if(e.length>ue)throw new Error(gt(ue));const a=e.length,h=s.length,A=Math.max(0,Math.min(r,h));let $=i,D=A;const I=c>1||l,S=I?Array(h):[];let _;for(;(_=s.indexOf(e,D))>-1;){let T=ye(e,{currentLocation:_,expectedLocation:A,distance:n,ignoreLocation:d});if($=Math.min(T,$),D=_+a,I){let z=0;for(;z<a;)S[_+z]=1,z+=1}}D=-1;let C=[],L=1,V=a+h;const P=1<<a-1;for(let T=0;T<a;T+=1){let z=0,b=V;for(;z<b;)ye(e,{errors:T,currentLocation:A+b,expectedLocation:A,distance:n,ignoreLocation:d})<=$?z=b:V=b,b=Math.floor((V-z)/2+z);V=b;let u=Math.max(1,A-b+1),v=o?h:Math.min(A+b,h)+a,j=Array(v+2);j[v+1]=(1<<T)-1;for(let f=v;f>=u;f-=1){let p=f-1,m=t[s.charAt(p)];if(I&&(S[p]=+!!m),j[f]=(j[f+1]<<1|1)&m,T&&(j[f]|=(C[f+1]|C[f])<<1|1|C[f+1]),j[f]&P&&(L=ye(e,{errors:T,currentLocation:p,expectedLocation:A,distance:n,ignoreLocation:d}),L<=$)){if($=L,D=p,D<=A)break;u=Math.max(1,2*A-D)}}if(ye(e,{errors:T+1,currentLocation:A,expectedLocation:A,distance:n,ignoreLocation:d})>$)break;C=j}const N={isMatch:D>=0,score:Math.max(.001,L)};if(I){const T=Et(S,c);T.length?l&&(N.indices=T):N.isMatch=!1}return N}function St(s){let e={};for(let t=0,r=s.length;t<r;t+=1){const n=s.charAt(t);e[n]=(e[n]||0)|1<<r-t-1}return e}const be=String.prototype.normalize?(s=>s.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(s=>s);class Qe{constructor(e,{location:t=M.location,threshold:r=M.threshold,distance:n=M.distance,includeMatches:i=M.includeMatches,findAllMatches:o=M.findAllMatches,minMatchCharLength:c=M.minMatchCharLength,isCaseSensitive:l=M.isCaseSensitive,ignoreDiacritics:d=M.ignoreDiacritics,ignoreLocation:a=M.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:n,includeMatches:i,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:l,ignoreDiacritics:d,ignoreLocation:a},e=l?e:e.toLowerCase(),e=d?be(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=($,D)=>{this.chunks.push({pattern:$,alphabet:St($),startIndex:D})},A=this.pattern.length;if(A>ue){let $=0;const D=A%ue,I=A-D;for(;$<I;)h(this.pattern.substr($,ue),$),$+=ue;if(D){const S=A-ue;h(this.pattern.substr(S),S)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:r,includeMatches:n}=this.options;if(e=t?e:e.toLowerCase(),e=r?be(e):e,this.pattern===e){let I={isMatch:!0,score:0};return n&&(I.indices=[[0,e.length-1]]),I}const{location:i,distance:o,threshold:c,findAllMatches:l,minMatchCharLength:d,ignoreLocation:a}=this.options;let h=[],A=0,$=!1;this.chunks.forEach(({pattern:I,alphabet:S,startIndex:_})=>{const{isMatch:C,score:L,indices:V}=kt(e,I,S,{location:i+_,distance:o,threshold:c,findAllMatches:l,minMatchCharLength:d,includeMatches:n,ignoreLocation:a});C&&($=!0),A+=L,C&&V&&(h=[...h,...V])});let D={isMatch:$,score:$?A/this.chunks.length:1};return $&&n&&(D.indices=h),D}}class re{constructor(e){this.pattern=e}static isMultiMatch(e){return Le(e,this.multiRegex)}static isSingleMatch(e){return Le(e,this.singleRegex)}search(){}}function Le(s,e){const t=s.match(e);return t?t[1]:null}class Ft extends re{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Bt extends re{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class It extends re{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Ot extends re{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Tt extends re{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Lt extends re{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Ze extends re{constructor(e,{location:t=M.location,threshold:r=M.threshold,distance:n=M.distance,includeMatches:i=M.includeMatches,findAllMatches:o=M.findAllMatches,minMatchCharLength:c=M.minMatchCharLength,isCaseSensitive:l=M.isCaseSensitive,ignoreDiacritics:d=M.ignoreDiacritics,ignoreLocation:a=M.ignoreLocation}={}){super(e),this._bitapSearch=new Qe(e,{location:t,threshold:r,distance:n,includeMatches:i,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:l,ignoreDiacritics:d,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Xe extends re{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r;const n=[],i=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+i,n.push([r,t-1]);const o=!!n.length;return{isMatch:o,score:o?0:1,indices:n}}}const De=[Ft,Xe,It,Ot,Lt,Tt,Bt,Ze],Re=De.length,Rt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Nt="|";function jt(s,e={}){return s.split(Nt).map(t=>{let r=t.trim().split(Rt).filter(i=>i&&!!i.trim()),n=[];for(let i=0,o=r.length;i<o;i+=1){const c=r[i];let l=!1,d=-1;for(;!l&&++d<Re;){const a=De[d];let h=a.isMultiMatch(c);h&&(n.push(new a(h,e)),l=!0)}if(!l)for(d=-1;++d<Re;){const a=De[d];let h=a.isSingleMatch(c);if(h){n.push(new a(h,e));break}}}return n})}const Vt=new Set([Ze.type,Xe.type]);class Pt{constructor(e,{isCaseSensitive:t=M.isCaseSensitive,ignoreDiacritics:r=M.ignoreDiacritics,includeMatches:n=M.includeMatches,minMatchCharLength:i=M.minMatchCharLength,ignoreLocation:o=M.ignoreLocation,findAllMatches:c=M.findAllMatches,location:l=M.location,threshold:d=M.threshold,distance:a=M.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:r,includeMatches:n,minMatchCharLength:i,findAllMatches:c,ignoreLocation:o,location:l,threshold:d,distance:a},e=t?e:e.toLowerCase(),e=r?be(e):e,this.pattern=e,this.query=jt(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n,ignoreDiacritics:i}=this.options;e=n?e:e.toLowerCase(),e=i?be(e):e;let o=0,c=[],l=0;for(let d=0,a=t.length;d<a;d+=1){const h=t[d];c.length=0,o=0;for(let A=0,$=h.length;A<$;A+=1){const D=h[A],{isMatch:I,indices:S,score:_}=D.search(e);if(I){if(o+=1,l+=_,r){const C=D.constructor.type;Vt.has(C)?c=[...c,...S]:c.push(S)}}else{l=0,o=0,c.length=0;break}}if(o){let A={isMatch:!0,score:l/o};return r&&(A.indices=c),A}}return{isMatch:!1,score:1}}}const Ee=[];function zt(...s){Ee.push(...s)}function ke(s,e){for(let t=0,r=Ee.length;t<r;t+=1){let n=Ee[t];if(n.condition(s,e))return new n(s,e)}return new Qe(s,e)}const Me={AND:"$and",OR:"$or"},Se={PATH:"$path",PATTERN:"$val"},Fe=s=>!!(s[Me.AND]||s[Me.OR]),Ut=s=>!!s[Se.PATH],Wt=s=>!ee(s)&&He(s)&&!Fe(s),Ne=s=>({[Me.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function qe(s,e,{auto:t=!0}={}){const r=n=>{let i=Object.keys(n);const o=Ut(n);if(!o&&i.length>1&&!Fe(n))return r(Ne(n));if(Wt(n)){const l=o?n[Se.PATH]:i[0],d=o?n[Se.PATTERN]:n[l];if(!X(d))throw new Error(pt(l));const a={keyId:we(l),pattern:d};return t&&(a.searcher=ke(d,e)),a}let c={children:[],operator:i[0]};return i.forEach(l=>{const d=n[l];ee(d)&&d.forEach(a=>{c.children.push(r(a))})}),c};return Fe(s)||(s=Ne(s)),r(s)}function Yt(s,{ignoreFieldNorm:e=M.ignoreFieldNorm}){s.forEach(t=>{let r=1;t.matches.forEach(({key:n,norm:i,score:o})=>{const c=n?n.weight:null;r*=Math.pow(o===0&&c?Number.EPSILON:o,(c||1)*(e?1:i))}),t.score=r})}function Ht(s,e){const t=s.matches;e.matches=[],J(t)&&t.forEach(r=>{if(!J(r.indices)||!r.indices.length)return;const{indices:n,value:i}=r;let o={indices:n,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function Kt(s,e){e.score=s.score}function Gt(s,e,{includeMatches:t=M.includeMatches,includeScore:r=M.includeScore}={}){const n=[];return t&&n.push(Ht),r&&n.push(Kt),s.map(i=>{const{idx:o}=i,c={item:e[o],refIndex:o};return n.length&&n.forEach(l=>{l(i,c)}),c})}class ae{constructor(e,t={},r){this.options={...M,...t},this.options.useExtendedSearch,this._keyStore=new xt(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Be))throw new Error(mt);this._myIndex=t||Je(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){J(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let r=0,n=this._docs.length;r<n;r+=1){const i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,n-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:r,includeScore:n,shouldSort:i,sortFn:o,ignoreFieldNorm:c}=this.options;let l=X(e)?X(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Yt(l,{ignoreFieldNorm:c}),i&&l.sort(o),Ye(t)&&t>-1&&(l=l.slice(0,t)),Gt(l,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){const t=ke(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach(({v:i,i:o,n:c})=>{if(!J(i))return;const{isMatch:l,score:d,indices:a}=t.searchIn(i);l&&n.push({item:i,idx:o,matches:[{score:d,value:i,norm:c,indices:a}]})}),n}_searchLogical(e){const t=qe(e,this.options),r=(c,l,d)=>{if(!c.children){const{keyId:h,searcher:A}=c,$=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:A});return $&&$.length?[{idx:d,item:l,matches:$}]:[]}const a=[];for(let h=0,A=c.children.length;h<A;h+=1){const $=c.children[h],D=r($,l,d);if(D.length)a.push(...D);else if(c.operator===Me.AND)return[]}return a},n=this._myIndex.records,i={},o=[];return n.forEach(({$:c,i:l})=>{if(J(c)){let d=r(t,c,l);d.length&&(i[l]||(i[l]={idx:l,item:c,matches:[]},o.push(i[l])),d.forEach(({matches:a})=>{i[l].matches.push(...a)}))}}),o}_searchObjectList(e){const t=ke(e,this.options),{keys:r,records:n}=this._myIndex,i=[];return n.forEach(({$:o,i:c})=>{if(!J(o))return;let l=[];r.forEach((d,a)=>{l.push(...this._findMatches({key:d,value:o[a],searcher:t}))}),l.length&&i.push({idx:c,item:o,matches:l})}),i}_findMatches({key:e,value:t,searcher:r}){if(!J(t))return[];let n=[];if(ee(t))t.forEach(({v:i,i:o,n:c})=>{if(!J(i))return;const{isMatch:l,score:d,indices:a}=r.searchIn(i);l&&n.push({score:d,key:e,value:i,idx:o,norm:c,indices:a})});else{const{v:i,n:o}=t,{isMatch:c,score:l,indices:d}=r.searchIn(i);c&&n.push({score:l,key:e,value:i,norm:o,indices:d})}return n}}ae.version="7.1.0";ae.createIndex=Je;ae.parseIndex=Dt;ae.config=M;ae.parseQuery=qe;zt(Pt);const Jt={class:"relative"},Qt=["for"],Zt={class:"relative rounded-lg bg-primary-1 focus-within:ring-2 focus-within:ring-accent focus-within:border-accent transition-colors"},Xt={key:0,class:"flex flex-wrap gap-1 p-2 border-b border-primary-2"},qt=["onClick"],es={class:"relative"},ts=["id","placeholder","disabled"],ss={key:1,class:"absolute z-50 w-full mt-1 bg-primary-1 border border-primary-2 rounded-lg shadow-lg max-h-60 overflow-y-auto"},ns=["onClick","onMouseenter"],rs={key:0,class:"i-mdi-check text-accent"},is={class:"text-primary-4"},os={key:1,class:"px-3 py-2 text-primary-3 text-center"},us=_e({__name:"AppInputMultiSelect",props:{id:{default:()=>`multiselect-${Math.random().toString(36).substr(2,9)}`},label:{default:""},placeholder:{default:"Search and select options..."},options:{},modelValue:{},disabled:{type:Boolean,default:!1},maxSelections:{default:void 0}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,r=e,n=W(""),i=W(!1),o=W(-1),c=W(),l=q({get:()=>t.modelValue,set:S=>r("update:modelValue",S)}),d=q(()=>new ae(t.options,{threshold:.3,includeScore:!0,minMatchCharLength:1})),a=q(()=>n.value.trim()?d.value.search(n.value).map(_=>_.item).slice(0,50):t.options.slice(0,50)),h=S=>{const _=[...l.value],C=_.indexOf(S);C>-1?_.splice(C,1):(!t.maxSelections||_.length<t.maxSelections)&&_.push(S),l.value=_,o.value=-1},A=S=>{const _=[...l.value],C=_.indexOf(S);C>-1&&(_.splice(C,1),l.value=_)},$=S=>{S&&!l.value.includes(S)&&(!t.maxSelections||l.value.length<t.maxSelections)&&(l.value=[...l.value,S]),i.value=!1,o.value=-1},D=()=>{t.disabled||(i.value=!i.value,i.value&&Ie(()=>{c.value?.focus()}))},I=S=>{if(t.disabled)return;const _=n.value.trim()&&!t.options.includes(n.value.trim())&&!l.value.includes(n.value.trim()),C=a.value.length+(_?1:0);switch(S.key){case"ArrowDown":S.preventDefault(),i.value=!0,o.value<C-1?o.value++:o.value=0;break;case"ArrowUp":S.preventDefault(),i.value=!0,o.value>0?o.value--:o.value=C-1;break;case"Enter":S.preventDefault(),i.value&&o.value>=0&&C>0?o.value<a.value.length?h(a.value[o.value]):_&&$(n.value.trim()):(i.value=!0,C>0&&(o.value=0));break;case"Escape":i.value=!1,o.value=-1,c.value?.blur();break;case"Backspace":if(!n.value&&l.value.length>0){S.preventDefault();const L=l.value[l.value.length-1];L&&A(L)}break}};return $e(n,()=>{o.value=-1}),$e(i,S=>{S&&Ie(()=>{c.value?.focus()})}),(S,_)=>(F(),B("div",Jt,[s.label?(F(),B("label",{key:0,for:s.id,class:"block text-sm font-medium mb-2"},H(s.label),9,Qt)):G("",!0),y("div",Zt,[w(l).length>0?(F(),B("div",Xt,[(F(!0),B(pe,null,ge(w(l),C=>(F(),B("span",{key:C,class:"inline-flex items-center gap-1 px-2 py-1 bg-primary-2 text-primary-4 text-xs rounded"},[ne(H(C)+" ",1),y("button",{type:"button",class:"hover:text-accent transition-colors",onClick:L=>A(C)},[..._[5]||(_[5]=[y("div",{class:"i-mdi-close text-xs"},null,-1)])],8,qt)]))),128))])):G("",!0),y("div",es,[ze(y("input",{id:s.id,ref_key:"inputRef",ref:c,"onUpdate:modelValue":_[0]||(_[0]=C=>me(n)?n.value=C:null),type:"text",placeholder:s.placeholder,disabled:s.disabled,class:"w-full px-3 py-2 bg-transparent text-primary-4 placeholder-primary-3 focus:outline-none",autocomplete:"off",onFocus:_[1]||(_[1]=C=>i.value=!0),onKeydown:I},null,40,ts),[[rt,w(n)]]),y("button",{type:"button",class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-primary-3 hover:text-accent transition-colors",onClick:D},[y("div",{class:de(["transition-transform duration-200",w(i)?"i-mdi-chevron-up":"i-mdi-chevron-down"])},null,2)])])]),w(i)&&(w(a).length>0||w(n).trim())?(F(),B("div",ss,[(F(!0),B(pe,null,ge(w(a),(C,L)=>(F(),B("button",{key:C,type:"button",class:de(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center justify-between",w(o)===L?"bg-bg-gradient":"",w(l).includes(C)?"text-accent":"text-primary-4"]),onClick:V=>h(C),onMouseenter:V=>o.value=L},[y("span",null,H(C),1),w(l).includes(C)?(F(),B("div",rs)):G("",!0)],42,ns))),128)),w(n).trim()&&!s.options.includes(w(n).trim())&&!w(l).includes(w(n).trim())?(F(),B("button",{key:0,type:"button",class:de(["w-full px-3 py-2 text-left hover:bg-bg-gradient transition-colors flex items-center gap-2 border-t border-primary-2",w(o)===w(a).length?"bg-bg-gradient":""]),onClick:_[2]||(_[2]=C=>$(w(n).trim())),onMouseenter:_[3]||(_[3]=C=>o.value=w(a).length)},[_[6]||(_[6]=y("div",{class:"i-mdi-plus text-accent"},null,-1)),y("span",is,'Add "'+H(w(n).trim())+'"',1)],34)):G("",!0),w(a).length===0&&!w(n).trim()?(F(),B("div",os," No options available ")):G("",!0)])):G("",!0),w(i)?(F(),B("div",{key:2,class:"fixed inset-0 z-40",onClick:_[4]||(_[4]=C=>i.value=!1)})):G("",!0)]))}}),as=Object.assign(us,{__name:"AppInputMultiSelect"}),et=s=>{let e=0;for(let i=0;i<s.length;i++)e=s.charCodeAt(i)+((e<<5)-e);const t=Math.abs(e)%360,r=65+Math.abs(e)%20,n=45+Math.abs(e)%15;return`hsl(${t}, ${r}%, ${n}%)`},ls={class:"flex flex-col gap-8 sm:gap-12 px-4 sm:px-6"},cs={class:"flex justify-center items-center gap-4 sm:gap-6 w-full max-w-7xl mx-auto"},ds={class:"flex-1 min-w-0 overflow-hidden"},hs={class:"flex gap-2 sm:gap-3 items-center flex-shrink-0"},fs={key:0,class:"rounded-lg p-4 space-y-4"},ms={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ps={class:"flex flex-wrap gap-2"},gs={class:"grid grid-cols-1 gap-4"},vs={class:"flex flex-wrap gap-2 max-h-32 overflow-y-auto"},ys=["onClick"],xs={class:"text-xs text-primary-3 px-2 py-1 rounded-full"},As={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},$s={class:"flex justify-between items-center"},bs={class:"text-sm text-primary-3"},Ms=_e({__name:"VideoSearch",props:{videos:{default:()=>[]}},emits:["filtered-videos"],setup(s,{emit:e}){const t=s,r=e,n=W(!1);Ue(()=>{n.value=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"});const i=W(""),o=W(!1),c=W([]),l=W([]),d=W([]),a=W(""),h=W("createdAt"),A=q(()=>t.videos.length),$=q(()=>[...new Set(t.videos.filter(u=>u.artist).map(u=>u.artist))].sort()),D=q(()=>{const b=new Set;return t.videos.forEach(u=>{u.tags&&u.tags.forEach(v=>b.add(v))}),Array.from(b).sort()}),I=q(()=>{const b=new Map;return t.videos.forEach(u=>{const v=u.userId||null;b.set(v,(b.get(v)||0)+1)}),Array.from(b.entries()).map(([u,v])=>({userId:u||"Anonymous",originalUserId:u,count:v,color:u?et(u):"#666666"})).sort((u,v)=>v.count-u.count)}),S={keys:[{name:"title",weight:.3},{name:"musicTitle",weight:.4},{name:"artist",weight:.4},{name:"tags",weight:.2},{name:"description",weight:.1}],threshold:.3,includeScore:!0,minMatchCharLength:2},_=q(()=>new ae(t.videos,S)),C=b=>{if(!b)return 0;const u=b.split(":").map(Number);return u.length===2&&u[0]!==void 0&&u[1]!==void 0?u[0]*60+u[1]:u.length===3&&u[0]!==void 0&&u[1]!==void 0&&u[2]!==void 0?u[0]*3600+u[1]*60+u[2]:0},L=b=>{if(!a.value)return!0;const v=C(b.duration)/60;switch(a.value){case"short":return v<4;case"medium":return v>=4&&v<=20;case"long":return v>20;default:return!0}},V=b=>{const u=d.value.indexOf(b);u>-1?d.value.splice(u,1):d.value.push(b)},P=q(()=>{let b=[];return i.value.trim()?b=_.value.search(i.value).map(v=>v.item):b=[...t.videos],c.value.length>0&&(b=b.filter(u=>u.artist&&c.value.includes(u.artist))),l.value.length>0&&(b=b.filter(u=>u.tags&&l.value.some(v=>u.tags.includes(v)))),d.value.length>0&&(b=b.filter(u=>{const v=u.userId||"Anonymous";return d.value.includes(v)})),b=b.filter(L),(h.value!=="relevance"||!i.value.trim())&&b.sort((u,v)=>{switch(h.value){case"createdAt":return u.createdAt&&!v.createdAt?-1:!u.createdAt&&v.createdAt?1:u.createdAt&&v.createdAt?v.createdAt-u.createdAt:0;case"title":const j=u.musicTitle||u.title,te=v.musicTitle||v.title;return j.localeCompare(te);case"artist":const f=u.artist||"Unknown",p=v.artist||"Unknown";return f.localeCompare(p);case"duration":return C(u.duration)-C(v.duration);default:return 0}}),b}),N=()=>{o.value=!o.value},T=b=>{a.value===b?a.value="":a.value=b},z=()=>{i.value="",c.value=[],l.value=[],d.value=[],a.value="",h.value="createdAt"};return $e(P,b=>{r("filtered-videos",b)},{immediate:!0}),(b,u)=>{const v=st,j=nt,te=as;return F(),B("div",ls,[y("div",cs,[y("div",ds,[Z(v,{id:"search",modelValue:w(i),"onUpdate:modelValue":u[0]||(u[0]=f=>me(i)?i.value=f:null),placeholder:"Search by title, artist, or tags...",size:"large"},null,8,["modelValue"])]),y("div",hs,[Z(j,{icon:"i-mdi-filter-variant",variant:"ghost",size:"medium",onClick:N},{default:ce(()=>[...u[7]||(u[7]=[y("span",{class:"hidden sm:inline"},"Filters",-1)])]),_:1}),w(n)?(F(),it(j,{key:0,to:"/admin",icon:"i-mdi-cog",variant:"ghost",size:"medium"},{default:ce(()=>[...u[8]||(u[8]=[y("span",{class:"hidden sm:inline"},"Admin",-1)])]),_:1})):G("",!0)])]),w(o)?(F(),B("div",fs,[y("div",ms,[y("div",null,[Z(te,{id:"artist-filter",modelValue:w(c),"onUpdate:modelValue":u[1]||(u[1]=f=>me(c)?c.value=f:null),label:"Artists",placeholder:"Search and select artists...",options:w($)},null,8,["modelValue","options"])]),y("div",null,[Z(te,{id:"tag-filter",modelValue:w(l),"onUpdate:modelValue":u[2]||(u[2]=f=>me(l)?l.value=f:null),label:"Tags",placeholder:"Search and select tags...",options:w(D)},null,8,["modelValue","options"])]),y("div",null,[u[12]||(u[12]=y("label",{class:"block text-sm font-medium mb-2"},"Duration",-1)),y("div",ps,[Z(j,{size:"small",variant:w(a)==="short"?"primary":"ghost",onClick:u[3]||(u[3]=f=>T("short"))},{default:ce(()=>[...u[9]||(u[9]=[ne(" Short (< 4 min) ",-1)])]),_:1},8,["variant"]),Z(j,{size:"small",variant:w(a)==="medium"?"primary":"ghost",onClick:u[4]||(u[4]=f=>T("medium"))},{default:ce(()=>[...u[10]||(u[10]=[ne(" Medium (4-20 min) ",-1)])]),_:1},8,["variant"]),Z(j,{size:"small",variant:w(a)==="long"?"primary":"ghost",onClick:u[5]||(u[5]=f=>T("long"))},{default:ce(()=>[...u[11]||(u[11]=[ne(" Long (> 20 min) ",-1)])]),_:1},8,["variant"])])])]),y("div",gs,[y("div",null,[u[14]||(u[14]=y("label",{class:"block text-sm font-medium mb-2"},"Users",-1)),y("div",vs,[(F(!0),B(pe,null,ge(w(I),f=>(F(),B("div",{key:f.userId,class:de(["flex items-center gap-2 cursor-pointer p-2 hover:bg-primary-1 rounded-2xl transition-colors",{"bg-primary-2":w(d).includes(f.userId)}]),onClick:p=>V(f.userId)},[y("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-black text-xs font-bold",style:We({backgroundColor:f.color})},[...u[13]||(u[13]=[y("span",{class:"i-mdi-account text-xs"},null,-1)])],4),y("span",xs,H(f.count),1)],10,ys))),128))])])]),y("div",As,[y("div",null,[u[16]||(u[16]=y("label",{class:"block text-sm font-medium mb-2"},"Sort By",-1)),ze(y("select",{"onUpdate:modelValue":u[6]||(u[6]=f=>me(h)?h.value=f:null),class:"w-full rounded-lg bg-primary-1 text-primary-3 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"},[...u[15]||(u[15]=[ut('<option value="relevance">Relevance</option><option value="createdAt">Date Added (Latest First)</option><option value="title">Title A-Z</option><option value="artist">Artist A-Z</option><option value="duration">Duration</option>',5)])],512),[[ot,w(h)]])])]),y("div",$s,[y("span",bs,H(w(P).length)+" of "+H(w(A))+" videos ",1),Z(j,{variant:"ghost",size:"small",onClick:z},{default:ce(()=>[...u[17]||(u[17]=[ne(" Clear All ",-1)])]),_:1})])])):G("",!0)])}}}),_s=Object.assign(Ms,{__name:"VideoSearch"});function tt(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xe={exports:{}},Cs=xe.exports,je;function ws(){return je||(je=1,(function(s,e){(function(t,r){s.exports=r()})(Cs,(function(){var t=1e3,r=6e4,n=36e5,i="millisecond",o="second",c="minute",l="hour",d="day",a="week",h="month",A="quarter",$="year",D="date",I="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var p=["th","st","nd","rd"],m=f%100;return"["+f+(p[(m-20)%10]||p[m]||p[0])+"]"}},L=function(f,p,m){var x=String(f);return!x||x.length>=p?f:""+Array(p+1-x.length).join(m)+f},V={s:L,z:function(f){var p=-f.utcOffset(),m=Math.abs(p),x=Math.floor(m/60),g=m%60;return(p<=0?"+":"-")+L(x,2,"0")+":"+L(g,2,"0")},m:function f(p,m){if(p.date()<m.date())return-f(m,p);var x=12*(m.year()-p.year())+(m.month()-p.month()),g=p.clone().add(x,h),E=m-g<0,k=p.clone().add(x+(E?-1:1),h);return+(-(x+(m-g)/(E?g-k:k-g))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:h,y:$,w:a,d,D,h:l,m:c,s:o,ms:i,Q:A}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},P="en",N={};N[P]=C;var T="$isDayjsObject",z=function(f){return f instanceof j||!(!f||!f[T])},b=function f(p,m,x){var g;if(!p)return P;if(typeof p=="string"){var E=p.toLowerCase();N[E]&&(g=E),m&&(N[E]=m,g=E);var k=p.split("-");if(!g&&k.length>1)return f(k[0])}else{var O=p.name;N[O]=p,g=O}return!x&&g&&(P=g),g||!x&&P},u=function(f,p){if(z(f))return f.clone();var m=typeof p=="object"?p:{};return m.date=f,m.args=arguments,new j(m)},v=V;v.l=b,v.i=z,v.w=function(f,p){return u(f,{locale:p.$L,utc:p.$u,x:p.$x,$offset:p.$offset})};var j=(function(){function f(m){this.$L=b(m.locale,null,!0),this.parse(m),this.$x=this.$x||m.x||{},this[T]=!0}var p=f.prototype;return p.parse=function(m){this.$d=(function(x){var g=x.date,E=x.utc;if(g===null)return new Date(NaN);if(v.u(g))return new Date;if(g instanceof Date)return new Date(g);if(typeof g=="string"&&!/Z$/i.test(g)){var k=g.match(S);if(k){var O=k[2]-1||0,R=(k[7]||"0").substring(0,3);return E?new Date(Date.UTC(k[1],O,k[3]||1,k[4]||0,k[5]||0,k[6]||0,R)):new Date(k[1],O,k[3]||1,k[4]||0,k[5]||0,k[6]||0,R)}}return new Date(g)})(m),this.init()},p.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},p.$utils=function(){return v},p.isValid=function(){return this.$d.toString()!==I},p.isSame=function(m,x){var g=u(m);return this.startOf(x)<=g&&g<=this.endOf(x)},p.isAfter=function(m,x){return u(m)<this.startOf(x)},p.isBefore=function(m,x){return this.endOf(x)<u(m)},p.$g=function(m,x,g){return v.u(m)?this[x]:this.set(g,m)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(m,x){var g=this,E=!!v.u(x)||x,k=v.p(m),O=function(oe,K){var se=v.w(g.$u?Date.UTC(g.$y,K,oe):new Date(g.$y,K,oe),g);return E?se:se.endOf(d)},R=function(oe,K){return v.w(g.toDate()[oe].apply(g.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(K)),g)},U=this.$W,Y=this.$M,Q=this.$D,le="set"+(this.$u?"UTC":"");switch(k){case $:return E?O(1,0):O(31,11);case h:return E?O(1,Y):O(0,Y+1);case a:var ie=this.$locale().weekStart||0,he=(U<ie?U+7:U)-ie;return O(E?Q-he:Q+(6-he),Y);case d:case D:return R(le+"Hours",0);case l:return R(le+"Minutes",1);case c:return R(le+"Seconds",2);case o:return R(le+"Milliseconds",3);default:return this.clone()}},p.endOf=function(m){return this.startOf(m,!1)},p.$set=function(m,x){var g,E=v.p(m),k="set"+(this.$u?"UTC":""),O=(g={},g[d]=k+"Date",g[D]=k+"Date",g[h]=k+"Month",g[$]=k+"FullYear",g[l]=k+"Hours",g[c]=k+"Minutes",g[o]=k+"Seconds",g[i]=k+"Milliseconds",g)[E],R=E===d?this.$D+(x-this.$W):x;if(E===h||E===$){var U=this.clone().set(D,1);U.$d[O](R),U.init(),this.$d=U.set(D,Math.min(this.$D,U.daysInMonth())).$d}else O&&this.$d[O](R);return this.init(),this},p.set=function(m,x){return this.clone().$set(m,x)},p.get=function(m){return this[v.p(m)]()},p.add=function(m,x){var g,E=this;m=Number(m);var k=v.p(x),O=function(Y){var Q=u(E);return v.w(Q.date(Q.date()+Math.round(Y*m)),E)};if(k===h)return this.set(h,this.$M+m);if(k===$)return this.set($,this.$y+m);if(k===d)return O(1);if(k===a)return O(7);var R=(g={},g[c]=r,g[l]=n,g[o]=t,g)[k]||1,U=this.$d.getTime()+m*R;return v.w(U,this)},p.subtract=function(m,x){return this.add(-1*m,x)},p.format=function(m){var x=this,g=this.$locale();if(!this.isValid())return g.invalidDate||I;var E=m||"YYYY-MM-DDTHH:mm:ssZ",k=v.z(this),O=this.$H,R=this.$m,U=this.$M,Y=g.weekdays,Q=g.months,le=g.meridiem,ie=function(K,se,fe,ve){return K&&(K[se]||K(x,E))||fe[se].slice(0,ve)},he=function(K){return v.s(O%12||12,K,"0")},oe=le||function(K,se,fe){var ve=K<12?"AM":"PM";return fe?ve.toLowerCase():ve};return E.replace(_,(function(K,se){return se||(function(fe){switch(fe){case"YY":return String(x.$y).slice(-2);case"YYYY":return v.s(x.$y,4,"0");case"M":return U+1;case"MM":return v.s(U+1,2,"0");case"MMM":return ie(g.monthsShort,U,Q,3);case"MMMM":return ie(Q,U);case"D":return x.$D;case"DD":return v.s(x.$D,2,"0");case"d":return String(x.$W);case"dd":return ie(g.weekdaysMin,x.$W,Y,2);case"ddd":return ie(g.weekdaysShort,x.$W,Y,3);case"dddd":return Y[x.$W];case"H":return String(O);case"HH":return v.s(O,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return oe(O,R,!0);case"A":return oe(O,R,!1);case"m":return String(R);case"mm":return v.s(R,2,"0");case"s":return String(x.$s);case"ss":return v.s(x.$s,2,"0");case"SSS":return v.s(x.$ms,3,"0");case"Z":return k}return null})(K)||k.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(m,x,g){var E,k=this,O=v.p(x),R=u(m),U=(R.utcOffset()-this.utcOffset())*r,Y=this-R,Q=function(){return v.m(k,R)};switch(O){case $:E=Q()/12;break;case h:E=Q();break;case A:E=Q()/3;break;case a:E=(Y-U)/6048e5;break;case d:E=(Y-U)/864e5;break;case l:E=Y/n;break;case c:E=Y/r;break;case o:E=Y/t;break;default:E=Y}return g?E:v.a(E)},p.daysInMonth=function(){return this.endOf(h).$D},p.$locale=function(){return N[this.$L]},p.locale=function(m,x){if(!m)return this.$L;var g=this.clone(),E=b(m,x,!0);return E&&(g.$L=E),g},p.clone=function(){return v.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f})(),te=j.prototype;return u.prototype=te,[["$ms",i],["$s",o],["$m",c],["$H",l],["$W",d],["$M",h],["$y",$],["$D",D]].forEach((function(f){te[f[1]]=function(p){return this.$g(p,f[0],f[1])}})),u.extend=function(f,p){return f.$i||(f(p,j,u),f.$i=!0),u},u.locale=b,u.isDayjs=z,u.unix=function(f){return u(1e3*f)},u.en=N[P],u.Ls=N,u.p={},u}))})(xe)),xe.exports}var Ds=ws();const Ve=tt(Ds);var Ae={exports:{}},Es=Ae.exports,Pe;function ks(){return Pe||(Pe=1,(function(s,e){(function(t,r){s.exports=r()})(Es,(function(){return function(t,r,n){t=t||{};var i=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(d,a,h,A){return i.fromToBase(d,a,h,A)}n.en.relativeTime=o,i.fromToBase=function(d,a,h,A,$){for(var D,I,S,_=h.$locale().relativeTime||o,C=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],L=C.length,V=0;V<L;V+=1){var P=C[V];P.d&&(D=A?n(d).diff(h,P.d,!0):h.diff(d,P.d,!0));var N=(t.rounding||Math.round)(Math.abs(D));if(S=D>0,N<=P.r||!P.r){N<=1&&V>0&&(P=C[V-1]);var T=_[P.l];$&&(N=$(""+N)),I=typeof T=="string"?T.replace("%d",N):T(N,a,P.l,S);break}}if(a)return I;var z=S?_.future:_.past;return typeof z=="function"?z(I):z.replace("%s",I)},i.to=function(d,a){return c(d,a,this,!0)},i.from=function(d,a){return c(d,a,this)};var l=function(d){return d.$u?n.utc():n()};i.toNow=function(d){return this.to(l(this),d)},i.fromNow=function(d){return this.from(l(this),d)}}}))})(Ae)),Ae.exports}var Ss=ks();const Fs=tt(Ss),Bs={class:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] sm:grid-cols-[repeat(auto-fill,minmax(240px,1fr))] md:grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4 sm:gap-6 px-6"},Is=["onClick"],Os={key:0,class:"absolute top-2 right-2 bg-accent text-black px-2 py-1 rounded text-xs font-medium flex items-center gap-1"},Ts=["src","alt"],Ls={key:2,class:"w-full h-full flex items-center justify-center bg-gray-700"},Rs={class:"flex flex-col gap-1"},Ns={key:0,class:"text-gray-5 text-sm font-medium"},js={class:"leading-5 text-primary-3 line-clamp-2"},Vs={key:1,class:"text-xs"},Ps={class:"flex items-center justify-between gap-3 mb-2"},zs={class:"text-gray-400 text-xs sm:text-sm"},Us={class:"text-gray-500 text-xs sm:text-sm flex items-center justify-center gap-1"},Ws={class:"flex items-center justify-between gap-3 mb-2"},Ys={class:"flex items-center gap-2"},Hs={key:0,class:"text-gray-500 text-xs sm:text-sm"},Ks={key:0,class:"pt-2"},Gs={class:"flex flex-wrap gap-1"},Js=_e({__name:"VideoGrid",props:{videos:{default:()=>[]},highlightVideoId:{default:""}},emits:["play"],setup(s){Ve.extend(Fs);const e=t=>Ve(t).fromNow();return(t,r)=>(F(),B("div",Bs,[(F(!0),B(pe,null,ge(s.videos,(n,i)=>(F(),B("div",{key:n.id,class:de(["relative group shadow-black hover:shadow-md hover:bg-zinc-900 flex flex-col gap-3 rounded-2xl hover:rounded-b-0 pa-2 transition-shadow duration-200",{"outline-accent outline-2 outline-solid outline-bottom-0":s.highlightVideoId===n.id}])},[y("div",{class:"rounded-2xl overflow-hidden w-full aspect-video relative cursor-pointer",onClick:o=>t.$emit("play",n)},[r[2]||(r[2]=y("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[y("div",{class:"i-mdi-play-outline text-accent text-8xl"})],-1)),s.highlightVideoId===n.id?(F(),B("div",Os,[...r[0]||(r[0]=[y("div",{class:"i-mdi-volume-high w-3 h-3"},null,-1),ne(" Playing ",-1)])])):G("",!0),n.thumbnail?(F(),B("img",{key:1,src:n.thumbnail,alt:n.title,class:"w-full h-full object-cover",loading:"lazy"},null,8,Ts)):(F(),B("div",Ls,[...r[1]||(r[1]=[y("div",{class:"i-mdi-video text-gray-500 text-3xl"},null,-1)])]))],8,Is),y("div",Rs,[n.artist?(F(),B("div",Ns,H(n.artist),1)):G("",!0),y("div",js,H(n.musicTitle||n.title),1),n.tags&&n.tags.length>0?(F(),B("div",Vs,H(n.tags[0]),1)):G("",!0)]),y("div",{class:de(["hidden group-hover:flex absolute bg-zinc-900 w-full top-full left-0 flex-col z-10 shadow-black shadow-md rounded-b-2xl p-3",{"outline-2 outline-solid outline-accent ":s.highlightVideoId===n.id}])},[y("div",Ps,[y("p",zs,H(n.channel),1),y("p",Us,[r[3]||(r[3]=y("span",{class:"i-mdi-clock-outline text-xs"},null,-1)),ne(" "+H(n.duration),1)])]),y("div",Ws,[y("div",Ys,[y("div",{class:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:We({backgroundColor:("getUserColor"in t?t.getUserColor:w(et))(n.userId||" ")})},[...r[4]||(r[4]=[y("span",{class:"i-mdi-account text-xs"},null,-1)])],4)]),n.createdAt?(F(),B("p",Hs,H(e(n.createdAt)),1)):G("",!0)]),n.tags&&n.tags.length>0?(F(),B("div",Ks,[y("div",Gs,[(F(!0),B(pe,null,ge(n.tags,o=>(F(),B("span",{key:o,class:"text-xs b-1 b-solid b-accent-2 text-accent px-2 py-1 rounded-lg"},H(o),1))),128))])])):G("",!0)],2)],2))),128))]))}}),Qs=Object.assign(Js,{__name:"VideoGrid"}),Zs={key:0,class:"flex items-center justify-center py-12"},Xs={key:1,class:"bg-primary-1 border border-primary-2 rounded-lg p-6 m-8"},qs={class:"flex items-center gap-2 text-primary-3"},en={key:2,class:"text-center py-12"},tn={key:3,class:"flex flex-col gap-12 pt-6 pb-12"},an=_e({__name:"index",setup(s){at({title:"Music Playlist View",meta:[{name:"description",content:"Browse your cached YouTube playlists"}]});const e=W(null),t=W(!0),r=W(""),n=W([]),i=lt(),o=W("");Ue(async()=>{await c()});const c=async()=>{try{t.value=!0,r.value="";const a=await $fetch("/index.json");if(!a.success||!a.data.length){e.value=null;return}const h=a.data[0],A=await $fetch(`/playlist/${h?.fileName}`);e.value=A;const $=[...A.videos].sort((D,I)=>D.createdAt&&!I.createdAt?-1:!D.createdAt&&I.createdAt?1:D.createdAt&&I.createdAt?I.createdAt-D.createdAt:0);n.value=$}catch(a){console.error("Error loading first playlist:",a),r.value=a.data?.message||a.message||"Failed to load playlist"}finally{t.value=!1}},l=a=>{n.value=a},d=a=>{if(!e.value)return;const h=e.value.videos.findIndex(A=>A.id===a.id);h!==-1&&(o.value=a.id,i.initializeGlobalPlayer(e.value.videos,h))};return $e([i.currentVideo],([a])=>{a?o.value=a.id:o.value=""}),(a,h)=>{const A=_s,$=Qs;return F(),B("div",null,[w(t)?(F(),B("div",Zs,[...h[0]||(h[0]=[y("div",{class:"flex items-center gap-3 text-primary-3"},[y("div",{class:"i-mdi-loading animate-spin text-2xl"}),y("span",null,"Loading playlist...")],-1)])])):w(r)?(F(),B("div",Xs,[y("div",qs,[h[1]||(h[1]=y("div",{class:"i-mdi-alert-circle"},null,-1)),h[2]||(h[2]=y("strong",null,"Error:",-1)),ne(" "+H(w(r)),1)])])):w(e)?(F(),B("div",tn,[Z(A,{videos:w(e).videos,onFilteredVideos:l},null,8,["videos"]),Z($,{videos:w(n),"highlight-video-id":w(o),onPlay:d},null,8,["videos","highlight-video-id"])])):(F(),B("div",en,[...h[3]||(h[3]=[y("div",{class:"i-mdi-playlist-remove text-6xl text-primary-3 mb-4"},null,-1),y("h3",{class:"text-xl font-semibold mb-2"},"No Playlists Found",-1),y("p",{class:"text-primary-3 mb-6"}," No cached playlists are available. Use the admin panel to fetch playlists from YouTube. ",-1)])]))])}}});export{an as default};
